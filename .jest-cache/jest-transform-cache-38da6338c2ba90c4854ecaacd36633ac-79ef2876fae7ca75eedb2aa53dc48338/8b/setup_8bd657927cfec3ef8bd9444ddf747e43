bf086faf0e57837bde8987973966211f
"use strict";
/**
 * Jest测试全局设置 - 修复版本
 * 修复了 Mock 对象的类型定义问题
 */
var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
// 首先设置Vue全局对象和编译器
const Vue = tslib_1.__importStar(require("vue"));
const VueCompilerDOM = tslib_1.__importStar(require("@vue/compiler-dom"));
const VueServerRenderer = tslib_1.__importStar(require("@vue/server-renderer"));
// 设置Vue全局对象和编译器
global.Vue = Vue;
global.VueCompilerDOM = VueCompilerDOM;
global.VueServerRenderer = VueServerRenderer;
// 设置完整的DOM环境
global.window = global.window || {
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    dispatchEvent: jest.fn(),
    innerWidth: 1024,
    innerHeight: 768,
    outerWidth: 1024,
    outerHeight: 768,
    scrollX: 0,
    scrollY: 0,
    pageXOffset: 0,
    pageYOffset: 0,
    localStorage: {
        getItem: jest.fn((key) => {
            const mockData = {
                'theme': 'light',
                'language': 'zh-CN',
                'layout-preset': '{"version": 1}'
            };
            return mockData[key] || null;
        }),
        setItem: jest.fn(),
        removeItem: jest.fn(),
        clear: jest.fn(),
        length: 0,
        key: jest.fn().mockReturnValue(null)
    },
    sessionStorage: {
        getItem: jest.fn(),
        setItem: jest.fn(),
        removeItem: jest.fn(),
        clear: jest.fn(),
        length: 0,
        key: jest.fn().mockReturnValue(null)
    },
    performance: {
        now: jest.fn(() => Date.now() + Math.random()),
        mark: jest.fn(),
        measure: jest.fn()
    },
    requestAnimationFrame: jest.fn((callback) => {
        setTimeout(callback, 16);
        return Math.random();
    }),
    cancelAnimationFrame: jest.fn(),
    setTimeout: jest.fn((fn, ms) => {
        const id = Math.random();
        if (ms <= 100) {
            try {
                fn();
            }
            catch (e) { /* ignore */ }
        }
        return id;
    }),
    clearTimeout: jest.fn(),
    setInterval: jest.fn(),
    clearInterval: jest.fn()
};
global.document = global.document || {
    documentElement: {
        lang: 'en',
        style: {}
    },
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    dispatchEvent: jest.fn(),
    body: {
        appendChild: jest.fn(),
        removeChild: jest.fn(),
        style: {},
        clientWidth: 1024,
        clientHeight: 768
    },
    createElement: jest.fn(() => ({
        style: {},
        addEventListener: jest.fn(),
        removeEventListener: jest.fn(),
        appendChild: jest.fn(),
        removeChild: jest.fn(),
        getAttribute: jest.fn(),
        setAttribute: jest.fn(),
        getContext: jest.fn(() => ({
            clearRect: jest.fn(),
            beginPath: jest.fn(),
            moveTo: jest.fn(),
            lineTo: jest.fn(),
            stroke: jest.fn(),
            fillText: jest.fn(),
            save: jest.fn(),
            restore: jest.fn(),
            scale: jest.fn(),
            translate: jest.fn(),
            strokeStyle: '#000000',
            fillStyle: '#000000',
            lineWidth: 1,
            font: '12px Arial'
        })),
        width: 1920,
        height: 1080
    }))
};
// 修复 localStorage 全局对象
global.localStorage = global.localStorage || {
    getItem: jest.fn(),
    setItem: jest.fn(),
    removeItem: jest.fn(),
    clear: jest.fn(),
    length: 0,
    key: jest.fn().mockReturnValue(null)
};
// 修复 KeyboardEvent Mock
global.KeyboardEvent = (_a = class MockKeyboardEvent extends Event {
        constructor(type, eventInitDict) {
            super(type, eventInitDict);
            this.key = eventInitDict?.key || '';
            this.keyCode = eventInitDict?.keyCode || 0;
            this.which = this.keyCode;
            this.ctrlKey = eventInitDict?.ctrlKey || false;
            this.shiftKey = eventInitDict?.shiftKey || false;
            this.altKey = eventInitDict?.altKey || false;
            this.metaKey = eventInitDict?.metaKey || false;
            this.repeat = eventInitDict?.repeat || false;
            this.code = eventInitDict?.code || '';
        }
    },
    _a.DOM_KEY_LOCATION_STANDARD = 0,
    _a.DOM_KEY_LOCATION_LEFT = 1,
    _a.DOM_KEY_LOCATION_RIGHT = 2,
    _a.DOM_KEY_LOCATION_NUMPAD = 3,
    _a);
// 修复 WheelEvent Mock
global.WheelEvent = (_b = class MockWheelEvent extends Event {
        constructor(type, eventInitDict) {
            super(type, eventInitDict);
            this.deltaX = eventInitDict?.deltaX || 0;
            this.deltaY = eventInitDict?.deltaY || 0;
            this.deltaZ = eventInitDict?.deltaZ || 0;
            this.deltaMode = eventInitDict?.deltaMode || 0;
            this.clientX = eventInitDict?.clientX || 0;
            this.clientY = eventInitDict?.clientY || 0;
            this.ctrlKey = eventInitDict?.ctrlKey || false;
            this.shiftKey = eventInitDict?.shiftKey || false;
            this.altKey = eventInitDict?.altKey || false;
            this.metaKey = eventInitDict?.metaKey || false;
        }
    },
    _b.DOM_DELTA_PIXEL = 0,
    _b.DOM_DELTA_LINE = 1,
    _b.DOM_DELTA_PAGE = 2,
    _b);
// 修复 MouseEvent Mock
global.MouseEvent = class MockMouseEvent extends Event {
    constructor(type, options = {}) {
        super(type, options);
        this.button = options.button || 0;
        this.buttons = options.buttons || 0;
        this.clientX = options.clientX || 0;
        this.clientY = options.clientY || 0;
        this.screenX = options.screenX || 0;
        this.screenY = options.screenY || 0;
        this.ctrlKey = options.ctrlKey || false;
        this.shiftKey = options.shiftKey || false;
        this.altKey = options.altKey || false;
        this.metaKey = options.metaKey || false;
    }
};
// 模拟Performance API
if (!global.performance) {
    global.performance = {
        now: () => Date.now(),
        mark: () => { },
        measure: () => { },
        getEntriesByName: () => [],
        getEntriesByType: () => [],
        clearMarks: () => { },
        clearMeasures: () => { }
    };
}
// 确保requestAnimationFrame全局可用
global.requestAnimationFrame = global.requestAnimationFrame || global.window.requestAnimationFrame;
global.cancelAnimationFrame = global.cancelAnimationFrame || global.window.cancelAnimationFrame;
// 模拟Path2D构造函数
global.Path2D = global.Path2D || jest.fn().mockImplementation(() => ({
    moveTo: jest.fn(),
    lineTo: jest.fn(),
    arc: jest.fn(),
    quadraticCurveTo: jest.fn(),
    bezierCurveTo: jest.fn(),
    closePath: jest.fn(),
    rect: jest.fn(),
    ellipse: jest.fn(),
    addPath: jest.fn()
}));
// 模拟Canvas API用于波形渲染测试
class MockCanvas {
    constructor() {
        this.width = 1920;
        this.height = 1080;
    }
    getContext(contextId) {
        if (contextId === '2d') {
            return {
                clearRect: jest.fn(),
                beginPath: jest.fn(),
                moveTo: jest.fn(),
                lineTo: jest.fn(),
                stroke: jest.fn(),
                fillText: jest.fn(),
                save: jest.fn(),
                restore: jest.fn(),
                scale: jest.fn(),
                translate: jest.fn(),
                strokeStyle: '#000000',
                fillStyle: '#000000',
                lineWidth: 1,
                font: '12px Arial'
            };
        }
        return null;
    }
}
// 模拟HTMLCanvasElement
if (typeof window !== 'undefined') {
    window.HTMLCanvasElement = MockCanvas;
}
else {
    global.HTMLCanvasElement = MockCanvas;
}
// 模拟DOM APIs
if (typeof document !== 'undefined') {
    document.createElement = jest.fn((tagName) => {
        if (tagName === 'canvas') {
            return new MockCanvas();
        }
        return {
            style: {},
            addEventListener: jest.fn(),
            removeEventListener: jest.fn(),
            appendChild: jest.fn(),
            removeChild: jest.fn(),
            getAttribute: jest.fn(),
            setAttribute: jest.fn()
        };
    });
}
// 设置测试超时
jest.setTimeout(10000);
// 清理每个测试之间的状态
afterEach(() => {
    jest.clearAllMocks();
    jest.clearAllTimers();
});
// 全局测试工具
global.waitFor = (condition, timeout = 5000) => {
    return new Promise((resolve, reject) => {
        const startTime = Date.now();
        const check = () => {
            if (condition()) {
                resolve();
            }
            else if (Date.now() - startTime > timeout) {
                reject(new Error(`Condition not met within ${timeout}ms`));
            }
            else {
                setTimeout(check, 10);
            }
        };
        check();
    });
};
// 异步延迟工具
global.delay = (ms) => {
    return new Promise(resolve => setTimeout(resolve, ms));
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvc2hhcmUvc2FtYmEvdnNjb2RlLWV4dGVuc2lvbi9waWNvLWxvZ2ljYW5hbHl6ZXIvdXRlc3Qvc2V0dXAudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7OztBQUVILGtCQUFrQjtBQUNsQixpREFBMkI7QUFDM0IsMEVBQW9EO0FBQ3BELGdGQUEwRDtBQUUxRCxnQkFBZ0I7QUFDZixNQUFjLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUN6QixNQUFjLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztBQUMvQyxNQUFjLENBQUMsaUJBQWlCLEdBQUcsaUJBQWlCLENBQUM7QUFFdEQsYUFBYTtBQUNiLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sSUFBSztJQUNoQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQzNCLG1CQUFtQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDOUIsYUFBYSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDeEIsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLEdBQUc7SUFDaEIsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLEdBQUc7SUFDaEIsT0FBTyxFQUFFLENBQUM7SUFDVixPQUFPLEVBQUUsQ0FBQztJQUNWLFdBQVcsRUFBRSxDQUFDO0lBQ2QsV0FBVyxFQUFFLENBQUM7SUFDZCxZQUFZLEVBQUU7UUFDWixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO1lBQ3ZCLE1BQU0sUUFBUSxHQUEyQjtnQkFDdkMsT0FBTyxFQUFFLE9BQU87Z0JBQ2hCLFVBQVUsRUFBRSxPQUFPO2dCQUNuQixlQUFlLEVBQUUsZ0JBQWdCO2FBQ2xDLENBQUM7WUFDRixPQUFPLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUM7UUFDL0IsQ0FBQyxDQUFDO1FBQ0YsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDckIsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDaEIsTUFBTSxFQUFFLENBQUM7UUFDVCxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUM7S0FDckM7SUFDRCxjQUFjLEVBQUU7UUFDZCxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNyQixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNoQixNQUFNLEVBQUUsQ0FBQztRQUNULEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQztLQUNyQztJQUNELFdBQVcsRUFBRTtRQUNYLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDOUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNuQjtJQUNELHFCQUFxQixFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtRQUMxQyxVQUFVLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3pCLE9BQU8sSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ3ZCLENBQUMsQ0FBQztJQUNGLG9CQUFvQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDL0IsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUU7UUFDN0IsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3pCLElBQUksRUFBRSxJQUFJLEdBQUcsRUFBRTtZQUNiLElBQUk7Z0JBQUUsRUFBRSxFQUFFLENBQUM7YUFBRTtZQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsWUFBWSxFQUFFO1NBQ3pDO1FBQ0QsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDLENBQUM7SUFDRixZQUFZLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUN2QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUN0QixhQUFhLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNqQixDQUFDO0FBRVYsTUFBTSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxJQUFLO0lBQ3BDLGVBQWUsRUFBRTtRQUNmLElBQUksRUFBRSxJQUFJO1FBQ1YsS0FBSyxFQUFFLEVBQUU7S0FDVjtJQUNELGdCQUFnQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDM0IsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUM5QixhQUFhLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUN4QixJQUFJLEVBQUU7UUFDSixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUN0QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUN0QixLQUFLLEVBQUUsRUFBRTtRQUNULFdBQVcsRUFBRSxJQUFJO1FBQ2pCLFlBQVksRUFBRSxHQUFHO0tBQ2xCO0lBQ0QsYUFBYSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUM1QixLQUFLLEVBQUUsRUFBRTtRQUNULGdCQUFnQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDM0IsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUM5QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUN0QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUN0QixZQUFZLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUN2QixZQUFZLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUN2QixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ3pCLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ3BCLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ3BCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ25CLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2YsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDbEIsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDaEIsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDcEIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsU0FBUyxFQUFFLFNBQVM7WUFDcEIsU0FBUyxFQUFFLENBQUM7WUFDWixJQUFJLEVBQUUsWUFBWTtTQUNuQixDQUFDLENBQUM7UUFDSCxLQUFLLEVBQUUsSUFBSTtRQUNYLE1BQU0sRUFBRSxJQUFJO0tBQ2IsQ0FBQyxDQUFDO0NBQ0ksQ0FBQztBQUVWLHVCQUF1QjtBQUN2QixNQUFNLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLElBQUk7SUFDM0MsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDbEIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDbEIsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDckIsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDaEIsTUFBTSxFQUFFLENBQUM7SUFDVCxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUM7Q0FDMUIsQ0FBQztBQUViLHdCQUF3QjtBQUN4QixNQUFNLENBQUMsYUFBYSxJQUFHLEtBQUEsTUFBTSxpQkFBa0IsU0FBUSxLQUFLO1FBZ0IxRCxZQUFZLElBQVksRUFBRSxhQUFpQztZQUN6RCxLQUFLLENBQUMsSUFBSSxFQUFFLGFBQWEsQ0FBQyxDQUFDO1lBQzNCLElBQUksQ0FBQyxHQUFHLEdBQUcsYUFBYSxFQUFFLEdBQUcsSUFBSSxFQUFFLENBQUM7WUFDcEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxhQUFhLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQztZQUMzQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxhQUFhLEVBQUUsT0FBTyxJQUFJLEtBQUssQ0FBQztZQUMvQyxJQUFJLENBQUMsUUFBUSxHQUFHLGFBQWEsRUFBRSxRQUFRLElBQUksS0FBSyxDQUFDO1lBQ2pELElBQUksQ0FBQyxNQUFNLEdBQUcsYUFBYSxFQUFFLE1BQU0sSUFBSSxLQUFLLENBQUM7WUFDN0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxhQUFhLEVBQUUsT0FBTyxJQUFJLEtBQUssQ0FBQztZQUMvQyxJQUFJLENBQUMsTUFBTSxHQUFHLGFBQWEsRUFBRSxNQUFNLElBQUksS0FBSyxDQUFDO1lBQzdDLElBQUksQ0FBQyxJQUFJLEdBQUcsYUFBYSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUM7UUFDeEMsQ0FBQztLQUNGO0lBM0JpQiw0QkFBeUIsR0FBRyxDQUFFO0lBQzlCLHdCQUFxQixHQUFHLENBQUU7SUFDMUIseUJBQXNCLEdBQUcsQ0FBRTtJQUMzQiwwQkFBdUIsR0FBRyxDQUFFO01Bd0J0QyxDQUFBLENBQUM7QUFFVCxxQkFBcUI7QUFDckIsTUFBTSxDQUFDLFVBQVUsSUFBRyxLQUFBLE1BQU0sY0FBZSxTQUFRLEtBQUs7UUFnQnBELFlBQVksSUFBWSxFQUFFLGFBQThCO1lBQ3RELEtBQUssQ0FBQyxJQUFJLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFDM0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxhQUFhLEVBQUUsTUFBTSxJQUFJLENBQUMsQ0FBQztZQUN6QyxJQUFJLENBQUMsTUFBTSxHQUFHLGFBQWEsRUFBRSxNQUFNLElBQUksQ0FBQyxDQUFDO1lBQ3pDLElBQUksQ0FBQyxNQUFNLEdBQUcsYUFBYSxFQUFFLE1BQU0sSUFBSSxDQUFDLENBQUM7WUFDekMsSUFBSSxDQUFDLFNBQVMsR0FBRyxhQUFhLEVBQUUsU0FBUyxJQUFJLENBQUMsQ0FBQztZQUMvQyxJQUFJLENBQUMsT0FBTyxHQUFHLGFBQWEsRUFBRSxPQUFPLElBQUksQ0FBQyxDQUFDO1lBQzNDLElBQUksQ0FBQyxPQUFPLEdBQUcsYUFBYSxFQUFFLE9BQU8sSUFBSSxDQUFDLENBQUM7WUFDM0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxhQUFhLEVBQUUsT0FBTyxJQUFJLEtBQUssQ0FBQztZQUMvQyxJQUFJLENBQUMsUUFBUSxHQUFHLGFBQWEsRUFBRSxRQUFRLElBQUksS0FBSyxDQUFDO1lBQ2pELElBQUksQ0FBQyxNQUFNLEdBQUcsYUFBYSxFQUFFLE1BQU0sSUFBSSxLQUFLLENBQUM7WUFDN0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxhQUFhLEVBQUUsT0FBTyxJQUFJLEtBQUssQ0FBQztRQUNqRCxDQUFDO0tBQ0Y7SUE1QmlCLGtCQUFlLEdBQUcsQ0FBRTtJQUNwQixpQkFBYyxHQUFHLENBQUU7SUFDbkIsaUJBQWMsR0FBRyxDQUFFO01BMEI3QixDQUFBLENBQUM7QUFFVCxxQkFBcUI7QUFDckIsTUFBTSxDQUFDLFVBQVUsR0FBRyxNQUFNLGNBQWUsU0FBUSxLQUFLO0lBWXBELFlBQVksSUFBWSxFQUFFLFVBQWUsRUFBRTtRQUN6QyxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3JCLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sSUFBSSxLQUFLLENBQUM7UUFDeEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsUUFBUSxJQUFJLEtBQUssQ0FBQztRQUMxQyxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sSUFBSSxLQUFLLENBQUM7SUFDMUMsQ0FBQztDQUNLLENBQUM7QUFFVCxvQkFBb0I7QUFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUU7SUFDdkIsTUFBTSxDQUFDLFdBQVcsR0FBRztRQUNuQixHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtRQUNyQixJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztRQUNkLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO1FBQ2pCLGdCQUFnQixFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7UUFDMUIsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtRQUMxQixVQUFVLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztRQUNwQixhQUFhLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztLQUNqQixDQUFDO0NBQ1Y7QUFFRCw4QkFBOEI7QUFDOUIsTUFBTSxDQUFDLHFCQUFxQixHQUFHLE1BQU0sQ0FBQyxxQkFBcUIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDO0FBQ25HLE1BQU0sQ0FBQyxvQkFBb0IsR0FBRyxNQUFNLENBQUMsb0JBQW9CLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQztBQUVoRyxlQUFlO0FBQ2YsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ25FLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2pCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2pCLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUMzQixhQUFhLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUN4QixTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNwQixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNmLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2xCLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0NBQ25CLENBQUMsQ0FBQyxDQUFDO0FBRUosdUJBQXVCO0FBQ3ZCLE1BQU0sVUFBVTtJQUFoQjtRQUNFLFVBQUssR0FBRyxJQUFJLENBQUM7UUFDYixXQUFNLEdBQUcsSUFBSSxDQUFDO0lBdUJoQixDQUFDO0lBckJDLFVBQVUsQ0FBQyxTQUFpQjtRQUMxQixJQUFJLFNBQVMsS0FBSyxJQUFJLEVBQUU7WUFDdEIsT0FBTztnQkFDTCxTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDcEIsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Z0JBQ3BCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO2dCQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDakIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Z0JBQ2pCLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO2dCQUNuQixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDZixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDbEIsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Z0JBQ2hCLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO2dCQUNwQixXQUFXLEVBQUUsU0FBUztnQkFDdEIsU0FBUyxFQUFFLFNBQVM7Z0JBQ3BCLFNBQVMsRUFBRSxDQUFDO2dCQUNaLElBQUksRUFBRSxZQUFZO2FBQ25CLENBQUM7U0FDSDtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztDQUNGO0FBRUQsc0JBQXNCO0FBQ3RCLElBQUksT0FBTyxNQUFNLEtBQUssV0FBVyxFQUFFO0lBQ2pDLE1BQU0sQ0FBQyxpQkFBaUIsR0FBRyxVQUFpQixDQUFDO0NBQzlDO0tBQU07SUFDTCxNQUFNLENBQUMsaUJBQWlCLEdBQUcsVUFBaUIsQ0FBQztDQUM5QztBQUVELGFBQWE7QUFDYixJQUFJLE9BQU8sUUFBUSxLQUFLLFdBQVcsRUFBRTtJQUNuQyxRQUFRLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFlLEVBQUUsRUFBRTtRQUNuRCxJQUFJLE9BQU8sS0FBSyxRQUFRLEVBQUU7WUFDeEIsT0FBTyxJQUFJLFVBQVUsRUFBUyxDQUFDO1NBQ2hDO1FBQ0QsT0FBTztZQUNMLEtBQUssRUFBRSxFQUFFO1lBQ1QsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUMzQixtQkFBbUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQzlCLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ3RCLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ3RCLFlBQVksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ3ZCLFlBQVksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ2pCLENBQUM7SUFDWCxDQUFDLENBQUMsQ0FBQztDQUNKO0FBRUQsU0FBUztBQUNULElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7QUFFdkIsY0FBYztBQUNkLFNBQVMsQ0FBQyxHQUFHLEVBQUU7SUFDYixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDckIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3hCLENBQUMsQ0FBQyxDQUFDO0FBRUgsU0FBUztBQUNULE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxTQUF3QixFQUFFLFVBQWtCLElBQUksRUFBaUIsRUFBRTtJQUNuRixPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQ3JDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM3QixNQUFNLEtBQUssR0FBRyxHQUFHLEVBQUU7WUFDakIsSUFBSSxTQUFTLEVBQUUsRUFBRTtnQkFDZixPQUFPLEVBQUUsQ0FBQzthQUNYO2lCQUFNLElBQUksSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsR0FBRyxPQUFPLEVBQUU7Z0JBQzNDLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyw0QkFBNEIsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDO2FBQzVEO2lCQUFNO2dCQUNMLFVBQVUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDdkI7UUFDSCxDQUFDLENBQUM7UUFDRixLQUFLLEVBQUUsQ0FBQztJQUNWLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDO0FBRUYsU0FBUztBQUNULE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFVLEVBQWlCLEVBQUU7SUFDM0MsT0FBTyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN6RCxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvc2hhcmUvc2FtYmEvdnNjb2RlLWV4dGVuc2lvbi9waWNvLWxvZ2ljYW5hbHl6ZXIvdXRlc3Qvc2V0dXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBKZXN05rWL6K+V5YWo5bGA6K6+572uIC0g5L+u5aSN54mI5pysXG4gKiDkv67lpI3kuoYgTW9jayDlr7nosaHnmoTnsbvlnovlrprkuYnpl67pophcbiAqL1xuXG4vLyDpppblhYjorr7nva5WdWXlhajlsYDlr7nosaHlkoznvJbor5HlmahcbmltcG9ydCAqIGFzIFZ1ZSBmcm9tICd2dWUnO1xuaW1wb3J0ICogYXMgVnVlQ29tcGlsZXJET00gZnJvbSAnQHZ1ZS9jb21waWxlci1kb20nO1xuaW1wb3J0ICogYXMgVnVlU2VydmVyUmVuZGVyZXIgZnJvbSAnQHZ1ZS9zZXJ2ZXItcmVuZGVyZXInO1xuXG4vLyDorr7nva5WdWXlhajlsYDlr7nosaHlkoznvJbor5HlmahcbihnbG9iYWwgYXMgYW55KS5WdWUgPSBWdWU7XG4oZ2xvYmFsIGFzIGFueSkuVnVlQ29tcGlsZXJET00gPSBWdWVDb21waWxlckRPTTtcbihnbG9iYWwgYXMgYW55KS5WdWVTZXJ2ZXJSZW5kZXJlciA9IFZ1ZVNlcnZlclJlbmRlcmVyO1xuXG4vLyDorr7nva7lrozmlbTnmoRET03njq/looNcbmdsb2JhbC53aW5kb3cgPSBnbG9iYWwud2luZG93IHx8ICh7XG4gIGFkZEV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICBkaXNwYXRjaEV2ZW50OiBqZXN0LmZuKCksXG4gIGlubmVyV2lkdGg6IDEwMjQsXG4gIGlubmVySGVpZ2h0OiA3NjgsXG4gIG91dGVyV2lkdGg6IDEwMjQsXG4gIG91dGVySGVpZ2h0OiA3NjgsXG4gIHNjcm9sbFg6IDAsXG4gIHNjcm9sbFk6IDAsXG4gIHBhZ2VYT2Zmc2V0OiAwLFxuICBwYWdlWU9mZnNldDogMCxcbiAgbG9jYWxTdG9yYWdlOiB7XG4gICAgZ2V0SXRlbTogamVzdC5mbigoa2V5KSA9PiB7XG4gICAgICBjb25zdCBtb2NrRGF0YTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgJ3RoZW1lJzogJ2xpZ2h0JyxcbiAgICAgICAgJ2xhbmd1YWdlJzogJ3poLUNOJyxcbiAgICAgICAgJ2xheW91dC1wcmVzZXQnOiAne1widmVyc2lvblwiOiAxfSdcbiAgICAgIH07XG4gICAgICByZXR1cm4gbW9ja0RhdGFba2V5XSB8fCBudWxsO1xuICAgIH0pLFxuICAgIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgICByZW1vdmVJdGVtOiBqZXN0LmZuKCksXG4gICAgY2xlYXI6IGplc3QuZm4oKSxcbiAgICBsZW5ndGg6IDAsXG4gICAga2V5OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKG51bGwpXG4gIH0sXG4gIHNlc3Npb25TdG9yYWdlOiB7XG4gICAgZ2V0SXRlbTogamVzdC5mbigpLFxuICAgIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgICByZW1vdmVJdGVtOiBqZXN0LmZuKCksXG4gICAgY2xlYXI6IGplc3QuZm4oKSxcbiAgICBsZW5ndGg6IDAsXG4gICAga2V5OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKG51bGwpXG4gIH0sXG4gIHBlcmZvcm1hbmNlOiB7XG4gICAgbm93OiBqZXN0LmZuKCgpID0+IERhdGUubm93KCkgKyBNYXRoLnJhbmRvbSgpKSxcbiAgICBtYXJrOiBqZXN0LmZuKCksXG4gICAgbWVhc3VyZTogamVzdC5mbigpXG4gIH0sXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZTogamVzdC5mbigoY2FsbGJhY2spID0+IHtcbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCAxNik7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCk7XG4gIH0pLFxuICBjYW5jZWxBbmltYXRpb25GcmFtZTogamVzdC5mbigpLFxuICBzZXRUaW1lb3V0OiBqZXN0LmZuKChmbiwgbXMpID0+IHtcbiAgICBjb25zdCBpZCA9IE1hdGgucmFuZG9tKCk7XG4gICAgaWYgKG1zIDw9IDEwMCkge1xuICAgICAgdHJ5IHsgZm4oKTsgfSBjYXRjaCAoZSkgeyAvKiBpZ25vcmUgKi8gfVxuICAgIH1cbiAgICByZXR1cm4gaWQ7XG4gIH0pLFxuICBjbGVhclRpbWVvdXQ6IGplc3QuZm4oKSxcbiAgc2V0SW50ZXJ2YWw6IGplc3QuZm4oKSxcbiAgY2xlYXJJbnRlcnZhbDogamVzdC5mbigpXG59IGFzIGFueSk7XG5cbmdsb2JhbC5kb2N1bWVudCA9IGdsb2JhbC5kb2N1bWVudCB8fCAoe1xuICBkb2N1bWVudEVsZW1lbnQ6IHtcbiAgICBsYW5nOiAnZW4nLFxuICAgIHN0eWxlOiB7fVxuICB9LFxuICBhZGRFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgZGlzcGF0Y2hFdmVudDogamVzdC5mbigpLFxuICBib2R5OiB7XG4gICAgYXBwZW5kQ2hpbGQ6IGplc3QuZm4oKSxcbiAgICByZW1vdmVDaGlsZDogamVzdC5mbigpLFxuICAgIHN0eWxlOiB7fSxcbiAgICBjbGllbnRXaWR0aDogMTAyNCxcbiAgICBjbGllbnRIZWlnaHQ6IDc2OFxuICB9LFxuICBjcmVhdGVFbGVtZW50OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgc3R5bGU6IHt9LFxuICAgIGFkZEV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgYXBwZW5kQ2hpbGQ6IGplc3QuZm4oKSxcbiAgICByZW1vdmVDaGlsZDogamVzdC5mbigpLFxuICAgIGdldEF0dHJpYnV0ZTogamVzdC5mbigpLFxuICAgIHNldEF0dHJpYnV0ZTogamVzdC5mbigpLFxuICAgIGdldENvbnRleHQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgIGNsZWFyUmVjdDogamVzdC5mbigpLFxuICAgICAgYmVnaW5QYXRoOiBqZXN0LmZuKCksXG4gICAgICBtb3ZlVG86IGplc3QuZm4oKSxcbiAgICAgIGxpbmVUbzogamVzdC5mbigpLFxuICAgICAgc3Ryb2tlOiBqZXN0LmZuKCksXG4gICAgICBmaWxsVGV4dDogamVzdC5mbigpLFxuICAgICAgc2F2ZTogamVzdC5mbigpLFxuICAgICAgcmVzdG9yZTogamVzdC5mbigpLFxuICAgICAgc2NhbGU6IGplc3QuZm4oKSxcbiAgICAgIHRyYW5zbGF0ZTogamVzdC5mbigpLFxuICAgICAgc3Ryb2tlU3R5bGU6ICcjMDAwMDAwJyxcbiAgICAgIGZpbGxTdHlsZTogJyMwMDAwMDAnLFxuICAgICAgbGluZVdpZHRoOiAxLFxuICAgICAgZm9udDogJzEycHggQXJpYWwnXG4gICAgfSkpLFxuICAgIHdpZHRoOiAxOTIwLFxuICAgIGhlaWdodDogMTA4MFxuICB9KSlcbn0gYXMgYW55KTtcblxuLy8g5L+u5aSNIGxvY2FsU3RvcmFnZSDlhajlsYDlr7nosaFcbmdsb2JhbC5sb2NhbFN0b3JhZ2UgPSBnbG9iYWwubG9jYWxTdG9yYWdlIHx8IHtcbiAgZ2V0SXRlbTogamVzdC5mbigpLFxuICBzZXRJdGVtOiBqZXN0LmZuKCksXG4gIHJlbW92ZUl0ZW06IGplc3QuZm4oKSxcbiAgY2xlYXI6IGplc3QuZm4oKSxcbiAgbGVuZ3RoOiAwLFxuICBrZXk6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobnVsbClcbn0gYXMgU3RvcmFnZTtcblxuLy8g5L+u5aSNIEtleWJvYXJkRXZlbnQgTW9ja1xuZ2xvYmFsLktleWJvYXJkRXZlbnQgPSBjbGFzcyBNb2NrS2V5Ym9hcmRFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgc3RhdGljIHJlYWRvbmx5IERPTV9LRVlfTE9DQVRJT05fU1RBTkRBUkQgPSAwO1xuICBzdGF0aWMgcmVhZG9ubHkgRE9NX0tFWV9MT0NBVElPTl9MRUZUID0gMTtcbiAgc3RhdGljIHJlYWRvbmx5IERPTV9LRVlfTE9DQVRJT05fUklHSFQgPSAyO1xuICBzdGF0aWMgcmVhZG9ubHkgRE9NX0tFWV9MT0NBVElPTl9OVU1QQUQgPSAzO1xuICBcbiAga2V5OiBzdHJpbmc7XG4gIGtleUNvZGU6IG51bWJlcjtcbiAgd2hpY2g6IG51bWJlcjtcbiAgY3RybEtleTogYm9vbGVhbjtcbiAgc2hpZnRLZXk6IGJvb2xlYW47XG4gIGFsdEtleTogYm9vbGVhbjtcbiAgbWV0YUtleTogYm9vbGVhbjtcbiAgcmVwZWF0OiBib29sZWFuO1xuICBjb2RlOiBzdHJpbmc7XG4gIFxuICBjb25zdHJ1Y3Rvcih0eXBlOiBzdHJpbmcsIGV2ZW50SW5pdERpY3Q/OiBLZXlib2FyZEV2ZW50SW5pdCkge1xuICAgIHN1cGVyKHR5cGUsIGV2ZW50SW5pdERpY3QpO1xuICAgIHRoaXMua2V5ID0gZXZlbnRJbml0RGljdD8ua2V5IHx8ICcnO1xuICAgIHRoaXMua2V5Q29kZSA9IGV2ZW50SW5pdERpY3Q/LmtleUNvZGUgfHwgMDtcbiAgICB0aGlzLndoaWNoID0gdGhpcy5rZXlDb2RlO1xuICAgIHRoaXMuY3RybEtleSA9IGV2ZW50SW5pdERpY3Q/LmN0cmxLZXkgfHwgZmFsc2U7XG4gICAgdGhpcy5zaGlmdEtleSA9IGV2ZW50SW5pdERpY3Q/LnNoaWZ0S2V5IHx8IGZhbHNlO1xuICAgIHRoaXMuYWx0S2V5ID0gZXZlbnRJbml0RGljdD8uYWx0S2V5IHx8IGZhbHNlO1xuICAgIHRoaXMubWV0YUtleSA9IGV2ZW50SW5pdERpY3Q/Lm1ldGFLZXkgfHwgZmFsc2U7XG4gICAgdGhpcy5yZXBlYXQgPSBldmVudEluaXREaWN0Py5yZXBlYXQgfHwgZmFsc2U7XG4gICAgdGhpcy5jb2RlID0gZXZlbnRJbml0RGljdD8uY29kZSB8fCAnJztcbiAgfVxufSBhcyBhbnk7XG5cbi8vIOS/ruWkjSBXaGVlbEV2ZW50IE1vY2tcbmdsb2JhbC5XaGVlbEV2ZW50ID0gY2xhc3MgTW9ja1doZWVsRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIHN0YXRpYyByZWFkb25seSBET01fREVMVEFfUElYRUwgPSAwO1xuICBzdGF0aWMgcmVhZG9ubHkgRE9NX0RFTFRBX0xJTkUgPSAxO1xuICBzdGF0aWMgcmVhZG9ubHkgRE9NX0RFTFRBX1BBR0UgPSAyO1xuICBcbiAgZGVsdGFYOiBudW1iZXI7XG4gIGRlbHRhWTogbnVtYmVyO1xuICBkZWx0YVo6IG51bWJlcjtcbiAgZGVsdGFNb2RlOiBudW1iZXI7XG4gIGNsaWVudFg6IG51bWJlcjtcbiAgY2xpZW50WTogbnVtYmVyO1xuICBjdHJsS2V5OiBib29sZWFuO1xuICBzaGlmdEtleTogYm9vbGVhbjtcbiAgYWx0S2V5OiBib29sZWFuO1xuICBtZXRhS2V5OiBib29sZWFuO1xuICBcbiAgY29uc3RydWN0b3IodHlwZTogc3RyaW5nLCBldmVudEluaXREaWN0PzogV2hlZWxFdmVudEluaXQpIHtcbiAgICBzdXBlcih0eXBlLCBldmVudEluaXREaWN0KTtcbiAgICB0aGlzLmRlbHRhWCA9IGV2ZW50SW5pdERpY3Q/LmRlbHRhWCB8fCAwO1xuICAgIHRoaXMuZGVsdGFZID0gZXZlbnRJbml0RGljdD8uZGVsdGFZIHx8IDA7XG4gICAgdGhpcy5kZWx0YVogPSBldmVudEluaXREaWN0Py5kZWx0YVogfHwgMDtcbiAgICB0aGlzLmRlbHRhTW9kZSA9IGV2ZW50SW5pdERpY3Q/LmRlbHRhTW9kZSB8fCAwO1xuICAgIHRoaXMuY2xpZW50WCA9IGV2ZW50SW5pdERpY3Q/LmNsaWVudFggfHwgMDtcbiAgICB0aGlzLmNsaWVudFkgPSBldmVudEluaXREaWN0Py5jbGllbnRZIHx8IDA7XG4gICAgdGhpcy5jdHJsS2V5ID0gZXZlbnRJbml0RGljdD8uY3RybEtleSB8fCBmYWxzZTtcbiAgICB0aGlzLnNoaWZ0S2V5ID0gZXZlbnRJbml0RGljdD8uc2hpZnRLZXkgfHwgZmFsc2U7XG4gICAgdGhpcy5hbHRLZXkgPSBldmVudEluaXREaWN0Py5hbHRLZXkgfHwgZmFsc2U7XG4gICAgdGhpcy5tZXRhS2V5ID0gZXZlbnRJbml0RGljdD8ubWV0YUtleSB8fCBmYWxzZTtcbiAgfVxufSBhcyBhbnk7XG5cbi8vIOS/ruWkjSBNb3VzZUV2ZW50IE1vY2tcbmdsb2JhbC5Nb3VzZUV2ZW50ID0gY2xhc3MgTW9ja01vdXNlRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIGJ1dHRvbjogbnVtYmVyO1xuICBidXR0b25zOiBudW1iZXI7XG4gIGNsaWVudFg6IG51bWJlcjtcbiAgY2xpZW50WTogbnVtYmVyO1xuICBzY3JlZW5YOiBudW1iZXI7XG4gIHNjcmVlblk6IG51bWJlcjtcbiAgY3RybEtleTogYm9vbGVhbjtcbiAgc2hpZnRLZXk6IGJvb2xlYW47XG4gIGFsdEtleTogYm9vbGVhbjtcbiAgbWV0YUtleTogYm9vbGVhbjtcbiAgXG4gIGNvbnN0cnVjdG9yKHR5cGU6IHN0cmluZywgb3B0aW9uczogYW55ID0ge30pIHtcbiAgICBzdXBlcih0eXBlLCBvcHRpb25zKTtcbiAgICB0aGlzLmJ1dHRvbiA9IG9wdGlvbnMuYnV0dG9uIHx8IDA7XG4gICAgdGhpcy5idXR0b25zID0gb3B0aW9ucy5idXR0b25zIHx8IDA7XG4gICAgdGhpcy5jbGllbnRYID0gb3B0aW9ucy5jbGllbnRYIHx8IDA7XG4gICAgdGhpcy5jbGllbnRZID0gb3B0aW9ucy5jbGllbnRZIHx8IDA7XG4gICAgdGhpcy5zY3JlZW5YID0gb3B0aW9ucy5zY3JlZW5YIHx8IDA7XG4gICAgdGhpcy5zY3JlZW5ZID0gb3B0aW9ucy5zY3JlZW5ZIHx8IDA7XG4gICAgdGhpcy5jdHJsS2V5ID0gb3B0aW9ucy5jdHJsS2V5IHx8IGZhbHNlO1xuICAgIHRoaXMuc2hpZnRLZXkgPSBvcHRpb25zLnNoaWZ0S2V5IHx8IGZhbHNlO1xuICAgIHRoaXMuYWx0S2V5ID0gb3B0aW9ucy5hbHRLZXkgfHwgZmFsc2U7XG4gICAgdGhpcy5tZXRhS2V5ID0gb3B0aW9ucy5tZXRhS2V5IHx8IGZhbHNlO1xuICB9XG59IGFzIGFueTtcblxuLy8g5qih5oufUGVyZm9ybWFuY2UgQVBJXG5pZiAoIWdsb2JhbC5wZXJmb3JtYW5jZSkge1xuICBnbG9iYWwucGVyZm9ybWFuY2UgPSB7XG4gICAgbm93OiAoKSA9PiBEYXRlLm5vdygpLFxuICAgIG1hcms6ICgpID0+IHt9LFxuICAgIG1lYXN1cmU6ICgpID0+IHt9LFxuICAgIGdldEVudHJpZXNCeU5hbWU6ICgpID0+IFtdLFxuICAgIGdldEVudHJpZXNCeVR5cGU6ICgpID0+IFtdLFxuICAgIGNsZWFyTWFya3M6ICgpID0+IHt9LFxuICAgIGNsZWFyTWVhc3VyZXM6ICgpID0+IHt9XG4gIH0gYXMgYW55O1xufVxuXG4vLyDnoa7kv51yZXF1ZXN0QW5pbWF0aW9uRnJhbWXlhajlsYDlj6/nlKhcbmdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGdsb2JhbC53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuZ2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZ2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8IGdsb2JhbC53aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU7XG5cbi8vIOaooeaLn1BhdGgyROaehOmAoOWHveaVsFxuZ2xvYmFsLlBhdGgyRCA9IGdsb2JhbC5QYXRoMkQgfHwgamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICBtb3ZlVG86IGplc3QuZm4oKSxcbiAgbGluZVRvOiBqZXN0LmZuKCksXG4gIGFyYzogamVzdC5mbigpLFxuICBxdWFkcmF0aWNDdXJ2ZVRvOiBqZXN0LmZuKCksXG4gIGJlemllckN1cnZlVG86IGplc3QuZm4oKSxcbiAgY2xvc2VQYXRoOiBqZXN0LmZuKCksXG4gIHJlY3Q6IGplc3QuZm4oKSxcbiAgZWxsaXBzZTogamVzdC5mbigpLFxuICBhZGRQYXRoOiBqZXN0LmZuKClcbn0pKTtcblxuLy8g5qih5oufQ2FudmFzIEFQSeeUqOS6juazouW9oua4suafk+a1i+ivlVxuY2xhc3MgTW9ja0NhbnZhcyB7XG4gIHdpZHRoID0gMTkyMDtcbiAgaGVpZ2h0ID0gMTA4MDtcbiAgXG4gIGdldENvbnRleHQoY29udGV4dElkOiBzdHJpbmcpIHtcbiAgICBpZiAoY29udGV4dElkID09PSAnMmQnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjbGVhclJlY3Q6IGplc3QuZm4oKSxcbiAgICAgICAgYmVnaW5QYXRoOiBqZXN0LmZuKCksXG4gICAgICAgIG1vdmVUbzogamVzdC5mbigpLFxuICAgICAgICBsaW5lVG86IGplc3QuZm4oKSxcbiAgICAgICAgc3Ryb2tlOiBqZXN0LmZuKCksXG4gICAgICAgIGZpbGxUZXh0OiBqZXN0LmZuKCksXG4gICAgICAgIHNhdmU6IGplc3QuZm4oKSxcbiAgICAgICAgcmVzdG9yZTogamVzdC5mbigpLFxuICAgICAgICBzY2FsZTogamVzdC5mbigpLFxuICAgICAgICB0cmFuc2xhdGU6IGplc3QuZm4oKSxcbiAgICAgICAgc3Ryb2tlU3R5bGU6ICcjMDAwMDAwJyxcbiAgICAgICAgZmlsbFN0eWxlOiAnIzAwMDAwMCcsXG4gICAgICAgIGxpbmVXaWR0aDogMSxcbiAgICAgICAgZm9udDogJzEycHggQXJpYWwnXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyDmqKHmi59IVE1MQ2FudmFzRWxlbWVudFxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5IVE1MQ2FudmFzRWxlbWVudCA9IE1vY2tDYW52YXMgYXMgYW55O1xufSBlbHNlIHtcbiAgZ2xvYmFsLkhUTUxDYW52YXNFbGVtZW50ID0gTW9ja0NhbnZhcyBhcyBhbnk7XG59XG5cbi8vIOaooeaLn0RPTSBBUElzXG5pZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICBkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gamVzdC5mbigodGFnTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgaWYgKHRhZ05hbWUgPT09ICdjYW52YXMnKSB7XG4gICAgICByZXR1cm4gbmV3IE1vY2tDYW52YXMoKSBhcyBhbnk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzdHlsZToge30sXG4gICAgICBhZGRFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICBhcHBlbmRDaGlsZDogamVzdC5mbigpLFxuICAgICAgcmVtb3ZlQ2hpbGQ6IGplc3QuZm4oKSxcbiAgICAgIGdldEF0dHJpYnV0ZTogamVzdC5mbigpLFxuICAgICAgc2V0QXR0cmlidXRlOiBqZXN0LmZuKClcbiAgICB9IGFzIGFueTtcbiAgfSk7XG59XG5cbi8vIOiuvue9rua1i+ivlei2heaXtlxuamVzdC5zZXRUaW1lb3V0KDEwMDAwKTtcblxuLy8g5riF55CG5q+P5Liq5rWL6K+V5LmL6Ze055qE54q25oCBXG5hZnRlckVhY2goKCkgPT4ge1xuICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgamVzdC5jbGVhckFsbFRpbWVycygpO1xufSk7XG5cbi8vIOWFqOWxgOa1i+ivleW3peWFt1xuZ2xvYmFsLndhaXRGb3IgPSAoY29uZGl0aW9uOiAoKSA9PiBib29sZWFuLCB0aW1lb3V0OiBudW1iZXIgPSA1MDAwKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBjaGVjayA9ICgpID0+IHtcbiAgICAgIGlmIChjb25kaXRpb24oKSkge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9IGVsc2UgaWYgKERhdGUubm93KCkgLSBzdGFydFRpbWUgPiB0aW1lb3V0KSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYENvbmRpdGlvbiBub3QgbWV0IHdpdGhpbiAke3RpbWVvdXR9bXNgKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRUaW1lb3V0KGNoZWNrLCAxMCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjaGVjaygpO1xuICB9KTtcbn07XG5cbi8vIOW8guatpeW7tui/n+W3peWFt1xuZ2xvYmFsLmRlbGF5ID0gKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufTtcblxuZXhwb3J0IHt9O1xuIl0sInZlcnNpb24iOjN9