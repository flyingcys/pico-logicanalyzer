9de6240377b3034816de5ff5d1d4519a
"use strict";
/**
 * UART协议解码器
 * 基于 @logicanalyzer/Software 的 uart/pd.py 精确移植
 * 实现完整的UART协议解码功能
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.UARTDecoder = void 0;
/* eslint-disable no-unused-vars */
const DecoderBase_1 = require("../DecoderBase");
const types_1 = require("../types");
/**
 * UART数据方向
 */
const RX = 0;
const TX = 1;
/**
 * 注释类型枚举
 * 对应原解码器的 _Ann 类
 */
var _Ann;
(function (_Ann) {
    _Ann[_Ann["_RX_DATA"] = 0] = "_RX_DATA";
    _Ann[_Ann["_TX_DATA"] = 1] = "_TX_DATA";
    _Ann[_Ann["_RX_START"] = 2] = "_RX_START";
    _Ann[_Ann["_TX_START"] = 3] = "_TX_START";
    _Ann[_Ann["_RX_PARITY_OK"] = 4] = "_RX_PARITY_OK";
    _Ann[_Ann["_TX_PARITY_OK"] = 5] = "_TX_PARITY_OK";
    _Ann[_Ann["_RX_PARITY_ERR"] = 6] = "_RX_PARITY_ERR";
    _Ann[_Ann["_TX_PARITY_ERR"] = 7] = "_TX_PARITY_ERR";
    _Ann[_Ann["_RX_STOP"] = 8] = "_RX_STOP";
    _Ann[_Ann["_TX_STOP"] = 9] = "_TX_STOP";
    _Ann[_Ann["_RX_WARN"] = 10] = "_RX_WARN";
    _Ann[_Ann["_TX_WARN"] = 11] = "_TX_WARN";
    _Ann[_Ann["_RX_DATA_BIT"] = 12] = "_RX_DATA_BIT";
    _Ann[_Ann["_TX_DATA_BIT"] = 13] = "_TX_DATA_BIT";
    _Ann[_Ann["_RX_BREAK"] = 14] = "_RX_BREAK";
    _Ann[_Ann["_TX_BREAK"] = 15] = "_TX_BREAK";
    _Ann[_Ann["_RX_PACKET"] = 16] = "_RX_PACKET";
    _Ann[_Ann["_TX_PACKET"] = 17] = "_TX_PACKET";
})(_Ann || (_Ann = {}));
/**
 * 校验位验证函数
 * 对应原解码器的 parity_ok() 函数
 */
function parityOk(parityType, parityBit, data, _dataBits) {
    if (parityType === 'ignore') {
        return true;
    }
    // 简单情况处理 (校验位总是1或0)
    if (parityType === 'zero') {
        return parityBit === 0;
    }
    else if (parityType === 'one') {
        return parityBit === 1;
    }
    // 计算数据中1的个数 (包括校验位本身)
    const ones = data.toString(2).split('1').length - 1 + parityBit;
    // 检查奇偶校验
    if (parityType === 'odd') {
        return (ones % 2) === 1;
    }
    else if (parityType === 'even') {
        return (ones % 2) === 0;
    }
    return false;
}
/**
 * UART协议解码器实现
 * 对应原软件的 uart Decoder 类
 */
class UARTDecoder extends DecoderBase_1.DecoderBase {
    constructor() {
        super(...arguments);
        // 解码器元数据 - 完全匹配原Python解码器
        this.id = 'uart';
        this.name = 'UART';
        this.longname = 'Universal Asynchronous Receiver/Transmitter';
        this.desc = 'Asynchronous, serial bus.';
        this.license = 'gplv2+';
        this.inputs = ['logic'];
        this.outputs = ['uart'];
        this.tags = ['Embedded/industrial'];
        // 通道定义 - 匹配原解码器 (都是可选通道)
        this.channels = [
            { id: 'rx', name: 'RX', desc: 'UART receive line', required: false, index: 0 },
            { id: 'tx', name: 'TX', desc: 'UART transmit line', required: false, index: 1 }
        ];
        // 配置选项 - 匹配原解码器
        this.options = [
            {
                id: 'baudrate',
                desc: 'Baud rate',
                default: 115200,
                type: 'int'
            },
            {
                id: 'data_bits',
                desc: 'Data bits',
                default: 8,
                values: ['5', '6', '7', '8', '9'],
                type: 'list'
            },
            {
                id: 'parity',
                desc: 'Parity',
                default: 'none',
                values: ['none', 'odd', 'even', 'zero', 'one', 'ignore'],
                type: 'list'
            },
            {
                id: 'stop_bits',
                desc: 'Stop bits',
                default: 1.0,
                values: ['0.0', '0.5', '1.0', '1.5', '2.0'],
                type: 'list'
            },
            {
                id: 'bit_order',
                desc: 'Bit order',
                default: 'lsb-first',
                values: ['lsb-first', 'msb-first'],
                type: 'list'
            },
            {
                id: 'format',
                desc: 'Data format',
                default: 'hex',
                values: ['ascii', 'dec', 'hex', 'oct', 'bin'],
                type: 'list'
            },
            {
                id: 'invert_rx',
                desc: 'Invert RX',
                default: 'no',
                values: ['yes', 'no'],
                type: 'list'
            },
            {
                id: 'invert_tx',
                desc: 'Invert TX',
                default: 'no',
                values: ['yes', 'no'],
                type: 'list'
            },
            {
                id: 'sample_point',
                desc: 'Sample point (%)',
                default: 50,
                type: 'int'
            }
        ];
        // 注释类型定义 - 匹配原解码器的annotations
        this.annotations = [
            ['rx-data', 'RX data'],
            ['tx-data', 'TX data'],
            ['rx-start', 'RX start bit'],
            ['tx-start', 'TX start bit'],
            ['rx-parity-ok', 'RX parity OK bit'],
            ['tx-parity-ok', 'TX parity OK bit'],
            ['rx-parity-err', 'RX parity error bit'],
            ['tx-parity-err', 'TX parity error bit'],
            ['rx-stop', 'RX stop bit'],
            ['tx-stop', 'TX stop bit'],
            ['rx-warning', 'RX warning'],
            ['tx-warning', 'TX warning'],
            ['rx-data-bit', 'RX data bit'],
            ['tx-data-bit', 'TX data bit'],
            ['rx-break', 'RX break'],
            ['tx-break', 'TX break'],
            ['rx-packet', 'RX packet'],
            ['tx-packet', 'TX packet']
        ];
        // 注释行定义 - 匹配原解码器的annotation_rows
        this.annotationRows = [
            ['rx-data-bits', 'RX bits', [_Ann._RX_DATA_BIT]],
            ['rx-data-vals', 'RX data', [_Ann._RX_DATA, _Ann._RX_START, _Ann._RX_PARITY_OK, _Ann._RX_PARITY_ERR, _Ann._RX_STOP]],
            ['rx-warnings', 'RX warnings', [_Ann._RX_WARN]],
            ['rx-breaks', 'RX breaks', [_Ann._RX_BREAK]],
            ['rx-packets', 'RX packets', [_Ann._RX_PACKET]],
            ['tx-data-bits', 'TX bits', [_Ann._TX_DATA_BIT]],
            ['tx-data-vals', 'TX data', [_Ann._TX_DATA, _Ann._TX_START, _Ann._TX_PARITY_OK, _Ann._TX_PARITY_ERR, _Ann._TX_STOP]],
            ['tx-warnings', 'TX warnings', [_Ann._TX_WARN]],
            ['tx-breaks', 'TX breaks', [_Ann._TX_BREAK]],
            ['tx-packets', 'TX packets', [_Ann._TX_PACKET]]
        ];
        // 解码器状态变量 - 对应原解码器的实例变量
        this.frameStart = [-1, -1];
        this.frameValid = [true, true];
        this.curFrameBit = [0, 0];
        this.startBit = [-1, -1];
        this.curDataBit = [0, 0];
        this.dataValue = [0, 0];
        this.parityBit = [-1, -1];
        this.stopBits = [[], []];
        this.startSample = [-1, -1];
        this.state = ['WAIT FOR START BIT', 'WAIT FOR START BIT'];
        this.dataBits = [[], []];
        this.breakStart = [null, null];
        this.packetCache = [[], []];
        this.ssPacket = [null, null];
        this.esPacket = [null, null];
        this.idleStart = [null, null];
        // 配置变量
        this.bitWidth = 0;
        this.frameLenSampleCount = 0;
        this.breakMinSampleCount = 0;
        this.byteWidth = 1;
        // 通道可用性
        this.hasPin = [false, false];
        this.inv = [false, false];
        // 选项值
        this.baudrate = 115200;
        this.dataBitsCount = 8;
        this.parity = 'none';
        this.stopBitsCount = 1.0;
        this.bitOrder = 'lsb-first';
        this.format = 'hex';
        this.samplePoint = 50;
    }
    /**
     * 主解码方法
     * 对应原解码器的 decode() 方法 - 完整实现原版逻辑
     */
    decode(sampleRate, channels, options) {
        if (!sampleRate) {
            throw new Error('Cannot decode without samplerate.');
        }
        // 检查通道可用性
        this.hasPin[RX] = channels.length > 0 && channels[0].samples.length > 0;
        this.hasPin[TX] = channels.length > 1 && channels[1].samples.length > 0;
        if (!this.hasPin[RX] && !this.hasPin[TX]) {
            throw new Error('Need at least one of TX or RX pins.');
        }
        // 初始化
        this.sampleRate = sampleRate;
        this.prepareChannelData(channels, [
            { captureIndex: 0, decoderIndex: 0 },
            { captureIndex: 1, decoderIndex: 1 } // TX
        ]);
        // 处理选项
        this.processOptions(options);
        // 计算位宽
        this.bitWidth = sampleRate / this.baudrate;
        // 计算完整帧的样本数 - 精确对应原版计算
        let frameSamples = 1; // START位
        frameSamples += this.dataBitsCount;
        frameSamples += (this.parity === 'none') ? 0 : 1;
        frameSamples += this.stopBitsCount;
        frameSamples *= this.bitWidth;
        this.frameLenSampleCount = Math.ceil(frameSamples);
        this.breakMinSampleCount = this.frameLenSampleCount;
        // 开始解码
        this.start();
        this.reset();
        // 主解码循环 - 完全基于原版的wait/matched机制
        this.runMainLoop();
        return this.results;
    }
    /**
     * 处理配置选项
     */
    processOptions(options) {
        for (const option of options) {
            switch (option.optionIndex) {
                case 0: // baudrate
                    this.baudrate = option.value;
                    break;
                case 1: // data_bits
                    this.dataBitsCount = parseInt(option.value);
                    break;
                case 2: // parity
                    this.parity = option.value;
                    break;
                case 3: // stop_bits
                    this.stopBitsCount = parseFloat(option.value);
                    break;
                case 4: // bit_order
                    this.bitOrder = option.value;
                    break;
                case 5: // format
                    this.format = option.value;
                    break;
                case 6: // invert_rx
                    this.inv[RX] = option.value === 'yes';
                    break;
                case 7: // invert_tx
                    this.inv[TX] = option.value === 'yes';
                    break;
                case 8: // sample_point
                    this.samplePoint = option.value;
                    break;
            }
        }
        this.byteWidth = Math.floor((this.dataBitsCount + 7) / 8);
    }
    /**
     * 主解码循环
     * 简化实现，直接遍历样本数据进行解码
     */
    runMainLoop() {
        try {
            // 简化的解码循环，直接遍历数据
            if (this.hasPin[RX]) {
                this.decodeChannelSimple(RX);
            }
            if (this.hasPin[TX]) {
                this.decodeChannelSimple(TX);
            }
        }
        catch (error) {
            // 捕获End of samples reached错误，正常结束解码
            if (error instanceof Error && error.message === 'End of samples reached') {
                return;
            }
            throw error;
        }
    }
    /**
     * 简化的通道解码
     */
    decodeChannelSimple(rxtx) {
        const data = this.channelData[rxtx];
        if (!data || data.length === 0)
            return;
        let sampleIndex = 0;
        this.sampleIndex = 0;
        while (sampleIndex < data.length - 1) {
            this.sampleIndex = sampleIndex;
            // 根据状态处理当前样本
            const currentSignal = this.getCurrentChannelValue(rxtx, sampleIndex);
            const nextSignal = this.getCurrentChannelValue(rxtx, sampleIndex + 1);
            // 检测起始位（从高到低的跳变）
            if (this.state[rxtx] === 'WAIT FOR START BIT' && currentSignal === 1 && nextSignal === 0) {
                this.frameStart[rxtx] = sampleIndex + 1;
                this.state[rxtx] = 'GET START BIT';
                this.curFrameBit[rxtx] = 0;
                this.frameValid[rxtx] = true;
                sampleIndex += Math.floor(this.bitWidth); // 跳到下一位的采样点
                continue;
            }
            // 处理其他状态
            if (this.state[rxtx] !== 'WAIT FOR START BIT') {
                const bitCenter = this.frameStart[rxtx] + this.curFrameBit[rxtx] * this.bitWidth + this.bitWidth / 2;
                if (sampleIndex >= Math.floor(bitCenter)) {
                    const signal = this.getCurrentChannelValue(rxtx, Math.floor(bitCenter));
                    this.inspectSample(rxtx, signal, this.inv[rxtx]);
                    sampleIndex = Math.floor(bitCenter) + 1;
                    continue;
                }
            }
            sampleIndex++;
        }
    }
    /**
     * 获取等待条件
     * 对应原解码器的 get_wait_cond()
     */
    getWaitCond(rxtx, inv) {
        const state = this.state[rxtx];
        if (state === 'WAIT FOR START BIT') {
            return { [rxtx]: inv ? 'r' : 'f' }; // 等待下降沿（起始位）
        }
        if (['GET START BIT', 'GET DATA BITS', 'GET PARITY BIT', 'GET STOP BITS'].includes(state)) {
            const bitnum = this.curFrameBit[rxtx];
            const wantNum = Math.ceil(this.getSamplePoint(rxtx, bitnum));
            const skip = wantNum - this.sampleIndex;
            return skip > 0 ? { skip } : null;
        }
        return null;
    }
    /**
     * 获取空闲检测条件
     * 对应原解码器的 get_idle_cond()
     */
    getIdleCond(rxtx, _inv) {
        if (this.idleStart[rxtx] === null) {
            return null;
        }
        const endOfFrame = this.idleStart[rxtx] + this.frameLenSampleCount;
        if (endOfFrame < this.sampleIndex) {
            return null;
        }
        const skip = endOfFrame - this.sampleIndex;
        return skip > 0 ? { skip } : null;
    }
    /**
     * 检查边沿信号
     * 对应原解码器的 inspect_edge() - 用于Break检测
     */
    inspectEdge(rxtx, signal, inv) {
        if (inv) {
            signal = signal ? 0 : 1;
        }
        if (!signal) {
            // 信号变低，开始一个新的Break检测区间
            this.breakStart[rxtx] = this.sampleIndex;
            return;
        }
        // 信号变高，是否有一个扩展的低信号周期？
        if (this.breakStart[rxtx] === null) {
            return;
        }
        const diff = this.sampleIndex - this.breakStart[rxtx];
        if (diff >= this.breakMinSampleCount) {
            const ss = this.frameStart[rxtx];
            const es = this.sampleIndex;
            this.handleBreak(rxtx, ss, es);
        }
        this.breakStart[rxtx] = null;
    }
    /**
     * 检查空闲状态
     * 对应原解码器的 inspect_idle()
     */
    inspectIdle(rxtx, signal, inv) {
        if (inv) {
            signal = signal ? 0 : 1;
        }
        if (!signal) {
            // 低输入，停止检查
            this.idleStart[rxtx] = null;
            return;
        }
        // 高输入，刚刚达到或仍然稳定
        if (this.idleStart[rxtx] === null) {
            this.idleStart[rxtx] = this.sampleIndex;
        }
        const diff = this.sampleIndex - this.idleStart[rxtx];
        if (diff < this.frameLenSampleCount) {
            return;
        }
        const ss = this.idleStart[rxtx];
        const es = this.sampleIndex;
        this.handleIdle(rxtx, ss, es);
        this.idleStart[rxtx] = es;
    }
    /**
     * 处理Break条件
     * 对应原解码器的 handle_break()
     */
    handleBreak(rxtx, ss, es) {
        this.put(ss, es, {
            type: types_1.DecoderOutputType.ANNOTATION,
            annotationType: _Ann._RX_BREAK + rxtx,
            values: ['Break condition', 'Break', 'Brk', 'B']
        });
        this.state[rxtx] = 'WAIT FOR START BIT';
    }
    /**
     * 处理空闲状态
     * 对应原解码器的 handle_idle()
     */
    handleIdle(_rxtx, _ss, _es) {
        // 空闲状态不需要特殊显示，只记录状态
        // UART空闲状态检测
    }
    /**
     * 获取当前通道值
     */
    getCurrentChannelValue(rxtx, sampleIndex) {
        if (rxtx >= this.channelData.length || !this.channelData[rxtx]) {
            return 1; // 空闲状态
        }
        const channel = this.channelData[rxtx];
        const index = sampleIndex !== undefined ? sampleIndex : this.sampleIndex;
        return index < channel.length ? channel[index] : 1;
    }
    /**
     * 获取样本点位置
     * 对应原解码器的 get_sample_point()
     */
    getSamplePoint(rxtx, bitNum) {
        const perc = (this.samplePoint >= 1 && this.samplePoint <= 99) ? this.samplePoint : 50;
        const percFloat = perc / 100.0;
        let bitPos = (this.bitWidth - 1) * percFloat;
        bitPos += this.frameStart[rxtx];
        bitPos += bitNum * this.bitWidth;
        return bitPos;
    }
    /**
     * 检查样本
     * 对应原解码器的 inspect_sample()
     */
    inspectSample(rxtx, signal, inv) {
        if (inv) {
            signal = signal ? 0 : 1;
        }
        const state = this.state[rxtx];
        switch (state) {
            case 'WAIT FOR START BIT':
                this.waitForStartBit(rxtx, signal);
                break;
            case 'GET START BIT':
                this.getStartBit(rxtx, signal);
                break;
            case 'GET DATA BITS':
                this.getDataBits(rxtx, signal);
                break;
            case 'GET PARITY BIT':
                this.getParityBit(rxtx, signal);
                break;
            case 'GET STOP BITS':
                this.getStopBits(rxtx, signal);
                break;
        }
    }
    /**
     * 等待起始位
     * 对应原解码器的 wait_for_start_bit()
     */
    waitForStartBit(rxtx, signal) {
        // 保存起始位开始的样本编号
        this.frameStart[rxtx] = this.sampleIndex;
        this.frameValid[rxtx] = true;
        this.curFrameBit[rxtx] = 0;
        this.advanceState(rxtx, signal);
    }
    /**
     * 获取起始位
     * 对应原解码器的 get_start_bit()
     */
    getStartBit(rxtx, signal) {
        this.startBit[rxtx] = signal;
        this.curFrameBit[rxtx]++;
        // 起始位必须是0
        if (this.startBit[rxtx] !== 0) {
            this.put(this.frameStart[rxtx], this.sampleIndex, {
                type: types_1.DecoderOutputType.ANNOTATION,
                annotationType: _Ann._RX_WARN + rxtx,
                values: ['Frame error', 'Frame err', 'FE']
            });
            this.frameValid[rxtx] = false;
            const es = this.sampleIndex + Math.ceil(this.bitWidth / 2);
            this.advanceState(rxtx, signal, true, es);
            return;
        }
        // 重置内部状态
        this.curDataBit[rxtx] = 0;
        this.dataValue[rxtx] = 0;
        this.parityBit[rxtx] = -1;
        this.stopBits[rxtx] = [];
        this.startSample[rxtx] = -1;
        this.dataBits[rxtx] = [];
        this.put(this.frameStart[rxtx], this.sampleIndex, {
            type: types_1.DecoderOutputType.ANNOTATION,
            annotationType: _Ann._RX_START + rxtx,
            values: ['Start bit', 'Start', 'S']
        });
        this.advanceState(rxtx, signal);
    }
    /**
     * 获取数据位
     * 对应原解码器的 get_data_bits() - 完整实现包括包处理
     */
    getDataBits(rxtx, signal) {
        // 保存第一个数据位的样本编号
        if (this.startSample[rxtx] === -1) {
            this.startSample[rxtx] = this.sampleIndex;
        }
        this.put(this.sampleIndex, this.sampleIndex + 1, {
            type: types_1.DecoderOutputType.ANNOTATION,
            annotationType: _Ann._RX_DATA_BIT + rxtx,
            values: [signal.toString()]
        });
        // 存储个别数据位 - 精确对应原版的存储格式
        const halfBit = Math.floor(this.bitWidth / 2);
        this.dataBits[rxtx].push({
            value: signal,
            startSample: this.sampleIndex - halfBit,
            endSample: this.sampleIndex + halfBit
        });
        this.curFrameBit[rxtx]++;
        this.curDataBit[rxtx]++;
        if (this.curDataBit[rxtx] < this.dataBitsCount) {
            return;
        }
        // 转换累积的数据位为数据值 - 对应原版的bitpack逻辑
        const bits = this.dataBits[rxtx].map(b => b.value);
        if (this.bitOrder === 'msb-first') {
            bits.reverse();
        }
        // 使用bitpack算法
        this.dataValue[rxtx] = 0;
        for (let i = 0; i < bits.length; i++) {
            this.dataValue[rxtx] |= bits[i] << i;
        }
        // 输出数据注释
        const formatted = this.formatValue(this.dataValue[rxtx]);
        if (formatted !== null) {
            this.put(this.startSample[rxtx], this.sampleIndex, {
                type: types_1.DecoderOutputType.ANNOTATION,
                annotationType: _Ann._RX_DATA + rxtx,
                values: [formatted],
                rawData: this.dataValue[rxtx]
            });
        }
        // 处理包逻辑 - 对应原版的handle_packet
        this.handlePacket(rxtx);
        this.dataBits[rxtx] = [];
        this.advanceState(rxtx);
    }
    /**
     * 处理包逻辑
     * 对应原解码器的 handle_packet()
     */
    handlePacket(rxtx) {
        // 简化实现 - 可根据需要扩展包处理功能
        // 这里主要用于记录数据到包缓存
        if (this.packetCache[rxtx].length === 0) {
            this.ssPacket[rxtx] = this.startSample[rxtx];
        }
        this.packetCache[rxtx].push(this.dataValue[rxtx]);
        // 简单的包终止条件 - 可配置
        if (this.packetCache[rxtx].length >= 16) { // 最多16字节的包
            this.esPacket[rxtx] = this.sampleIndex;
            let packetString = '';
            for (const byte of this.packetCache[rxtx]) {
                packetString += this.formatValue(byte);
                if (this.format !== 'ascii') {
                    packetString += ' ';
                }
            }
            if (this.format !== 'ascii' && packetString.endsWith(' ')) {
                packetString = packetString.slice(0, -1);
            }
            this.put(this.ssPacket[rxtx], this.esPacket[rxtx], {
                type: types_1.DecoderOutputType.ANNOTATION,
                annotationType: _Ann._RX_PACKET + rxtx,
                values: [packetString]
            });
            this.packetCache[rxtx] = [];
        }
    }
    /**
     * 获取校验位
     * 对应原解码器的 get_parity_bit()
     */
    getParityBit(rxtx, signal) {
        this.parityBit[rxtx] = signal;
        this.curFrameBit[rxtx]++;
        if (parityOk(this.parity, this.parityBit[rxtx], this.dataValue[rxtx], this.dataBitsCount)) {
            this.put(this.sampleIndex, this.sampleIndex + 1, {
                type: types_1.DecoderOutputType.ANNOTATION,
                annotationType: _Ann._RX_PARITY_OK + rxtx,
                values: ['Parity bit', 'Parity', 'P']
            });
        }
        else {
            this.put(this.sampleIndex, this.sampleIndex + 1, {
                type: types_1.DecoderOutputType.ANNOTATION,
                annotationType: _Ann._RX_PARITY_ERR + rxtx,
                values: ['Parity error', 'Parity err', 'PE']
            });
            this.frameValid[rxtx] = false;
        }
        this.advanceState(rxtx);
    }
    /**
     * 获取停止位
     * 对应原解码器的 get_stop_bits()
     */
    getStopBits(rxtx, signal) {
        this.stopBits[rxtx].push(signal);
        this.curFrameBit[rxtx]++;
        // 停止位必须是1
        if (signal !== 1) {
            this.put(this.sampleIndex, this.sampleIndex + 1, {
                type: types_1.DecoderOutputType.ANNOTATION,
                annotationType: _Ann._RX_WARN + rxtx,
                values: ['Frame error', 'Frame err', 'FE']
            });
            this.frameValid[rxtx] = false;
        }
        this.put(this.sampleIndex, this.sampleIndex + 1, {
            type: types_1.DecoderOutputType.ANNOTATION,
            annotationType: _Ann._RX_STOP + rxtx,
            values: ['Stop bit', 'Stop', 'T']
        });
        // 检查是否收集了所有停止位
        if (this.stopBits[rxtx].length >= this.stopBitsCount) {
            this.advanceState(rxtx);
        }
    }
    /**
     * 推进状态
     * 对应原解码器的 advance_state() - 完整实现状态转换逻辑
     */
    advanceState(rxtx, signal, fatal = false, idle) {
        const frameEnd = this.frameStart[rxtx] + this.frameLenSampleCount;
        if (idle !== undefined) {
            // 当调用者请求时，在调用者指定的位置后开始另一个（潜在的）空闲期
            this.idleStart[rxtx] = idle;
        }
        if (fatal) {
            // 当调用者请求时，不前进到下一个UART帧字段，而是前进到下一个START位的开始
            this.state[rxtx] = 'WAIT FOR START BIT';
            return;
        }
        // 推进到下一个预期的UART帧字段。处理可选字段的缺失。
        // 在（可选）STOP位字段后强制扫描下一个IDLE，以便调用者无需处理可选字段的存在。
        switch (this.state[rxtx]) {
            case 'WAIT FOR START BIT':
                this.state[rxtx] = 'GET START BIT';
                return;
            case 'GET START BIT':
                this.state[rxtx] = 'GET DATA BITS';
                return;
            case 'GET DATA BITS':
                this.state[rxtx] = 'GET PARITY BIT';
                if (this.parity !== 'none') {
                    return;
                }
            // FALLTHROUGH - 没有校验位时直接进入停止位
            case 'GET PARITY BIT':
                this.state[rxtx] = 'GET STOP BITS';
                if (this.stopBitsCount > 0) {
                    return;
                }
            // FALLTHROUGH - 没有停止位时直接进入帧处理
            case 'GET STOP BITS':
                // 后处理之前接收的UART帧。将读取位置推进到帧最后一位时间之后。
                // 这样下一个START位的开始就不会落在之前接收的UART帧的末尾。
                // 这提高了在有故障输入数据时的鲁棒性。
                const ss = this.frameStart[rxtx];
                const es = this.sampleIndex + Math.ceil(this.bitWidth / 2);
                this.handleFrame(rxtx, ss, es);
                this.state[rxtx] = 'WAIT FOR START BIT';
                this.idleStart[rxtx] = frameEnd;
                return;
            default:
                // 未处理的状态，实际上是编程错误
                this.state[rxtx] = 'WAIT FOR START BIT';
                return;
        }
    }
    /**
     * 处理完整帧
     * 对应原解码器的 handle_frame()
     */
    handleFrame(_rxtx, _ss, _es) {
        // 输出完整帧信息
        // UART帧处理完成
    }
    /**
     * 格式化值
     * 对应原解码器的 format_value()
     */
    formatValue(value) {
        const bits = this.dataBitsCount;
        switch (this.format) {
            case 'ascii': {
                if (value >= 32 && value <= 126) {
                    return String.fromCharCode(value);
                }
                const _hexfmt = bits <= 8 ? '[{:02X}]' : '[{:03X}]';
                return `[${value.toString(16).toUpperCase().padStart(bits <= 8 ? 2 : 3, '0')}]`;
            }
            case 'dec':
                return value.toString(10);
            case 'hex': {
                const hexDigits = Math.ceil(bits / 4);
                return value.toString(16).toUpperCase().padStart(hexDigits, '0');
            }
            case 'oct': {
                const octDigits = Math.ceil(bits / 3);
                return value.toString(8).padStart(octDigits, '0');
            }
            case 'bin': {
                return value.toString(2).padStart(bits, '0');
            }
            default:
                return null;
        }
    }
    /**
     * 重置解码器状态
     */
    reset() {
        super.reset();
        this.frameStart = [-1, -1];
        this.frameValid = [true, true];
        this.curFrameBit = [0, 0];
        this.startBit = [-1, -1];
        this.curDataBit = [0, 0];
        this.dataValue = [0, 0];
        this.parityBit = [-1, -1];
        this.stopBits = [[], []];
        this.startSample = [-1, -1];
        this.state = ['WAIT FOR START BIT', 'WAIT FOR START BIT'];
        this.dataBits = [[], []];
        this.breakStart = [null, null];
        this.packetCache = [[], []];
        this.ssPacket = [null, null];
        this.esPacket = [null, null];
        this.idleStart = [null, null];
    }
}
exports.UARTDecoder = UARTDecoder;
/* eslint-enable no-unused-vars */
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvc2hhcmUvc2FtYmEvdnNjb2RlLWV4dGVuc2lvbi9waWNvLWxvZ2ljYW5hbHl6ZXIvc3JjL2RlY29kZXJzL3Byb3RvY29scy9VQVJURGVjb2Rlci50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRzs7O0FBRUgsbUNBQW1DO0FBRW5DLGdEQUE2QztBQUM3QyxvQ0FPa0I7QUFFbEI7O0dBRUc7QUFDSCxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDYixNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFFYjs7O0dBR0c7QUFDSCxJQUFLLElBTUo7QUFORCxXQUFLLElBQUk7SUFDUCx1Q0FBWSxDQUFBO0lBQUUsdUNBQVksQ0FBQTtJQUFFLHlDQUFhLENBQUE7SUFBRSx5Q0FBYSxDQUFBO0lBQ3hELGlEQUFpQixDQUFBO0lBQUUsaURBQWlCLENBQUE7SUFBRSxtREFBa0IsQ0FBQTtJQUFFLG1EQUFrQixDQUFBO0lBQzVFLHVDQUFZLENBQUE7SUFBRSx1Q0FBWSxDQUFBO0lBQUUsd0NBQWEsQ0FBQTtJQUFFLHdDQUFhLENBQUE7SUFDeEQsZ0RBQWlCLENBQUE7SUFBRSxnREFBaUIsQ0FBQTtJQUFFLDBDQUFjLENBQUE7SUFBRSwwQ0FBYyxDQUFBO0lBQ3BFLDRDQUFlLENBQUE7SUFBRSw0Q0FBZSxDQUFBO0FBQ2xDLENBQUMsRUFOSSxJQUFJLEtBQUosSUFBSSxRQU1SO0FBZ0JEOzs7R0FHRztBQUNILFNBQVMsUUFBUSxDQUFDLFVBQWtCLEVBQUUsU0FBaUIsRUFBRSxJQUFZLEVBQUUsU0FBaUI7SUFDdEYsSUFBSSxVQUFVLEtBQUssUUFBUSxFQUFFO1FBQzNCLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFFRCxvQkFBb0I7SUFDcEIsSUFBSSxVQUFVLEtBQUssTUFBTSxFQUFFO1FBQ3pCLE9BQU8sU0FBUyxLQUFLLENBQUMsQ0FBQztLQUN4QjtTQUFNLElBQUksVUFBVSxLQUFLLEtBQUssRUFBRTtRQUMvQixPQUFPLFNBQVMsS0FBSyxDQUFDLENBQUM7S0FDeEI7SUFFRCxzQkFB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LENBQUM7UUFDeEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsb0JBQW9CLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDL0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDN0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNoQyxDQUFDO0NBQ0Y7QUFsekJELGtDQWt6QkM7QUFFRCxrQ0FBa0MiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvc2hhcmUvc2FtYmEvdnNjb2RlLWV4dGVuc2lvbi9waWNvLWxvZ2ljYW5hbHl6ZXIvc3JjL2RlY29kZXJzL3Byb3RvY29scy9VQVJURGVjb2Rlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVUFSVOWNj+iuruino+eggeWZqFxyXG4gKiDln7rkuo4gQGxvZ2ljYW5hbHl6ZXIvU29mdHdhcmUg55qEIHVhcnQvcGQucHkg57K+56Gu56e75qSNXHJcbiAqIOWunueOsOWujOaVtOeahFVBUlTljY/orq7op6PnoIHlip/og71cclxuICovXHJcblxyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG5cclxuaW1wb3J0IHsgRGVjb2RlckJhc2UgfSBmcm9tICcuLi9EZWNvZGVyQmFzZSc7XHJcbmltcG9ydCB7XHJcbiAgRGVjb2RlckNoYW5uZWwsXHJcbiAgRGVjb2Rlck9wdGlvbixcclxuICBEZWNvZGVyT3B0aW9uVmFsdWUsXHJcbiAgRGVjb2RlclJlc3VsdCxcclxuICBEZWNvZGVyT3V0cHV0VHlwZSxcclxuICBDaGFubmVsRGF0YVxyXG59IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbi8qKlxyXG4gKiBVQVJU5pWw5o2u5pa55ZCRXHJcbiAqL1xyXG5jb25zdCBSWCA9IDA7XHJcbmNvbnN0IFRYID0gMTtcclxuXHJcbi8qKlxyXG4gKiDms6jph4rnsbvlnovmnprkuL5cclxuICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIF9Bbm4g57G7XHJcbiAqL1xyXG5lbnVtIF9Bbm4ge1xyXG4gIF9SWF9EQVRBID0gMCwgX1RYX0RBVEEgPSAxLCBfUlhfU1RBUlQgPSAyLCBfVFhfU1RBUlQgPSAzLFxyXG4gIF9SWF9QQVJJVFlfT0sgPSA0LCBfVFhfUEFSSVRZX09LID0gNSwgX1JYX1BBUklUWV9FUlIgPSA2LCBfVFhfUEFSSVRZX0VSUiA9IDcsXHJcbiAgX1JYX1NUT1AgPSA4LCBfVFhfU1RPUCA9IDksIF9SWF9XQVJOID0gMTAsIF9UWF9XQVJOID0gMTEsXHJcbiAgX1JYX0RBVEFfQklUID0gMTIsIF9UWF9EQVRBX0JJVCA9IDEzLCBfUlhfQlJFQUsgPSAxNCwgX1RYX0JSRUFLID0gMTUsXHJcbiAgX1JYX1BBQ0tFVCA9IDE2LCBfVFhfUEFDS0VUID0gMTdcclxufVxyXG5cclxuLyoqXHJcbiAqIOaVsOaNruS9jeS/oeaBr1xyXG4gKi9cclxuaW50ZXJmYWNlIERhdGFCaXRJbmZvIHtcclxuICB2YWx1ZTogbnVtYmVyO1xyXG4gIHN0YXJ0U2FtcGxlOiBudW1iZXI7XHJcbiAgZW5kU2FtcGxlOiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVQVJU54q25oCB57G75Z6LXHJcbiAqL1xyXG50eXBlIFVBUlRTdGF0ZSA9ICdXQUlUIEZPUiBTVEFSVCBCSVQnIHwgJ0dFVCBTVEFSVCBCSVQnIHwgJ0dFVCBEQVRBIEJJVFMnIHwgJ0dFVCBQQVJJVFkgQklUJyB8ICdHRVQgU1RPUCBCSVRTJztcclxuXHJcbi8qKlxyXG4gKiDmoKHpqozkvY3pqozor4Hlh73mlbBcclxuICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIHBhcml0eV9vaygpIOWHveaVsFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyaXR5T2socGFyaXR5VHlwZTogc3RyaW5nLCBwYXJpdHlCaXQ6IG51bWJlciwgZGF0YTogbnVtYmVyLCBfZGF0YUJpdHM6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gIGlmIChwYXJpdHlUeXBlID09PSAnaWdub3JlJykge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvLyDnroDljZXmg4XlhrXlpITnkIYgKOagoemqjOS9jeaAu+aYrzHmiJYwKVxyXG4gIGlmIChwYXJpdHlUeXBlID09PSAnemVybycpIHtcclxuICAgIHJldHVybiBwYXJpdHlCaXQgPT09IDA7XHJcbiAgfSBlbHNlIGlmIChwYXJpdHlUeXBlID09PSAnb25lJykge1xyXG4gICAgcmV0dXJuIHBhcml0eUJpdCA9PT0gMTtcclxuICB9XHJcblxyXG4gIC8vIOiuoeeul+aVsOaNruS4rTHnmoTkuKrmlbAgKOWMheaLrOagoemqjOS9jeacrOi6qylcclxuICBjb25zdCBvbmVzID0gZGF0YS50b1N0cmluZygyKS5zcGxpdCgnMScpLmxlbmd0aCAtIDEgKyBwYXJpdHlCaXQ7XHJcblxyXG4gIC8vIOajgOafpeWlh+WBtuagoemqjFxyXG4gIGlmIChwYXJpdHlUeXBlID09PSAnb2RkJykge1xyXG4gICAgcmV0dXJuIChvbmVzICUgMikgPT09IDE7XHJcbiAgfSBlbHNlIGlmIChwYXJpdHlUeXBlID09PSAnZXZlbicpIHtcclxuICAgIHJldHVybiAob25lcyAlIDIpID09PSAwO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogVUFSVOWNj+iuruino+eggeWZqOWunueOsFxyXG4gKiDlr7nlupTljp/ova/ku7bnmoQgdWFydCBEZWNvZGVyIOexu1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVBUlREZWNvZGVyIGV4dGVuZHMgRGVjb2RlckJhc2Uge1xyXG4gIC8vIOino+eggeWZqOWFg+aVsOaNriAtIOWujOWFqOWMuemFjeWOn1B5dGhvbuino+eggeWZqFxyXG4gIHJlYWRvbmx5IGlkID0gJ3VhcnQnO1xyXG4gIHJlYWRvbmx5IG5hbWUgPSAnVUFSVCc7XHJcbiAgcmVhZG9ubHkgbG9uZ25hbWUgPSAnVW5pdmVyc2FsIEFzeW5jaHJvbm91cyBSZWNlaXZlci9UcmFuc21pdHRlcic7XHJcbiAgcmVhZG9ubHkgZGVzYyA9ICdBc3luY2hyb25vdXMsIHNlcmlhbCBidXMuJztcclxuICByZWFkb25seSBsaWNlbnNlID0gJ2dwbHYyKyc7XHJcbiAgcmVhZG9ubHkgaW5wdXRzID0gWydsb2dpYyddO1xyXG4gIHJlYWRvbmx5IG91dHB1dHMgPSBbJ3VhcnQnXTtcclxuICByZWFkb25seSB0YWdzID0gWydFbWJlZGRlZC9pbmR1c3RyaWFsJ107XHJcblxyXG4gIC8vIOmAmumBk+WumuS5iSAtIOWMuemFjeWOn+ino+eggeWZqCAo6YO95piv5Y+v6YCJ6YCa6YGTKVxyXG4gIHJlYWRvbmx5IGNoYW5uZWxzOiBEZWNvZGVyQ2hhbm5lbFtdID0gW1xyXG4gICAgeyBpZDogJ3J4JywgbmFtZTogJ1JYJywgZGVzYzogJ1VBUlQgcmVjZWl2ZSBsaW5lJywgcmVxdWlyZWQ6IGZhbHNlLCBpbmRleDogMCB9LFxyXG4gICAgeyBpZDogJ3R4JywgbmFtZTogJ1RYJywgZGVzYzogJ1VBUlQgdHJhbnNtaXQgbGluZScsIHJlcXVpcmVkOiBmYWxzZSwgaW5kZXg6IDEgfVxyXG4gIF07XHJcblxyXG4gIC8vIOmFjee9rumAiemhuSAtIOWMuemFjeWOn+ino+eggeWZqFxyXG4gIHJlYWRvbmx5IG9wdGlvbnM6IERlY29kZXJPcHRpb25bXSA9IFtcclxuICAgIHtcclxuICAgICAgaWQ6ICdiYXVkcmF0ZScsXHJcbiAgICAgIGRlc2M6ICdCYXVkIHJhdGUnLFxyXG4gICAgICBkZWZhdWx0OiAxMTUyMDAsXHJcbiAgICAgIHR5cGU6ICdpbnQnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBpZDogJ2RhdGFfYml0cycsXHJcbiAgICAgIGRlc2M6ICdEYXRhIGJpdHMnLFxyXG4gICAgICBkZWZhdWx0OiA4LFxyXG4gICAgICB2YWx1ZXM6IFsnNScsICc2JywgJzcnLCAnOCcsICc5J10sXHJcbiAgICAgIHR5cGU6ICdsaXN0J1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6ICdwYXJpdHknLFxyXG4gICAgICBkZXNjOiAnUGFyaXR5JyxcclxuICAgICAgZGVmYXVsdDogJ25vbmUnLFxyXG4gICAgICB2YWx1ZXM6IFsnbm9uZScsICdvZGQnLCAnZXZlbicsICd6ZXJvJywgJ29uZScsICdpZ25vcmUnXSxcclxuICAgICAgdHlwZTogJ2xpc3QnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBpZDogJ3N0b3BfYml0cycsXHJcbiAgICAgIGRlc2M6ICdTdG9wIGJpdHMnLFxyXG4gICAgICBkZWZhdWx0OiAxLjAsXHJcbiAgICAgIHZhbHVlczogWycwLjAnLCAnMC41JywgJzEuMCcsICcxLjUnLCAnMi4wJ10sXHJcbiAgICAgIHR5cGU6ICdsaXN0J1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6ICdiaXRfb3JkZXInLFxyXG4gICAgICBkZXNjOiAnQml0IG9yZGVyJyxcclxuICAgICAgZGVmYXVsdDogJ2xzYi1maXJzdCcsXHJcbiAgICAgIHZhbHVlczogWydsc2ItZmlyc3QnLCAnbXNiLWZpcnN0J10sXHJcbiAgICAgIHR5cGU6ICdsaXN0J1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6ICdmb3JtYXQnLFxyXG4gICAgICBkZXNjOiAnRGF0YSBmb3JtYXQnLFxyXG4gICAgICBkZWZhdWx0OiAnaGV4JyxcclxuICAgICAgdmFsdWVzOiBbJ2FzY2lpJywgJ2RlYycsICdoZXgnLCAnb2N0JywgJ2JpbiddLFxyXG4gICAgICB0eXBlOiAnbGlzdCdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGlkOiAnaW52ZXJ0X3J4JyxcclxuICAgICAgZGVzYzogJ0ludmVydCBSWCcsXHJcbiAgICAgIGRlZmF1bHQ6ICdubycsXHJcbiAgICAgIHZhbHVlczogWyd5ZXMnLCAnbm8nXSxcclxuICAgICAgdHlwZTogJ2xpc3QnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBpZDogJ2ludmVydF90eCcsXHJcbiAgICAgIGRlc2M6ICdJbnZlcnQgVFgnLFxyXG4gICAgICBkZWZhdWx0OiAnbm8nLFxyXG4gICAgICB2YWx1ZXM6IFsneWVzJywgJ25vJ10sXHJcbiAgICAgIHR5cGU6ICdsaXN0J1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6ICdzYW1wbGVfcG9pbnQnLFxyXG4gICAgICBkZXNjOiAnU2FtcGxlIHBvaW50ICglKScsXHJcbiAgICAgIGRlZmF1bHQ6IDUwLFxyXG4gICAgICB0eXBlOiAnaW50J1xyXG4gICAgfVxyXG4gIF07XHJcblxyXG4gIC8vIOazqOmHiuexu+Wei+WumuS5iSAtIOWMuemFjeWOn+ino+eggeWZqOeahGFubm90YXRpb25zXHJcbiAgcmVhZG9ubHkgYW5ub3RhdGlvbnM6IEFycmF5PFtzdHJpbmcsIHN0cmluZywgc3RyaW5nP10+ID0gW1xyXG4gICAgWydyeC1kYXRhJywgJ1JYIGRhdGEnXSxcclxuICAgIFsndHgtZGF0YScsICdUWCBkYXRhJ10sXHJcbiAgICBbJ3J4LXN0YXJ0JywgJ1JYIHN0YXJ0IGJpdCddLFxyXG4gICAgWyd0eC1zdGFydCcsICdUWCBzdGFydCBiaXQnXSxcclxuICAgIFsncngtcGFyaXR5LW9rJywgJ1JYIHBhcml0eSBPSyBiaXQnXSxcclxuICAgIFsndHgtcGFyaXR5LW9rJywgJ1RYIHBhcml0eSBPSyBiaXQnXSxcclxuICAgIFsncngtcGFyaXR5LWVycicsICdSWCBwYXJpdHkgZXJyb3IgYml0J10sXHJcbiAgICBbJ3R4LXBhcml0eS1lcnInLCAnVFggcGFyaXR5IGVycm9yIGJpdCddLFxyXG4gICAgWydyeC1zdG9wJywgJ1JYIHN0b3AgYml0J10sXHJcbiAgICBbJ3R4LXN0b3AnLCAnVFggc3RvcCBiaXQnXSxcclxuICAgIFsncngtd2FybmluZycsICdSWCB3YXJuaW5nJ10sXHJcbiAgICBbJ3R4LXdhcm5pbmcnLCAnVFggd2FybmluZyddLFxyXG4gICAgWydyeC1kYXRhLWJpdCcsICdSWCBkYXRhIGJpdCddLFxyXG4gICAgWyd0eC1kYXRhLWJpdCcsICdUWCBkYXRhIGJpdCddLFxyXG4gICAgWydyeC1icmVhaycsICdSWCBicmVhayddLFxyXG4gICAgWyd0eC1icmVhaycsICdUWCBicmVhayddLFxyXG4gICAgWydyeC1wYWNrZXQnLCAnUlggcGFja2V0J10sXHJcbiAgICBbJ3R4LXBhY2tldCcsICdUWCBwYWNrZXQnXVxyXG4gIF07XHJcblxyXG4gIC8vIOazqOmHiuihjOWumuS5iSAtIOWMuemFjeWOn+ino+eggeWZqOeahGFubm90YXRpb25fcm93c1xyXG4gIHJlYWRvbmx5IGFubm90YXRpb25Sb3dzOiBBcnJheTxbc3RyaW5nLCBzdHJpbmcsIG51bWJlcltdXT4gPSBbXHJcbiAgICBbJ3J4LWRhdGEtYml0cycsICdSWCBiaXRzJywgW19Bbm4uX1JYX0RBVEFfQklUXV0sXHJcbiAgICBbJ3J4LWRhdGEtdmFscycsICdSWCBkYXRhJywgW19Bbm4uX1JYX0RBVEEsIF9Bbm4uX1JYX1NUQVJULCBfQW5uLl9SWF9QQVJJVFlfT0ssIF9Bbm4uX1JYX1BBUklUWV9FUlIsIF9Bbm4uX1JYX1NUT1BdXSxcclxuICAgIFsncngtd2FybmluZ3MnLCAnUlggd2FybmluZ3MnLCBbX0Fubi5fUlhfV0FSTl1dLFxyXG4gICAgWydyeC1icmVha3MnLCAnUlggYnJlYWtzJywgW19Bbm4uX1JYX0JSRUFLXV0sXHJcbiAgICBbJ3J4LXBhY2tldHMnLCAnUlggcGFja2V0cycsIFtfQW5uLl9SWF9QQUNLRVRdXSxcclxuICAgIFsndHgtZGF0YS1iaXRzJywgJ1RYIGJpdHMnLCBbX0Fubi5fVFhfREFUQV9CSVRdXSxcclxuICAgIFsndHgtZGF0YS12YWxzJywgJ1RYIGRhdGEnLCBbX0Fubi5fVFhfREFUQSwgX0Fubi5fVFhfU1RBUlQsIF9Bbm4uX1RYX1BBUklUWV9PSywgX0Fubi5fVFhfUEFSSVRZX0VSUiwgX0Fubi5fVFhfU1RPUF1dLFxyXG4gICAgWyd0eC13YXJuaW5ncycsICdUWCB3YXJuaW5ncycsIFtfQW5uLl9UWF9XQVJOXV0sXHJcbiAgICBbJ3R4LWJyZWFrcycsICdUWCBicmVha3MnLCBbX0Fubi5fVFhfQlJFQUtdXSxcclxuICAgIFsndHgtcGFja2V0cycsICdUWCBwYWNrZXRzJywgW19Bbm4uX1RYX1BBQ0tFVF1dXHJcbiAgXTtcclxuXHJcbiAgLy8g6Kej56CB5Zmo54q25oCB5Y+Y6YePIC0g5a+55bqU5Y6f6Kej56CB5Zmo55qE5a6e5L6L5Y+Y6YePXHJcbiAgcHJpdmF0ZSBmcmFtZVN0YXJ0ID0gWy0xLCAtMV07XHJcbiAgcHJpdmF0ZSBmcmFtZVZhbGlkID0gW3RydWUsIHRydWVdO1xyXG4gIHByaXZhdGUgY3VyRnJhbWVCaXQgPSBbMCwgMF07XHJcbiAgcHJpdmF0ZSBzdGFydEJpdCA9IFstMSwgLTFdO1xyXG4gIHByaXZhdGUgY3VyRGF0YUJpdCA9IFswLCAwXTtcclxuICBwcml2YXRlIGRhdGFWYWx1ZSA9IFswLCAwXTtcclxuICBwcml2YXRlIHBhcml0eUJpdCA9IFstMSwgLTFdO1xyXG4gIHByaXZhdGUgc3RvcEJpdHM6IG51bWJlcltdW10gPSBbW10sIFtdXTtcclxuICBwcml2YXRlIHN0YXJ0U2FtcGxlID0gWy0xLCAtMV07XHJcbiAgcHJpdmF0ZSBzdGF0ZTogVUFSVFN0YXRlW10gPSBbJ1dBSVQgRk9SIFNUQVJUIEJJVCcsICdXQUlUIEZPUiBTVEFSVCBCSVQnXTtcclxuICBwcml2YXRlIGRhdGFCaXRzOiBEYXRhQml0SW5mb1tdW10gPSBbW10sIFtdXTtcclxuICBwcml2YXRlIGJyZWFrU3RhcnQgPSBbbnVsbCwgbnVsbF0gYXMgKG51bWJlciB8IG51bGwpW107XHJcbiAgcHJpdmF0ZSBwYWNrZXRDYWNoZTogbnVtYmVyW11bXSA9IFtbXSwgW11dO1xyXG4gIHByaXZhdGUgc3NQYWNrZXQgPSBbbnVsbCwgbnVsbF0gYXMgKG51bWJlciB8IG51bGwpW107XHJcbiAgcHJpdmF0ZSBlc1BhY2tldCA9IFtudWxsLCBudWxsXSBhcyAobnVtYmVyIHwgbnVsbClbXTtcclxuICBwcml2YXRlIGlkbGVTdGFydCA9IFtudWxsLCBudWxsXSBhcyAobnVtYmVyIHwgbnVsbClbXTtcclxuXHJcbiAgLy8g6YWN572u5Y+Y6YePXHJcbiAgcHJpdmF0ZSBiaXRXaWR0aCA9IDA7XHJcbiAgcHJpdmF0ZSBmcmFtZUxlblNhbXBsZUNvdW50ID0gMDtcclxuICBwcml2YXRlIGJyZWFrTWluU2FtcGxlQ291bnQgPSAwO1xyXG4gIHByaXZhdGUgYnl0ZVdpZHRoID0gMTtcclxuXHJcbiAgLy8g6YCa6YGT5Y+v55So5oCnXHJcbiAgcHJpdmF0ZSBoYXNQaW4gPSBbZmFsc2UsIGZhbHNlXTtcclxuICBwcml2YXRlIGludiA9IFtmYWxzZSwgZmFsc2VdO1xyXG5cclxuICAvLyDpgInpobnlgLxcclxuICBwcml2YXRlIGJhdWRyYXRlID0gMTE1MjAwO1xyXG4gIHByaXZhdGUgZGF0YUJpdHNDb3VudCA9IDg7XHJcbiAgcHJpdmF0ZSBwYXJpdHkgPSAnbm9uZSc7XHJcbiAgcHJpdmF0ZSBzdG9wQml0c0NvdW50ID0gMS4wO1xyXG4gIHByaXZhdGUgYml0T3JkZXIgPSAnbHNiLWZpcnN0JztcclxuICBwcml2YXRlIGZvcm1hdCA9ICdoZXgnO1xyXG4gIHByaXZhdGUgc2FtcGxlUG9pbnQgPSA1MDtcclxuXHJcbiAgLyoqXHJcbiAgICog5Li76Kej56CB5pa55rOVXHJcbiAgICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIGRlY29kZSgpIOaWueazlSAtIOWujOaVtOWunueOsOWOn+eJiOmAu+i+kVxyXG4gICAqL1xyXG4gIGRlY29kZShcclxuICAgIHNhbXBsZVJhdGU6IG51bWJlcixcclxuICAgIGNoYW5uZWxzOiBDaGFubmVsRGF0YVtdLFxyXG4gICAgb3B0aW9uczogRGVjb2Rlck9wdGlvblZhbHVlW11cclxuICApOiBEZWNvZGVyUmVzdWx0W10ge1xyXG4gICAgaWYgKCFzYW1wbGVSYXRlKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGRlY29kZSB3aXRob3V0IHNhbXBsZXJhdGUuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5qOA5p+l6YCa6YGT5Y+v55So5oCnXHJcbiAgICB0aGlzLmhhc1BpbltSWF0gPSBjaGFubmVscy5sZW5ndGggPiAwICYmIGNoYW5uZWxzWzBdLnNhbXBsZXMubGVuZ3RoID4gMDtcclxuICAgIHRoaXMuaGFzUGluW1RYXSA9IGNoYW5uZWxzLmxlbmd0aCA+IDEgJiYgY2hhbm5lbHNbMV0uc2FtcGxlcy5sZW5ndGggPiAwO1xyXG5cclxuICAgIGlmICghdGhpcy5oYXNQaW5bUlhdICYmICF0aGlzLmhhc1BpbltUWF0pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZWVkIGF0IGxlYXN0IG9uZSBvZiBUWCBvciBSWCBwaW5zLicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWIneWni+WMllxyXG4gICAgdGhpcy5zYW1wbGVSYXRlID0gc2FtcGxlUmF0ZTtcclxuICAgIHRoaXMucHJlcGFyZUNoYW5uZWxEYXRhKGNoYW5uZWxzLCBbXHJcbiAgICAgIHsgY2FwdHVyZUluZGV4OiAwLCBkZWNvZGVySW5kZXg6IDAgfSwgLy8gUlhcclxuICAgICAgeyBjYXB0dXJlSW5kZXg6IDEsIGRlY29kZXJJbmRleDogMSB9ICAvLyBUWFxyXG4gICAgXSk7XHJcblxyXG4gICAgLy8g5aSE55CG6YCJ6aG5XHJcbiAgICB0aGlzLnByb2Nlc3NPcHRpb25zKG9wdGlvbnMpO1xyXG5cclxuICAgIC8vIOiuoeeul+S9jeWuvVxyXG4gICAgdGhpcy5iaXRXaWR0aCA9IHNhbXBsZVJhdGUgLyB0aGlzLmJhdWRyYXRlO1xyXG5cclxuICAgIC8vIOiuoeeul+WujOaVtOW4p+eahOagt+acrOaVsCAtIOeyvuehruWvueW6lOWOn+eJiOiuoeeul1xyXG4gICAgbGV0IGZyYW1lU2FtcGxlcyA9IDE7IC8vIFNUQVJU5L2NXHJcbiAgICBmcmFtZVNhbXBsZXMgKz0gdGhpcy5kYXRhQml0c0NvdW50O1xyXG4gICAgZnJhbWVTYW1wbGVzICs9ICh0aGlzLnBhcml0eSA9PT0gJ25vbmUnKSA/IDAgOiAxO1xyXG4gICAgZnJhbWVTYW1wbGVzICs9IHRoaXMuc3RvcEJpdHNDb3VudDtcclxuICAgIGZyYW1lU2FtcGxlcyAqPSB0aGlzLmJpdFdpZHRoO1xyXG4gICAgdGhpcy5mcmFtZUxlblNhbXBsZUNvdW50ID0gTWF0aC5jZWlsKGZyYW1lU2FtcGxlcyk7XHJcbiAgICB0aGlzLmJyZWFrTWluU2FtcGxlQ291bnQgPSB0aGlzLmZyYW1lTGVuU2FtcGxlQ291bnQ7XHJcblxyXG4gICAgLy8g5byA5aeL6Kej56CBXHJcbiAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICB0aGlzLnJlc2V0KCk7XHJcblxyXG4gICAgLy8g5Li76Kej56CB5b6q546vIC0g5a6M5YWo5Z+65LqO5Y6f54mI55qEd2FpdC9tYXRjaGVk5py65Yi2XHJcbiAgICB0aGlzLnJ1bk1haW5Mb29wKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMucmVzdWx0cztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhumFjee9rumAiemhuVxyXG4gICAqL1xyXG4gIHByaXZhdGUgcHJvY2Vzc09wdGlvbnMob3B0aW9uczogRGVjb2Rlck9wdGlvblZhbHVlW10pOiB2b2lkIHtcclxuICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcclxuICAgICAgc3dpdGNoIChvcHRpb24ub3B0aW9uSW5kZXgpIHtcclxuICAgICAgICBjYXNlIDA6IC8vIGJhdWRyYXRlXHJcbiAgICAgICAgICB0aGlzLmJhdWRyYXRlID0gb3B0aW9uLnZhbHVlIGFzIG51bWJlcjtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMTogLy8gZGF0YV9iaXRzXHJcbiAgICAgICAgICB0aGlzLmRhdGFCaXRzQ291bnQgPSBwYXJzZUludChvcHRpb24udmFsdWUgYXMgc3RyaW5nKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjogLy8gcGFyaXR5XHJcbiAgICAgICAgICB0aGlzLnBhcml0eSA9IG9wdGlvbi52YWx1ZSBhcyBzdHJpbmc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6IC8vIHN0b3BfYml0c1xyXG4gICAgICAgICAgdGhpcy5zdG9wQml0c0NvdW50ID0gcGFyc2VGbG9hdChvcHRpb24udmFsdWUgYXMgc3RyaW5nKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgNDogLy8gYml0X29yZGVyXHJcbiAgICAgICAgICB0aGlzLmJpdE9yZGVyID0gb3B0aW9uLnZhbHVlIGFzIHN0cmluZztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgNTogLy8gZm9ybWF0XHJcbiAgICAgICAgICB0aGlzLmZvcm1hdCA9IG9wdGlvbi52YWx1ZSBhcyBzdHJpbmc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDY6IC8vIGludmVydF9yeFxyXG4gICAgICAgICAgdGhpcy5pbnZbUlhdID0gKG9wdGlvbi52YWx1ZSBhcyBzdHJpbmcpID09PSAneWVzJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgNzogLy8gaW52ZXJ0X3R4XHJcbiAgICAgICAgICB0aGlzLmludltUWF0gPSAob3B0aW9uLnZhbHVlIGFzIHN0cmluZykgPT09ICd5ZXMnO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSA4OiAvLyBzYW1wbGVfcG9pbnRcclxuICAgICAgICAgIHRoaXMuc2FtcGxlUG9pbnQgPSBvcHRpb24udmFsdWUgYXMgbnVtYmVyO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJ5dGVXaWR0aCA9IE1hdGguZmxvb3IoKHRoaXMuZGF0YUJpdHNDb3VudCArIDcpIC8gOCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDkuLvop6PnoIHlvqrnjq9cclxuICAgKiDnroDljJblrp7njrDvvIznm7TmjqXpgY3ljobmoLfmnKzmlbDmja7ov5vooYzop6PnoIFcclxuICAgKi9cclxuICBwcml2YXRlIHJ1bk1haW5Mb29wKCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g566A5YyW55qE6Kej56CB5b6q546v77yM55u05o6l6YGN5Y6G5pWw5o2uXHJcbiAgICAgIGlmICh0aGlzLmhhc1BpbltSWF0pIHtcclxuICAgICAgICB0aGlzLmRlY29kZUNoYW5uZWxTaW1wbGUoUlgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmhhc1BpbltUWF0pIHtcclxuICAgICAgICB0aGlzLmRlY29kZUNoYW5uZWxTaW1wbGUoVFgpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyDmjZXojrdFbmQgb2Ygc2FtcGxlcyByZWFjaGVk6ZSZ6K+v77yM5q2j5bi457uT5p2f6Kej56CBXHJcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UgPT09ICdFbmQgb2Ygc2FtcGxlcyByZWFjaGVkJykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeugOWMlueahOmAmumBk+ino+eggVxyXG4gICAqL1xyXG4gIHByaXZhdGUgZGVjb2RlQ2hhbm5lbFNpbXBsZShyeHR4OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmNoYW5uZWxEYXRhW3J4dHhdO1xyXG4gICAgaWYgKCFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgbGV0IHNhbXBsZUluZGV4ID0gMDtcclxuICAgIHRoaXMuc2FtcGxlSW5kZXggPSAwO1xyXG5cclxuICAgIHdoaWxlIChzYW1wbGVJbmRleCA8IGRhdGEubGVuZ3RoIC0gMSkge1xyXG4gICAgICB0aGlzLnNhbXBsZUluZGV4ID0gc2FtcGxlSW5kZXg7XHJcblxyXG4gICAgICAvLyDmoLnmja7nirbmgIHlpITnkIblvZPliY3moLfmnKxcclxuICAgICAgY29uc3QgY3VycmVudFNpZ25hbCA9IHRoaXMuZ2V0Q3VycmVudENoYW5uZWxWYWx1ZShyeHR4LCBzYW1wbGVJbmRleCk7XHJcbiAgICAgIGNvbnN0IG5leHRTaWduYWwgPSB0aGlzLmdldEN1cnJlbnRDaGFubmVsVmFsdWUocnh0eCwgc2FtcGxlSW5kZXggKyAxKTtcclxuXHJcbiAgICAgIC8vIOajgOa1i+i1t+Wni+S9je+8iOS7jumrmOWIsOS9jueahOi3s+WPmO+8iVxyXG4gICAgICBpZiAodGhpcy5zdGF0ZVtyeHR4XSA9PT0gJ1dBSVQgRk9SIFNUQVJUIEJJVCcgJiYgY3VycmVudFNpZ25hbCA9PT0gMSAmJiBuZXh0U2lnbmFsID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5mcmFtZVN0YXJ0W3J4dHhdID0gc2FtcGxlSW5kZXggKyAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbcnh0eF0gPSAnR0VUIFNUQVJUIEJJVCc7XHJcbiAgICAgICAgdGhpcy5jdXJGcmFtZUJpdFtyeHR4XSA9IDA7XHJcbiAgICAgICAgdGhpcy5mcmFtZVZhbGlkW3J4dHhdID0gdHJ1ZTtcclxuICAgICAgICBzYW1wbGVJbmRleCArPSBNYXRoLmZsb29yKHRoaXMuYml0V2lkdGgpOyAvLyDot7PliLDkuIvkuIDkvY3nmoTph4fmoLfngrlcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5aSE55CG5YW25LuW54q25oCBXHJcbiAgICAgIGlmICh0aGlzLnN0YXRlW3J4dHhdICE9PSAnV0FJVCBGT1IgU1RBUlQgQklUJykge1xyXG4gICAgICAgIGNvbnN0IGJpdENlbnRlciA9IHRoaXMuZnJhbWVTdGFydFtyeHR4XSArIHRoaXMuY3VyRnJhbWVCaXRbcnh0eF0gKiB0aGlzLmJpdFdpZHRoICsgdGhpcy5iaXRXaWR0aCAvIDI7XHJcbiAgICAgICAgaWYgKHNhbXBsZUluZGV4ID49IE1hdGguZmxvb3IoYml0Q2VudGVyKSkge1xyXG4gICAgICAgICAgY29uc3Qgc2lnbmFsID0gdGhpcy5nZXRDdXJyZW50Q2hhbm5lbFZhbHVlKHJ4dHgsIE1hdGguZmxvb3IoYml0Q2VudGVyKSk7XHJcbiAgICAgICAgICB0aGlzLmluc3BlY3RTYW1wbGUocnh0eCwgc2lnbmFsLCB0aGlzLmludltyeHR4XSk7XHJcbiAgICAgICAgICBzYW1wbGVJbmRleCA9IE1hdGguZmxvb3IoYml0Q2VudGVyKSArIDE7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNhbXBsZUluZGV4Kys7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bnrYnlvoXmnaHku7ZcclxuICAgKiDlr7nlupTljp/op6PnoIHlmajnmoQgZ2V0X3dhaXRfY29uZCgpXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRXYWl0Q29uZChyeHR4OiBudW1iZXIsIGludjogYm9vbGVhbik6IHsgW2tleTogbnVtYmVyXTogc3RyaW5nIH0gfCB7IHNraXA6IG51bWJlciB9IHwgbnVsbCB7XHJcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGVbcnh0eF07XHJcblxyXG4gICAgaWYgKHN0YXRlID09PSAnV0FJVCBGT1IgU1RBUlQgQklUJykge1xyXG4gICAgICByZXR1cm4geyBbcnh0eF06IGludiA/ICdyJyA6ICdmJyB9OyAvLyDnrYnlvoXkuIvpmY3msr/vvIjotbflp4vkvY3vvIlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoWydHRVQgU1RBUlQgQklUJywgJ0dFVCBEQVRBIEJJVFMnLCAnR0VUIFBBUklUWSBCSVQnLCAnR0VUIFNUT1AgQklUUyddLmluY2x1ZGVzKHN0YXRlKSkge1xyXG4gICAgICBjb25zdCBiaXRudW0gPSB0aGlzLmN1ckZyYW1lQml0W3J4dHhdO1xyXG4gICAgICBjb25zdCB3YW50TnVtID0gTWF0aC5jZWlsKHRoaXMuZ2V0U2FtcGxlUG9pbnQocnh0eCwgYml0bnVtKSk7XHJcbiAgICAgIGNvbnN0IHNraXAgPSB3YW50TnVtIC0gdGhpcy5zYW1wbGVJbmRleDtcclxuICAgICAgcmV0dXJuIHNraXAgPiAwID8geyBza2lwIH0gOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W56m66Zey5qOA5rWL5p2h5Lu2XHJcbiAgICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIGdldF9pZGxlX2NvbmQoKVxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0SWRsZUNvbmQocnh0eDogbnVtYmVyLCBfaW52OiBib29sZWFuKTogeyBza2lwOiBudW1iZXIgfSB8IG51bGwge1xyXG4gICAgaWYgKHRoaXMuaWRsZVN0YXJ0W3J4dHhdID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVuZE9mRnJhbWUgPSB0aGlzLmlkbGVTdGFydFtyeHR4XSArIHRoaXMuZnJhbWVMZW5TYW1wbGVDb3VudDtcclxuICAgIGlmIChlbmRPZkZyYW1lIDwgdGhpcy5zYW1wbGVJbmRleCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBza2lwID0gZW5kT2ZGcmFtZSAtIHRoaXMuc2FtcGxlSW5kZXg7XHJcbiAgICByZXR1cm4gc2tpcCA+IDAgPyB7IHNraXAgfSA6IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6Xovrnmsr/kv6Hlj7dcclxuICAgKiDlr7nlupTljp/op6PnoIHlmajnmoQgaW5zcGVjdF9lZGdlKCkgLSDnlKjkuo5CcmVha+ajgOa1i1xyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5zcGVjdEVkZ2Uocnh0eDogbnVtYmVyLCBzaWduYWw6IG51bWJlciwgaW52OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICBpZiAoaW52KSB7XHJcbiAgICAgIHNpZ25hbCA9IHNpZ25hbCA/IDAgOiAxO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghc2lnbmFsKSB7XHJcbiAgICAgIC8vIOS/oeWPt+WPmOS9ju+8jOW8gOWni+S4gOS4quaWsOeahEJyZWFr5qOA5rWL5Yy66Ze0XHJcbiAgICAgIHRoaXMuYnJlYWtTdGFydFtyeHR4XSA9IHRoaXMuc2FtcGxlSW5kZXg7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyDkv6Hlj7flj5jpq5jvvIzmmK/lkKbmnInkuIDkuKrmianlsZXnmoTkvY7kv6Hlj7flkajmnJ/vvJ9cclxuICAgIGlmICh0aGlzLmJyZWFrU3RhcnRbcnh0eF0gPT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZmYgPSB0aGlzLnNhbXBsZUluZGV4IC0gdGhpcy5icmVha1N0YXJ0W3J4dHhdO1xyXG4gICAgaWYgKGRpZmYgPj0gdGhpcy5icmVha01pblNhbXBsZUNvdW50KSB7XHJcbiAgICAgIGNvbnN0IHNzID0gdGhpcy5mcmFtZVN0YXJ0W3J4dHhdO1xyXG4gICAgICBjb25zdCBlcyA9IHRoaXMuc2FtcGxlSW5kZXg7XHJcbiAgICAgIHRoaXMuaGFuZGxlQnJlYWsocnh0eCwgc3MsIGVzKTtcclxuICAgIH1cclxuICAgIHRoaXMuYnJlYWtTdGFydFtyeHR4XSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6Xnqbrpl7LnirbmgIFcclxuICAgKiDlr7nlupTljp/op6PnoIHlmajnmoQgaW5zcGVjdF9pZGxlKClcclxuICAgKi9cclxuICBwcml2YXRlIGluc3BlY3RJZGxlKHJ4dHg6IG51bWJlciwgc2lnbmFsOiBudW1iZXIsIGludjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgaWYgKGludikge1xyXG4gICAgICBzaWduYWwgPSBzaWduYWwgPyAwIDogMTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXNpZ25hbCkge1xyXG4gICAgICAvLyDkvY7ovpPlhaXvvIzlgZzmraLmo4Dmn6VcclxuICAgICAgdGhpcy5pZGxlU3RhcnRbcnh0eF0gPSBudWxsO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6auY6L6T5YWl77yM5Yia5Yia6L6+5Yiw5oiW5LuN54S256iz5a6aXHJcbiAgICBpZiAodGhpcy5pZGxlU3RhcnRbcnh0eF0gPT09IG51bGwpIHtcclxuICAgICAgdGhpcy5pZGxlU3RhcnRbcnh0eF0gPSB0aGlzLnNhbXBsZUluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZmYgPSB0aGlzLnNhbXBsZUluZGV4IC0gdGhpcy5pZGxlU3RhcnRbcnh0eF07XHJcbiAgICBpZiAoZGlmZiA8IHRoaXMuZnJhbWVMZW5TYW1wbGVDb3VudCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3MgPSB0aGlzLmlkbGVTdGFydFtyeHR4XTtcclxuICAgIGNvbnN0IGVzID0gdGhpcy5zYW1wbGVJbmRleDtcclxuICAgIHRoaXMuaGFuZGxlSWRsZShyeHR4LCBzcywgZXMpO1xyXG4gICAgdGhpcy5pZGxlU3RhcnRbcnh0eF0gPSBlcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhkJyZWFr5p2h5Lu2XHJcbiAgICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIGhhbmRsZV9icmVhaygpXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVCcmVhayhyeHR4OiBudW1iZXIsIHNzOiBudW1iZXIsIGVzOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMucHV0KHNzLCBlcywge1xyXG4gICAgICB0eXBlOiBEZWNvZGVyT3V0cHV0VHlwZS5BTk5PVEFUSU9OLFxyXG4gICAgICBhbm5vdGF0aW9uVHlwZTogX0Fubi5fUlhfQlJFQUsgKyByeHR4LFxyXG4gICAgICB2YWx1ZXM6IFsnQnJlYWsgY29uZGl0aW9uJywgJ0JyZWFrJywgJ0JyaycsICdCJ11cclxuICAgIH0pO1xyXG4gICAgdGhpcy5zdGF0ZVtyeHR4XSA9ICdXQUlUIEZPUiBTVEFSVCBCSVQnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG56m66Zey54q25oCBXHJcbiAgICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIGhhbmRsZV9pZGxlKClcclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZUlkbGUoX3J4dHg6IG51bWJlciwgX3NzOiBudW1iZXIsIF9lczogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAvLyDnqbrpl7LnirbmgIHkuI3pnIDopoHnibnmrormmL7npLrvvIzlj6rorrDlvZXnirbmgIFcclxuICAgIC8vIFVBUlTnqbrpl7LnirbmgIHmo4DmtYtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluW9k+WJjemAmumBk+WAvFxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0Q3VycmVudENoYW5uZWxWYWx1ZShyeHR4OiBudW1iZXIsIHNhbXBsZUluZGV4PzogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGlmIChyeHR4ID49IHRoaXMuY2hhbm5lbERhdGEubGVuZ3RoIHx8ICF0aGlzLmNoYW5uZWxEYXRhW3J4dHhdKSB7XHJcbiAgICAgIHJldHVybiAxOyAvLyDnqbrpl7LnirbmgIFcclxuICAgIH1cclxuICAgIGNvbnN0IGNoYW5uZWwgPSB0aGlzLmNoYW5uZWxEYXRhW3J4dHhdO1xyXG4gICAgY29uc3QgaW5kZXggPSBzYW1wbGVJbmRleCAhPT0gdW5kZWZpbmVkID8gc2FtcGxlSW5kZXggOiB0aGlzLnNhbXBsZUluZGV4O1xyXG4gICAgcmV0dXJuIGluZGV4IDwgY2hhbm5lbC5sZW5ndGggPyBjaGFubmVsW2luZGV4XSA6IDE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmoLfmnKzngrnkvY3nva5cclxuICAgKiDlr7nlupTljp/op6PnoIHlmajnmoQgZ2V0X3NhbXBsZV9wb2ludCgpXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRTYW1wbGVQb2ludChyeHR4OiBudW1iZXIsIGJpdE51bTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IHBlcmMgPSAodGhpcy5zYW1wbGVQb2ludCA+PSAxICYmIHRoaXMuc2FtcGxlUG9pbnQgPD0gOTkpID8gdGhpcy5zYW1wbGVQb2ludCA6IDUwO1xyXG4gICAgY29uc3QgcGVyY0Zsb2F0ID0gcGVyYyAvIDEwMC4wO1xyXG4gICAgbGV0IGJpdFBvcyA9ICh0aGlzLmJpdFdpZHRoIC0gMSkgKiBwZXJjRmxvYXQ7XHJcbiAgICBiaXRQb3MgKz0gdGhpcy5mcmFtZVN0YXJ0W3J4dHhdO1xyXG4gICAgYml0UG9zICs9IGJpdE51bSAqIHRoaXMuYml0V2lkdGg7XHJcbiAgICByZXR1cm4gYml0UG9zO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qOA5p+l5qC35pysXHJcbiAgICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIGluc3BlY3Rfc2FtcGxlKClcclxuICAgKi9cclxuICBwcml2YXRlIGluc3BlY3RTYW1wbGUocnh0eDogbnVtYmVyLCBzaWduYWw6IG51bWJlciwgaW52OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICBpZiAoaW52KSB7XHJcbiAgICAgIHNpZ25hbCA9IHNpZ25hbCA/IDAgOiAxO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZVtyeHR4XTtcclxuICAgIHN3aXRjaCAoc3RhdGUpIHtcclxuICAgICAgY2FzZSAnV0FJVCBGT1IgU1RBUlQgQklUJzpcclxuICAgICAgICB0aGlzLndhaXRGb3JTdGFydEJpdChyeHR4LCBzaWduYWwpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdHRVQgU1RBUlQgQklUJzpcclxuICAgICAgICB0aGlzLmdldFN0YXJ0Qml0KHJ4dHgsIHNpZ25hbCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0dFVCBEQVRBIEJJVFMnOlxyXG4gICAgICAgIHRoaXMuZ2V0RGF0YUJpdHMocnh0eCwgc2lnbmFsKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnR0VUIFBBUklUWSBCSVQnOlxyXG4gICAgICAgIHRoaXMuZ2V0UGFyaXR5Qml0KHJ4dHgsIHNpZ25hbCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0dFVCBTVE9QIEJJVFMnOlxyXG4gICAgICAgIHRoaXMuZ2V0U3RvcEJpdHMocnh0eCwgc2lnbmFsKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOetieW+hei1t+Wni+S9jVxyXG4gICAqIOWvueW6lOWOn+ino+eggeWZqOeahCB3YWl0X2Zvcl9zdGFydF9iaXQoKVxyXG4gICAqL1xyXG4gIHByaXZhdGUgd2FpdEZvclN0YXJ0Qml0KHJ4dHg6IG51bWJlciwgc2lnbmFsOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIC8vIOS/neWtmOi1t+Wni+S9jeW8gOWni+eahOagt+acrOe8luWPt1xyXG4gICAgdGhpcy5mcmFtZVN0YXJ0W3J4dHhdID0gdGhpcy5zYW1wbGVJbmRleDtcclxuICAgIHRoaXMuZnJhbWVWYWxpZFtyeHR4XSA9IHRydWU7XHJcbiAgICB0aGlzLmN1ckZyYW1lQml0W3J4dHhdID0gMDtcclxuXHJcbiAgICB0aGlzLmFkdmFuY2VTdGF0ZShyeHR4LCBzaWduYWwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W6LW35aeL5L2NXHJcbiAgICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIGdldF9zdGFydF9iaXQoKVxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0U3RhcnRCaXQocnh0eDogbnVtYmVyLCBzaWduYWw6IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy5zdGFydEJpdFtyeHR4XSA9IHNpZ25hbDtcclxuICAgIHRoaXMuY3VyRnJhbWVCaXRbcnh0eF0rKztcclxuXHJcbiAgICAvLyDotbflp4vkvY3lv4XpobvmmK8wXHJcbiAgICBpZiAodGhpcy5zdGFydEJpdFtyeHR4XSAhPT0gMCkge1xyXG4gICAgICB0aGlzLnB1dCh0aGlzLmZyYW1lU3RhcnRbcnh0eF0sIHRoaXMuc2FtcGxlSW5kZXgsIHtcclxuICAgICAgICB0eXBlOiBEZWNvZGVyT3V0cHV0VHlwZS5BTk5PVEFUSU9OLFxyXG4gICAgICAgIGFubm90YXRpb25UeXBlOiBfQW5uLl9SWF9XQVJOICsgcnh0eCxcclxuICAgICAgICB2YWx1ZXM6IFsnRnJhbWUgZXJyb3InLCAnRnJhbWUgZXJyJywgJ0ZFJ11cclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuZnJhbWVWYWxpZFtyeHR4XSA9IGZhbHNlO1xyXG4gICAgICBjb25zdCBlcyA9IHRoaXMuc2FtcGxlSW5kZXggKyBNYXRoLmNlaWwodGhpcy5iaXRXaWR0aCAvIDIpO1xyXG4gICAgICB0aGlzLmFkdmFuY2VTdGF0ZShyeHR4LCBzaWduYWwsIHRydWUsIGVzKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmHjee9ruWGhemDqOeKtuaAgVxyXG4gICAgdGhpcy5jdXJEYXRhQml0W3J4dHhdID0gMDtcclxuICAgIHRoaXMuZGF0YVZhbHVlW3J4dHhdID0gMDtcclxuICAgIHRoaXMucGFyaXR5Qml0W3J4dHhdID0gLTE7XHJcbiAgICB0aGlzLnN0b3BCaXRzW3J4dHhdID0gW107XHJcbiAgICB0aGlzLnN0YXJ0U2FtcGxlW3J4dHhdID0gLTE7XHJcbiAgICB0aGlzLmRhdGFCaXRzW3J4dHhdID0gW107XHJcblxyXG4gICAgdGhpcy5wdXQodGhpcy5mcmFtZVN0YXJ0W3J4dHhdLCB0aGlzLnNhbXBsZUluZGV4LCB7XHJcbiAgICAgIHR5cGU6IERlY29kZXJPdXRwdXRUeXBlLkFOTk9UQVRJT04sXHJcbiAgICAgIGFubm90YXRpb25UeXBlOiBfQW5uLl9SWF9TVEFSVCArIHJ4dHgsXHJcbiAgICAgIHZhbHVlczogWydTdGFydCBiaXQnLCAnU3RhcnQnLCAnUyddXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFkdmFuY2VTdGF0ZShyeHR4LCBzaWduYWwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5pWw5o2u5L2NXHJcbiAgICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIGdldF9kYXRhX2JpdHMoKSAtIOWujOaVtOWunueOsOWMheaLrOWMheWkhOeQhlxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0RGF0YUJpdHMocnh0eDogbnVtYmVyLCBzaWduYWw6IG51bWJlcik6IHZvaWQge1xyXG4gICAgLy8g5L+d5a2Y56ys5LiA5Liq5pWw5o2u5L2N55qE5qC35pys57yW5Y+3XHJcbiAgICBpZiAodGhpcy5zdGFydFNhbXBsZVtyeHR4XSA9PT0gLTEpIHtcclxuICAgICAgdGhpcy5zdGFydFNhbXBsZVtyeHR4XSA9IHRoaXMuc2FtcGxlSW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wdXQodGhpcy5zYW1wbGVJbmRleCwgdGhpcy5zYW1wbGVJbmRleCArIDEsIHtcclxuICAgICAgdHlwZTogRGVjb2Rlck91dHB1dFR5cGUuQU5OT1RBVElPTixcclxuICAgICAgYW5ub3RhdGlvblR5cGU6IF9Bbm4uX1JYX0RBVEFfQklUICsgcnh0eCxcclxuICAgICAgdmFsdWVzOiBbc2lnbmFsLnRvU3RyaW5nKCldXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDlrZjlgqjkuKrliKvmlbDmja7kvY0gLSDnsr7noa7lr7nlupTljp/niYjnmoTlrZjlgqjmoLzlvI9cclxuICAgIGNvbnN0IGhhbGZCaXQgPSBNYXRoLmZsb29yKHRoaXMuYml0V2lkdGggLyAyKTtcclxuICAgIHRoaXMuZGF0YUJpdHNbcnh0eF0ucHVzaCh7XHJcbiAgICAgIHZhbHVlOiBzaWduYWwsXHJcbiAgICAgIHN0YXJ0U2FtcGxlOiB0aGlzLnNhbXBsZUluZGV4IC0gaGFsZkJpdCxcclxuICAgICAgZW5kU2FtcGxlOiB0aGlzLnNhbXBsZUluZGV4ICsgaGFsZkJpdFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmN1ckZyYW1lQml0W3J4dHhdKys7XHJcblxyXG4gICAgdGhpcy5jdXJEYXRhQml0W3J4dHhdKys7XHJcbiAgICBpZiAodGhpcy5jdXJEYXRhQml0W3J4dHhdIDwgdGhpcy5kYXRhQml0c0NvdW50KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyDovazmjaLntK/np6/nmoTmlbDmja7kvY3kuLrmlbDmja7lgLwgLSDlr7nlupTljp/niYjnmoRiaXRwYWNr6YC76L6RXHJcbiAgICBjb25zdCBiaXRzID0gdGhpcy5kYXRhQml0c1tyeHR4XS5tYXAoYiA9PiBiLnZhbHVlKTtcclxuICAgIGlmICh0aGlzLmJpdE9yZGVyID09PSAnbXNiLWZpcnN0Jykge1xyXG4gICAgICBiaXRzLnJldmVyc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDkvb/nlKhiaXRwYWNr566X5rOVXHJcbiAgICB0aGlzLmRhdGFWYWx1ZVtyeHR4XSA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdGhpcy5kYXRhVmFsdWVbcnh0eF0gfD0gYml0c1tpXSA8PCBpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOi+k+WHuuaVsOaNruazqOmHilxyXG4gICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRWYWx1ZSh0aGlzLmRhdGFWYWx1ZVtyeHR4XSk7XHJcbiAgICBpZiAoZm9ybWF0dGVkICE9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMucHV0KHRoaXMuc3RhcnRTYW1wbGVbcnh0eF0sIHRoaXMuc2FtcGxlSW5kZXgsIHtcclxuICAgICAgICB0eXBlOiBEZWNvZGVyT3V0cHV0VHlwZS5BTk5PVEFUSU9OLFxyXG4gICAgICAgIGFubm90YXRpb25UeXBlOiBfQW5uLl9SWF9EQVRBICsgcnh0eCxcclxuICAgICAgICB2YWx1ZXM6IFtmb3JtYXR0ZWRdLFxyXG4gICAgICAgIHJhd0RhdGE6IHRoaXMuZGF0YVZhbHVlW3J4dHhdXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWkhOeQhuWMhemAu+i+kSAtIOWvueW6lOWOn+eJiOeahGhhbmRsZV9wYWNrZXRcclxuICAgIHRoaXMuaGFuZGxlUGFja2V0KHJ4dHgpO1xyXG5cclxuICAgIHRoaXMuZGF0YUJpdHNbcnh0eF0gPSBbXTtcclxuICAgIHRoaXMuYWR2YW5jZVN0YXRlKHJ4dHgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG5YyF6YC76L6RXHJcbiAgICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIGhhbmRsZV9wYWNrZXQoKVxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFuZGxlUGFja2V0KHJ4dHg6IG51bWJlcik6IHZvaWQge1xyXG4gICAgLy8g566A5YyW5a6e546wIC0g5Y+v5qC55o2u6ZyA6KaB5omp5bGV5YyF5aSE55CG5Yqf6IO9XHJcbiAgICAvLyDov5nph4zkuLvopoHnlKjkuo7orrDlvZXmlbDmja7liLDljIXnvJPlrZhcclxuICAgIGlmICh0aGlzLnBhY2tldENhY2hlW3J4dHhdLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLnNzUGFja2V0W3J4dHhdID0gdGhpcy5zdGFydFNhbXBsZVtyeHR4XTtcclxuICAgIH1cclxuICAgIHRoaXMucGFja2V0Q2FjaGVbcnh0eF0ucHVzaCh0aGlzLmRhdGFWYWx1ZVtyeHR4XSk7XHJcblxyXG4gICAgLy8g566A5Y2V55qE5YyF57uI5q2i5p2h5Lu2IC0g5Y+v6YWN572uXHJcbiAgICBpZiAodGhpcy5wYWNrZXRDYWNoZVtyeHR4XS5sZW5ndGggPj0gMTYpIHsgLy8g5pyA5aSaMTblrZfoioLnmoTljIVcclxuICAgICAgdGhpcy5lc1BhY2tldFtyeHR4XSA9IHRoaXMuc2FtcGxlSW5kZXg7XHJcbiAgICAgIGxldCBwYWNrZXRTdHJpbmcgPSAnJztcclxuICAgICAgZm9yIChjb25zdCBieXRlIG9mIHRoaXMucGFja2V0Q2FjaGVbcnh0eF0pIHtcclxuICAgICAgICBwYWNrZXRTdHJpbmcgKz0gdGhpcy5mb3JtYXRWYWx1ZShieXRlKTtcclxuICAgICAgICBpZiAodGhpcy5mb3JtYXQgIT09ICdhc2NpaScpIHtcclxuICAgICAgICAgIHBhY2tldFN0cmluZyArPSAnICc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmZvcm1hdCAhPT0gJ2FzY2lpJyAmJiBwYWNrZXRTdHJpbmcuZW5kc1dpdGgoJyAnKSkge1xyXG4gICAgICAgIHBhY2tldFN0cmluZyA9IHBhY2tldFN0cmluZy5zbGljZSgwLCAtMSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucHV0KHRoaXMuc3NQYWNrZXRbcnh0eF0hLCB0aGlzLmVzUGFja2V0W3J4dHhdISwge1xyXG4gICAgICAgIHR5cGU6IERlY29kZXJPdXRwdXRUeXBlLkFOTk9UQVRJT04sXHJcbiAgICAgICAgYW5ub3RhdGlvblR5cGU6IF9Bbm4uX1JYX1BBQ0tFVCArIHJ4dHgsXHJcbiAgICAgICAgdmFsdWVzOiBbcGFja2V0U3RyaW5nXVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5wYWNrZXRDYWNoZVtyeHR4XSA9IFtdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5qCh6aqM5L2NXHJcbiAgICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIGdldF9wYXJpdHlfYml0KClcclxuICAgKi9cclxuICBwcml2YXRlIGdldFBhcml0eUJpdChyeHR4OiBudW1iZXIsIHNpZ25hbDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLnBhcml0eUJpdFtyeHR4XSA9IHNpZ25hbDtcclxuICAgIHRoaXMuY3VyRnJhbWVCaXRbcnh0eF0rKztcclxuXHJcbiAgICBpZiAocGFyaXR5T2sodGhpcy5wYXJpdHksIHRoaXMucGFyaXR5Qml0W3J4dHhdLCB0aGlzLmRhdGFWYWx1ZVtyeHR4XSwgdGhpcy5kYXRhQml0c0NvdW50KSkge1xyXG4gICAgICB0aGlzLnB1dCh0aGlzLnNhbXBsZUluZGV4LCB0aGlzLnNhbXBsZUluZGV4ICsgMSwge1xyXG4gICAgICAgIHR5cGU6IERlY29kZXJPdXRwdXRUeXBlLkFOTk9UQVRJT04sXHJcbiAgICAgICAgYW5ub3RhdGlvblR5cGU6IF9Bbm4uX1JYX1BBUklUWV9PSyArIHJ4dHgsXHJcbiAgICAgICAgdmFsdWVzOiBbJ1Bhcml0eSBiaXQnLCAnUGFyaXR5JywgJ1AnXVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucHV0KHRoaXMuc2FtcGxlSW5kZXgsIHRoaXMuc2FtcGxlSW5kZXggKyAxLCB7XHJcbiAgICAgICAgdHlwZTogRGVjb2Rlck91dHB1dFR5cGUuQU5OT1RBVElPTixcclxuICAgICAgICBhbm5vdGF0aW9uVHlwZTogX0Fubi5fUlhfUEFSSVRZX0VSUiArIHJ4dHgsXHJcbiAgICAgICAgdmFsdWVzOiBbJ1Bhcml0eSBlcnJvcicsICdQYXJpdHkgZXJyJywgJ1BFJ11cclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuZnJhbWVWYWxpZFtyeHR4XSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYWR2YW5jZVN0YXRlKHJ4dHgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5YGc5q2i5L2NXHJcbiAgICog5a+55bqU5Y6f6Kej56CB5Zmo55qEIGdldF9zdG9wX2JpdHMoKVxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0U3RvcEJpdHMocnh0eDogbnVtYmVyLCBzaWduYWw6IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy5zdG9wQml0c1tyeHR4XS5wdXNoKHNpZ25hbCk7XHJcbiAgICB0aGlzLmN1ckZyYW1lQml0W3J4dHhdKys7XHJcblxyXG4gICAgLy8g5YGc5q2i5L2N5b+F6aG75pivMVxyXG4gICAgaWYgKHNpZ25hbCAhPT0gMSkge1xyXG4gICAgICB0aGlzLnB1dCh0aGlzLnNhbXBsZUluZGV4LCB0aGlzLnNhbXBsZUluZGV4ICsgMSwge1xyXG4gICAgICAgIHR5cGU6IERlY29kZXJPdXRwdXRUeXBlLkFOTk9UQVRJT04sXHJcbiAgICAgICAgYW5ub3RhdGlvblR5cGU6IF9Bbm4uX1JYX1dBUk4gKyByeHR4LFxyXG4gICAgICAgIHZhbHVlczogWydGcmFtZSBlcnJvcicsICdGcmFtZSBlcnInLCAnRkUnXVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5mcmFtZVZhbGlkW3J4dHhdID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wdXQodGhpcy5zYW1wbGVJbmRleCwgdGhpcy5zYW1wbGVJbmRleCArIDEsIHtcclxuICAgICAgdHlwZTogRGVjb2Rlck91dHB1dFR5cGUuQU5OT1RBVElPTixcclxuICAgICAgYW5ub3RhdGlvblR5cGU6IF9Bbm4uX1JYX1NUT1AgKyByeHR4LFxyXG4gICAgICB2YWx1ZXM6IFsnU3RvcCBiaXQnLCAnU3RvcCcsICdUJ11cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOajgOafpeaYr+WQpuaUtumbhuS6huaJgOacieWBnOatouS9jVxyXG4gICAgaWYgKHRoaXMuc3RvcEJpdHNbcnh0eF0ubGVuZ3RoID49IHRoaXMuc3RvcEJpdHNDb3VudCkge1xyXG4gICAgICB0aGlzLmFkdmFuY2VTdGF0ZShyeHR4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaOqOi/m+eKtuaAgVxyXG4gICAqIOWvueW6lOWOn+ino+eggeWZqOeahCBhZHZhbmNlX3N0YXRlKCkgLSDlrozmlbTlrp7njrDnirbmgIHovazmjaLpgLvovpFcclxuICAgKi9cclxuICBwcml2YXRlIGFkdmFuY2VTdGF0ZShyeHR4OiBudW1iZXIsIHNpZ25hbD86IG51bWJlciwgZmF0YWwgPSBmYWxzZSwgaWRsZT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgY29uc3QgZnJhbWVFbmQgPSB0aGlzLmZyYW1lU3RhcnRbcnh0eF0gKyB0aGlzLmZyYW1lTGVuU2FtcGxlQ291bnQ7XHJcblxyXG4gICAgaWYgKGlkbGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAvLyDlvZPosIPnlKjogIXor7fmsYLml7bvvIzlnKjosIPnlKjogIXmjIflrprnmoTkvY3nva7lkI7lvIDlp4vlj6bkuIDkuKrvvIjmvZzlnKjnmoTvvInnqbrpl7LmnJ9cclxuICAgICAgdGhpcy5pZGxlU3RhcnRbcnh0eF0gPSBpZGxlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChmYXRhbCkge1xyXG4gICAgICAvLyDlvZPosIPnlKjogIXor7fmsYLml7bvvIzkuI3liY3ov5vliLDkuIvkuIDkuKpVQVJU5bin5a2X5q6177yM6ICM5piv5YmN6L+b5Yiw5LiL5LiA5LiqU1RBUlTkvY3nmoTlvIDlp4tcclxuICAgICAgdGhpcy5zdGF0ZVtyeHR4XSA9ICdXQUlUIEZPUiBTVEFSVCBCSVQnO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5o6o6L+b5Yiw5LiL5LiA5Liq6aKE5pyf55qEVUFSVOW4p+Wtl+auteOAguWkhOeQhuWPr+mAieWtl+auteeahOe8uuWkseOAglxyXG4gICAgLy8g5Zyo77yI5Y+v6YCJ77yJU1RPUOS9jeWtl+auteWQjuW8uuWItuaJq+aPj+S4i+S4gOS4qklETEXvvIzku6Xkvr/osIPnlKjogIXml6DpnIDlpITnkIblj6/pgInlrZfmrrXnmoTlrZjlnKjjgIJcclxuICAgIHN3aXRjaCAodGhpcy5zdGF0ZVtyeHR4XSkge1xyXG4gICAgICBjYXNlICdXQUlUIEZPUiBTVEFSVCBCSVQnOlxyXG4gICAgICAgIHRoaXMuc3RhdGVbcnh0eF0gPSAnR0VUIFNUQVJUIEJJVCc7XHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgY2FzZSAnR0VUIFNUQVJUIEJJVCc6XHJcbiAgICAgICAgdGhpcy5zdGF0ZVtyeHR4XSA9ICdHRVQgREFUQSBCSVRTJztcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBjYXNlICdHRVQgREFUQSBCSVRTJzpcclxuICAgICAgICB0aGlzLnN0YXRlW3J4dHhdID0gJ0dFVCBQQVJJVFkgQklUJztcclxuICAgICAgICBpZiAodGhpcy5wYXJpdHkgIT09ICdub25lJykge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGQUxMVEhST1VHSCAtIOayoeacieagoemqjOS9jeaXtuebtOaOpei/m+WFpeWBnOatouS9jVxyXG5cclxuICAgICAgY2FzZSAnR0VUIFBBUklUWSBCSVQnOlxyXG4gICAgICAgIHRoaXMuc3RhdGVbcnh0eF0gPSAnR0VUIFNUT1AgQklUUyc7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RvcEJpdHNDb3VudCA+IDApIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRkFMTFRIUk9VR0ggLSDmsqHmnInlgZzmraLkvY3ml7bnm7TmjqXov5vlhaXluKflpITnkIZcclxuXHJcbiAgICAgIGNhc2UgJ0dFVCBTVE9QIEJJVFMnOlxyXG4gICAgICAgIC8vIOWQjuWkhOeQhuS5i+WJjeaOpeaUtueahFVBUlTluKfjgILlsIbor7vlj5bkvY3nva7mjqjov5vliLDluKfmnIDlkI7kuIDkvY3ml7bpl7TkuYvlkI7jgIJcclxuICAgICAgICAvLyDov5nmoLfkuIvkuIDkuKpTVEFSVOS9jeeahOW8gOWni+WwseS4jeS8muiQveWcqOS5i+WJjeaOpeaUtueahFVBUlTluKfnmoTmnKvlsL7jgIJcclxuICAgICAgICAvLyDov5nmj5Dpq5jkuoblnKjmnInmlYXpmpzovpPlhaXmlbDmja7ml7bnmoTpsoHmo5LmgKfjgIJcclxuICAgICAgICBjb25zdCBzcyA9IHRoaXMuZnJhbWVTdGFydFtyeHR4XTtcclxuICAgICAgICBjb25zdCBlcyA9IHRoaXMuc2FtcGxlSW5kZXggKyBNYXRoLmNlaWwodGhpcy5iaXRXaWR0aCAvIDIpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlRnJhbWUocnh0eCwgc3MsIGVzKTtcclxuICAgICAgICB0aGlzLnN0YXRlW3J4dHhdID0gJ1dBSVQgRk9SIFNUQVJUIEJJVCc7XHJcbiAgICAgICAgdGhpcy5pZGxlU3RhcnRbcnh0eF0gPSBmcmFtZUVuZDtcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vIOacquWkhOeQhueahOeKtuaAge+8jOWunumZheS4iuaYr+e8lueoi+mUmeivr1xyXG4gICAgICAgIHRoaXMuc3RhdGVbcnh0eF0gPSAnV0FJVCBGT1IgU1RBUlQgQklUJztcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIblrozmlbTluKdcclxuICAgKiDlr7nlupTljp/op6PnoIHlmajnmoQgaGFuZGxlX2ZyYW1lKClcclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZUZyYW1lKF9yeHR4OiBudW1iZXIsIF9zczogbnVtYmVyLCBfZXM6IG51bWJlcik6IHZvaWQge1xyXG4gICAgLy8g6L6T5Ye65a6M5pW05bin5L+h5oGvXHJcbiAgICAvLyBVQVJU5bin5aSE55CG5a6M5oiQXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmoLzlvI/ljJblgLxcclxuICAgKiDlr7nlupTljp/op6PnoIHlmajnmoQgZm9ybWF0X3ZhbHVlKClcclxuICAgKi9cclxuICBwcml2YXRlIGZvcm1hdFZhbHVlKHZhbHVlOiBudW1iZXIpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgIGNvbnN0IGJpdHMgPSB0aGlzLmRhdGFCaXRzQ291bnQ7XHJcblxyXG4gICAgc3dpdGNoICh0aGlzLmZvcm1hdCkge1xyXG4gICAgICBjYXNlICdhc2NpaSc6IHtcclxuICAgICAgICBpZiAodmFsdWUgPj0gMzIgJiYgdmFsdWUgPD0gMTI2KSB7XHJcbiAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IF9oZXhmbXQgPSBiaXRzIDw9IDggPyAnW3s6MDJYfV0nIDogJ1t7OjAzWH1dJztcclxuICAgICAgICByZXR1cm4gYFske3ZhbHVlLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLnBhZFN0YXJ0KGJpdHMgPD0gOCA/IDIgOiAzLCAnMCcpfV1gO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdkZWMnOlxyXG4gICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygxMCk7XHJcblxyXG4gICAgICBjYXNlICdoZXgnOiB7XHJcbiAgICAgICAgY29uc3QgaGV4RGlnaXRzID0gTWF0aC5jZWlsKGJpdHMgLyA0KTtcclxuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkucGFkU3RhcnQoaGV4RGlnaXRzLCAnMCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdvY3QnOiB7XHJcbiAgICAgICAgY29uc3Qgb2N0RGlnaXRzID0gTWF0aC5jZWlsKGJpdHMgLyAzKTtcclxuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoOCkucGFkU3RhcnQob2N0RGlnaXRzLCAnMCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYXNlICdiaW4nOiB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKDIpLnBhZFN0YXJ0KGJpdHMsICcwJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDph43nva7op6PnoIHlmajnirbmgIFcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgcmVzZXQoKTogdm9pZCB7XHJcbiAgICBzdXBlci5yZXNldCgpO1xyXG4gICAgdGhpcy5mcmFtZVN0YXJ0ID0gWy0xLCAtMV07XHJcbiAgICB0aGlzLmZyYW1lVmFsaWQgPSBbdHJ1ZSwgdHJ1ZV07XHJcbiAgICB0aGlzLmN1ckZyYW1lQml0ID0gWzAsIDBdO1xyXG4gICAgdGhpcy5zdGFydEJpdCA9IFstMSwgLTFdO1xyXG4gICAgdGhpcy5jdXJEYXRhQml0ID0gWzAsIDBdO1xyXG4gICAgdGhpcy5kYXRhVmFsdWUgPSBbMCwgMF07XHJcbiAgICB0aGlzLnBhcml0eUJpdCA9IFstMSwgLTFdO1xyXG4gICAgdGhpcy5zdG9wQml0cyA9IFtbXSwgW11dO1xyXG4gICAgdGhpcy5zdGFydFNhbXBsZSA9IFstMSwgLTFdO1xyXG4gICAgdGhpcy5zdGF0ZSA9IFsnV0FJVCBGT1IgU1RBUlQgQklUJywgJ1dBSVQgRk9SIFNUQVJUIEJJVCddO1xyXG4gICAgdGhpcy5kYXRhQml0cyA9IFtbXSwgW11dO1xyXG4gICAgdGhpcy5icmVha1N0YXJ0ID0gW251bGwsIG51bGxdO1xyXG4gICAgdGhpcy5wYWNrZXRDYWNoZSA9IFtbXSwgW11dO1xyXG4gICAgdGhpcy5zc1BhY2tldCA9IFtudWxsLCBudWxsXTtcclxuICAgIHRoaXMuZXNQYWNrZXQgPSBbbnVsbCwgbnVsbF07XHJcbiAgICB0aGlzLmlkbGVTdGFydCA9IFtudWxsLCBudWxsXTtcclxuICB9XHJcbn1cclxuXHJcbi8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuIl0sInZlcnNpb24iOjN9