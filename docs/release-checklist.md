# 发布检查清单

在发布新版本之前，请确保完成以下所有检查项。

## 📋 发布前检查清单

### 🔧 开发完成
- [ ] 所有计划功能已实现
- [ ] 所有已知问题已修复
- [ ] 代码审查已完成
- [ ] 性能测试通过
- [ ] 兼容性测试通过

### 📝 代码质量
- [ ] TypeScript 类型检查通过 (`npm run typecheck`)
- [ ] ESLint 检查通过 (`npm run lint`)
- [ ] Prettier 格式检查通过 (`npm run format:check`)
- [ ] 所有 TODO 和 FIXME 已处理
- [ ] 敏感信息已移除（密钥、密码等）

### 🧪 测试覆盖
- [ ] 单元测试覆盖率 ≥ 80%
- [ ] 所有单元测试通过
- [ ] 集成测试通过
- [ ] 端到端测试通过
- [ ] 性能基准测试通过
- [ ] 内存泄漏测试通过
- [ ] 跨平台兼容性测试通过

### 📚 文档更新
- [ ] README.md 内容完整且最新
- [ ] CHANGELOG.md 已更新新版本信息
- [ ] API 文档已更新
- [ ] 用户手册已更新
- [ ] 开发者指南已更新
- [ ] 代码注释完整

### 🔨 构建验证
- [ ] 开发构建成功 (`npm run build`)
- [ ] 生产构建成功 (`npm run build:production`)
- [ ] 构建输出文件完整
- [ ] 构建包大小合理 (< 50MB)
- [ ] Source map 生成正确

### 📦 包配置
- [ ] package.json 版本号正确
- [ ] package.json 元数据完整
- [ ] VSCode 引擎版本要求正确
- [ ] 依赖版本固定和安全
- [ ] 发布文件列表正确

### 🔒 安全检查
- [ ] 依赖安全审计通过 (`npm audit`)
- [ ] 无高风险安全漏洞
- [ ] 敏感文件已排除
- [ ] 许可证兼容性检查

### 🎯 功能验证
- [ ] 插件安装测试
- [ ] 核心功能测试
- [ ] 硬件设备连接测试
- [ ] 数据采集功能测试
- [ ] 协议解码功能测试
- [ ] 文件导入导出测试

## 🚀 发布流程

### 1. 版本准备
```bash
# 运行发布前检查
npm run release:check

# 更新版本号
npm run version:bump [patch|minor|major]

# 准备发布
npm run version:prepare
```

### 2. 最终验证
```bash
# 创建发布包
npm run package

# 本地安装测试
code --install-extension vscode-logic-analyzer-*.vsix

# 功能验证测试
# - 打开 VSCode
# - 测试插件基本功能
# - 验证设备连接
# - 测试数据采集
```

### 3. 发布执行
```bash
# 发布到 VSCode 市场
npm run publish

# 推送代码和标签
git push origin main --tags

# 创建 GitHub Release
# - 访问 GitHub Releases 页面
# - 创建新的 Release
# - 上传 .vsix 文件
# - 填写 Release Notes
```

### 4. 发布后验证
- [ ] VSCode 市场页面显示正常
- [ ] 新版本可以搜索到
- [ ] 安装和更新正常
- [ ] 功能运行正常
- [ ] 用户反馈监控

## 📊 发布质量门槛

### 必须满足（阻塞发布）
- ❌ TypeScript 编译错误
- ❌ 单元测试失败
- ❌ 构建失败
- ❌ 高风险安全漏洞
- ❌ 核心功能异常

### 建议满足（警告但不阻塞）
- ⚠️ 测试覆盖率 < 80%
- ⚠️ ESLint 警告
- ⚠️ 文档不完整
- ⚠️ 性能基准未达标
- ⚠️ 依赖版本过时

## 🔧 发布脚本说明

### release:check
运行完整的发布前检查，包括：
- 项目结构验证
- 代码质量检查
- 测试执行和覆盖率
- 构建验证
- 安全审计
- 性能检查

### version:bump
自动更新版本号并同步到相关文件：
- package.json
- CHANGELOG.md
- README.md
- 源代码中的版本常量

### version:prepare
执行完整的发布准备流程：
- Git 状态检查
- 发布前检查
- 生产构建
- 创建 Git 标签
- 更新文档

## 🎯 版本发布策略

### 语义化版本控制
- **主版本号 (X.0.0)**: 不兼容的 API 更改
- **次版本号 (0.X.0)**: 向后兼容的功能性新增
- **修订号 (0.0.X)**: 向后兼容的问题修正

### 发布分支策略
- `main`: 稳定发布分支
- `develop`: 开发集成分支
- `feature/*`: 功能开发分支
- `hotfix/*`: 紧急修复分支

### 发布周期
- **主版本**: 每 6-12 个月
- **次版本**: 每 1-3 个月
- **修订版本**: 按需发布
- **预发布**: 主要版本前 2-4 周

## 📱 发布后监控

### 监控指标
- [ ] 下载量统计
- [ ] 安装成功率
- [ ] 用户反馈评分
- [ ] 问题报告数量
- [ ] 性能指标
- [ ] 崩溃报告

### 回滚准备
如果发现重大问题：
1. 立即从市场下架问题版本
2. 发布热修复版本
3. 通知用户降级步骤
4. 记录问题和改进措施

## 🆘 紧急发布流程

对于安全修复或重大问题：

1. **快速通道**
   - 跳过部分非关键检查
   - 优先修复问题
   - 加速测试和验证

2. **通知机制**
   - 提前通知用户
   - 说明问题影响
   - 提供临时解决方案

3. **后续跟进**
   - 监控修复效果
   - 收集用户反馈
   - 完善预防措施

---

## 📞 联系方式

**发布负责人**: 项目维护团队
**紧急联系**: [技术支持邮箱]
**社区反馈**: [GitHub Issues/Discussions]

---

**⚠️ 重要提醒**:
- 发布前必须在多个环境测试
- 保留发布包用于可能的回滚
- 密切关注发布后 24 小时的用户反馈
- 记录每次发布的经验教训