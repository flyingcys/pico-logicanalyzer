/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/drivers/AnalyzerDriverBase.ts":
/*!*******************************************!*\
  !*** ./src/drivers/AnalyzerDriverBase.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.NetConfig = exports.CaptureRequest = exports.OutputPacket = exports.AnalyzerDriverBase = void 0;\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst AnalyzerTypes_1 = __webpack_require__(/*! ../models/AnalyzerTypes */ \"./src/models/AnalyzerTypes.ts\");\n/**\n * 逻辑分析器驱动抽象基类\n * 基于C# AnalyzerDriverBase的TypeScript移植\n */\nclass AnalyzerDriverBase extends events_1.EventEmitter {\n    // 计算属性\n    get minFrequency() {\n        return Math.floor((this.maxFrequency * 2) / 65535);\n    }\n    // 设备信息方法\n    getCaptureMode(channels) {\n        const maxChannel = Math.max(...channels, 0);\n        if (maxChannel < 8)\n            return AnalyzerTypes_1.CaptureMode.Channels_8;\n        if (maxChannel < 16)\n            return AnalyzerTypes_1.CaptureMode.Channels_16;\n        return AnalyzerTypes_1.CaptureMode.Channels_24;\n    }\n    getLimits(channels) {\n        const mode = this.getCaptureMode(channels);\n        // 根据通道模式计算总样本数\n        let divisor;\n        switch (mode) {\n            case AnalyzerTypes_1.CaptureMode.Channels_8:\n                divisor = 1;\n                break;\n            case AnalyzerTypes_1.CaptureMode.Channels_16:\n                divisor = 2;\n                break;\n            case AnalyzerTypes_1.CaptureMode.Channels_24:\n                divisor = 4;\n                break;\n        }\n        const totalSamples = Math.floor(this.bufferSize / divisor);\n        const limits = {\n            minPreSamples: 2,\n            maxPreSamples: Math.floor(totalSamples / 10),\n            minPostSamples: 2,\n            maxPostSamples: totalSamples - 2,\n            get maxTotalSamples() {\n                return this.minPreSamples + this.maxPostSamples;\n            }\n        };\n        return limits;\n    }\n    getDeviceInfo() {\n        const limits = [\n            this.getLimits(Array.from({ length: 8 }, (_, i) => i)),\n            this.getLimits(Array.from({ length: 16 }, (_, i) => i)),\n            this.getLimits(Array.from({ length: 24 }, (_, i) => i)) // 0-23\n        ];\n        return {\n            name: this.deviceVersion ?? 'Unknown',\n            maxFrequency: this.maxFrequency,\n            blastFrequency: this.blastFrequency,\n            channels: this.channelCount,\n            bufferSize: this.bufferSize,\n            modeLimits: limits\n        };\n    }\n    // 网络方法 - 虚拟实现，子类可以重写\n    getVoltageStatus() {\n        return Promise.resolve('UNSUPPORTED');\n    }\n    sendNetworkConfig(accessPointName, password, ipAddress, port) {\n        return Promise.resolve(false);\n    }\n    // 资源清理\n    dispose() {\n        this.removeAllListeners();\n    }\n    // 事件触发辅助方法\n    emitCaptureCompleted(args) {\n        this.emit('captureCompleted', args);\n    }\n    emitError(error) {\n        this.emit('error', error);\n    }\n    emitStatusChanged(status) {\n        this.emit('statusChanged', status);\n    }\n}\nexports.AnalyzerDriverBase = AnalyzerDriverBase;\n/**\n * 输出数据包类\n * 实现C#版本的OutputPacket功能，包括转义机制\n */\nclass OutputPacket {\n    constructor() {\n        this.dataBuffer = [];\n    }\n    addByte(value) {\n        this.dataBuffer.push(value & 0xff);\n    }\n    addBytes(values) {\n        for (const value of values) {\n            this.addByte(value);\n        }\n    }\n    addString(text) {\n        // ASCII编码\n        for (let i = 0; i < text.length; i++) {\n            this.addByte(text.charCodeAt(i));\n        }\n    }\n    addStruct(struct) {\n        // TypeScript中的结构体序列化\n        const buffer = this.serializeStruct(struct);\n        this.addBytes(buffer);\n    }\n    clear() {\n        this.dataBuffer = [];\n    }\n    /**\n     * 序列化数据包，包含转义机制\n     * 协议格式: 0x55 0xAA [转义后的数据] 0xAA 0x55\n     * 转义规则: 0xAA/0x55/0xF0 -> 0xF0 + (原值 ^ 0xF0)\n     */\n    serialize() {\n        const finalData = [];\n        // 起始标记\n        finalData.push(0x55, 0xaa);\n        // 转义数据\n        for (let i = 0; i < this.dataBuffer.length; i++) {\n            const byte = this.dataBuffer[i];\n            if (byte === 0xaa || byte === 0x55 || byte === 0xf0) {\n                finalData.push(0xf0);\n                finalData.push(byte ^ 0xf0);\n            }\n            else {\n                finalData.push(byte);\n            }\n        }\n        // 结束标记\n        finalData.push(0xaa, 0x55);\n        return new Uint8Array(finalData);\n    }\n    /**\n     * 结构体序列化辅助方法\n     */\n    serializeStruct(struct) {\n        // 这里需要根据具体的结构体类型进行序列化\n        // 实际实现会在具体的结构体类中完成\n        if (struct && typeof struct.serialize === 'function') {\n            return struct.serialize();\n        }\n        throw new Error('结构体必须实现serialize方法');\n    }\n}\nexports.OutputPacket = OutputPacket;\n/**\n * 采集请求结构\n * 对应C#的CaptureRequest结构体，必须保持精确的内存布局\n */\nclass CaptureRequest {\n    constructor() {\n        this.triggerType = 0; // byte\n        this.trigger = 0; // byte\n        this.invertedOrCount = 0; // byte\n        this.triggerValue = 0; // ushort (16位)\n        this.channelCount = 0; // byte\n        this.frequency = 0; // uint32 (32位)\n        this.preSamples = 0; // uint32 (32位)\n        this.postSamples = 0; // uint32 (32位)\n        this.loopCount = 0; // byte\n        this.measure = 0; // byte\n        this.captureMode = 0; // byte\n        this.channels = new Uint8Array(24);\n    }\n    /**\n     * 从CaptureConfiguration创建CaptureRequest\n     */\n    static fromConfiguration(config) {\n        const request = new CaptureRequest();\n        request.triggerType = config.triggerType;\n        request.trigger = config.triggerChannel;\n        request.invertedOrCount = config.triggerInverted ? 1 : 0;\n        request.triggerValue = config.triggerPattern || 0;\n        request.channelCount = config.captureChannels.length;\n        request.frequency = config.frequency;\n        request.preSamples = config.preTriggerSamples;\n        request.postSamples = config.postTriggerSamples;\n        request.loopCount = config.loopCount;\n        request.measure = config.measureBursts ? 1 : 0;\n        request.captureMode = config.captureMode || AnalyzerTypes_1.CaptureMode.Channels_8;\n        // 设置通道数组\n        for (let i = 0; i < config.captureChannels.length && i < 24; i++) {\n            request.channels[config.captureChannels[i]] = 1;\n        }\n        return request;\n    }\n    /**\n     * 序列化为字节数组，保持与C#版本的精确布局\n     */\n    serialize() {\n        const buffer = new ArrayBuffer(this.getSize());\n        const view = new DataView(buffer);\n        let offset = 0;\n        // 按照C#结构体的精确顺序写入\n        view.setUint8(offset++, this.triggerType);\n        view.setUint8(offset++, this.trigger);\n        view.setUint8(offset++, this.invertedOrCount);\n        view.setUint16(offset, this.triggerValue, true); // little-endian\n        offset += 2;\n        // 通道数组\n        for (let i = 0; i < 24; i++) {\n            view.setUint8(offset++, this.channels[i]);\n        }\n        view.setUint8(offset++, this.channelCount);\n        view.setUint32(offset, this.frequency, true); // little-endian\n        offset += 4;\n        view.setUint32(offset, this.preSamples, true); // little-endian\n        offset += 4;\n        view.setUint32(offset, this.postSamples, true); // little-endian\n        offset += 4;\n        view.setUint8(offset++, this.loopCount);\n        view.setUint8(offset++, this.measure);\n        view.setUint8(offset++, this.captureMode);\n        return new Uint8Array(buffer);\n    }\n    /**\n     * 获取结构体大小（字节）\n     */\n    getSize() {\n        // 1 + 1 + 1 + 2 + 24 + 1 + 4 + 4 + 4 + 1 + 1 + 1 = 45 bytes\n        return 45;\n    }\n}\nexports.CaptureRequest = CaptureRequest;\n/**\n * 网络配置结构\n * 对应C#的NetConfig结构体\n */\nclass NetConfig {\n    constructor(accessPointName = '', password = '', ipAddress = '', port = 0) {\n        this.accessPointName = ''; // 33字节固定长度\n        this.password = ''; // 64字节固定长度\n        this.ipAddress = ''; // 16字节固定长度\n        this.port = 0; // ushort (16位)\n        this.accessPointName = accessPointName;\n        this.password = password;\n        this.ipAddress = ipAddress;\n        this.port = port;\n    }\n    /**\n     * 序列化为字节数组\n     */\n    serialize() {\n        const buffer = new ArrayBuffer(this.getSize());\n        const view = new DataView(buffer);\n        let offset = 0;\n        // AccessPointName - 33字节固定长度\n        const apNameBytes = new TextEncoder().encode(this.accessPointName);\n        for (let i = 0; i < 33; i++) {\n            view.setUint8(offset++, i < apNameBytes.length ? apNameBytes[i] : 0);\n        }\n        // Password - 64字节固定长度\n        const passwordBytes = new TextEncoder().encode(this.password);\n        for (let i = 0; i < 64; i++) {\n            view.setUint8(offset++, i < passwordBytes.length ? passwordBytes[i] : 0);\n        }\n        // IPAddress - 16字节固定长度\n        const ipBytes = new TextEncoder().encode(this.ipAddress);\n        for (let i = 0; i < 16; i++) {\n            view.setUint8(offset++, i < ipBytes.length ? ipBytes[i] : 0);\n        }\n        // Port - 2字节\n        view.setUint16(offset, this.port, true); // little-endian\n        return new Uint8Array(buffer);\n    }\n    /**\n     * 获取结构体大小（字节）\n     */\n    getSize() {\n        // 33 + 64 + 16 + 2 = 115 bytes\n        return 115;\n    }\n}\nexports.NetConfig = NetConfig;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDOUQ7UUFFRCxhQUFhO1FBQ2IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLGdCQUFnQjtRQUV6RCxPQUFPLElBQUksVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7T0FFRztJQUNLLE9BQU87UUFDYiwrQkFBK0I7UUFDL0IsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDO0NBQ0Y7QUF6REQsOEJBeURDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnNjb2RlLWxvZ2ljLWFuYWx5emVyLy4vc3JjL2RyaXZlcnMvQW5hbHl6ZXJEcml2ZXJCYXNlLnRzPzc1MTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcbmltcG9ydCB7XG4gIEFuYWx5emVyRHJpdmVyVHlwZSxcbiAgQ2FwdHVyZU1vZGUsXG4gIENhcHR1cmVFcnJvcixcbiAgQ2FwdHVyZUxpbWl0cyxcbiAgQW5hbHl6ZXJEZXZpY2VJbmZvLFxuICBDYXB0dXJlU2Vzc2lvbixcbiAgQ2FwdHVyZUNvbmZpZ3VyYXRpb24sXG4gIENhcHR1cmVSZXN1bHQsXG4gIENvbm5lY3Rpb25QYXJhbXMsXG4gIENvbm5lY3Rpb25SZXN1bHQsXG4gIERldmljZVN0YXR1cyxcbiAgQ2FwdHVyZUV2ZW50QXJncyxcbiAgQ2FwdHVyZUNvbXBsZXRlZEhhbmRsZXJcbn0gZnJvbSAnLi4vbW9kZWxzL0FuYWx5emVyVHlwZXMnO1xuXG4vKipcbiAqIOmAu+i+keWIhuaekOWZqOmpseWKqOaKveixoeWfuuexu1xuICog5Z+65LqOQyMgQW5hbHl6ZXJEcml2ZXJCYXNl55qEVHlwZVNjcmlwdOenu+akjVxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQW5hbHl6ZXJEcml2ZXJCYXNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLy8g5oq96LGh5bGe5oCnIC0g5a2Q57G75b+F6aG75a6e546wXG4gIGFic3RyYWN0IGdldCBkZXZpY2VWZXJzaW9uKCk6IHN0cmluZyB8IG51bGw7XG4gIGFic3RyYWN0IGdldCBibGFzdEZyZXF1ZW5jeSgpOiBudW1iZXI7XG4gIGFic3RyYWN0IGdldCBtYXhGcmVxdWVuY3koKTogbnVtYmVyO1xuICBhYnN0cmFjdCBnZXQgY2hhbm5lbENvdW50KCk6IG51bWJlcjtcbiAgYWJzdHJhY3QgZ2V0IGJ1ZmZlclNpemUoKTogbnVtYmVyO1xuICBhYnN0cmFjdCBnZXQgZHJpdmVyVHlwZSgpOiBBbmFseXplckRyaXZlclR5cGU7XG4gIGFic3RyYWN0IGdldCBpc05ldHdvcmsoKTogYm9vbGVhbjtcbiAgYWJzdHJhY3QgZ2V0IGlzQ2FwdHVyaW5nKCk6IGJvb2xlYW47XG5cbiAgLy8g6K6h566X5bGe5oCnXG4gIGdldCBtaW5GcmVxdWVuY3koKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcigodGhpcy5tYXhGcmVxdWVuY3kgKiAyKSAvIDY1NTM1KTtcbiAgfVxuXG4gIC8vIOWPr+mAieWxnuaAp1xuICBwdWJsaWMgdGFnPzogYW55O1xuXG4gIC8vIOaKveixoeaWueazlSAtIOWtkOexu+W/hemhu+WunueOsFxuICBhYnN0cmFjdCBzdGFydENhcHR1cmUoXG4gICAgc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24sXG4gICAgY2FwdHVyZUNvbXBsZXRlZEhhbmRsZXI/OiBDYXB0dXJlQ29tcGxldGVkSGFuZGxlclxuICApOiBQcm9taXNlPENhcHR1cmVFcnJvcj47XG5cbiAgYWJzdHJhY3Qgc3RvcENhcHR1cmUoKTogUHJvbWlzZTxib29sZWFuPjtcbiAgYWJzdHJhY3QgZW50ZXJCb290bG9hZGVyKCk6IFByb21pc2U8Ym9vbGVhbj47XG4gIGFic3RyYWN0IGNvbm5lY3QocGFyYW1zOiBDb25uZWN0aW9uUGFyYW1zKTogUHJvbWlzZTxDb25uZWN0aW9uUmVzdWx0PjtcbiAgYWJzdHJhY3QgZGlzY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+O1xuICBhYnN0cmFjdCBnZXRTdGF0dXMoKTogUHJvbWlzZTxEZXZpY2VTdGF0dXM+O1xuXG4gIC8vIOiuvuWkh+S/oeaBr+aWueazlVxuICBnZXRDYXB0dXJlTW9kZShjaGFubmVsczogbnVtYmVyW10pOiBDYXB0dXJlTW9kZSB7XG4gICAgY29uc3QgbWF4Q2hhbm5lbCA9IE1hdGgubWF4KC4uLmNoYW5uZWxzLCAwKTtcbiAgICBpZiAobWF4Q2hhbm5lbCA8IDgpIHJldHVybiBDYXB0dXJlTW9kZS5DaGFubmVsc184O1xuICAgIGlmIChtYXhDaGFubmVsIDwgMTYpIHJldHVybiBDYXB0dXJlTW9kZS5DaGFubmVsc18xNjtcbiAgICByZXR1cm4gQ2FwdHVyZU1vZGUuQ2hhbm5lbHNfMjQ7XG4gIH1cblxuICBnZXRMaW1pdHMoY2hhbm5lbHM6IG51bWJlcltdKTogQ2FwdHVyZUxpbWl0cyB7XG4gICAgY29uc3QgbW9kZSA9IHRoaXMuZ2V0Q2FwdHVyZU1vZGUoY2hhbm5lbHMpO1xuXG4gICAgLy8g5qC55o2u6YCa6YGT5qih5byP6K6h566X5oC75qC35pys5pWwXG4gICAgbGV0IGRpdmlzb3I6IG51bWJlcjtcbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgQ2FwdHVyZU1vZGUuQ2hhbm5lbHNfODpcbiAgICAgICAgZGl2aXNvciA9IDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDYXB0dXJlTW9kZS5DaGFubmVsc18xNjpcbiAgICAgICAgZGl2aXNvciA9IDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDYXB0dXJlTW9kZS5DaGFubmVsc18yNDpcbiAgICAgICAgZGl2aXNvciA9IDQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsU2FtcGxlcyA9IE1hdGguZmxvb3IodGhpcy5idWZmZXJTaXplIC8gZGl2aXNvcik7XG5cbiAgICBjb25zdCBsaW1pdHM6IENhcHR1cmVMaW1pdHMgPSB7XG4gICAgICBtaW5QcmVTYW1wbGVzOiAyLFxuICAgICAgbWF4UHJlU2FtcGxlczogTWF0aC5mbG9vcih0b3RhbFNhbXBsZXMgLyAxMCksXG4gICAgICBtaW5Qb3N0U2FtcGxlczogMixcbiAgICAgIG1heFBvc3RTYW1wbGVzOiB0b3RhbFNhbXBsZXMgLSAyLFxuICAgICAgZ2V0IG1heFRvdGFsU2FtcGxlcygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5taW5QcmVTYW1wbGVzICsgdGhpcy5tYXhQb3N0U2FtcGxlcztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxpbWl0cztcbiAgfVxuXG4gIGdldERldmljZUluZm8oKTogQW5hbHl6ZXJEZXZpY2VJbmZvIHtcbiAgICBjb25zdCBsaW1pdHM6IENhcHR1cmVMaW1pdHNbXSA9IFtcbiAgICAgIHRoaXMuZ2V0TGltaXRzKEFycmF5LmZyb20oeyBsZW5ndGg6IDggfSwgKF8sIGkpID0+IGkpKSwgLy8gMC03XG4gICAgICB0aGlzLmdldExpbWl0cyhBcnJheS5mcm9tKHsgbGVuZ3RoOiAxNiB9LCAoXywgaSkgPT4gaSkpLCAvLyAwLTE1XG4gICAgICB0aGlzLmdldExpbWl0cyhBcnJheS5mcm9tKHsgbGVuZ3RoOiAyNCB9LCAoXywgaSkgPT4gaSkpIC8vIDAtMjNcbiAgICBdO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuZGV2aWNlVmVyc2lvbiA/PyAnVW5rbm93bicsXG4gICAgICBtYXhGcmVxdWVuY3k6IHRoaXMubWF4RnJlcXVlbmN5LFxuICAgICAgYmxhc3RGcmVxdWVuY3k6IHRoaXMuYmxhc3RGcmVxdWVuY3ksXG4gICAgICBjaGFubmVsczogdGhpcy5jaGFubmVsQ291bnQsXG4gICAgICBidWZmZXJTaXplOiB0aGlzLmJ1ZmZlclNpemUsXG4gICAgICBtb2RlTGltaXRzOiBsaW1pdHNcbiAgICB9O1xuICB9XG5cbiAgLy8g572R57uc5pa55rOVIC0g6Jma5ouf5a6e546w77yM5a2Q57G75Y+v5Lul6YeN5YaZXG4gIGdldFZvbHRhZ2VTdGF0dXMoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCdVTlNVUFBPUlRFRCcpO1xuICB9XG5cbiAgc2VuZE5ldHdvcmtDb25maWcoXG4gICAgYWNjZXNzUG9pbnROYW1lOiBzdHJpbmcsXG4gICAgcGFzc3dvcmQ6IHN0cmluZyxcbiAgICBpcEFkZHJlc3M6IHN0cmluZyxcbiAgICBwb3J0OiBudW1iZXJcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gIH1cblxuICAvLyDotYTmupDmuIXnkIZcbiAgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9XG5cbiAgLy8g5LqL5Lu26Kem5Y+R6L6F5Yqp5pa55rOVXG4gIHByb3RlY3RlZCBlbWl0Q2FwdHVyZUNvbXBsZXRlZChhcmdzOiBDYXB0dXJlRXZlbnRBcmdzKTogdm9pZCB7XG4gICAgdGhpcy5lbWl0KCdjYXB0dXJlQ29tcGxldGVkJywgYXJncyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZW1pdEVycm9yKGVycm9yOiBFcnJvcik6IHZvaWQge1xuICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgZW1pdFN0YXR1c0NoYW5nZWQoc3RhdHVzOiBEZXZpY2VTdGF0dXMpOiB2b2lkIHtcbiAgICB0aGlzLmVtaXQoJ3N0YXR1c0NoYW5nZWQnLCBzdGF0dXMpO1xuICB9XG59XG5cbi8qKlxuICog6L6T5Ye65pWw5o2u5YyF57G7XG4gKiDlrp7njrBDI+eJiOacrOeahE91dHB1dFBhY2tldOWKn+iDve+8jOWMheaLrOi9rOS5ieacuuWItlxuICovXG5leHBvcnQgY2xhc3MgT3V0cHV0UGFja2V0IHtcbiAgcHJpdmF0ZSBkYXRhQnVmZmVyOiBudW1iZXJbXSA9IFtdO1xuXG4gIGFkZEJ5dGUodmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuZGF0YUJ1ZmZlci5wdXNoKHZhbHVlICYgMHhmZik7XG4gIH1cblxuICBhZGRCeXRlcyh2YWx1ZXM6IG51bWJlcltdIHwgVWludDhBcnJheSk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICB0aGlzLmFkZEJ5dGUodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIGFkZFN0cmluZyh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBBU0NJSee8lueggVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5hZGRCeXRlKHRleHQuY2hhckNvZGVBdChpKSk7XG4gICAgfVxuICB9XG5cbiAgYWRkU3RydWN0KHN0cnVjdDogYW55KTogdm9pZCB7XG4gICAgLy8gVHlwZVNjcmlwdOS4reeahOe7k+aehOS9k+W6j+WIl+WMllxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuc2VyaWFsaXplU3RydWN0KHN0cnVjdCk7XG4gICAgdGhpcy5hZGRCeXRlcyhidWZmZXIpO1xuICB9XG5cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5kYXRhQnVmZmVyID0gW107XG4gIH1cblxuICAvKipcbiAgICog5bqP5YiX5YyW5pWw5o2u5YyF77yM5YyF5ZCr6L2s5LmJ5py65Yi2XG4gICAqIOWNj+iuruagvOW8jzogMHg1NSAweEFBIFvovazkuYnlkI7nmoTmlbDmja5dIDB4QUEgMHg1NVxuICAgKiDovazkuYnop4TliJk6IDB4QUEvMHg1NS8weEYwIC0+IDB4RjAgKyAo5Y6f5YC8IF4gMHhGMClcbiAgICovXG4gIHNlcmlhbGl6ZSgpOiBVaW50OEFycmF5IHtcbiAgICBjb25zdCBmaW5hbERhdGE6IG51bWJlcltdID0gW107XG5cbiAgICAvLyDotbflp4vmoIforrBcbiAgICBmaW5hbERhdGEucHVzaCgweDU1LCAweGFhKTtcblxuICAgIC8vIOi9rOS5ieaVsOaNrlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhQnVmZmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBieXRlID0gdGhpcy5kYXRhQnVmZmVyW2ldO1xuICAgICAgaWYgKGJ5dGUgPT09IDB4YWEgfHwgYnl0ZSA9PT0gMHg1NSB8fCBieXRlID09PSAweGYwKSB7XG4gICAgICAgIGZpbmFsRGF0YS5wdXNoKDB4ZjApO1xuICAgICAgICBmaW5hbERhdGEucHVzaChieXRlIF4gMHhmMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaW5hbERhdGEucHVzaChieXRlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDnu5PmnZ/moIforrBcbiAgICBmaW5hbERhdGEucHVzaCgweGFhLCAweDU1KTtcblxuICAgIHJldHVybiBuZXcgVWludDhBcnJheShmaW5hbERhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIOe7k+aehOS9k+W6j+WIl+WMlui+heWKqeaWueazlVxuICAgKi9cbiAgcHJpdmF0ZSBzZXJpYWxpemVTdHJ1Y3Qoc3RydWN0OiBhbnkpOiBVaW50OEFycmF5IHtcbiAgICAvLyDov5nph4zpnIDopoHmoLnmja7lhbfkvZPnmoTnu5PmnoTkvZPnsbvlnovov5vooYzluo/liJfljJZcbiAgICAvLyDlrp7pmYXlrp7njrDkvJrlnKjlhbfkvZPnmoTnu5PmnoTkvZPnsbvkuK3lrozmiJBcbiAgICBpZiAoc3RydWN0ICYmIHR5cGVvZiBzdHJ1Y3Quc2VyaWFsaXplID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gc3RydWN0LnNlcmlhbGl6ZSgpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+e7k+aehOS9k+W/hemhu+WunueOsHNlcmlhbGl6ZeaWueazlScpO1xuICB9XG59XG5cbi8qKlxuICog6YeH6ZuG6K+35rGC57uT5p6EXG4gKiDlr7nlupRDI+eahENhcHR1cmVSZXF1ZXN057uT5p6E5L2T77yM5b+F6aG75L+d5oyB57K+56Gu55qE5YaF5a2Y5biD5bGAXG4gKi9cbmV4cG9ydCBjbGFzcyBDYXB0dXJlUmVxdWVzdCB7XG4gIHB1YmxpYyB0cmlnZ2VyVHlwZTogbnVtYmVyID0gMDsgLy8gYnl0ZVxuICBwdWJsaWMgdHJpZ2dlcjogbnVtYmVyID0gMDsgLy8gYnl0ZVxuICBwdWJsaWMgaW52ZXJ0ZWRPckNvdW50OiBudW1iZXIgPSAwOyAvLyBieXRlXG4gIHB1YmxpYyB0cmlnZ2VyVmFsdWU6IG51bWJlciA9IDA7IC8vIHVzaG9ydCAoMTbkvY0pXG4gIHB1YmxpYyBjaGFubmVsczogVWludDhBcnJheTsgLy8gYnl0ZVsyNF1cbiAgcHVibGljIGNoYW5uZWxDb3VudDogbnVtYmVyID0gMDsgLy8gYnl0ZVxuICBwdWJsaWMgZnJlcXVlbmN5OiBudW1iZXIgPSAwOyAvLyB1aW50MzIgKDMy5L2NKVxuICBwdWJsaWMgcHJlU2FtcGxlczogbnVtYmVyID0gMDsgLy8gdWludDMyICgzMuS9jSlcbiAgcHVibGljIHBvc3RTYW1wbGVzOiBudW1iZXIgPSAwOyAvLyB1aW50MzIgKDMy5L2NKVxuICBwdWJsaWMgbG9vcENvdW50OiBudW1iZXIgPSAwOyAvLyBieXRlXG4gIHB1YmxpYyBtZWFzdXJlOiBudW1iZXIgPSAwOyAvLyBieXRlXG4gIHB1YmxpYyBjYXB0dXJlTW9kZTogbnVtYmVyID0gMDsgLy8gYnl0ZVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2hhbm5lbHMgPSBuZXcgVWludDhBcnJheSgyNCk7XG4gIH1cblxuICAvKipcbiAgICog5LuOQ2FwdHVyZUNvbmZpZ3VyYXRpb27liJvlu7pDYXB0dXJlUmVxdWVzdFxuICAgKi9cbiAgc3RhdGljIGZyb21Db25maWd1cmF0aW9uKGNvbmZpZzogQ2FwdHVyZUNvbmZpZ3VyYXRpb24pOiBDYXB0dXJlUmVxdWVzdCB7XG4gICAgY29uc3QgcmVxdWVzdCA9IG5ldyBDYXB0dXJlUmVxdWVzdCgpO1xuXG4gICAgcmVxdWVzdC50cmlnZ2VyVHlwZSA9IGNvbmZpZy50cmlnZ2VyVHlwZTtcbiAgICByZXF1ZXN0LnRyaWdnZXIgPSBjb25maWcudHJpZ2dlckNoYW5uZWw7XG4gICAgcmVxdWVzdC5pbnZlcnRlZE9yQ291bnQgPSBjb25maWcudHJpZ2dlckludmVydGVkID8gMSA6IDA7XG4gICAgcmVxdWVzdC50cmlnZ2VyVmFsdWUgPSBjb25maWcudHJpZ2dlclBhdHRlcm4gfHwgMDtcbiAgICByZXF1ZXN0LmNoYW5uZWxDb3VudCA9IGNvbmZpZy5jYXB0dXJlQ2hhbm5lbHMubGVuZ3RoO1xuICAgIHJlcXVlc3QuZnJlcXVlbmN5ID0gY29uZmlnLmZyZXF1ZW5jeTtcbiAgICByZXF1ZXN0LnByZVNhbXBsZXMgPSBjb25maWcucHJlVHJpZ2dlclNhbXBsZXM7XG4gICAgcmVxdWVzdC5wb3N0U2FtcGxlcyA9IGNvbmZpZy5wb3N0VHJpZ2dlclNhbXBsZXM7XG4gICAgcmVxdWVzdC5sb29wQ291bnQgPSBjb25maWcubG9vcENvdW50O1xuICAgIHJlcXVlc3QubWVhc3VyZSA9IGNvbmZpZy5tZWFzdXJlQnVyc3RzID8gMSA6IDA7XG4gICAgcmVxdWVzdC5jYXB0dXJlTW9kZSA9IGNvbmZpZy5jYXB0dXJlTW9kZSB8fCBDYXB0dXJlTW9kZS5DaGFubmVsc184O1xuXG4gICAgLy8g6K6+572u6YCa6YGT5pWw57uEXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcuY2FwdHVyZUNoYW5uZWxzLmxlbmd0aCAmJiBpIDwgMjQ7IGkrKykge1xuICAgICAgcmVxdWVzdC5jaGFubmVsc1tjb25maWcuY2FwdHVyZUNoYW5uZWxzW2ldXSA9IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcXVlc3Q7XG4gIH1cblxuICAvKipcbiAgICog5bqP5YiX5YyW5Li65a2X6IqC5pWw57uE77yM5L+d5oyB5LiOQyPniYjmnKznmoTnsr7noa7luIPlsYBcbiAgICovXG4gIHNlcmlhbGl6ZSgpOiBVaW50OEFycmF5IHtcbiAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5nZXRTaXplKCkpO1xuICAgIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcblxuICAgIC8vIOaMieeFp0Mj57uT5p6E5L2T55qE57K+56Gu6aG65bqP5YaZ5YWlXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgdGhpcy50cmlnZ2VyVHlwZSk7XG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgdGhpcy50cmlnZ2VyKTtcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0aGlzLmludmVydGVkT3JDb3VudCk7XG4gICAgdmlldy5zZXRVaW50MTYob2Zmc2V0LCB0aGlzLnRyaWdnZXJWYWx1ZSwgdHJ1ZSk7IC8vIGxpdHRsZS1lbmRpYW5cbiAgICBvZmZzZXQgKz0gMjtcblxuICAgIC8vIOmAmumBk+aVsOe7hFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjQ7IGkrKykge1xuICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgdGhpcy5jaGFubmVsc1tpXSk7XG4gICAgfVxuXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgdGhpcy5jaGFubmVsQ291bnQpO1xuICAgIHZpZXcuc2V0VWludDMyKG9mZnNldCwgdGhpcy5mcmVxdWVuY3ksIHRydWUpOyAvLyBsaXR0bGUtZW5kaWFuXG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgdmlldy5zZXRVaW50MzIob2Zmc2V0LCB0aGlzLnByZVNhbXBsZXMsIHRydWUpOyAvLyBsaXR0bGUtZW5kaWFuXG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgdmlldy5zZXRVaW50MzIob2Zmc2V0LCB0aGlzLnBvc3RTYW1wbGVzLCB0cnVlKTsgLy8gbGl0dGxlLWVuZGlhblxuICAgIG9mZnNldCArPSA0O1xuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIHRoaXMubG9vcENvdW50KTtcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0aGlzLm1lYXN1cmUpO1xuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIHRoaXMuY2FwdHVyZU1vZGUpO1xuXG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W57uT5p6E5L2T5aSn5bCP77yI5a2X6IqC77yJXG4gICAqL1xuICBwcml2YXRlIGdldFNpemUoKTogbnVtYmVyIHtcbiAgICAvLyAxICsgMSArIDEgKyAyICsgMjQgKyAxICsgNCArIDQgKyA0ICsgMSArIDEgKyAxID0gNDUgYnl0ZXNcbiAgICByZXR1cm4gNDU7XG4gIH1cbn1cblxuLyoqXG4gKiDnvZHnu5zphY3nva7nu5PmnoRcbiAqIOWvueW6lEMj55qETmV0Q29uZmln57uT5p6E5L2TXG4gKi9cbmV4cG9ydCBjbGFzcyBOZXRDb25maWcge1xuICBwdWJsaWMgYWNjZXNzUG9pbnROYW1lOiBzdHJpbmcgPSAnJzsgLy8gMzPlrZfoioLlm7rlrprplb/luqZcbiAgcHVibGljIHBhc3N3b3JkOiBzdHJpbmcgPSAnJzsgLy8gNjTlrZfoioLlm7rlrprplb/luqZcbiAgcHVibGljIGlwQWRkcmVzczogc3RyaW5nID0gJyc7IC8vIDE25a2X6IqC5Zu65a6a6ZW/5bqmXG4gIHB1YmxpYyBwb3J0OiBudW1iZXIgPSAwOyAvLyB1c2hvcnQgKDE25L2NKVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFjY2Vzc1BvaW50TmFtZTogc3RyaW5nID0gJycsXG4gICAgcGFzc3dvcmQ6IHN0cmluZyA9ICcnLFxuICAgIGlwQWRkcmVzczogc3RyaW5nID0gJycsXG4gICAgcG9ydDogbnVtYmVyID0gMFxuICApIHtcbiAgICB0aGlzLmFjY2Vzc1BvaW50TmFtZSA9IGFjY2Vzc1BvaW50TmFtZTtcbiAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgdGhpcy5pcEFkZHJlc3MgPSBpcEFkZHJlc3M7XG4gICAgdGhpcy5wb3J0ID0gcG9ydDtcbiAgfVxuXG4gIC8qKlxuICAgKiDluo/liJfljJbkuLrlrZfoioLmlbDnu4RcbiAgICovXG4gIHNlcmlhbGl6ZSgpOiBVaW50OEFycmF5IHtcbiAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5nZXRTaXplKCkpO1xuICAgIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcblxuICAgIC8vIEFjY2Vzc1BvaW50TmFtZSAtIDMz5a2X6IqC5Zu65a6a6ZW/5bqmXG4gICAgY29uc3QgYXBOYW1lQnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUodGhpcy5hY2Nlc3NQb2ludE5hbWUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzM7IGkrKykge1xuICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgaSA8IGFwTmFtZUJ5dGVzLmxlbmd0aCA/IGFwTmFtZUJ5dGVzW2ldIDogMCk7XG4gICAgfVxuXG4gICAgLy8gUGFzc3dvcmQgLSA2NOWtl+iKguWbuuWumumVv+W6plxuICAgIGNvbnN0IHBhc3N3b3JkQnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUodGhpcy5wYXNzd29yZCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2NDsgaSsrKSB7XG4gICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBpIDwgcGFzc3dvcmRCeXRlcy5sZW5ndGggPyBwYXNzd29yZEJ5dGVzW2ldIDogMCk7XG4gICAgfVxuXG4gICAgLy8gSVBBZGRyZXNzIC0gMTblrZfoioLlm7rlrprplb/luqZcbiAgICBjb25zdCBpcEJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHRoaXMuaXBBZGRyZXNzKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGkgPCBpcEJ5dGVzLmxlbmd0aCA/IGlwQnl0ZXNbaV0gOiAwKTtcbiAgICB9XG5cbiAgICAvLyBQb3J0IC0gMuWtl+iKglxuICAgIHZpZXcuc2V0VWludDE2KG9mZnNldCwgdGhpcy5wb3J0LCB0cnVlKTsgLy8gbGl0dGxlLWVuZGlhblxuXG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W57uT5p6E5L2T5aSn5bCP77yI5a2X6IqC77yJXG4gICAqL1xuICBwcml2YXRlIGdldFNpemUoKTogbnVtYmVyIHtcbiAgICAvLyAzMyArIDY0ICsgMTYgKyAyID0gMTE1IGJ5dGVzXG4gICAgcmV0dXJuIDExNTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/drivers/AnalyzerDriverBase.ts\n\n}");

/***/ }),

/***/ "./src/drivers/HardwareDriverManager.ts":
/*!**********************************************!*\
  !*** ./src/drivers/HardwareDriverManager.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.hardwareDriverManager = exports.RigolSiglentDetector = exports.SigrokDetector = exports.SaleaeDetector = exports.NetworkDetector = exports.SerialDetector = exports.HardwareDriverManager = void 0;\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst LogicAnalyzerDriver_1 = __webpack_require__(/*! ./LogicAnalyzerDriver */ \"./src/drivers/LogicAnalyzerDriver.ts\");\nconst SaleaeLogicDriver_1 = __webpack_require__(/*! ./SaleaeLogicDriver */ \"./src/drivers/SaleaeLogicDriver.ts\");\nconst RigolSiglentDriver_1 = __webpack_require__(/*! ./RigolSiglentDriver */ \"./src/drivers/RigolSiglentDriver.ts\");\nconst SigrokAdapter_1 = __webpack_require__(/*! ./SigrokAdapter */ \"./src/drivers/SigrokAdapter.ts\");\nconst NetworkLogicAnalyzerDriver_1 = __webpack_require__(/*! ./NetworkLogicAnalyzerDriver */ \"./src/drivers/NetworkLogicAnalyzerDriver.ts\");\nconst MultiAnalyzerDriver_1 = __webpack_require__(/*! ./MultiAnalyzerDriver */ \"./src/drivers/MultiAnalyzerDriver.ts\");\nconst AnalyzerTypes_1 = __webpack_require__(/*! ../models/AnalyzerTypes */ \"./src/models/AnalyzerTypes.ts\");\n/**\n * 硬件驱动管理器\n * 负责驱动注册、设备检测、驱动匹配和实例化\n */\nclass HardwareDriverManager extends events_1.EventEmitter {\n    constructor() {\n        super();\n        this.drivers = new Map();\n        this.activeConnections = new Map();\n        this.detectors = [];\n        this.detectionCache = new Map();\n        this.cacheTimeout = 30000; // 30秒缓存超时\n        this.initializeBuiltinDrivers();\n        this.initializeDetectors();\n    }\n    /**\n     * 初始化内置驱动\n     */\n    initializeBuiltinDrivers() {\n        console.log('初始化内置驱动...');\n        // 注册 Pico 逻辑分析器驱动（最高优先级）\n        this.registerDriver({\n            id: 'pico-logic-analyzer',\n            name: 'Pico Logic Analyzer',\n            description: 'Raspberry Pi Pico based logic analyzer driver',\n            version: '1.0.0',\n            driverClass: LogicAnalyzerDriver_1.LogicAnalyzerDriver,\n            supportedDevices: ['pico', 'rp2040', 'logic-analyzer', 'analyzer'],\n            priority: 100\n        });\n        // 注册Saleae Logic兼容驱动\n        this.registerDriver({\n            id: 'saleae-logic',\n            name: 'Saleae Logic Analyzer',\n            description: 'Saleae Logic series compatible driver',\n            version: '1.0.0',\n            driverClass: SaleaeLogicDriver_1.SaleaeLogicDriver,\n            supportedDevices: ['saleae', 'logic16', 'logic8', 'logic-pro'],\n            priority: 90\n        });\n        // 注册Rigol/Siglent驱动\n        this.registerDriver({\n            id: 'rigol-siglent',\n            name: 'Rigol/Siglent Logic Analyzer',\n            description: 'Rigol and Siglent instruments with logic analyzer capability',\n            version: '1.0.0',\n            driverClass: RigolSiglentDriver_1.RigolSiglentDriver,\n            supportedDevices: ['rigol', 'siglent', 'ds1000z', 'ds2000', 'sds'],\n            priority: 80\n        });\n        // 注册sigrok通用适配器\n        this.registerDriver({\n            id: 'sigrok-adapter',\n            name: 'Sigrok Universal Adapter',\n            description: 'Universal adapter for 80+ sigrok-supported devices',\n            version: '1.0.0',\n            driverClass: SigrokAdapter_1.SigrokAdapter,\n            supportedDevices: ['fx2lafw', 'hantek', 'kingst', 'chronovu', 'openbench'],\n            priority: 70\n        });\n        // 注册网络设备驱动\n        this.registerDriver({\n            id: 'network-analyzer',\n            name: 'Network Logic Analyzer',\n            description: 'Generic network-based logic analyzer driver',\n            version: '1.0.0',\n            driverClass: NetworkLogicAnalyzerDriver_1.NetworkLogicAnalyzerDriver,\n            supportedDevices: ['network', 'tcp', 'udp', 'wifi', 'ethernet'],\n            priority: 60\n        });\n        console.log(`已注册 ${this.drivers.size} 个内置驱动`);\n    }\n    /**\n     * 初始化设备检测器\n     */\n    initializeDetectors() {\n        this.detectors = [\n            new SerialDetector(),\n            new NetworkDetector(),\n            new SaleaeDetector(),\n            new SigrokDetector(),\n            new RigolSiglentDetector()\n        ];\n        console.log(`初始化了 ${this.detectors.length} 个设备检测器`);\n    }\n    /**\n     * 注册驱动\n     */\n    registerDriver(registration) {\n        this.drivers.set(registration.id, registration);\n        this.emit('driverRegistered', registration);\n    }\n    /**\n     * 注销驱动\n     */\n    unregisterDriver(driverId) {\n        const removed = this.drivers.delete(driverId);\n        if (removed) {\n            this.emit('driverUnregistered', driverId);\n        }\n        return removed;\n    }\n    /**\n     * 获取已注册的驱动列表\n     */\n    getRegisteredDrivers() {\n        return Array.from(this.drivers.values()).sort((a, b) => b.priority - a.priority);\n    }\n    /**\n     * 检测硬件设备\n     */\n    async detectHardware(useCache = true) {\n        const cacheKey = 'hardware-detection';\n        // 检查缓存\n        if (useCache && this.detectionCache.has(cacheKey)) {\n            const cached = this.detectionCache.get(cacheKey);\n            return cached;\n        }\n        try {\n            console.log('开始硬件检测...');\n            // 并行执行所有检测器\n            const detectionPromises = this.detectors.map(detector => this.safeDetect(detector));\n            const results = await Promise.all(detectionPromises);\n            const allDevices = results.flat();\n            // 合并和排序结果\n            const mergedDevices = this.mergeAndRankResults(allDevices);\n            // 缓存结果\n            this.detectionCache.set(cacheKey, mergedDevices);\n            setTimeout(() => {\n                this.detectionCache.delete(cacheKey);\n            }, this.cacheTimeout);\n            console.log(`检测到 ${mergedDevices.length} 个设备`);\n            this.emit('devicesDetected', mergedDevices);\n            return mergedDevices;\n        }\n        catch (error) {\n            console.error('Hardware detection failed:', error);\n            return [];\n        }\n    }\n    /**\n     * 安全执行设备检测\n     */\n    async safeDetect(detector) {\n        try {\n            return await detector.detect();\n        }\n        catch (error) {\n            console.warn(`Detector ${detector.name} failed:`, error);\n            return [];\n        }\n    }\n    /**\n     * 匹配设备驱动\n     */\n    async matchDriver(device) {\n        // 精确匹配 - 基于设备类型和驱动支持列表\n        for (const driver of this.getRegisteredDrivers()) {\n            if (this.isExactMatch(device, driver)) {\n                return driver;\n            }\n        }\n        // 通用匹配 - 基于连接类型\n        for (const driver of this.getRegisteredDrivers()) {\n            if (this.isGenericMatch(device, driver)) {\n                return driver;\n            }\n        }\n        return null;\n    }\n    /**\n     * 精确匹配\n     */\n    isExactMatch(device, driver) {\n        return driver.supportedDevices.some(supported => device.id.includes(supported) || device.name.toLowerCase().includes(supported.toLowerCase()));\n    }\n    /**\n     * 通用匹配\n     */\n    isGenericMatch(device, driver) {\n        // 基于设备类型和驱动类型的通用匹配逻辑\n        switch (device.type) {\n            case 'serial':\n                return driver.id === 'pico-logic-analyzer' || driver.id === 'sigrok-adapter';\n            case 'network':\n                return driver.id === 'saleae-logic' ||\n                    driver.id === 'rigol-siglent' ||\n                    driver.id === 'network-analyzer';\n            case 'usb':\n                return driver.id === 'sigrok-adapter';\n            default:\n                return false;\n        }\n    }\n    /**\n     * 创建驱动实例\n     */\n    createDriver(device) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                const driverRegistration = await this.matchDriver(device);\n                if (!driverRegistration) {\n                    reject(new Error(`No suitable driver found for device: ${device.name}`));\n                    return;\n                }\n                const driver = this.createDriverInstance(driverRegistration.driverClass, device.connectionString);\n                this.emit('driverCreated', { device, driver, registration: driverRegistration });\n                resolve(driver);\n            }\n            catch (error) {\n                reject(new Error(`Failed to create driver for device ${device.name}: ${error}`));\n            }\n        });\n    }\n    /**\n     * 创建驱动实例的内部方法\n     */\n    createDriverInstance(DriverClass, connectionString) {\n        // 特殊处理不同类型的驱动\n        if (DriverClass === NetworkLogicAnalyzerDriver_1.NetworkLogicAnalyzerDriver) {\n            // 网络驱动需要解析host:port\n            const parts = connectionString.split(':');\n            const host = parts[0] || 'localhost';\n            const port = parseInt(parts[1] || '24000', 10);\n            return new NetworkLogicAnalyzerDriver_1.NetworkLogicAnalyzerDriver(host, port);\n        }\n        else if (DriverClass === SigrokAdapter_1.SigrokAdapter) {\n            // Sigrok适配器需要解析driver:connection\n            const parts = connectionString.split(':');\n            const driver = parts[0] || 'fx2lafw';\n            const deviceId = parts[1] || '';\n            return new SigrokAdapter_1.SigrokAdapter(driver, deviceId);\n        }\n        else {\n            // 其他驱动使用标准构造函数\n            return new DriverClass(connectionString);\n        }\n    }\n    /**\n     * 自动检测并连接设备\n     */\n    async autoConnect() {\n        const devices = await this.detectHardware();\n        if (devices.length === 0) {\n            throw new Error('No compatible devices found');\n        }\n        // 尝试连接置信度最高的设备\n        const bestDevice = devices[0];\n        try {\n            return await this.createDriver(bestDevice);\n        }\n        catch (error) {\n            // 如果第一个设备连接失败，尝试其他设备\n            for (let i = 1; i < Math.min(devices.length, 3); i++) {\n                try {\n                    return await this.createDriver(devices[i]);\n                }\n                catch {\n                    continue;\n                }\n            }\n            throw new Error('Failed to connect to any detected device');\n        }\n    }\n    /**\n     * 合并和排序检测结果\n     */\n    mergeAndRankResults(devices) {\n        // 去重：基于connectionString去重\n        const uniqueDevices = new Map();\n        for (const device of devices) {\n            const existing = uniqueDevices.get(device.connectionString);\n            if (!existing || device.confidence > existing.confidence) {\n                uniqueDevices.set(device.connectionString, device);\n            }\n        }\n        // 按置信度排序\n        return Array.from(uniqueDevices.values()).sort((a, b) => b.confidence - a.confidence);\n    }\n    /**\n     * 创建多设备驱动\n     */\n    createMultiDeviceDriver(connectionStrings) {\n        if (connectionStrings.length < 2 || connectionStrings.length > 5) {\n            throw new Error('多设备驱动需要2-5个连接字符串');\n        }\n        const multiDriver = new MultiAnalyzerDriver_1.MultiAnalyzerDriver(connectionStrings);\n        this.emit('multiDriverCreated', { connectionStrings, driver: multiDriver });\n        return multiDriver;\n    }\n    /**\n     * 获取支持的sigrok设备列表\n     */\n    getSupportedSigrokDevices() {\n        return SigrokAdapter_1.SigrokAdapter.getSupportedDevices();\n    }\n    /**\n     * 清理资源\n     */\n    dispose() {\n        this.detectionCache.clear();\n        this.removeAllListeners();\n    }\n}\nexports.HardwareDriverManager = HardwareDriverManager;\n/**\n * 串口设备检测器\n */\nclass SerialDetector {\n    constructor() {\n        this.name = 'Serial Port Detector';\n    }\n    async detect() {\n        const devices = [];\n        try {\n            // 使用serialport库检测串口设备\n            const { SerialPort } = __webpack_require__(/*! serialport */ \"serialport\");\n            const ports = await SerialPort.list();\n            for (const port of ports) {\n                // 检测Pico逻辑分析器特征\n                if (this.isPicoAnalyzer(port)) {\n                    devices.push({\n                        id: `serial-${port.path}`,\n                        name: `Logic Analyzer (${port.path})`,\n                        type: 'serial',\n                        connectionString: port.path,\n                        driverType: AnalyzerTypes_1.AnalyzerDriverType.Serial,\n                        confidence: 80\n                    });\n                }\n            }\n        }\n        catch (error) {\n            console.warn('Serial port detection failed:', error);\n        }\n        return devices;\n    }\n    isPicoAnalyzer(port) {\n        // 检测Pico设备的特征\n        return (port.vendorId === '2E8A' || // Raspberry Pi Foundation\n            port.productId === '0003' || // Pico\n            (port.manufacturer && port.manufacturer.includes('Pico')));\n    }\n}\nexports.SerialDetector = SerialDetector;\n/**\n * 网络设备检测器\n * 扫描本地网络中的逻辑分析器设备\n */\nclass NetworkDetector {\n    constructor() {\n        this.name = 'Network Device Detector';\n    }\n    async detect() {\n        const devices = [];\n        try {\n            // 扫描常见的网络逻辑分析器端口\n            const commonPorts = [24000, 5555, 8080, 10000];\n            const baseIPs = this.getLocalNetworkRange();\n            // 并行扫描多个IP地址\n            const scanPromises = baseIPs.slice(0, 50).map(ip => this.scanHostPorts(ip, commonPorts));\n            const results = await Promise.allSettled(scanPromises);\n            for (const result of results) {\n                if (result.status === 'fulfilled' && result.value) {\n                    devices.push(result.value);\n                }\n            }\n        }\n        catch (error) {\n            console.warn('Network device detection failed:', error);\n        }\n        return devices;\n    }\n    getLocalNetworkRange() {\n        // 获取本地网络IP范围（简化实现）\n        const baseIPs = [];\n        // 常见的私有网络段\n        const networks = [\n            '192.168.1',\n            '192.168.0',\n            '10.0.0',\n            '172.16.0'\n        ];\n        for (const network of networks) {\n            for (let i = 1; i <= 254; i++) {\n                baseIPs.push(`${network}.${i}`);\n            }\n        }\n        return baseIPs;\n    }\n    async scanHostPorts(host, ports) {\n        for (const port of ports) {\n            try {\n                const isOpen = await this.checkPort(host, port);\n                if (isOpen) {\n                    return {\n                        id: `network-${host}-${port}`,\n                        name: `Network Logic Analyzer (${host}:${port})`,\n                        type: 'network',\n                        connectionString: `${host}:${port}`,\n                        driverType: AnalyzerTypes_1.AnalyzerDriverType.Network,\n                        confidence: 60\n                    };\n                }\n            }\n            catch (error) {\n                continue;\n            }\n        }\n        return null;\n    }\n    async checkPort(host, port) {\n        return new Promise((resolve) => {\n            const socket = new ((__webpack_require__(/*! net */ \"net\").Socket))();\n            const timeout = 1000;\n            socket.setTimeout(timeout);\n            socket.connect(port, host, () => {\n                socket.destroy();\n                resolve(true);\n            });\n            socket.on('error', () => {\n                resolve(false);\n            });\n            socket.on('timeout', () => {\n                socket.destroy();\n                resolve(false);\n            });\n        });\n    }\n}\nexports.NetworkDetector = NetworkDetector;\n/**\n * Saleae Logic设备检测器\n */\nclass SaleaeDetector {\n    constructor() {\n        this.name = 'Saleae Logic Detector';\n    }\n    async detect() {\n        const devices = [];\n        try {\n            // 检查Saleae Logic软件API端口\n            const isApiAvailable = await this.checkSaleaeAPI();\n            if (isApiAvailable) {\n                // 查询连接的设备\n                const connectedDevices = await this.querySaleaeDevices();\n                devices.push(...connectedDevices);\n            }\n        }\n        catch (error) {\n            console.warn('Saleae device detection failed:', error);\n        }\n        return devices;\n    }\n    async checkSaleaeAPI() {\n        try {\n            const socket = new ((__webpack_require__(/*! net */ \"net\").Socket))();\n            return new Promise((resolve) => {\n                socket.setTimeout(2000);\n                socket.connect(10429, 'localhost', () => {\n                    socket.destroy();\n                    resolve(true);\n                });\n                socket.on('error', () => resolve(false));\n                socket.on('timeout', () => {\n                    socket.destroy();\n                    resolve(false);\n                });\n            });\n        }\n        catch (error) {\n            return false;\n        }\n    }\n    async querySaleaeDevices() {\n        const devices = [];\n        try {\n            // 这里应该通过Saleae API查询设备\n            // 简化实现，假设检测到一个设备\n            devices.push({\n                id: 'saleae-logic-1',\n                name: 'Saleae Logic Analyzer',\n                type: 'usb',\n                connectionString: 'localhost:10429',\n                driverType: AnalyzerTypes_1.AnalyzerDriverType.Serial,\n                confidence: 95\n            });\n        }\n        catch (error) {\n            console.warn('Query Saleae devices failed:', error);\n        }\n        return devices;\n    }\n}\nexports.SaleaeDetector = SaleaeDetector;\n/**\n * Sigrok设备检测器\n */\nclass SigrokDetector {\n    constructor() {\n        this.name = 'Sigrok Device Detector';\n    }\n    async detect() {\n        const devices = [];\n        try {\n            // 检查sigrok-cli是否可用\n            const isSigrokAvailable = await this.checkSigrokCli();\n            if (isSigrokAvailable) {\n                // 扫描sigrok设备\n                const sigrokDevices = await this.scanSigrokDevices();\n                devices.push(...sigrokDevices);\n            }\n        }\n        catch (error) {\n            console.warn('Sigrok device detection failed:', error);\n        }\n        return devices;\n    }\n    async checkSigrokCli() {\n        try {\n            const { spawn } = __webpack_require__(/*! child_process */ \"child_process\");\n            return new Promise((resolve) => {\n                const process = spawn('sigrok-cli', ['--version']);\n                process.on('close', (code) => {\n                    resolve(code === 0);\n                });\n                process.on('error', () => {\n                    resolve(false);\n                });\n            });\n        }\n        catch (error) {\n            return false;\n        }\n    }\n    async scanSigrokDevices() {\n        const devices = [];\n        try {\n            const { spawn } = __webpack_require__(/*! child_process */ \"child_process\");\n            return new Promise((resolve) => {\n                const process = spawn('sigrok-cli', ['--scan']);\n                let output = '';\n                process.stdout.on('data', (data) => {\n                    output += data.toString();\n                });\n                process.on('close', (code) => {\n                    if (code === 0) {\n                        const parsedDevices = this.parseSigrokScanOutput(output);\n                        resolve(parsedDevices);\n                    }\n                    else {\n                        resolve([]);\n                    }\n                });\n                process.on('error', () => {\n                    resolve([]);\n                });\n            });\n        }\n        catch (error) {\n            console.warn('Scan sigrok devices failed:', error);\n            return [];\n        }\n    }\n    parseSigrokScanOutput(output) {\n        const devices = [];\n        const lines = output.split('\\n');\n        for (const line of lines) {\n            const trimmed = line.trim();\n            if (!trimmed || trimmed.startsWith('The following'))\n                continue;\n            // 解析格式: \"driver:conn=value - Description\"\n            const match = trimmed.match(/^([^:]+):([^-]+)\\s*-\\s*(.+)$/);\n            if (match) {\n                const driver = match[1].trim();\n                const connection = match[2].trim();\n                const description = match[3].trim();\n                devices.push({\n                    id: `sigrok-${driver}-${connection}`,\n                    name: `${description} (Sigrok)`,\n                    type: 'usb',\n                    connectionString: `${driver}:${connection}`,\n                    driverType: AnalyzerTypes_1.AnalyzerDriverType.Serial,\n                    confidence: 85\n                });\n            }\n        }\n        return devices;\n    }\n}\nexports.SigrokDetector = SigrokDetector;\n/**\n * Rigol/Siglent设备检测器\n */\nclass RigolSiglentDetector {\n    constructor() {\n        this.name = 'Rigol/Siglent Detector';\n    }\n    async detect() {\n        const devices = [];\n        try {\n            // 扫描常见的SCPI端口\n            const scpiPorts = [5555, 5025, 111];\n            const baseIPs = this.getCommonInstrumentIPs();\n            // 并行扫描\n            const scanPromises = baseIPs.map(ip => this.scanInstrumentPorts(ip, scpiPorts));\n            const results = await Promise.allSettled(scanPromises);\n            for (const result of results) {\n                if (result.status === 'fulfilled' && result.value) {\n                    devices.push(result.value);\n                }\n            }\n        }\n        catch (error) {\n            console.warn('Rigol/Siglent device detection failed:', error);\n        }\n        return devices;\n    }\n    getCommonInstrumentIPs() {\n        // 常见的仪器IP地址\n        return [\n            '192.168.1.100', '192.168.1.101', '192.168.1.102',\n            '10.0.0.100', '10.0.0.101', '10.0.0.102',\n            '172.16.0.100', '172.16.0.101'\n        ];\n    }\n    async scanInstrumentPorts(host, ports) {\n        for (const port of ports) {\n            try {\n                const isInstrument = await this.checkInstrumentPort(host, port);\n                if (isInstrument) {\n                    return {\n                        id: `rigol-siglent-${host}-${port}`,\n                        name: `Rigol/Siglent Instrument (${host}:${port})`,\n                        type: 'network',\n                        connectionString: `${host}:${port}`,\n                        driverType: AnalyzerTypes_1.AnalyzerDriverType.Network,\n                        confidence: 80\n                    };\n                }\n            }\n            catch (error) {\n                continue;\n            }\n        }\n        return null;\n    }\n    async checkInstrumentPort(host, port) {\n        return new Promise((resolve) => {\n            const socket = new ((__webpack_require__(/*! net */ \"net\").Socket))();\n            socket.setTimeout(2000);\n            socket.connect(port, host, () => {\n                // 发送IDN查询命令\n                socket.write('*IDN?\\n');\n                socket.on('data', (data) => {\n                    const response = data.toString();\n                    const isRigolSiglent = response.toLowerCase().includes('rigol') ||\n                        response.toLowerCase().includes('siglent');\n                    socket.destroy();\n                    resolve(isRigolSiglent);\n                });\n            });\n            socket.on('error', () => resolve(false));\n            socket.on('timeout', () => {\n                socket.destroy();\n                resolve(false);\n            });\n        });\n    }\n}\nexports.RigolSiglentDetector = RigolSiglentDetector;\n// 导出单例实例\nexports.hardwareDriverManager = new HardwareDriverManager();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNqQyxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQzt3QkFDekMsUUFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQztvQkFDakUsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO29CQUNqQixPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7Z0JBQzFCLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7WUFFSCxNQUFNLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUN6QyxNQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUU7Z0JBQ3hCLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDakIsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2pCLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0Y7QUFyRkQsb0RBcUZDO0FBRUQsU0FBUztBQUNJLDZCQUFxQixHQUFHLElBQUkscUJBQXFCLEVBQUUsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZzY29kZS1sb2dpYy1hbmFseXplci8uL3NyYy9kcml2ZXJzL0hhcmR3YXJlRHJpdmVyTWFuYWdlci50cz8zOTBiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQgeyBBbmFseXplckRyaXZlckJhc2UgfSBmcm9tICcuL0FuYWx5emVyRHJpdmVyQmFzZSc7XG5pbXBvcnQgeyBMb2dpY0FuYWx5emVyRHJpdmVyIH0gZnJvbSAnLi9Mb2dpY0FuYWx5emVyRHJpdmVyJztcbmltcG9ydCB7IFNhbGVhZUxvZ2ljRHJpdmVyIH0gZnJvbSAnLi9TYWxlYWVMb2dpY0RyaXZlcic7XG5pbXBvcnQgeyBSaWdvbFNpZ2xlbnREcml2ZXIgfSBmcm9tICcuL1JpZ29sU2lnbGVudERyaXZlcic7XG5pbXBvcnQgeyBTaWdyb2tBZGFwdGVyIH0gZnJvbSAnLi9TaWdyb2tBZGFwdGVyJztcbmltcG9ydCB7IE5ldHdvcmtMb2dpY0FuYWx5emVyRHJpdmVyIH0gZnJvbSAnLi9OZXR3b3JrTG9naWNBbmFseXplckRyaXZlcic7XG5pbXBvcnQgeyBNdWx0aUFuYWx5emVyRHJpdmVyIH0gZnJvbSAnLi9NdWx0aUFuYWx5emVyRHJpdmVyJztcbmltcG9ydCB7XG4gIEFuYWx5emVyRHJpdmVyVHlwZSxcbiAgQW5hbHl6ZXJEZXZpY2VJbmZvXG59IGZyb20gJy4uL21vZGVscy9BbmFseXplclR5cGVzJztcblxuLyoqXG4gKiDmo4DmtYvliLDnmoTorr7lpIfkv6Hmga9cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEZXRlY3RlZERldmljZSB7XG4gIGlkOiBzdHJpbmc7IC8vIOiuvuWkh+WUr+S4gOagh+ivhlxuICBuYW1lOiBzdHJpbmc7IC8vIOiuvuWkh+WQjeensFxuICB0eXBlOiAnc2VyaWFsJyB8ICduZXR3b3JrJyB8ICd1c2InOyAvLyDov57mjqXnsbvlnotcbiAgY29ubmVjdGlvblN0cmluZzogc3RyaW5nOyAvLyDov57mjqXlrZfnrKbkuLJcbiAgZHJpdmVyVHlwZTogQW5hbHl6ZXJEcml2ZXJUeXBlOyAvLyDpqbHliqjnsbvlnotcbiAgY2FwYWJpbGl0aWVzPzogQW5hbHl6ZXJEZXZpY2VJbmZvOyAvLyDorr7lpIfog73lipvmj4/ov7BcbiAgY29uZmlkZW5jZTogbnVtYmVyOyAvLyDmo4DmtYvnva7kv6HluqYgKDAtMTAwKVxufVxuXG4vKipcbiAqIOmpseWKqOazqOWGjOS/oeaBr1xuICovXG5leHBvcnQgaW50ZXJmYWNlIERyaXZlclJlZ2lzdHJhdGlvbiB7XG4gIGlkOiBzdHJpbmc7IC8vIOmpseWKqElEXG4gIG5hbWU6IHN0cmluZzsgLy8g6amx5Yqo5ZCN56ewXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7IC8vIOmpseWKqOaPj+i/sFxuICB2ZXJzaW9uOiBzdHJpbmc7IC8vIOmpseWKqOeJiOacrFxuICBkcml2ZXJDbGFzczogdHlwZW9mIEFuYWx5emVyRHJpdmVyQmFzZTsgLy8g6amx5Yqo57G7XG4gIHN1cHBvcnRlZERldmljZXM6IHN0cmluZ1tdOyAvLyDmlK/mjIHnmoTorr7lpIfnsbvlnotcbiAgcHJpb3JpdHk6IG51bWJlcjsgLy8g5LyY5YWI57qnICjmlbDlgLzotorlpKfkvJjlhYjnuqfotorpq5gpXG59XG5cbi8qKlxuICog6K6+5aSH5qOA5rWL5Zmo5o6l5Y+jXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSURldmljZURldGVjdG9yIHtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICBkZXRlY3QoKTogUHJvbWlzZTxEZXRlY3RlZERldmljZVtdPjtcbn1cblxuLyoqXG4gKiDnoazku7bpqbHliqjnrqHnkIblmahcbiAqIOi0n+i0o+mpseWKqOazqOWGjOOAgeiuvuWkh+ajgOa1i+OAgempseWKqOWMuemFjeWSjOWunuS+i+WMllxuICovXG5leHBvcnQgY2xhc3MgSGFyZHdhcmVEcml2ZXJNYW5hZ2VyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgcHJpdmF0ZSBkcml2ZXJzID0gbmV3IE1hcDxzdHJpbmcsIERyaXZlclJlZ2lzdHJhdGlvbj4oKTtcbiAgcHJpdmF0ZSBhY3RpdmVDb25uZWN0aW9ucyA9IG5ldyBNYXA8c3RyaW5nLCBBbmFseXplckRyaXZlckJhc2U+KCk7XG4gIHByaXZhdGUgZGV0ZWN0b3JzOiBJRGV2aWNlRGV0ZWN0b3JbXSA9IFtdO1xuICBwcml2YXRlIGRldGVjdGlvbkNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIERldGVjdGVkRGV2aWNlW10+KCk7XG4gIHByaXZhdGUgY2FjaGVUaW1lb3V0ID0gMzAwMDA7IC8vIDMw56eS57yT5a2Y6LaF5pe2XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmluaXRpYWxpemVCdWlsdGluRHJpdmVycygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZURldGVjdG9ycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluWGhee9rumpseWKqFxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplQnVpbHRpbkRyaXZlcnMoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ+WIneWni+WMluWGhee9rumpseWKqC4uLicpO1xuXG4gICAgLy8g5rOo5YaMIFBpY28g6YC76L6R5YiG5p6Q5Zmo6amx5Yqo77yI5pyA6auY5LyY5YWI57qn77yJXG4gICAgdGhpcy5yZWdpc3RlckRyaXZlcih7XG4gICAgICBpZDogJ3BpY28tbG9naWMtYW5hbHl6ZXInLFxuICAgICAgbmFtZTogJ1BpY28gTG9naWMgQW5hbHl6ZXInLFxuICAgICAgZGVzY3JpcHRpb246ICdSYXNwYmVycnkgUGkgUGljbyBiYXNlZCBsb2dpYyBhbmFseXplciBkcml2ZXInLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIGRyaXZlckNsYXNzOiBMb2dpY0FuYWx5emVyRHJpdmVyIGFzIGFueSxcbiAgICAgIHN1cHBvcnRlZERldmljZXM6IFsncGljbycsICdycDIwNDAnLCAnbG9naWMtYW5hbHl6ZXInLCAnYW5hbHl6ZXInXSxcbiAgICAgIHByaW9yaXR5OiAxMDBcbiAgICB9KTtcblxuICAgIC8vIOazqOWGjFNhbGVhZSBMb2dpY+WFvOWuuempseWKqFxuICAgIHRoaXMucmVnaXN0ZXJEcml2ZXIoe1xuICAgICAgaWQ6ICdzYWxlYWUtbG9naWMnLFxuICAgICAgbmFtZTogJ1NhbGVhZSBMb2dpYyBBbmFseXplcicsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhbGVhZSBMb2dpYyBzZXJpZXMgY29tcGF0aWJsZSBkcml2ZXInLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIGRyaXZlckNsYXNzOiBTYWxlYWVMb2dpY0RyaXZlciBhcyBhbnksXG4gICAgICBzdXBwb3J0ZWREZXZpY2VzOiBbJ3NhbGVhZScsICdsb2dpYzE2JywgJ2xvZ2ljOCcsICdsb2dpYy1wcm8nXSxcbiAgICAgIHByaW9yaXR5OiA5MFxuICAgIH0pO1xuXG4gICAgLy8g5rOo5YaMUmlnb2wvU2lnbGVudOmpseWKqFxuICAgIHRoaXMucmVnaXN0ZXJEcml2ZXIoe1xuICAgICAgaWQ6ICdyaWdvbC1zaWdsZW50JyxcbiAgICAgIG5hbWU6ICdSaWdvbC9TaWdsZW50IExvZ2ljIEFuYWx5emVyJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmlnb2wgYW5kIFNpZ2xlbnQgaW5zdHJ1bWVudHMgd2l0aCBsb2dpYyBhbmFseXplciBjYXBhYmlsaXR5JyxcbiAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICBkcml2ZXJDbGFzczogUmlnb2xTaWdsZW50RHJpdmVyIGFzIGFueSxcbiAgICAgIHN1cHBvcnRlZERldmljZXM6IFsncmlnb2wnLCAnc2lnbGVudCcsICdkczEwMDB6JywgJ2RzMjAwMCcsICdzZHMnXSxcbiAgICAgIHByaW9yaXR5OiA4MFxuICAgIH0pO1xuXG4gICAgLy8g5rOo5YaMc2lncm9r6YCa55So6YCC6YWN5ZmoXG4gICAgdGhpcy5yZWdpc3RlckRyaXZlcih7XG4gICAgICBpZDogJ3NpZ3Jvay1hZGFwdGVyJyxcbiAgICAgIG5hbWU6ICdTaWdyb2sgVW5pdmVyc2FsIEFkYXB0ZXInLFxuICAgICAgZGVzY3JpcHRpb246ICdVbml2ZXJzYWwgYWRhcHRlciBmb3IgODArIHNpZ3Jvay1zdXBwb3J0ZWQgZGV2aWNlcycsXG4gICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgZHJpdmVyQ2xhc3M6IFNpZ3Jva0FkYXB0ZXIgYXMgYW55LFxuICAgICAgc3VwcG9ydGVkRGV2aWNlczogWydmeDJsYWZ3JywgJ2hhbnRlaycsICdraW5nc3QnLCAnY2hyb25vdnUnLCAnb3BlbmJlbmNoJ10sXG4gICAgICBwcmlvcml0eTogNzBcbiAgICB9KTtcblxuICAgIC8vIOazqOWGjOe9kee7nOiuvuWkh+mpseWKqFxuICAgIHRoaXMucmVnaXN0ZXJEcml2ZXIoe1xuICAgICAgaWQ6ICduZXR3b3JrLWFuYWx5emVyJyxcbiAgICAgIG5hbWU6ICdOZXR3b3JrIExvZ2ljIEFuYWx5emVyJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnR2VuZXJpYyBuZXR3b3JrLWJhc2VkIGxvZ2ljIGFuYWx5emVyIGRyaXZlcicsXG4gICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgZHJpdmVyQ2xhc3M6IE5ldHdvcmtMb2dpY0FuYWx5emVyRHJpdmVyIGFzIGFueSxcbiAgICAgIHN1cHBvcnRlZERldmljZXM6IFsnbmV0d29yaycsICd0Y3AnLCAndWRwJywgJ3dpZmknLCAnZXRoZXJuZXQnXSxcbiAgICAgIHByaW9yaXR5OiA2MFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coYOW3suazqOWGjCAke3RoaXMuZHJpdmVycy5zaXplfSDkuKrlhoXnva7pqbHliqhgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJborr7lpIfmo4DmtYvlmahcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZURldGVjdG9ycygpOiB2b2lkIHtcbiAgICB0aGlzLmRldGVjdG9ycyA9IFtcbiAgICAgIG5ldyBTZXJpYWxEZXRlY3RvcigpLFxuICAgICAgbmV3IE5ldHdvcmtEZXRlY3RvcigpLFxuICAgICAgbmV3IFNhbGVhZURldGVjdG9yKCksXG4gICAgICBuZXcgU2lncm9rRGV0ZWN0b3IoKSxcbiAgICAgIG5ldyBSaWdvbFNpZ2xlbnREZXRlY3RvcigpXG4gICAgXTtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhg5Yid5aeL5YyW5LqGICR7dGhpcy5kZXRlY3RvcnMubGVuZ3RofSDkuKrorr7lpIfmo4DmtYvlmahgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDms6jlhozpqbHliqhcbiAgICovXG4gIHJlZ2lzdGVyRHJpdmVyKHJlZ2lzdHJhdGlvbjogRHJpdmVyUmVnaXN0cmF0aW9uKTogdm9pZCB7XG4gICAgdGhpcy5kcml2ZXJzLnNldChyZWdpc3RyYXRpb24uaWQsIHJlZ2lzdHJhdGlvbik7XG4gICAgdGhpcy5lbWl0KCdkcml2ZXJSZWdpc3RlcmVkJywgcmVnaXN0cmF0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDms6jplIDpqbHliqhcbiAgICovXG4gIHVucmVnaXN0ZXJEcml2ZXIoZHJpdmVySWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHJlbW92ZWQgPSB0aGlzLmRyaXZlcnMuZGVsZXRlKGRyaXZlcklkKTtcbiAgICBpZiAocmVtb3ZlZCkge1xuICAgICAgdGhpcy5lbWl0KCdkcml2ZXJVbnJlZ2lzdGVyZWQnLCBkcml2ZXJJZCk7XG4gICAgfVxuICAgIHJldHVybiByZW1vdmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluW3suazqOWGjOeahOmpseWKqOWIl+ihqFxuICAgKi9cbiAgZ2V0UmVnaXN0ZXJlZERyaXZlcnMoKTogRHJpdmVyUmVnaXN0cmF0aW9uW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZHJpdmVycy52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4gYi5wcmlvcml0eSAtIGEucHJpb3JpdHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIOajgOa1i+ehrOS7tuiuvuWkh1xuICAgKi9cbiAgYXN5bmMgZGV0ZWN0SGFyZHdhcmUodXNlQ2FjaGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxEZXRlY3RlZERldmljZVtdPiB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSAnaGFyZHdhcmUtZGV0ZWN0aW9uJztcblxuICAgIC8vIOajgOafpee8k+WtmFxuICAgIGlmICh1c2VDYWNoZSAmJiB0aGlzLmRldGVjdGlvbkNhY2hlLmhhcyhjYWNoZUtleSkpIHtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZGV0ZWN0aW9uQ2FjaGUuZ2V0KGNhY2hlS2V5KSE7XG4gICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn5byA5aeL56Gs5Lu25qOA5rWLLi4uJyk7XG5cbiAgICAgIC8vIOW5tuihjOaJp+ihjOaJgOacieajgOa1i+WZqFxuICAgICAgY29uc3QgZGV0ZWN0aW9uUHJvbWlzZXMgPSB0aGlzLmRldGVjdG9ycy5tYXAoZGV0ZWN0b3IgPT4gdGhpcy5zYWZlRGV0ZWN0KGRldGVjdG9yKSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChkZXRlY3Rpb25Qcm9taXNlcyk7XG4gICAgICBjb25zdCBhbGxEZXZpY2VzID0gcmVzdWx0cy5mbGF0KCk7XG5cbiAgICAgIC8vIOWQiOW5tuWSjOaOkuW6j+e7k+aenFxuICAgICAgY29uc3QgbWVyZ2VkRGV2aWNlcyA9IHRoaXMubWVyZ2VBbmRSYW5rUmVzdWx0cyhhbGxEZXZpY2VzKTtcblxuICAgICAgLy8g57yT5a2Y57uT5p6cXG4gICAgICB0aGlzLmRldGVjdGlvbkNhY2hlLnNldChjYWNoZUtleSwgbWVyZ2VkRGV2aWNlcyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5kZXRlY3Rpb25DYWNoZS5kZWxldGUoY2FjaGVLZXkpO1xuICAgICAgfSwgdGhpcy5jYWNoZVRpbWVvdXQpO1xuXG4gICAgICBjb25zb2xlLmxvZyhg5qOA5rWL5YiwICR7bWVyZ2VkRGV2aWNlcy5sZW5ndGh9IOS4quiuvuWkh2ApO1xuICAgICAgdGhpcy5lbWl0KCdkZXZpY2VzRGV0ZWN0ZWQnLCBtZXJnZWREZXZpY2VzKTtcbiAgICAgIHJldHVybiBtZXJnZWREZXZpY2VzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdIYXJkd2FyZSBkZXRlY3Rpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5a6J5YWo5omn6KGM6K6+5aSH5qOA5rWLXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNhZmVEZXRlY3QoZGV0ZWN0b3I6IElEZXZpY2VEZXRlY3Rvcik6IFByb21pc2U8RGV0ZWN0ZWREZXZpY2VbXT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgZGV0ZWN0b3IuZGV0ZWN0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgRGV0ZWN0b3IgJHtkZXRlY3Rvci5uYW1lfSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDljLnphY3orr7lpIfpqbHliqhcbiAgICovXG4gIGFzeW5jIG1hdGNoRHJpdmVyKGRldmljZTogRGV0ZWN0ZWREZXZpY2UpOiBQcm9taXNlPERyaXZlclJlZ2lzdHJhdGlvbiB8IG51bGw+IHtcbiAgICAvLyDnsr7noa7ljLnphY0gLSDln7rkuo7orr7lpIfnsbvlnovlkozpqbHliqjmlK/mjIHliJfooahcbiAgICBmb3IgKGNvbnN0IGRyaXZlciBvZiB0aGlzLmdldFJlZ2lzdGVyZWREcml2ZXJzKCkpIHtcbiAgICAgIGlmICh0aGlzLmlzRXhhY3RNYXRjaChkZXZpY2UsIGRyaXZlcikpIHtcbiAgICAgICAgcmV0dXJuIGRyaXZlcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDpgJrnlKjljLnphY0gLSDln7rkuo7ov57mjqXnsbvlnotcbiAgICBmb3IgKGNvbnN0IGRyaXZlciBvZiB0aGlzLmdldFJlZ2lzdGVyZWREcml2ZXJzKCkpIHtcbiAgICAgIGlmICh0aGlzLmlzR2VuZXJpY01hdGNoKGRldmljZSwgZHJpdmVyKSkge1xuICAgICAgICByZXR1cm4gZHJpdmVyO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOeyvuehruWMuemFjVxuICAgKi9cbiAgcHJpdmF0ZSBpc0V4YWN0TWF0Y2goZGV2aWNlOiBEZXRlY3RlZERldmljZSwgZHJpdmVyOiBEcml2ZXJSZWdpc3RyYXRpb24pOiBib29sZWFuIHtcbiAgICByZXR1cm4gZHJpdmVyLnN1cHBvcnRlZERldmljZXMuc29tZShcbiAgICAgIHN1cHBvcnRlZCA9PlxuICAgICAgICBkZXZpY2UuaWQuaW5jbHVkZXMoc3VwcG9ydGVkKSB8fCBkZXZpY2UubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1cHBvcnRlZC50b0xvd2VyQ2FzZSgpKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog6YCa55So5Yy56YWNXG4gICAqL1xuICBwcml2YXRlIGlzR2VuZXJpY01hdGNoKGRldmljZTogRGV0ZWN0ZWREZXZpY2UsIGRyaXZlcjogRHJpdmVyUmVnaXN0cmF0aW9uKTogYm9vbGVhbiB7XG4gICAgLy8g5Z+65LqO6K6+5aSH57G75Z6L5ZKM6amx5Yqo57G75Z6L55qE6YCa55So5Yy56YWN6YC76L6RXG4gICAgc3dpdGNoIChkZXZpY2UudHlwZSkge1xuICAgICAgY2FzZSAnc2VyaWFsJzpcbiAgICAgICAgcmV0dXJuIGRyaXZlci5pZCA9PT0gJ3BpY28tbG9naWMtYW5hbHl6ZXInIHx8IGRyaXZlci5pZCA9PT0gJ3NpZ3Jvay1hZGFwdGVyJztcbiAgICAgIGNhc2UgJ25ldHdvcmsnOlxuICAgICAgICByZXR1cm4gZHJpdmVyLmlkID09PSAnc2FsZWFlLWxvZ2ljJyB8fCBcbiAgICAgICAgICAgICAgIGRyaXZlci5pZCA9PT0gJ3JpZ29sLXNpZ2xlbnQnIHx8IFxuICAgICAgICAgICAgICAgZHJpdmVyLmlkID09PSAnbmV0d29yay1hbmFseXplcic7XG4gICAgICBjYXNlICd1c2InOlxuICAgICAgICByZXR1cm4gZHJpdmVyLmlkID09PSAnc2lncm9rLWFkYXB0ZXInO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rpqbHliqjlrp7kvotcbiAgICovXG4gIGNyZWF0ZURyaXZlcihkZXZpY2U6IERldGVjdGVkRGV2aWNlKTogUHJvbWlzZTxBbmFseXplckRyaXZlckJhc2U+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZHJpdmVyUmVnaXN0cmF0aW9uID0gYXdhaXQgdGhpcy5tYXRjaERyaXZlcihkZXZpY2UpO1xuXG4gICAgICAgIGlmICghZHJpdmVyUmVnaXN0cmF0aW9uKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgTm8gc3VpdGFibGUgZHJpdmVyIGZvdW5kIGZvciBkZXZpY2U6ICR7ZGV2aWNlLm5hbWV9YCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRyaXZlciA9IHRoaXMuY3JlYXRlRHJpdmVySW5zdGFuY2UoXG4gICAgICAgICAgZHJpdmVyUmVnaXN0cmF0aW9uLmRyaXZlckNsYXNzLFxuICAgICAgICAgIGRldmljZS5jb25uZWN0aW9uU3RyaW5nXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5lbWl0KCdkcml2ZXJDcmVhdGVkJywgeyBkZXZpY2UsIGRyaXZlciwgcmVnaXN0cmF0aW9uOiBkcml2ZXJSZWdpc3RyYXRpb24gfSk7XG4gICAgICAgIHJlc29sdmUoZHJpdmVyKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZHJpdmVyIGZvciBkZXZpY2UgJHtkZXZpY2UubmFtZX06ICR7ZXJyb3J9YCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uumpseWKqOWunuS+i+eahOWGhemDqOaWueazlVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVEcml2ZXJJbnN0YW5jZShcbiAgICBEcml2ZXJDbGFzczogdHlwZW9mIEFuYWx5emVyRHJpdmVyQmFzZSxcbiAgICBjb25uZWN0aW9uU3RyaW5nOiBzdHJpbmdcbiAgKTogQW5hbHl6ZXJEcml2ZXJCYXNlIHtcbiAgICAvLyDnibnmrorlpITnkIbkuI3lkIznsbvlnovnmoTpqbHliqhcbiAgICBpZiAoRHJpdmVyQ2xhc3MgPT09IE5ldHdvcmtMb2dpY0FuYWx5emVyRHJpdmVyIGFzIGFueSkge1xuICAgICAgLy8g572R57uc6amx5Yqo6ZyA6KaB6Kej5p6QaG9zdDpwb3J0XG4gICAgICBjb25zdCBwYXJ0cyA9IGNvbm5lY3Rpb25TdHJpbmcuc3BsaXQoJzonKTtcbiAgICAgIGNvbnN0IGhvc3QgPSBwYXJ0c1swXSB8fCAnbG9jYWxob3N0JztcbiAgICAgIGNvbnN0IHBvcnQgPSBwYXJzZUludChwYXJ0c1sxXSB8fCAnMjQwMDAnLCAxMCk7XG4gICAgICByZXR1cm4gbmV3IE5ldHdvcmtMb2dpY0FuYWx5emVyRHJpdmVyKGhvc3QsIHBvcnQpO1xuICAgIH0gZWxzZSBpZiAoRHJpdmVyQ2xhc3MgPT09IFNpZ3Jva0FkYXB0ZXIgYXMgYW55KSB7XG4gICAgICAvLyBTaWdyb2vpgILphY3lmajpnIDopoHop6PmnpBkcml2ZXI6Y29ubmVjdGlvblxuICAgICAgY29uc3QgcGFydHMgPSBjb25uZWN0aW9uU3RyaW5nLnNwbGl0KCc6Jyk7XG4gICAgICBjb25zdCBkcml2ZXIgPSBwYXJ0c1swXSB8fCAnZngybGFmdyc7XG4gICAgICBjb25zdCBkZXZpY2VJZCA9IHBhcnRzWzFdIHx8ICcnO1xuICAgICAgcmV0dXJuIG5ldyBTaWdyb2tBZGFwdGVyKGRyaXZlciwgZGV2aWNlSWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDlhbbku5bpqbHliqjkvb/nlKjmoIflh4bmnoTpgKDlh73mlbBcbiAgICAgIHJldHVybiBuZXcgKERyaXZlckNsYXNzIGFzIGFueSkoY29ubmVjdGlvblN0cmluZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOiHquWKqOajgOa1i+W5tui/nuaOpeiuvuWkh1xuICAgKi9cbiAgYXN5bmMgYXV0b0Nvbm5lY3QoKTogUHJvbWlzZTxBbmFseXplckRyaXZlckJhc2UgfCBudWxsPiB7XG4gICAgY29uc3QgZGV2aWNlcyA9IGF3YWl0IHRoaXMuZGV0ZWN0SGFyZHdhcmUoKTtcblxuICAgIGlmIChkZXZpY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb21wYXRpYmxlIGRldmljZXMgZm91bmQnKTtcbiAgICB9XG5cbiAgICAvLyDlsJ3or5Xov57mjqXnva7kv6HluqbmnIDpq5jnmoTorr7lpIdcbiAgICBjb25zdCBiZXN0RGV2aWNlID0gZGV2aWNlc1swXTtcblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVEcml2ZXIoYmVzdERldmljZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIOWmguaenOesrOS4gOS4quiuvuWkh+i/nuaOpeWksei0pe+8jOWwneivleWFtuS7luiuvuWkh1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBNYXRoLm1pbihkZXZpY2VzLmxlbmd0aCwgMyk7IGkrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZURyaXZlcihkZXZpY2VzW2ldKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNvbm5lY3QgdG8gYW55IGRldGVjdGVkIGRldmljZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlkIjlubblkozmjpLluo/mo4DmtYvnu5PmnpxcbiAgICovXG4gIHByaXZhdGUgbWVyZ2VBbmRSYW5rUmVzdWx0cyhkZXZpY2VzOiBEZXRlY3RlZERldmljZVtdKTogRGV0ZWN0ZWREZXZpY2VbXSB7XG4gICAgLy8g5Y676YeN77ya5Z+65LqOY29ubmVjdGlvblN0cmluZ+WOu+mHjVxuICAgIGNvbnN0IHVuaXF1ZURldmljZXMgPSBuZXcgTWFwPHN0cmluZywgRGV0ZWN0ZWREZXZpY2U+KCk7XG5cbiAgICBmb3IgKGNvbnN0IGRldmljZSBvZiBkZXZpY2VzKSB7XG4gICAgICBjb25zdCBleGlzdGluZyA9IHVuaXF1ZURldmljZXMuZ2V0KGRldmljZS5jb25uZWN0aW9uU3RyaW5nKTtcbiAgICAgIGlmICghZXhpc3RpbmcgfHwgZGV2aWNlLmNvbmZpZGVuY2UgPiBleGlzdGluZy5jb25maWRlbmNlKSB7XG4gICAgICAgIHVuaXF1ZURldmljZXMuc2V0KGRldmljZS5jb25uZWN0aW9uU3RyaW5nLCBkZXZpY2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOaMiee9ruS/oeW6puaOkuW6j1xuICAgIHJldHVybiBBcnJheS5mcm9tKHVuaXF1ZURldmljZXMudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IGIuY29uZmlkZW5jZSAtIGEuY29uZmlkZW5jZSk7XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65aSa6K6+5aSH6amx5YqoXG4gICAqL1xuICBjcmVhdGVNdWx0aURldmljZURyaXZlcihjb25uZWN0aW9uU3RyaW5nczogc3RyaW5nW10pOiBNdWx0aUFuYWx5emVyRHJpdmVyIHtcbiAgICBpZiAoY29ubmVjdGlvblN0cmluZ3MubGVuZ3RoIDwgMiB8fCBjb25uZWN0aW9uU3RyaW5ncy5sZW5ndGggPiA1KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+WkmuiuvuWkh+mpseWKqOmcgOimgTItNeS4qui/nuaOpeWtl+espuS4sicpO1xuICAgIH1cblxuICAgIGNvbnN0IG11bHRpRHJpdmVyID0gbmV3IE11bHRpQW5hbHl6ZXJEcml2ZXIoY29ubmVjdGlvblN0cmluZ3MpO1xuICAgIHRoaXMuZW1pdCgnbXVsdGlEcml2ZXJDcmVhdGVkJywgeyBjb25uZWN0aW9uU3RyaW5ncywgZHJpdmVyOiBtdWx0aURyaXZlciB9KTtcbiAgICByZXR1cm4gbXVsdGlEcml2ZXI7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5pSv5oyB55qEc2lncm9r6K6+5aSH5YiX6KGoXG4gICAqL1xuICBnZXRTdXBwb3J0ZWRTaWdyb2tEZXZpY2VzKCk6IEFycmF5PHsgZHJpdmVyOiBzdHJpbmc7IG5hbWU6IHN0cmluZzsgY2hhbm5lbHM6IG51bWJlcjsgbWF4UmF0ZTogbnVtYmVyIH0+IHtcbiAgICByZXR1cm4gU2lncm9rQWRhcHRlci5nZXRTdXBwb3J0ZWREZXZpY2VzKCk7XG4gIH1cblxuICAvKipcbiAgICog5riF55CG6LWE5rqQXG4gICAqL1xuICBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuZGV0ZWN0aW9uQ2FjaGUuY2xlYXIoKTtcbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9XG59XG5cbi8qKlxuICog5Liy5Y+j6K6+5aSH5qOA5rWL5ZmoXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJpYWxEZXRlY3RvciBpbXBsZW1lbnRzIElEZXZpY2VEZXRlY3RvciB7XG4gIHJlYWRvbmx5IG5hbWUgPSAnU2VyaWFsIFBvcnQgRGV0ZWN0b3InO1xuXG4gIGFzeW5jIGRldGVjdCgpOiBQcm9taXNlPERldGVjdGVkRGV2aWNlW10+IHtcbiAgICBjb25zdCBkZXZpY2VzOiBEZXRlY3RlZERldmljZVtdID0gW107XG5cbiAgICB0cnkge1xuICAgICAgLy8g5L2/55Soc2VyaWFscG9ydOW6k+ajgOa1i+S4suWPo+iuvuWkh1xuICAgICAgY29uc3QgeyBTZXJpYWxQb3J0IH0gPSByZXF1aXJlKCdzZXJpYWxwb3J0Jyk7XG4gICAgICBjb25zdCBwb3J0cyA9IGF3YWl0IFNlcmlhbFBvcnQubGlzdCgpO1xuXG4gICAgICBmb3IgKGNvbnN0IHBvcnQgb2YgcG9ydHMpIHtcbiAgICAgICAgLy8g5qOA5rWLUGljb+mAu+i+keWIhuaekOWZqOeJueW+gVxuICAgICAgICBpZiAodGhpcy5pc1BpY29BbmFseXplcihwb3J0KSkge1xuICAgICAgICAgIGRldmljZXMucHVzaCh7XG4gICAgICAgICAgICBpZDogYHNlcmlhbC0ke3BvcnQucGF0aH1gLFxuICAgICAgICAgICAgbmFtZTogYExvZ2ljIEFuYWx5emVyICgke3BvcnQucGF0aH0pYCxcbiAgICAgICAgICAgIHR5cGU6ICdzZXJpYWwnLFxuICAgICAgICAgICAgY29ubmVjdGlvblN0cmluZzogcG9ydC5wYXRoLFxuICAgICAgICAgICAgZHJpdmVyVHlwZTogQW5hbHl6ZXJEcml2ZXJUeXBlLlNlcmlhbCxcbiAgICAgICAgICAgIGNvbmZpZGVuY2U6IDgwXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdTZXJpYWwgcG9ydCBkZXRlY3Rpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGV2aWNlcztcbiAgfVxuXG4gIHByaXZhdGUgaXNQaWNvQW5hbHl6ZXIocG9ydDogYW55KTogYm9vbGVhbiB7XG4gICAgLy8g5qOA5rWLUGljb+iuvuWkh+eahOeJueW+gVxuICAgIHJldHVybiAoXG4gICAgICBwb3J0LnZlbmRvcklkID09PSAnMkU4QScgfHwgLy8gUmFzcGJlcnJ5IFBpIEZvdW5kYXRpb25cbiAgICAgIHBvcnQucHJvZHVjdElkID09PSAnMDAwMycgfHwgLy8gUGljb1xuICAgICAgKHBvcnQubWFudWZhY3R1cmVyICYmIHBvcnQubWFudWZhY3R1cmVyLmluY2x1ZGVzKCdQaWNvJykpXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIOe9kee7nOiuvuWkh+ajgOa1i+WZqFxuICog5omr5o+P5pys5Zyw572R57uc5Lit55qE6YC76L6R5YiG5p6Q5Zmo6K6+5aSHXG4gKi9cbmV4cG9ydCBjbGFzcyBOZXR3b3JrRGV0ZWN0b3IgaW1wbGVtZW50cyBJRGV2aWNlRGV0ZWN0b3Ige1xuICByZWFkb25seSBuYW1lID0gJ05ldHdvcmsgRGV2aWNlIERldGVjdG9yJztcblxuICBhc3luYyBkZXRlY3QoKTogUHJvbWlzZTxEZXRlY3RlZERldmljZVtdPiB7XG4gICAgY29uc3QgZGV2aWNlczogRGV0ZWN0ZWREZXZpY2VbXSA9IFtdO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOaJq+aPj+W4uOingeeahOe9kee7nOmAu+i+keWIhuaekOWZqOerr+WPo1xuICAgICAgY29uc3QgY29tbW9uUG9ydHMgPSBbMjQwMDAsIDU1NTUsIDgwODAsIDEwMDAwXTtcbiAgICAgIGNvbnN0IGJhc2VJUHMgPSB0aGlzLmdldExvY2FsTmV0d29ya1JhbmdlKCk7XG5cbiAgICAgIC8vIOW5tuihjOaJq+aPj+WkmuS4qklQ5Zyw5Z2AXG4gICAgICBjb25zdCBzY2FuUHJvbWlzZXMgPSBiYXNlSVBzLnNsaWNlKDAsIDUwKS5tYXAoaXAgPT4gXG4gICAgICAgIHRoaXMuc2Nhbkhvc3RQb3J0cyhpcCwgY29tbW9uUG9ydHMpXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHNjYW5Qcm9taXNlcyk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdmdWxmaWxsZWQnICYmIHJlc3VsdC52YWx1ZSkge1xuICAgICAgICAgIGRldmljZXMucHVzaChyZXN1bHQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignTmV0d29yayBkZXZpY2UgZGV0ZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRldmljZXM7XG4gIH1cblxuICBwcml2YXRlIGdldExvY2FsTmV0d29ya1JhbmdlKCk6IHN0cmluZ1tdIHtcbiAgICAvLyDojrflj5bmnKzlnLDnvZHnu5xJUOiMg+WbtO+8iOeugOWMluWunueOsO+8iVxuICAgIGNvbnN0IGJhc2VJUHM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8g5bi46KeB55qE56eB5pyJ572R57uc5q61XG4gICAgY29uc3QgbmV0d29ya3MgPSBbXG4gICAgICAnMTkyLjE2OC4xJyxcbiAgICAgICcxOTIuMTY4LjAnLCBcbiAgICAgICcxMC4wLjAnLFxuICAgICAgJzE3Mi4xNi4wJ1xuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IG5ldHdvcmsgb2YgbmV0d29ya3MpIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDI1NDsgaSsrKSB7XG4gICAgICAgIGJhc2VJUHMucHVzaChgJHtuZXR3b3JrfS4ke2l9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJhc2VJUHM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNjYW5Ib3N0UG9ydHMoaG9zdDogc3RyaW5nLCBwb3J0czogbnVtYmVyW10pOiBQcm9taXNlPERldGVjdGVkRGV2aWNlIHwgbnVsbD4ge1xuICAgIGZvciAoY29uc3QgcG9ydCBvZiBwb3J0cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaXNPcGVuID0gYXdhaXQgdGhpcy5jaGVja1BvcnQoaG9zdCwgcG9ydCk7XG4gICAgICAgIGlmIChpc09wZW4pIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IGBuZXR3b3JrLSR7aG9zdH0tJHtwb3J0fWAsXG4gICAgICAgICAgICBuYW1lOiBgTmV0d29yayBMb2dpYyBBbmFseXplciAoJHtob3N0fToke3BvcnR9KWAsXG4gICAgICAgICAgICB0eXBlOiAnbmV0d29yaycsXG4gICAgICAgICAgICBjb25uZWN0aW9uU3RyaW5nOiBgJHtob3N0fToke3BvcnR9YCxcbiAgICAgICAgICAgIGRyaXZlclR5cGU6IEFuYWx5emVyRHJpdmVyVHlwZS5OZXR3b3JrLFxuICAgICAgICAgICAgY29uZmlkZW5jZTogNjBcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrUG9ydChob3N0OiBzdHJpbmcsIHBvcnQ6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3Qgc29ja2V0ID0gbmV3IChyZXF1aXJlKCduZXQnKS5Tb2NrZXQpKCk7XG4gICAgICBjb25zdCB0aW1lb3V0ID0gMTAwMDtcblxuICAgICAgc29ja2V0LnNldFRpbWVvdXQodGltZW91dCk7XG4gICAgICBzb2NrZXQuY29ubmVjdChwb3J0LCBob3N0LCAoKSA9PiB7XG4gICAgICAgIHNvY2tldC5kZXN0cm95KCk7XG4gICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgc29ja2V0Lm9uKCdlcnJvcicsICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgc29ja2V0Lm9uKCd0aW1lb3V0JywgKCkgPT4ge1xuICAgICAgICBzb2NrZXQuZGVzdHJveSgpO1xuICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogU2FsZWFlIExvZ2lj6K6+5aSH5qOA5rWL5ZmoXG4gKi9cbmV4cG9ydCBjbGFzcyBTYWxlYWVEZXRlY3RvciBpbXBsZW1lbnRzIElEZXZpY2VEZXRlY3RvciB7XG4gIHJlYWRvbmx5IG5hbWUgPSAnU2FsZWFlIExvZ2ljIERldGVjdG9yJztcblxuICBhc3luYyBkZXRlY3QoKTogUHJvbWlzZTxEZXRlY3RlZERldmljZVtdPiB7XG4gICAgY29uc3QgZGV2aWNlczogRGV0ZWN0ZWREZXZpY2VbXSA9IFtdO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOajgOafpVNhbGVhZSBMb2dpY+i9r+S7tkFQSeerr+WPo1xuICAgICAgY29uc3QgaXNBcGlBdmFpbGFibGUgPSBhd2FpdCB0aGlzLmNoZWNrU2FsZWFlQVBJKCk7XG4gICAgICBcbiAgICAgIGlmIChpc0FwaUF2YWlsYWJsZSkge1xuICAgICAgICAvLyDmn6Xor6Lov57mjqXnmoTorr7lpIdcbiAgICAgICAgY29uc3QgY29ubmVjdGVkRGV2aWNlcyA9IGF3YWl0IHRoaXMucXVlcnlTYWxlYWVEZXZpY2VzKCk7XG4gICAgICAgIGRldmljZXMucHVzaCguLi5jb25uZWN0ZWREZXZpY2VzKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdTYWxlYWUgZGV2aWNlIGRldGVjdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH1cblxuICAgIHJldHVybiBkZXZpY2VzO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjaGVja1NhbGVhZUFQSSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc29ja2V0ID0gbmV3IChyZXF1aXJlKCduZXQnKS5Tb2NrZXQpKCk7XG4gICAgICBcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBzb2NrZXQuc2V0VGltZW91dCgyMDAwKTtcbiAgICAgICAgc29ja2V0LmNvbm5lY3QoMTA0MjksICdsb2NhbGhvc3QnLCAoKSA9PiB7XG4gICAgICAgICAgc29ja2V0LmRlc3Ryb3koKTtcbiAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzb2NrZXQub24oJ2Vycm9yJywgKCkgPT4gcmVzb2x2ZShmYWxzZSkpO1xuICAgICAgICBzb2NrZXQub24oJ3RpbWVvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgc29ja2V0LmRlc3Ryb3koKTtcbiAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcXVlcnlTYWxlYWVEZXZpY2VzKCk6IFByb21pc2U8RGV0ZWN0ZWREZXZpY2VbXT4ge1xuICAgIGNvbnN0IGRldmljZXM6IERldGVjdGVkRGV2aWNlW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICAvLyDov5nph4zlupTor6XpgJrov4dTYWxlYWUgQVBJ5p+l6K+i6K6+5aSHXG4gICAgICAvLyDnroDljJblrp7njrDvvIzlgYforr7mo4DmtYvliLDkuIDkuKrorr7lpIdcbiAgICAgIGRldmljZXMucHVzaCh7XG4gICAgICAgIGlkOiAnc2FsZWFlLWxvZ2ljLTEnLFxuICAgICAgICBuYW1lOiAnU2FsZWFlIExvZ2ljIEFuYWx5emVyJyxcbiAgICAgICAgdHlwZTogJ3VzYicsXG4gICAgICAgIGNvbm5lY3Rpb25TdHJpbmc6ICdsb2NhbGhvc3Q6MTA0MjknLFxuICAgICAgICBkcml2ZXJUeXBlOiBBbmFseXplckRyaXZlclR5cGUuU2VyaWFsLFxuICAgICAgICBjb25maWRlbmNlOiA5NVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignUXVlcnkgU2FsZWFlIGRldmljZXMgZmFpbGVkOicsIGVycm9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGV2aWNlcztcbiAgfVxufVxuXG4vKipcbiAqIFNpZ3Jva+iuvuWkh+ajgOa1i+WZqFxuICovXG5leHBvcnQgY2xhc3MgU2lncm9rRGV0ZWN0b3IgaW1wbGVtZW50cyBJRGV2aWNlRGV0ZWN0b3Ige1xuICByZWFkb25seSBuYW1lID0gJ1NpZ3JvayBEZXZpY2UgRGV0ZWN0b3InO1xuXG4gIGFzeW5jIGRldGVjdCgpOiBQcm9taXNlPERldGVjdGVkRGV2aWNlW10+IHtcbiAgICBjb25zdCBkZXZpY2VzOiBEZXRlY3RlZERldmljZVtdID0gW107XG5cbiAgICB0cnkge1xuICAgICAgLy8g5qOA5p+lc2lncm9rLWNsaeaYr+WQpuWPr+eUqFxuICAgICAgY29uc3QgaXNTaWdyb2tBdmFpbGFibGUgPSBhd2FpdCB0aGlzLmNoZWNrU2lncm9rQ2xpKCk7XG4gICAgICBcbiAgICAgIGlmIChpc1NpZ3Jva0F2YWlsYWJsZSkge1xuICAgICAgICAvLyDmiavmj49zaWdyb2vorr7lpIdcbiAgICAgICAgY29uc3Qgc2lncm9rRGV2aWNlcyA9IGF3YWl0IHRoaXMuc2NhblNpZ3Jva0RldmljZXMoKTtcbiAgICAgICAgZGV2aWNlcy5wdXNoKC4uLnNpZ3Jva0RldmljZXMpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1NpZ3JvayBkZXZpY2UgZGV0ZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRldmljZXM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrU2lncm9rQ2xpKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNwYXduIH0gPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJyk7XG4gICAgICBcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjb25zdCBwcm9jZXNzID0gc3Bhd24oJ3NpZ3Jvay1jbGknLCBbJy0tdmVyc2lvbiddKTtcbiAgICAgICAgXG4gICAgICAgIHByb2Nlc3Mub24oJ2Nsb3NlJywgKGNvZGU6IG51bWJlcikgPT4ge1xuICAgICAgICAgIHJlc29sdmUoY29kZSA9PT0gMCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcHJvY2Vzcy5vbignZXJyb3InLCAoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNjYW5TaWdyb2tEZXZpY2VzKCk6IFByb21pc2U8RGV0ZWN0ZWREZXZpY2VbXT4ge1xuICAgIGNvbnN0IGRldmljZXM6IERldGVjdGVkRGV2aWNlW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNwYXduIH0gPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJyk7XG4gICAgICBcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjb25zdCBwcm9jZXNzID0gc3Bhd24oJ3NpZ3Jvay1jbGknLCBbJy0tc2NhbiddKTtcbiAgICAgICAgbGV0IG91dHB1dCA9ICcnO1xuXG4gICAgICAgIHByb2Nlc3Muc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGE6IEJ1ZmZlcikgPT4ge1xuICAgICAgICAgIG91dHB1dCArPSBkYXRhLnRvU3RyaW5nKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHByb2Nlc3Mub24oJ2Nsb3NlJywgKGNvZGU6IG51bWJlcikgPT4ge1xuICAgICAgICAgIGlmIChjb2RlID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWREZXZpY2VzID0gdGhpcy5wYXJzZVNpZ3Jva1NjYW5PdXRwdXQob3V0cHV0KTtcbiAgICAgICAgICAgIHJlc29sdmUocGFyc2VkRGV2aWNlcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUoW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcHJvY2Vzcy5vbignZXJyb3InLCAoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShbXSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignU2NhbiBzaWdyb2sgZGV2aWNlcyBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTaWdyb2tTY2FuT3V0cHV0KG91dHB1dDogc3RyaW5nKTogRGV0ZWN0ZWREZXZpY2VbXSB7XG4gICAgY29uc3QgZGV2aWNlczogRGV0ZWN0ZWREZXZpY2VbXSA9IFtdO1xuICAgIGNvbnN0IGxpbmVzID0gb3V0cHV0LnNwbGl0KCdcXG4nKTtcblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuICAgICAgaWYgKCF0cmltbWVkIHx8IHRyaW1tZWQuc3RhcnRzV2l0aCgnVGhlIGZvbGxvd2luZycpKSBjb250aW51ZTtcblxuICAgICAgLy8g6Kej5p6Q5qC85byPOiBcImRyaXZlcjpjb25uPXZhbHVlIC0gRGVzY3JpcHRpb25cIlxuICAgICAgY29uc3QgbWF0Y2ggPSB0cmltbWVkLm1hdGNoKC9eKFteOl0rKTooW14tXSspXFxzKi1cXHMqKC4rKSQvKTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBjb25zdCBkcml2ZXIgPSBtYXRjaFsxXS50cmltKCk7XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBtYXRjaFsyXS50cmltKCk7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gbWF0Y2hbM10udHJpbSgpO1xuXG4gICAgICAgIGRldmljZXMucHVzaCh7XG4gICAgICAgICAgaWQ6IGBzaWdyb2stJHtkcml2ZXJ9LSR7Y29ubmVjdGlvbn1gLFxuICAgICAgICAgIG5hbWU6IGAke2Rlc2NyaXB0aW9ufSAoU2lncm9rKWAsXG4gICAgICAgICAgdHlwZTogJ3VzYicsXG4gICAgICAgICAgY29ubmVjdGlvblN0cmluZzogYCR7ZHJpdmVyfToke2Nvbm5lY3Rpb259YCxcbiAgICAgICAgICBkcml2ZXJUeXBlOiBBbmFseXplckRyaXZlclR5cGUuU2VyaWFsLFxuICAgICAgICAgIGNvbmZpZGVuY2U6IDg1XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZXZpY2VzO1xuICB9XG59XG5cbi8qKlxuICogUmlnb2wvU2lnbGVudOiuvuWkh+ajgOa1i+WZqCAgXG4gKi9cbmV4cG9ydCBjbGFzcyBSaWdvbFNpZ2xlbnREZXRlY3RvciBpbXBsZW1lbnRzIElEZXZpY2VEZXRlY3RvciB7XG4gIHJlYWRvbmx5IG5hbWUgPSAnUmlnb2wvU2lnbGVudCBEZXRlY3Rvcic7XG5cbiAgYXN5bmMgZGV0ZWN0KCk6IFByb21pc2U8RGV0ZWN0ZWREZXZpY2VbXT4ge1xuICAgIGNvbnN0IGRldmljZXM6IERldGVjdGVkRGV2aWNlW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICAvLyDmiavmj4/luLjop4HnmoRTQ1BJ56uv5Y+jXG4gICAgICBjb25zdCBzY3BpUG9ydHMgPSBbNTU1NSwgNTAyNSwgMTExXTtcbiAgICAgIGNvbnN0IGJhc2VJUHMgPSB0aGlzLmdldENvbW1vbkluc3RydW1lbnRJUHMoKTtcblxuICAgICAgLy8g5bm26KGM5omr5o+PXG4gICAgICBjb25zdCBzY2FuUHJvbWlzZXMgPSBiYXNlSVBzLm1hcChpcCA9PiBcbiAgICAgICAgdGhpcy5zY2FuSW5zdHJ1bWVudFBvcnRzKGlwLCBzY3BpUG9ydHMpXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHNjYW5Qcm9taXNlcyk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdmdWxmaWxsZWQnICYmIHJlc3VsdC52YWx1ZSkge1xuICAgICAgICAgIGRldmljZXMucHVzaChyZXN1bHQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignUmlnb2wvU2lnbGVudCBkZXZpY2UgZGV0ZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRldmljZXM7XG4gIH1cblxuICBwcml2YXRlIGdldENvbW1vbkluc3RydW1lbnRJUHMoKTogc3RyaW5nW10ge1xuICAgIC8vIOW4uOingeeahOS7quWZqElQ5Zyw5Z2AXG4gICAgcmV0dXJuIFtcbiAgICAgICcxOTIuMTY4LjEuMTAwJywgJzE5Mi4xNjguMS4xMDEnLCAnMTkyLjE2OC4xLjEwMicsXG4gICAgICAnMTAuMC4wLjEwMCcsICcxMC4wLjAuMTAxJywgJzEwLjAuMC4xMDInLFxuICAgICAgJzE3Mi4xNi4wLjEwMCcsICcxNzIuMTYuMC4xMDEnXG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2Nhbkluc3RydW1lbnRQb3J0cyhob3N0OiBzdHJpbmcsIHBvcnRzOiBudW1iZXJbXSk6IFByb21pc2U8RGV0ZWN0ZWREZXZpY2UgfCBudWxsPiB7XG4gICAgZm9yIChjb25zdCBwb3J0IG9mIHBvcnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBpc0luc3RydW1lbnQgPSBhd2FpdCB0aGlzLmNoZWNrSW5zdHJ1bWVudFBvcnQoaG9zdCwgcG9ydCk7XG4gICAgICAgIGlmIChpc0luc3RydW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IGByaWdvbC1zaWdsZW50LSR7aG9zdH0tJHtwb3J0fWAsXG4gICAgICAgICAgICBuYW1lOiBgUmlnb2wvU2lnbGVudCBJbnN0cnVtZW50ICgke2hvc3R9OiR7cG9ydH0pYCxcbiAgICAgICAgICAgIHR5cGU6ICduZXR3b3JrJyxcbiAgICAgICAgICAgIGNvbm5lY3Rpb25TdHJpbmc6IGAke2hvc3R9OiR7cG9ydH1gLFxuICAgICAgICAgICAgZHJpdmVyVHlwZTogQW5hbHl6ZXJEcml2ZXJUeXBlLk5ldHdvcmssXG4gICAgICAgICAgICBjb25maWRlbmNlOiA4MFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tJbnN0cnVtZW50UG9ydChob3N0OiBzdHJpbmcsIHBvcnQ6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3Qgc29ja2V0ID0gbmV3IChyZXF1aXJlKCduZXQnKS5Tb2NrZXQpKCk7XG4gICAgICBcbiAgICAgIHNvY2tldC5zZXRUaW1lb3V0KDIwMDApO1xuICAgICAgc29ja2V0LmNvbm5lY3QocG9ydCwgaG9zdCwgKCkgPT4ge1xuICAgICAgICAvLyDlj5HpgIFJRE7mn6Xor6Llkb3ku6RcbiAgICAgICAgc29ja2V0LndyaXRlKCcqSUROP1xcbicpO1xuICAgICAgICBcbiAgICAgICAgc29ja2V0Lm9uKCdkYXRhJywgKGRhdGE6IEJ1ZmZlcikgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gZGF0YS50b1N0cmluZygpO1xuICAgICAgICAgIGNvbnN0IGlzUmlnb2xTaWdsZW50ID0gcmVzcG9uc2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncmlnb2wnKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc2lnbGVudCcpO1xuICAgICAgICAgIHNvY2tldC5kZXN0cm95KCk7XG4gICAgICAgICAgcmVzb2x2ZShpc1JpZ29sU2lnbGVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHNvY2tldC5vbignZXJyb3InLCAoKSA9PiByZXNvbHZlKGZhbHNlKSk7XG4gICAgICBzb2NrZXQub24oJ3RpbWVvdXQnLCAoKSA9PiB7XG4gICAgICAgIHNvY2tldC5kZXN0cm95KCk7XG4gICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuLy8g5a+85Ye65Y2V5L6L5a6e5L6LXG5leHBvcnQgY29uc3QgaGFyZHdhcmVEcml2ZXJNYW5hZ2VyID0gbmV3IEhhcmR3YXJlRHJpdmVyTWFuYWdlcigpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/drivers/HardwareDriverManager.ts\n\n}");

/***/ }),

/***/ "./src/drivers/LogicAnalyzerDriver.ts":
/*!********************************************!*\
  !*** ./src/drivers/LogicAnalyzerDriver.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.LogicAnalyzerDriver = void 0;\nconst net_1 = __webpack_require__(/*! net */ \"net\");\nconst serialport_1 = __webpack_require__(/*! serialport */ \"serialport\");\nconst parser_readline_1 = __webpack_require__(/*! @serialport/parser-readline */ \"./node_modules/@serialport/parser-readline/dist/index.js\");\nconst AnalyzerDriverBase_1 = __webpack_require__(/*! ./AnalyzerDriverBase */ \"./src/drivers/AnalyzerDriverBase.ts\");\nconst AnalyzerTypes_1 = __webpack_require__(/*! ../models/AnalyzerTypes */ \"./src/models/AnalyzerTypes.ts\");\n/**\n * Pico逻辑分析器驱动实现\n * 基于C# LogicAnalyzerDriver的TypeScript移植\n */\nclass LogicAnalyzerDriver extends AnalyzerDriverBase_1.AnalyzerDriverBase {\n    // 属性实现\n    get deviceVersion() {\n        return this._version;\n    }\n    get channelCount() {\n        return this._channelCount;\n    }\n    get maxFrequency() {\n        return this._maxFrequency;\n    }\n    get blastFrequency() {\n        return this._blastFrequency;\n    }\n    get bufferSize() {\n        return this._bufferSize;\n    }\n    get isNetwork() {\n        return this._isNetwork;\n    }\n    get isCapturing() {\n        return this._capturing;\n    }\n    get driverType() {\n        return this._isNetwork ? AnalyzerTypes_1.AnalyzerDriverType.Network : AnalyzerTypes_1.AnalyzerDriverType.Serial;\n    }\n    constructor(connectionString) {\n        super();\n        this.connectionString = connectionString;\n        // 私有变量\n        this._capturing = false;\n        this._isNetwork = false;\n        this._version = null;\n        this._channelCount = 0;\n        this._maxFrequency = 0;\n        this._blastFrequency = 0;\n        this._bufferSize = 0;\n        // 通信对象\n        this._serialPort = undefined;\n        this._tcpSocket = undefined;\n        this._currentStream = undefined;\n        this._lineParser = undefined;\n        this._isConnected = false;\n        if (!connectionString) {\n            throw new Error('连接字符串不能为空');\n        }\n    }\n    /**\n     * 连接设备\n     */\n    async connect(params) {\n        try {\n            if (this.connectionString.includes(':')) {\n                await this.initNetwork(this.connectionString);\n            }\n            else {\n                await this.initSerialPort(this.connectionString, 115200);\n            }\n            this._isConnected = true;\n            return {\n                success: true,\n                deviceInfo: {\n                    name: this._version || 'Unknown Device',\n                    version: this._version ?? undefined,\n                    type: this.driverType,\n                    connectionPath: this.connectionString,\n                    isNetwork: this._isNetwork,\n                    capabilities: this.buildCapabilities()\n                }\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : '连接失败'\n            };\n        }\n    }\n    /**\n     * 断开连接\n     */\n    async disconnect() {\n        this._isConnected = false;\n        if (this._serialPort?.isOpen) {\n            this._serialPort.close();\n        }\n        if (this._tcpSocket) {\n            this._tcpSocket.destroy();\n        }\n        this._serialPort = undefined;\n        this._tcpSocket = undefined;\n        this._currentStream = undefined;\n        this._lineParser = undefined;\n    }\n    /**\n     * 获取设备状态\n     */\n    async getStatus() {\n        return {\n            isConnected: this._isConnected,\n            isCapturing: this._capturing,\n            batteryVoltage: await this.getVoltageStatus()\n        };\n    }\n    /**\n     * 开始采集\n     */\n    async startCapture(session, captureCompletedHandler) {\n        if (this._capturing) {\n            return AnalyzerTypes_1.CaptureError.Busy;\n        }\n        if (!this._isConnected || !this._currentStream) {\n            return AnalyzerTypes_1.CaptureError.HardwareError;\n        }\n        try {\n            this._capturing = true;\n            // 创建采集请求\n            const captureRequest = AnalyzerDriverBase_1.CaptureRequest.fromConfiguration({\n                frequency: session.frequency,\n                preTriggerSamples: session.preTriggerSamples,\n                postTriggerSamples: session.postTriggerSamples,\n                triggerType: session.triggerType,\n                triggerChannel: session.triggerChannel,\n                triggerInverted: session.triggerInverted,\n                triggerPattern: session.triggerPattern ?? 0,\n                triggerBitCount: session.triggerBitCount ?? 1,\n                loopCount: session.loopCount,\n                measureBursts: session.measureBursts,\n                captureChannels: session.captureChannels.map(ch => ch.channelNumber),\n                captureMode: session.captureMode\n            });\n            // 发送采集请求\n            const packet = new AnalyzerDriverBase_1.OutputPacket();\n            packet.addByte(1); // 采集命令\n            packet.addStruct(captureRequest);\n            const data = packet.serialize();\n            await this.writeData(data);\n            // 设置捕获完成处理器\n            if (captureCompletedHandler) {\n                this.once('captureCompleted', captureCompletedHandler);\n            }\n            // 开始读取数据（异步）\n            this.startDataReading(session);\n            return AnalyzerTypes_1.CaptureError.None;\n        }\n        catch (error) {\n            this._capturing = false;\n            console.error('采集启动失败:', error);\n            return AnalyzerTypes_1.CaptureError.UnexpectedError;\n        }\n    }\n    /**\n     * 停止采集\n     */\n    async stopCapture() {\n        if (!this._capturing) {\n            return true;\n        }\n        try {\n            // 发送停止命令\n            const packet = new AnalyzerDriverBase_1.OutputPacket();\n            packet.addByte(2); // 停止命令\n            const data = packet.serialize();\n            await this.writeData(data);\n            this._capturing = false;\n            return true;\n        }\n        catch (error) {\n            console.error('停止采集失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 进入引导加载程序模式\n     */\n    async enterBootloader() {\n        try {\n            const packet = new AnalyzerDriverBase_1.OutputPacket();\n            packet.addByte(3); // 引导加载程序命令\n            const data = packet.serialize();\n            await this.writeData(data);\n            return true;\n        }\n        catch (error) {\n            console.error('进入引导加载程序失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 获取电压状态\n     */\n    async getVoltageStatus() {\n        try {\n            const packet = new AnalyzerDriverBase_1.OutputPacket();\n            packet.addByte(4); // 电压查询命令\n            const data = packet.serialize();\n            await this.writeData(data);\n            // 等待响应\n            return new Promise(resolve => {\n                const timeout = setTimeout(() => {\n                    resolve('TIMEOUT');\n                }, 5000);\n                this._lineParser?.once('data', (line) => {\n                    clearTimeout(timeout);\n                    resolve(line.trim());\n                });\n            });\n        }\n        catch (error) {\n            console.error('获取电压状态失败:', error);\n            return 'ERROR';\n        }\n    }\n    /**\n     * 发送网络配置\n     */\n    async sendNetworkConfig(accessPointName, password, ipAddress, port) {\n        try {\n            const packet = new AnalyzerDriverBase_1.OutputPacket();\n            packet.addByte(5); // 网络配置命令\n            // 创建网络配置结构\n            const netConfig = {\n                serialize: () => {\n                    const buffer = new ArrayBuffer(115); // 33 + 64 + 16 + 2\n                    const view = new DataView(buffer);\n                    let offset = 0;\n                    // AccessPointName - 33字节\n                    const apNameBytes = new TextEncoder().encode(accessPointName);\n                    for (let i = 0; i < 33; i++) {\n                        view.setUint8(offset++, i < apNameBytes.length ? apNameBytes[i] : 0);\n                    }\n                    // Password - 64字节\n                    const passwordBytes = new TextEncoder().encode(password);\n                    for (let i = 0; i < 64; i++) {\n                        view.setUint8(offset++, i < passwordBytes.length ? passwordBytes[i] : 0);\n                    }\n                    // IPAddress - 16字节\n                    const ipBytes = new TextEncoder().encode(ipAddress);\n                    for (let i = 0; i < 16; i++) {\n                        view.setUint8(offset++, i < ipBytes.length ? ipBytes[i] : 0);\n                    }\n                    // Port - 2字节\n                    view.setUint16(offset, port, true); // little-endian\n                    return new Uint8Array(buffer);\n                }\n            };\n            packet.addStruct(netConfig);\n            const data = packet.serialize();\n            await this.writeData(data);\n            return true;\n        }\n        catch (error) {\n            console.error('发送网络配置失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 初始化串口连接\n     */\n    async initSerialPort(portName, baudRate) {\n        return new Promise((resolve, reject) => {\n            this._serialPort = new serialport_1.SerialPort({\n                path: portName,\n                baudRate,\n                autoOpen: false\n            });\n            this._serialPort.open(error => {\n                if (error) {\n                    reject(new Error(`串口连接失败: ${error.message}`));\n                    return;\n                }\n                this._currentStream = this._serialPort;\n                this._lineParser = new parser_readline_1.ReadlineParser({ delimiter: '\\n' });\n                this._serialPort.pipe(this._lineParser);\n                this._isNetwork = false;\n                // 初始化设备\n                this.initializeDevice().then(resolve).catch(reject);\n            });\n        });\n    }\n    /**\n     * 初始化网络连接\n     */\n    async initNetwork(addressPort) {\n        const match = LogicAnalyzerDriver.regAddressPort.exec(addressPort);\n        if (!match || match.length < 3) {\n            throw new Error('指定的地址/端口格式无效');\n        }\n        this._devAddr = match[1];\n        const portStr = match[2];\n        this._devPort = parseInt(portStr, 10);\n        if (isNaN(this._devPort) || this._devPort < 1 || this._devPort > 65535) {\n            throw new Error('指定的端口号无效');\n        }\n        return new Promise((resolve, reject) => {\n            this._tcpSocket = new net_1.Socket();\n            this._tcpSocket.connect(this._devPort, this._devAddr, () => {\n                this._currentStream = this._tcpSocket;\n                this._lineParser = new parser_readline_1.ReadlineParser({ delimiter: '\\n' });\n                this._tcpSocket.pipe(this._lineParser);\n                this._isNetwork = true;\n                // 初始化设备\n                this.initializeDevice().then(resolve).catch(reject);\n            });\n            this._tcpSocket.on('error', error => {\n                reject(new Error(`网络连接失败: ${error.message}`));\n            });\n        });\n    }\n    /**\n     * 初始化设备（获取设备信息）\n     */\n    async initializeDevice() {\n        if (!this._currentStream || !this._lineParser) {\n            throw new Error('通信流未初始化');\n        }\n        // 发送设备信息查询命令\n        const packet = new AnalyzerDriverBase_1.OutputPacket();\n        packet.addByte(0); // 设备信息查询命令\n        const data = packet.serialize();\n        await this.writeData(data);\n        // 读取设备信息\n        const responses = await this.readDeviceInfo();\n        // 解析设备信息\n        this.parseDeviceInfo(responses);\n    }\n    /**\n     * 读取设备信息响应\n     */\n    async readDeviceInfo() {\n        return new Promise((resolve, reject) => {\n            const responses = [];\n            const timeout = setTimeout(() => {\n                reject(new Error('设备信息读取超时'));\n            }, 10000);\n            const dataHandler = (line) => {\n                responses.push(line.trim());\n                // 预期接收5行响应：版本、频率、突发频率、缓冲区大小、通道数\n                if (responses.length >= 5) {\n                    clearTimeout(timeout);\n                    this._lineParser.off('data', dataHandler);\n                    resolve(responses);\n                }\n            };\n            this._lineParser.on('data', dataHandler);\n        });\n    }\n    /**\n     * 解析设备信息\n     */\n    parseDeviceInfo(responses) {\n        if (responses.length < 5) {\n            throw new Error('设备信息响应不完整');\n        }\n        // 版本信息\n        this._version = responses[0];\n        // 频率信息\n        const freqMatch = LogicAnalyzerDriver.regFreq.exec(responses[1]);\n        if (!freqMatch) {\n            throw new Error('无效的设备频率响应');\n        }\n        this._maxFrequency = parseInt(freqMatch[1], 10);\n        // 突发频率信息\n        const blastMatch = LogicAnalyzerDriver.regBlast.exec(responses[2]);\n        if (!blastMatch) {\n            throw new Error('无效的突发频率响应');\n        }\n        this._blastFrequency = parseInt(blastMatch[1], 10);\n        // 缓冲区大小信息\n        const bufMatch = LogicAnalyzerDriver.regBuf.exec(responses[3]);\n        if (!bufMatch) {\n            throw new Error('无效的设备缓冲区大小响应');\n        }\n        this._bufferSize = parseInt(bufMatch[1], 10);\n        // 通道数信息\n        const chanMatch = LogicAnalyzerDriver.regChan.exec(responses[4]);\n        if (!chanMatch) {\n            throw new Error('无效的设备通道数响应');\n        }\n        this._channelCount = parseInt(chanMatch[1], 10);\n    }\n    /**\n     * 写入数据到流\n     */\n    async writeData(data) {\n        return new Promise((resolve, reject) => {\n            if (!this._currentStream) {\n                reject(new Error('通信流未初始化'));\n                return;\n            }\n            this._currentStream.write(Buffer.from(data), error => {\n                if (error) {\n                    reject(error);\n                }\n                else {\n                    resolve();\n                }\n            });\n        });\n    }\n    /**\n     * 开始数据读取（采集过程）\n     * 基于C# ReadCapture方法的完整实现\n     */\n    async startDataReading(session) {\n        try {\n            if (!this._currentStream) {\n                throw new Error('通信流未初始化');\n            }\n            // 等待采集开始确认\n            const startResponse = await this.waitForResponse('CAPTURE_STARTED', 10000);\n            if (startResponse !== 'CAPTURE_STARTED') {\n                throw new Error('采集启动失败');\n            }\n            // 读取采集数据\n            const captureData = await this.readCaptureData(session);\n            // 解析数据到通道\n            this.extractSamplesToChannels(session, captureData);\n            this._capturing = false;\n            const eventArgs = {\n                success: true,\n                session\n            };\n            this.emitCaptureCompleted(eventArgs);\n        }\n        catch (error) {\n            this._capturing = false;\n            console.error('数据读取失败:', error);\n            const eventArgs = {\n                success: false,\n                session\n            };\n            this.emitCaptureCompleted(eventArgs);\n        }\n    }\n    /**\n     * 等待特定响应\n     */\n    async waitForResponse(expectedResponse, timeout) {\n        return new Promise((resolve, reject) => {\n            const timeoutId = setTimeout(() => {\n                this._lineParser.off('data', dataHandler);\n                reject(new Error(`等待响应超时: ${expectedResponse}`));\n            }, timeout);\n            const dataHandler = (line) => {\n                const response = line.trim();\n                if (response === expectedResponse) {\n                    clearTimeout(timeoutId);\n                    this._lineParser.off('data', dataHandler);\n                    resolve(response);\n                }\n            };\n            this._lineParser.on('data', dataHandler);\n        });\n    }\n    /**\n     * 读取采集数据\n     * 基于C# ReadCapture方法实现\n     */\n    async readCaptureData(session) {\n        return new Promise((resolve, reject) => {\n            if (!this._currentStream) {\n                reject(new Error('通信流未初始化'));\n                return;\n            }\n            const mode = this.getCaptureMode(session.captureChannels.map(ch => ch.channelNumber));\n            const totalSamples = session.preTriggerSamples + session.postTriggerSamples * (session.loopCount + 1);\n            // 计算预期数据长度\n            let bytesPerSample;\n            switch (mode) {\n                case 0: // Channels_8\n                    bytesPerSample = 1;\n                    break;\n                case 1: // Channels_16\n                    bytesPerSample = 2;\n                    break;\n                case 2: // Channels_24\n                    bytesPerSample = 4;\n                    break;\n                default:\n                    bytesPerSample = 4;\n            }\n            const expectedDataLength = 4 + (totalSamples * bytesPerSample) + 1 +\n                (session.loopCount > 0 && session.measureBursts ? (session.loopCount + 2) * 4 : 0);\n            let receivedData = Buffer.alloc(0);\n            let dataLength = null;\n            const dataHandler = (chunk) => {\n                receivedData = Buffer.concat([receivedData, chunk]);\n                // 如果还没读取到数据长度\n                if (dataLength === null && receivedData.length >= 4) {\n                    dataLength = receivedData.readUInt32LE(0);\n                }\n                // 检查是否接收完所有数据\n                if (dataLength !== null && receivedData.length >= expectedDataLength) {\n                    this._currentStream.off('data', dataHandler);\n                    try {\n                        const result = this.parseCaptureData(receivedData, session, mode, dataLength);\n                        resolve(result);\n                    }\n                    catch (error) {\n                        reject(error);\n                    }\n                }\n            };\n            // 设置超时\n            const timeout = setTimeout(() => {\n                this._currentStream.off('data', dataHandler);\n                reject(new Error('数据读取超时'));\n            }, 30000); // 30秒超时\n            this._currentStream.on('data', dataHandler);\n        });\n    }\n    /**\n     * 解析采集数据\n     * 基于C# ReadCapture方法的数据解析逻辑\n     */\n    parseCaptureData(data, session, mode, sampleCount) {\n        let offset = 4; // 跳过长度字段\n        const samples = new Uint32Array(sampleCount);\n        // 读取样本数据\n        for (let i = 0; i < sampleCount; i++) {\n            switch (mode) {\n                case 0: // Channels_8\n                    samples[i] = data.readUInt8(offset);\n                    offset += 1;\n                    break;\n                case 1: // Channels_16\n                    samples[i] = data.readUInt16LE(offset);\n                    offset += 2;\n                    break;\n                case 2: // Channels_24\n                    samples[i] = data.readUInt32LE(offset);\n                    offset += 4;\n                    break;\n            }\n        }\n        // 读取时间戳长度\n        const timestampLength = data.readUInt8(offset);\n        offset += 1;\n        const timestamps = new BigUint64Array(timestampLength);\n        const bursts = [];\n        // 读取时间戳\n        if (timestampLength > 0) {\n            for (let i = 0; i < session.loopCount + 2; i++) {\n                timestamps[i] = BigInt(data.readUInt32LE(offset));\n                offset += 4;\n            }\n            // 处理突发间隔（基于C#的复杂时间戳处理逻辑）\n            this.processBurstTimestamps(timestamps, session, bursts);\n        }\n        return { samples, timestamps, bursts };\n    }\n    /**\n     * 处理突发时间戳\n     * 基于C# ReadCapture中的复杂时间戳处理逻辑\n     */\n    processBurstTimestamps(timestamps, session, bursts) {\n        if (timestamps.length === 0)\n            return;\n        // 反转时间戳的低位部分（SysTick计数器递减）\n        for (let i = 0; i < timestamps.length; i++) {\n            const tt = timestamps[i];\n            timestamps[i] = (tt & 0xff000000n) | (0x00ffffffn - (tt & 0x00ffffffn));\n        }\n        // 计算纳秒每样本和每突发\n        const nsPerSample = 1000000000.0 / session.frequency;\n        const ticksPerSample = nsPerSample / 5;\n        const nsPerBurst = nsPerSample * session.postTriggerSamples;\n        const ticksPerBurst = nsPerBurst / 5;\n        // 调整时间戳以补偿抖动\n        for (let i = 1; i < timestamps.length; i++) {\n            let top = timestamps[i] < timestamps[i - 1] ?\n                timestamps[i] + 0xffffffffn : timestamps[i];\n            if (Number(top - timestamps[i - 1]) <= ticksPerBurst) {\n                const diff = BigInt(ticksPerBurst - Number(top - timestamps[i - 1]) + (ticksPerSample * 2));\n                for (let j = i; j < timestamps.length; j++) {\n                    timestamps[j] += diff;\n                }\n            }\n        }\n        // 计算延迟\n        const delays = new BigUint64Array(timestamps.length - 2);\n        for (let i = 2; i < timestamps.length; i++) {\n            let top = timestamps[i] < timestamps[i - 1] ?\n                timestamps[i] + 0xffffffffn : timestamps[i];\n            delays[i - 2] = (top - timestamps[i - 1] - BigInt(ticksPerBurst)) * 5n;\n        }\n        // 创建突发信息\n        for (let i = 1; i < timestamps.length; i++) {\n            const burstInfo = {\n                burstSampleStart: i === 1 ? session.preTriggerSamples :\n                    session.preTriggerSamples + (session.postTriggerSamples * (i - 1)),\n                burstSampleEnd: session.preTriggerSamples + (session.postTriggerSamples * i),\n                burstSampleGap: i === 1 ? 0n : Number(delays[i - 2]) / nsPerSample,\n                burstTimeGap: i === 1 ? 0n : delays[i - 2]\n            };\n            bursts.push(burstInfo);\n        }\n    }\n    /**\n     * 提取样本数据到通道\n     * 基于C# ExtractSamples方法\n     */\n    extractSamplesToChannels(session, captureData) {\n        const { samples } = captureData;\n        for (let channelIndex = 0; channelIndex < session.captureChannels.length; channelIndex++) {\n            const channel = session.captureChannels[channelIndex];\n            const mask = 1 << channelIndex;\n            channel.samples = new Uint8Array(samples.length);\n            for (let sampleIndex = 0; sampleIndex < samples.length; sampleIndex++) {\n                channel.samples[sampleIndex] = (samples[sampleIndex] & mask) !== 0 ? 1 : 0;\n            }\n        }\n        // 设置突发信息\n        if (captureData.bursts.length > 0) {\n            session.bursts = captureData.bursts;\n        }\n    }\n    /**\n     * 构建硬件能力描述\n     */\n    buildCapabilities() {\n        return {\n            channels: {\n                digital: this._channelCount,\n                maxVoltage: 5.0,\n                inputImpedance: 1000000\n            },\n            sampling: {\n                maxRate: this._maxFrequency,\n                minRate: this.minFrequency,\n                supportedRates: [this._maxFrequency, this._blastFrequency],\n                bufferSize: this._bufferSize,\n                streamingSupport: false\n            },\n            triggers: {\n                types: [0, 1, 2, 3],\n                maxChannels: this._channelCount,\n                patternWidth: 16,\n                sequentialSupport: false,\n                conditions: ['rising', 'falling', 'high', 'low']\n            },\n            connectivity: {\n                interfaces: this._isNetwork ? ['ethernet'] : ['serial'],\n                protocols: ['custom']\n            },\n            features: {\n                voltageMonitoring: true,\n                signalGeneration: false\n            }\n        };\n    }\n    /**\n     * 资源清理\n     */\n    dispose() {\n        this.disconnect();\n        super.dispose();\n    }\n}\nexports.LogicAnalyzerDriver = LogicAnalyzerDriver;\n// 正则表达式模式（从C#版本移植）\nLogicAnalyzerDriver.regAddressPort = /([0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+):([0-9]+)/;\nLogicAnalyzerDriver.regChan = /^CHANNELS:([0-9]+)$/;\nLogicAnalyzerDriver.regBuf = /^BUFFER:([0-9]+)$/;\nLogicAnalyzerDriver.regFreq = /^FREQ:([0-9]+)$/;\nLogicAnalyzerDriver.regBlast = /^BLASTFREQ:([0-9]+)$/;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxLQUFLLENBQUM7YUFDakQ7WUFDRCxZQUFZLEVBQUU7Z0JBQ1osVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO2dCQUN2RCxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUM7YUFDdEI7WUFDRCxRQUFRLEVBQUU7Z0JBQ1IsaUJBQWlCLEVBQUUsSUFBSTtnQkFDdkIsZ0JBQWdCLEVBQUUsS0FBSzthQUN4QjtTQUNGLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDTSxPQUFPO1FBQ2QsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNsQixDQUFDOztBQWh5Qkgsa0RBaXlCQztBQWh5QkMsbUJBQW1CO0FBQ0ssa0NBQWMsR0FBRywyQ0FBMkMsQ0FBQztBQUM3RCwyQkFBTyxHQUFHLHFCQUFxQixDQUFDO0FBQ2hDLDBCQUFNLEdBQUcsbUJBQW1CLENBQUM7QUFDN0IsMkJBQU8sR0FBRyxpQkFBaUIsQ0FBQztBQUM1Qiw0QkFBUSxHQUFHLHNCQUFzQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnNjb2RlLWxvZ2ljLWFuYWx5emVyLy4vc3JjL2RyaXZlcnMvTG9naWNBbmFseXplckRyaXZlci50cz8wMmVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNvY2tldCB9IGZyb20gJ25ldCc7XG5pbXBvcnQgeyBTZXJpYWxQb3J0IH0gZnJvbSAnc2VyaWFscG9ydCc7XG5pbXBvcnQgeyBSZWFkbGluZVBhcnNlciB9IGZyb20gJ0BzZXJpYWxwb3J0L3BhcnNlci1yZWFkbGluZSc7XG5pbXBvcnQgeyBBbmFseXplckRyaXZlckJhc2UsIE91dHB1dFBhY2tldCwgQ2FwdHVyZVJlcXVlc3QgfSBmcm9tICcuL0FuYWx5emVyRHJpdmVyQmFzZSc7XG5pbXBvcnQge1xuICBBbmFseXplckRyaXZlclR5cGUsXG4gIENhcHR1cmVFcnJvcixcbiAgQ2FwdHVyZVNlc3Npb24sXG4gIENhcHR1cmVFdmVudEFyZ3MsXG4gIENhcHR1cmVDb21wbGV0ZWRIYW5kbGVyLFxuICBDb25uZWN0aW9uUGFyYW1zLFxuICBDb25uZWN0aW9uUmVzdWx0LFxuICBEZXZpY2VTdGF0dXNcbn0gZnJvbSAnLi4vbW9kZWxzL0FuYWx5emVyVHlwZXMnO1xuXG4vKipcbiAqIFBpY2/pgLvovpHliIbmnpDlmajpqbHliqjlrp7njrBcbiAqIOWfuuS6jkMjIExvZ2ljQW5hbHl6ZXJEcml2ZXLnmoRUeXBlU2NyaXB056e75qSNXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dpY0FuYWx5emVyRHJpdmVyIGV4dGVuZHMgQW5hbHl6ZXJEcml2ZXJCYXNlIHtcbiAgLy8g5q2j5YiZ6KGo6L6+5byP5qih5byP77yI5LuOQyPniYjmnKznp7vmpI3vvIlcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgcmVnQWRkcmVzc1BvcnQgPSAvKFswLTldK1xcLlswLTldK1xcLlswLTldK1xcLlswLTldKyk6KFswLTldKykvO1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSByZWdDaGFuID0gL15DSEFOTkVMUzooWzAtOV0rKSQvO1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSByZWdCdWYgPSAvXkJVRkZFUjooWzAtOV0rKSQvO1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSByZWdGcmVxID0gL15GUkVROihbMC05XSspJC87XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHJlZ0JsYXN0ID0gL15CTEFTVEZSRVE6KFswLTldKykkLztcblxuICAvLyDlsZ7mgKflrp7njrBcbiAgZ2V0IGRldmljZVZlcnNpb24oKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuX3ZlcnNpb247XG4gIH1cbiAgZ2V0IGNoYW5uZWxDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9jaGFubmVsQ291bnQ7XG4gIH1cbiAgZ2V0IG1heEZyZXF1ZW5jeSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9tYXhGcmVxdWVuY3k7XG4gIH1cbiAgZ2V0IGJsYXN0RnJlcXVlbmN5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2JsYXN0RnJlcXVlbmN5O1xuICB9XG4gIGdldCBidWZmZXJTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2J1ZmZlclNpemU7XG4gIH1cbiAgZ2V0IGlzTmV0d29yaygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faXNOZXR3b3JrO1xuICB9XG4gIGdldCBpc0NhcHR1cmluZygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY2FwdHVyaW5nO1xuICB9XG4gIGdldCBkcml2ZXJUeXBlKCk6IEFuYWx5emVyRHJpdmVyVHlwZSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzTmV0d29yayA/IEFuYWx5emVyRHJpdmVyVHlwZS5OZXR3b3JrIDogQW5hbHl6ZXJEcml2ZXJUeXBlLlNlcmlhbDtcbiAgfVxuXG4gIC8vIOengeacieWPmOmHj1xuICBwcml2YXRlIF9jYXB0dXJpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfaXNOZXR3b3JrOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX3ZlcnNpb246IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9jaGFubmVsQ291bnQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX21heEZyZXF1ZW5jeTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfYmxhc3RGcmVxdWVuY3k6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2J1ZmZlclNpemU6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2RldkFkZHI/OiBzdHJpbmc7XG4gIHByaXZhdGUgX2RldlBvcnQ/OiBudW1iZXI7XG5cbiAgLy8g6YCa5L+h5a+56LGhXG4gIHByaXZhdGUgX3NlcmlhbFBvcnQ6IFNlcmlhbFBvcnQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3RjcFNvY2tldDogU29ja2V0IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICBwcml2YXRlIF9jdXJyZW50U3RyZWFtOiBOb2RlSlMuUmVhZFdyaXRlU3RyZWFtIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICBwcml2YXRlIF9saW5lUGFyc2VyOiBSZWFkbGluZVBhcnNlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfaXNDb25uZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbm5lY3Rpb25TdHJpbmc6IHN0cmluZykge1xuICAgIHN1cGVyKCk7XG5cbiAgICBpZiAoIWNvbm5lY3Rpb25TdHJpbmcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign6L+e5o6l5a2X56ym5Liy5LiN6IO95Li656m6Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOi/nuaOpeiuvuWkh1xuICAgKi9cbiAgYXN5bmMgY29ubmVjdChwYXJhbXM/OiBDb25uZWN0aW9uUGFyYW1zKTogUHJvbWlzZTxDb25uZWN0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25TdHJpbmcuaW5jbHVkZXMoJzonKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmluaXROZXR3b3JrKHRoaXMuY29ubmVjdGlvblN0cmluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRTZXJpYWxQb3J0KHRoaXMuY29ubmVjdGlvblN0cmluZywgMTE1MjAwKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faXNDb25uZWN0ZWQgPSB0cnVlO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkZXZpY2VJbmZvOiB7XG4gICAgICAgICAgbmFtZTogdGhpcy5fdmVyc2lvbiB8fCAnVW5rbm93biBEZXZpY2UnLFxuICAgICAgICAgIHZlcnNpb246IHRoaXMuX3ZlcnNpb24gPz8gdW5kZWZpbmVkLFxuICAgICAgICAgIHR5cGU6IHRoaXMuZHJpdmVyVHlwZSxcbiAgICAgICAgICBjb25uZWN0aW9uUGF0aDogdGhpcy5jb25uZWN0aW9uU3RyaW5nLFxuICAgICAgICAgIGlzTmV0d29yazogdGhpcy5faXNOZXR3b3JrLFxuICAgICAgICAgIGNhcGFiaWxpdGllczogdGhpcy5idWlsZENhcGFiaWxpdGllcygpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn6L+e5o6l5aSx6LSlJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pat5byA6L+e5o6lXG4gICAqL1xuICBhc3luYyBkaXNjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuX2lzQ29ubmVjdGVkID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5fc2VyaWFsUG9ydD8uaXNPcGVuKSB7XG4gICAgICB0aGlzLl9zZXJpYWxQb3J0LmNsb3NlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3RjcFNvY2tldCkge1xuICAgICAgdGhpcy5fdGNwU29ja2V0LmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXJpYWxQb3J0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3RjcFNvY2tldCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9jdXJyZW50U3RyZWFtID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2xpbmVQYXJzZXIgPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W6K6+5aSH54q25oCBXG4gICAqL1xuICBhc3luYyBnZXRTdGF0dXMoKTogUHJvbWlzZTxEZXZpY2VTdGF0dXM+IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNDb25uZWN0ZWQ6IHRoaXMuX2lzQ29ubmVjdGVkLFxuICAgICAgaXNDYXB0dXJpbmc6IHRoaXMuX2NhcHR1cmluZyxcbiAgICAgIGJhdHRlcnlWb2x0YWdlOiBhd2FpdCB0aGlzLmdldFZvbHRhZ2VTdGF0dXMoKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog5byA5aeL6YeH6ZuGXG4gICAqL1xuICBhc3luYyBzdGFydENhcHR1cmUoXG4gICAgc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24sXG4gICAgY2FwdHVyZUNvbXBsZXRlZEhhbmRsZXI/OiBDYXB0dXJlQ29tcGxldGVkSGFuZGxlclxuICApOiBQcm9taXNlPENhcHR1cmVFcnJvcj4ge1xuICAgIGlmICh0aGlzLl9jYXB0dXJpbmcpIHtcbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuQnVzeTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2lzQ29ubmVjdGVkIHx8ICF0aGlzLl9jdXJyZW50U3RyZWFtKSB7XG4gICAgICByZXR1cm4gQ2FwdHVyZUVycm9yLkhhcmR3YXJlRXJyb3I7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuX2NhcHR1cmluZyA9IHRydWU7XG5cbiAgICAgIC8vIOWIm+W7uumHh+mbhuivt+axglxuICAgICAgY29uc3QgY2FwdHVyZVJlcXVlc3QgPSBDYXB0dXJlUmVxdWVzdC5mcm9tQ29uZmlndXJhdGlvbih7XG4gICAgICAgIGZyZXF1ZW5jeTogc2Vzc2lvbi5mcmVxdWVuY3ksXG4gICAgICAgIHByZVRyaWdnZXJTYW1wbGVzOiBzZXNzaW9uLnByZVRyaWdnZXJTYW1wbGVzLFxuICAgICAgICBwb3N0VHJpZ2dlclNhbXBsZXM6IHNlc3Npb24ucG9zdFRyaWdnZXJTYW1wbGVzLFxuICAgICAgICB0cmlnZ2VyVHlwZTogc2Vzc2lvbi50cmlnZ2VyVHlwZSxcbiAgICAgICAgdHJpZ2dlckNoYW5uZWw6IHNlc3Npb24udHJpZ2dlckNoYW5uZWwsXG4gICAgICAgIHRyaWdnZXJJbnZlcnRlZDogc2Vzc2lvbi50cmlnZ2VySW52ZXJ0ZWQsXG4gICAgICAgIHRyaWdnZXJQYXR0ZXJuOiBzZXNzaW9uLnRyaWdnZXJQYXR0ZXJuID8/IDAsXG4gICAgICAgIHRyaWdnZXJCaXRDb3VudDogc2Vzc2lvbi50cmlnZ2VyQml0Q291bnQgPz8gMSxcbiAgICAgICAgbG9vcENvdW50OiBzZXNzaW9uLmxvb3BDb3VudCxcbiAgICAgICAgbWVhc3VyZUJ1cnN0czogc2Vzc2lvbi5tZWFzdXJlQnVyc3RzLFxuICAgICAgICBjYXB0dXJlQ2hhbm5lbHM6IHNlc3Npb24uY2FwdHVyZUNoYW5uZWxzLm1hcChjaCA9PiBjaC5jaGFubmVsTnVtYmVyKSxcbiAgICAgICAgY2FwdHVyZU1vZGU6IHNlc3Npb24uY2FwdHVyZU1vZGVcbiAgICAgIH0pO1xuXG4gICAgICAvLyDlj5HpgIHph4fpm4bor7fmsYJcbiAgICAgIGNvbnN0IHBhY2tldCA9IG5ldyBPdXRwdXRQYWNrZXQoKTtcbiAgICAgIHBhY2tldC5hZGRCeXRlKDEpOyAvLyDph4fpm4blkb3ku6RcbiAgICAgIHBhY2tldC5hZGRTdHJ1Y3QoY2FwdHVyZVJlcXVlc3QpO1xuXG4gICAgICBjb25zdCBkYXRhID0gcGFja2V0LnNlcmlhbGl6ZSgpO1xuICAgICAgYXdhaXQgdGhpcy53cml0ZURhdGEoZGF0YSk7XG5cbiAgICAgIC8vIOiuvue9ruaNleiOt+WujOaIkOWkhOeQhuWZqFxuICAgICAgaWYgKGNhcHR1cmVDb21wbGV0ZWRIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMub25jZSgnY2FwdHVyZUNvbXBsZXRlZCcsIGNhcHR1cmVDb21wbGV0ZWRIYW5kbGVyKTtcbiAgICAgIH1cblxuICAgICAgLy8g5byA5aeL6K+75Y+W5pWw5o2u77yI5byC5q2l77yJXG4gICAgICB0aGlzLnN0YXJ0RGF0YVJlYWRpbmcoc2Vzc2lvbik7XG5cbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuTm9uZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XG4gICAgICBjb25zb2xlLmVycm9yKCfph4fpm4blkK/liqjlpLHotKU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIENhcHR1cmVFcnJvci5VbmV4cGVjdGVkRXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWBnOatoumHh+mbhlxuICAgKi9cbiAgYXN5bmMgc3RvcENhcHR1cmUoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCF0aGlzLl9jYXB0dXJpbmcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyDlj5HpgIHlgZzmraLlkb3ku6RcbiAgICAgIGNvbnN0IHBhY2tldCA9IG5ldyBPdXRwdXRQYWNrZXQoKTtcbiAgICAgIHBhY2tldC5hZGRCeXRlKDIpOyAvLyDlgZzmraLlkb3ku6RcblxuICAgICAgY29uc3QgZGF0YSA9IHBhY2tldC5zZXJpYWxpemUoKTtcbiAgICAgIGF3YWl0IHRoaXMud3JpdGVEYXRhKGRhdGEpO1xuXG4gICAgICB0aGlzLl9jYXB0dXJpbmcgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCflgZzmraLph4fpm4blpLHotKU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDov5vlhaXlvJXlr7zliqDovb3nqIvluo/mqKHlvI9cbiAgICovXG4gIGFzeW5jIGVudGVyQm9vdGxvYWRlcigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFja2V0ID0gbmV3IE91dHB1dFBhY2tldCgpO1xuICAgICAgcGFja2V0LmFkZEJ5dGUoMyk7IC8vIOW8leWvvOWKoOi9veeoi+W6j+WRveS7pFxuXG4gICAgICBjb25zdCBkYXRhID0gcGFja2V0LnNlcmlhbGl6ZSgpO1xuICAgICAgYXdhaXQgdGhpcy53cml0ZURhdGEoZGF0YSk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfov5vlhaXlvJXlr7zliqDovb3nqIvluo/lpLHotKU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bnlLXljovnirbmgIFcbiAgICovXG4gIG92ZXJyaWRlIGFzeW5jIGdldFZvbHRhZ2VTdGF0dXMoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFja2V0ID0gbmV3IE91dHB1dFBhY2tldCgpO1xuICAgICAgcGFja2V0LmFkZEJ5dGUoNCk7IC8vIOeUteWOi+afpeivouWRveS7pFxuXG4gICAgICBjb25zdCBkYXRhID0gcGFja2V0LnNlcmlhbGl6ZSgpO1xuICAgICAgYXdhaXQgdGhpcy53cml0ZURhdGEoZGF0YSk7XG5cbiAgICAgIC8vIOetieW+heWTjeW6lFxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgnVElNRU9VVCcpO1xuICAgICAgICB9LCA1MDAwKTtcblxuICAgICAgICB0aGlzLl9saW5lUGFyc2VyPy5vbmNlKCdkYXRhJywgKGxpbmU6IHN0cmluZykgPT4ge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICByZXNvbHZlKGxpbmUudHJpbSgpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign6I635Y+W55S15Y6L54q25oCB5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiAnRVJST1InO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlj5HpgIHnvZHnu5zphY3nva5cbiAgICovXG4gIG92ZXJyaWRlIGFzeW5jIHNlbmROZXR3b3JrQ29uZmlnKFxuICAgIGFjY2Vzc1BvaW50TmFtZTogc3RyaW5nLFxuICAgIHBhc3N3b3JkOiBzdHJpbmcsXG4gICAgaXBBZGRyZXNzOiBzdHJpbmcsXG4gICAgcG9ydDogbnVtYmVyXG4gICk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYWNrZXQgPSBuZXcgT3V0cHV0UGFja2V0KCk7XG4gICAgICBwYWNrZXQuYWRkQnl0ZSg1KTsgLy8g572R57uc6YWN572u5ZG95LukXG5cbiAgICAgIC8vIOWIm+W7uue9kee7nOmFjee9rue7k+aehFxuICAgICAgY29uc3QgbmV0Q29uZmlnID0ge1xuICAgICAgICBzZXJpYWxpemU6ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMTE1KTsgLy8gMzMgKyA2NCArIDE2ICsgMlxuICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcblxuICAgICAgICAgIC8vIEFjY2Vzc1BvaW50TmFtZSAtIDMz5a2X6IqCXG4gICAgICAgICAgY29uc3QgYXBOYW1lQnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoYWNjZXNzUG9pbnROYW1lKTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMzOyBpKyspIHtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGkgPCBhcE5hbWVCeXRlcy5sZW5ndGggPyBhcE5hbWVCeXRlc1tpXSA6IDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFBhc3N3b3JkIC0gNjTlrZfoioJcbiAgICAgICAgICBjb25zdCBwYXNzd29yZEJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHBhc3N3b3JkKTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY0OyBpKyspIHtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGkgPCBwYXNzd29yZEJ5dGVzLmxlbmd0aCA/IHBhc3N3b3JkQnl0ZXNbaV0gOiAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJUEFkZHJlc3MgLSAxNuWtl+iKglxuICAgICAgICAgIGNvbnN0IGlwQnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoaXBBZGRyZXNzKTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGkgPCBpcEJ5dGVzLmxlbmd0aCA/IGlwQnl0ZXNbaV0gOiAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBQb3J0IC0gMuWtl+iKglxuICAgICAgICAgIHZpZXcuc2V0VWludDE2KG9mZnNldCwgcG9ydCwgdHJ1ZSk7IC8vIGxpdHRsZS1lbmRpYW5cblxuICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBwYWNrZXQuYWRkU3RydWN0KG5ldENvbmZpZyk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBwYWNrZXQuc2VyaWFsaXplKCk7XG4gICAgICBhd2FpdCB0aGlzLndyaXRlRGF0YShkYXRhKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+WPkemAgee9kee7nOmFjee9ruWksei0pTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluS4suWPo+i/nuaOpVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0U2VyaWFsUG9ydChwb3J0TmFtZTogc3RyaW5nLCBiYXVkUmF0ZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX3NlcmlhbFBvcnQgPSBuZXcgU2VyaWFsUG9ydCh7XG4gICAgICAgIHBhdGg6IHBvcnROYW1lLFxuICAgICAgICBiYXVkUmF0ZSxcbiAgICAgICAgYXV0b09wZW46IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fc2VyaWFsUG9ydC5vcGVuKGVycm9yID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihg5Liy5Y+j6L+e5o6l5aSx6LSlOiAke2Vycm9yLm1lc3NhZ2V9YCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2N1cnJlbnRTdHJlYW0gPSB0aGlzLl9zZXJpYWxQb3J0IGFzIE5vZGVKUy5SZWFkV3JpdGVTdHJlYW07XG4gICAgICAgIHRoaXMuX2xpbmVQYXJzZXIgPSBuZXcgUmVhZGxpbmVQYXJzZXIoeyBkZWxpbWl0ZXI6ICdcXG4nIH0pO1xuICAgICAgICB0aGlzLl9zZXJpYWxQb3J0IS5waXBlKHRoaXMuX2xpbmVQYXJzZXIpO1xuXG4gICAgICAgIHRoaXMuX2lzTmV0d29yayA9IGZhbHNlO1xuXG4gICAgICAgIC8vIOWIneWni+WMluiuvuWkh1xuICAgICAgICB0aGlzLmluaXRpYWxpemVEZXZpY2UoKS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbnvZHnu5zov57mjqVcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaW5pdE5ldHdvcmsoYWRkcmVzc1BvcnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG1hdGNoID0gTG9naWNBbmFseXplckRyaXZlci5yZWdBZGRyZXNzUG9ydC5leGVjKGFkZHJlc3NQb3J0KTtcblxuICAgIGlmICghbWF0Y2ggfHwgbWF0Y2gubGVuZ3RoIDwgMykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfmjIflrprnmoTlnLDlnYAv56uv5Y+j5qC85byP5peg5pWIJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGV2QWRkciA9IG1hdGNoWzFdO1xuICAgIGNvbnN0IHBvcnRTdHIgPSBtYXRjaFsyXTtcbiAgICB0aGlzLl9kZXZQb3J0ID0gcGFyc2VJbnQocG9ydFN0ciwgMTApO1xuXG4gICAgaWYgKGlzTmFOKHRoaXMuX2RldlBvcnQpIHx8IHRoaXMuX2RldlBvcnQgPCAxIHx8IHRoaXMuX2RldlBvcnQgPiA2NTUzNSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfmjIflrprnmoTnq6/lj6Plj7fml6DmlYgnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fdGNwU29ja2V0ID0gbmV3IFNvY2tldCgpO1xuXG4gICAgICB0aGlzLl90Y3BTb2NrZXQuY29ubmVjdCh0aGlzLl9kZXZQb3J0ISwgdGhpcy5fZGV2QWRkciEsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY3VycmVudFN0cmVhbSA9IHRoaXMuX3RjcFNvY2tldCBhcyBOb2RlSlMuUmVhZFdyaXRlU3RyZWFtO1xuICAgICAgICB0aGlzLl9saW5lUGFyc2VyID0gbmV3IFJlYWRsaW5lUGFyc2VyKHsgZGVsaW1pdGVyOiAnXFxuJyB9KTtcbiAgICAgICAgdGhpcy5fdGNwU29ja2V0IS5waXBlKHRoaXMuX2xpbmVQYXJzZXIpO1xuXG4gICAgICAgIHRoaXMuX2lzTmV0d29yayA9IHRydWU7XG5cbiAgICAgICAgLy8g5Yid5aeL5YyW6K6+5aSHXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZURldmljZSgpLnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl90Y3BTb2NrZXQub24oJ2Vycm9yJywgZXJyb3IgPT4ge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKGDnvZHnu5zov57mjqXlpLHotKU6ICR7ZXJyb3IubWVzc2FnZX1gKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJborr7lpIfvvIjojrflj5borr7lpIfkv6Hmga/vvIlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZURldmljZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuX2N1cnJlbnRTdHJlYW0gfHwgIXRoaXMuX2xpbmVQYXJzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign6YCa5L+h5rWB5pyq5Yid5aeL5YyWJyk7XG4gICAgfVxuXG4gICAgLy8g5Y+R6YCB6K6+5aSH5L+h5oGv5p+l6K+i5ZG95LukXG4gICAgY29uc3QgcGFja2V0ID0gbmV3IE91dHB1dFBhY2tldCgpO1xuICAgIHBhY2tldC5hZGRCeXRlKDApOyAvLyDorr7lpIfkv6Hmga/mn6Xor6Llkb3ku6RcblxuICAgIGNvbnN0IGRhdGEgPSBwYWNrZXQuc2VyaWFsaXplKCk7XG4gICAgYXdhaXQgdGhpcy53cml0ZURhdGEoZGF0YSk7XG5cbiAgICAvLyDor7vlj5borr7lpIfkv6Hmga9cbiAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCB0aGlzLnJlYWREZXZpY2VJbmZvKCk7XG5cbiAgICAvLyDop6PmnpDorr7lpIfkv6Hmga9cbiAgICB0aGlzLnBhcnNlRGV2aWNlSW5mbyhyZXNwb25zZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIOivu+WPluiuvuWkh+S/oeaBr+WTjeW6lFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyByZWFkRGV2aWNlSW5mbygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcign6K6+5aSH5L+h5oGv6K+75Y+W6LaF5pe2JykpO1xuICAgICAgfSwgMTAwMDApO1xuXG4gICAgICBjb25zdCBkYXRhSGFuZGxlciA9IChsaW5lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmVzcG9uc2VzLnB1c2gobGluZS50cmltKCkpO1xuXG4gICAgICAgIC8vIOmihOacn+aOpeaUtjXooYzlk43lupTvvJrniYjmnKzjgIHpopHnjofjgIHnqoHlj5HpopHnjofjgIHnvJPlhrLljLrlpKflsI/jgIHpgJrpgZPmlbBcbiAgICAgICAgaWYgKHJlc3BvbnNlcy5sZW5ndGggPj0gNSkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICB0aGlzLl9saW5lUGFyc2VyIS5vZmYoJ2RhdGEnLCBkYXRhSGFuZGxlcik7XG4gICAgICAgICAgcmVzb2x2ZShyZXNwb25zZXMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9saW5lUGFyc2VyIS5vbignZGF0YScsIGRhdGFIYW5kbGVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmnpDorr7lpIfkv6Hmga9cbiAgICovXG4gIHByaXZhdGUgcGFyc2VEZXZpY2VJbmZvKHJlc3BvbnNlczogc3RyaW5nW10pOiB2b2lkIHtcbiAgICBpZiAocmVzcG9uc2VzLmxlbmd0aCA8IDUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign6K6+5aSH5L+h5oGv5ZON5bqU5LiN5a6M5pW0Jyk7XG4gICAgfVxuXG4gICAgLy8g54mI5pys5L+h5oGvXG4gICAgdGhpcy5fdmVyc2lvbiA9IHJlc3BvbnNlc1swXTtcblxuICAgIC8vIOmikeeOh+S/oeaBr1xuICAgIGNvbnN0IGZyZXFNYXRjaCA9IExvZ2ljQW5hbHl6ZXJEcml2ZXIucmVnRnJlcS5leGVjKHJlc3BvbnNlc1sxXSk7XG4gICAgaWYgKCFmcmVxTWF0Y2gpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign5peg5pWI55qE6K6+5aSH6aKR546H5ZON5bqUJyk7XG4gICAgfVxuICAgIHRoaXMuX21heEZyZXF1ZW5jeSA9IHBhcnNlSW50KGZyZXFNYXRjaFsxXSwgMTApO1xuXG4gICAgLy8g56qB5Y+R6aKR546H5L+h5oGvXG4gICAgY29uc3QgYmxhc3RNYXRjaCA9IExvZ2ljQW5hbHl6ZXJEcml2ZXIucmVnQmxhc3QuZXhlYyhyZXNwb25zZXNbMl0pO1xuICAgIGlmICghYmxhc3RNYXRjaCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfml6DmlYjnmoTnqoHlj5HpopHnjoflk43lupQnKTtcbiAgICB9XG4gICAgdGhpcy5fYmxhc3RGcmVxdWVuY3kgPSBwYXJzZUludChibGFzdE1hdGNoWzFdLCAxMCk7XG5cbiAgICAvLyDnvJPlhrLljLrlpKflsI/kv6Hmga9cbiAgICBjb25zdCBidWZNYXRjaCA9IExvZ2ljQW5hbHl6ZXJEcml2ZXIucmVnQnVmLmV4ZWMocmVzcG9uc2VzWzNdKTtcbiAgICBpZiAoIWJ1Zk1hdGNoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+aXoOaViOeahOiuvuWkh+e8k+WGsuWMuuWkp+Wwj+WTjeW6lCcpO1xuICAgIH1cbiAgICB0aGlzLl9idWZmZXJTaXplID0gcGFyc2VJbnQoYnVmTWF0Y2hbMV0sIDEwKTtcblxuICAgIC8vIOmAmumBk+aVsOS/oeaBr1xuICAgIGNvbnN0IGNoYW5NYXRjaCA9IExvZ2ljQW5hbHl6ZXJEcml2ZXIucmVnQ2hhbi5leGVjKHJlc3BvbnNlc1s0XSk7XG4gICAgaWYgKCFjaGFuTWF0Y2gpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign5peg5pWI55qE6K6+5aSH6YCa6YGT5pWw5ZON5bqUJyk7XG4gICAgfVxuICAgIHRoaXMuX2NoYW5uZWxDb3VudCA9IHBhcnNlSW50KGNoYW5NYXRjaFsxXSwgMTApO1xuICB9XG5cbiAgLyoqXG4gICAqIOWGmeWFpeaVsOaNruWIsOa1gVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB3cml0ZURhdGEoZGF0YTogVWludDhBcnJheSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAoIXRoaXMuX2N1cnJlbnRTdHJlYW0pIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcign6YCa5L+h5rWB5pyq5Yid5aeL5YyWJykpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2N1cnJlbnRTdHJlYW0ud3JpdGUoQnVmZmVyLmZyb20oZGF0YSksIGVycm9yID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOW8gOWni+aVsOaNruivu+WPlu+8iOmHh+mbhui/h+eoi++8iVxuICAgKiDln7rkuo5DIyBSZWFkQ2FwdHVyZeaWueazleeahOWujOaVtOWunueOsFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBzdGFydERhdGFSZWFkaW5nKHNlc3Npb246IENhcHR1cmVTZXNzaW9uKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5fY3VycmVudFN0cmVhbSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+mAmuS/oea1geacquWIneWni+WMlicpO1xuICAgICAgfVxuXG4gICAgICAvLyDnrYnlvoXph4fpm4blvIDlp4vnoa7orqRcbiAgICAgIGNvbnN0IHN0YXJ0UmVzcG9uc2UgPSBhd2FpdCB0aGlzLndhaXRGb3JSZXNwb25zZSgnQ0FQVFVSRV9TVEFSVEVEJywgMTAwMDApO1xuICAgICAgaWYgKHN0YXJ0UmVzcG9uc2UgIT09ICdDQVBUVVJFX1NUQVJURUQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign6YeH6ZuG5ZCv5Yqo5aSx6LSlJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIOivu+WPlumHh+mbhuaVsOaNrlxuICAgICAgY29uc3QgY2FwdHVyZURhdGEgPSBhd2FpdCB0aGlzLnJlYWRDYXB0dXJlRGF0YShzZXNzaW9uKTtcbiAgICAgIFxuICAgICAgLy8g6Kej5p6Q5pWw5o2u5Yiw6YCa6YGTXG4gICAgICB0aGlzLmV4dHJhY3RTYW1wbGVzVG9DaGFubmVscyhzZXNzaW9uLCBjYXB0dXJlRGF0YSk7XG5cbiAgICAgIHRoaXMuX2NhcHR1cmluZyA9IGZhbHNlO1xuXG4gICAgICBjb25zdCBldmVudEFyZ3M6IENhcHR1cmVFdmVudEFyZ3MgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHNlc3Npb25cbiAgICAgIH07XG5cbiAgICAgIHRoaXMuZW1pdENhcHR1cmVDb21wbGV0ZWQoZXZlbnRBcmdzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XG4gICAgICBjb25zb2xlLmVycm9yKCfmlbDmja7or7vlj5blpLHotKU6JywgZXJyb3IpO1xuICAgICAgXG4gICAgICBjb25zdCBldmVudEFyZ3M6IENhcHR1cmVFdmVudEFyZ3MgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBzZXNzaW9uXG4gICAgICB9O1xuXG4gICAgICB0aGlzLmVtaXRDYXB0dXJlQ29tcGxldGVkKGV2ZW50QXJncyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOetieW+heeJueWumuWTjeW6lFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB3YWl0Rm9yUmVzcG9uc2UoZXhwZWN0ZWRSZXNwb25zZTogc3RyaW5nLCB0aW1lb3V0OiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5fbGluZVBhcnNlciEub2ZmKCdkYXRhJywgZGF0YUhhbmRsZXIpO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKGDnrYnlvoXlk43lupTotoXml7Y6ICR7ZXhwZWN0ZWRSZXNwb25zZX1gKSk7XG4gICAgICB9LCB0aW1lb3V0KTtcblxuICAgICAgY29uc3QgZGF0YUhhbmRsZXIgPSAobGluZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gbGluZS50cmltKCk7XG4gICAgICAgIGlmIChyZXNwb25zZSA9PT0gZXhwZWN0ZWRSZXNwb25zZSkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgIHRoaXMuX2xpbmVQYXJzZXIhLm9mZignZGF0YScsIGRhdGFIYW5kbGVyKTtcbiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5fbGluZVBhcnNlciEub24oJ2RhdGEnLCBkYXRhSGFuZGxlcik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog6K+75Y+W6YeH6ZuG5pWw5o2uXG4gICAqIOWfuuS6jkMjIFJlYWRDYXB0dXJl5pa55rOV5a6e546wXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJlYWRDYXB0dXJlRGF0YShzZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbik6IFByb21pc2U8e1xuICAgIHNhbXBsZXM6IFVpbnQzMkFycmF5O1xuICAgIHRpbWVzdGFtcHM6IEJpZ1VpbnQ2NEFycmF5O1xuICAgIGJ1cnN0czogYW55W107XG4gIH0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9jdXJyZW50U3RyZWFtKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ+mAmuS/oea1geacquWIneWni+WMlicpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtb2RlID0gdGhpcy5nZXRDYXB0dXJlTW9kZShzZXNzaW9uLmNhcHR1cmVDaGFubmVscy5tYXAoY2ggPT4gY2guY2hhbm5lbE51bWJlcikpO1xuICAgICAgY29uc3QgdG90YWxTYW1wbGVzID0gc2Vzc2lvbi5wcmVUcmlnZ2VyU2FtcGxlcyArIHNlc3Npb24ucG9zdFRyaWdnZXJTYW1wbGVzICogKHNlc3Npb24ubG9vcENvdW50ICsgMSk7XG4gICAgICBcbiAgICAgIC8vIOiuoeeul+mihOacn+aVsOaNrumVv+W6plxuICAgICAgbGV0IGJ5dGVzUGVyU2FtcGxlOiBudW1iZXI7XG4gICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgY2FzZSAwOiAvLyBDaGFubmVsc184XG4gICAgICAgICAgYnl0ZXNQZXJTYW1wbGUgPSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6IC8vIENoYW5uZWxzXzE2XG4gICAgICAgICAgYnl0ZXNQZXJTYW1wbGUgPSAyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6IC8vIENoYW5uZWxzXzI0XG4gICAgICAgICAgYnl0ZXNQZXJTYW1wbGUgPSA0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJ5dGVzUGVyU2FtcGxlID0gNDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXhwZWN0ZWREYXRhTGVuZ3RoID0gNCArICh0b3RhbFNhbXBsZXMgKiBieXRlc1BlclNhbXBsZSkgKyAxICsgXG4gICAgICAgIChzZXNzaW9uLmxvb3BDb3VudCA+IDAgJiYgc2Vzc2lvbi5tZWFzdXJlQnVyc3RzID8gKHNlc3Npb24ubG9vcENvdW50ICsgMikgKiA0IDogMCk7XG5cbiAgICAgIGxldCByZWNlaXZlZERhdGEgPSBCdWZmZXIuYWxsb2MoMCk7XG4gICAgICBsZXQgZGF0YUxlbmd0aDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgIGNvbnN0IGRhdGFIYW5kbGVyID0gKGNodW5rOiBCdWZmZXIpID0+IHtcbiAgICAgICAgcmVjZWl2ZWREYXRhID0gQnVmZmVyLmNvbmNhdChbcmVjZWl2ZWREYXRhLCBjaHVua10pO1xuXG4gICAgICAgIC8vIOWmguaenOi/mOayoeivu+WPluWIsOaVsOaNrumVv+W6plxuICAgICAgICBpZiAoZGF0YUxlbmd0aCA9PT0gbnVsbCAmJiByZWNlaXZlZERhdGEubGVuZ3RoID49IDQpIHtcbiAgICAgICAgICBkYXRhTGVuZ3RoID0gcmVjZWl2ZWREYXRhLnJlYWRVSW50MzJMRSgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOajgOafpeaYr+WQpuaOpeaUtuWujOaJgOacieaVsOaNrlxuICAgICAgICBpZiAoZGF0YUxlbmd0aCAhPT0gbnVsbCAmJiByZWNlaXZlZERhdGEubGVuZ3RoID49IGV4cGVjdGVkRGF0YUxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX2N1cnJlbnRTdHJlYW0hLm9mZignZGF0YScsIGRhdGFIYW5kbGVyKTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wYXJzZUNhcHR1cmVEYXRhKHJlY2VpdmVkRGF0YSwgc2Vzc2lvbiwgbW9kZSwgZGF0YUxlbmd0aCk7XG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyDorr7nva7otoXml7ZcbiAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5fY3VycmVudFN0cmVhbSEub2ZmKCdkYXRhJywgZGF0YUhhbmRsZXIpO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCfmlbDmja7or7vlj5botoXml7YnKSk7XG4gICAgICB9LCAzMDAwMCk7IC8vIDMw56eS6LaF5pe2XG5cbiAgICAgIHRoaXMuX2N1cnJlbnRTdHJlYW0ub24oJ2RhdGEnLCBkYXRhSGFuZGxlcik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog6Kej5p6Q6YeH6ZuG5pWw5o2uXG4gICAqIOWfuuS6jkMjIFJlYWRDYXB0dXJl5pa55rOV55qE5pWw5o2u6Kej5p6Q6YC76L6RXG4gICAqL1xuICBwcml2YXRlIHBhcnNlQ2FwdHVyZURhdGEoXG4gICAgZGF0YTogQnVmZmVyLCBcbiAgICBzZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbiwgXG4gICAgbW9kZTogbnVtYmVyLCBcbiAgICBzYW1wbGVDb3VudDogbnVtYmVyXG4gICk6IHtcbiAgICBzYW1wbGVzOiBVaW50MzJBcnJheTtcbiAgICB0aW1lc3RhbXBzOiBCaWdVaW50NjRBcnJheTtcbiAgICBidXJzdHM6IGFueVtdO1xuICB9IHtcbiAgICBsZXQgb2Zmc2V0ID0gNDsgLy8g6Lez6L+H6ZW/5bqm5a2X5q61XG4gICAgY29uc3Qgc2FtcGxlcyA9IG5ldyBVaW50MzJBcnJheShzYW1wbGVDb3VudCk7XG4gICAgXG4gICAgLy8g6K+75Y+W5qC35pys5pWw5o2uXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzYW1wbGVDb3VudDsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgY2FzZSAwOiAvLyBDaGFubmVsc184XG4gICAgICAgICAgc2FtcGxlc1tpXSA9IGRhdGEucmVhZFVJbnQ4KG9mZnNldCk7XG4gICAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTogLy8gQ2hhbm5lbHNfMTZcbiAgICAgICAgICBzYW1wbGVzW2ldID0gZGF0YS5yZWFkVUludDE2TEUob2Zmc2V0KTtcbiAgICAgICAgICBvZmZzZXQgKz0gMjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOiAvLyBDaGFubmVsc18yNFxuICAgICAgICAgIHNhbXBsZXNbaV0gPSBkYXRhLnJlYWRVSW50MzJMRShvZmZzZXQpO1xuICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOivu+WPluaXtumXtOaIs+mVv+W6plxuICAgIGNvbnN0IHRpbWVzdGFtcExlbmd0aCA9IGRhdGEucmVhZFVJbnQ4KG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IDE7XG5cbiAgICBjb25zdCB0aW1lc3RhbXBzID0gbmV3IEJpZ1VpbnQ2NEFycmF5KHRpbWVzdGFtcExlbmd0aCk7XG4gICAgY29uc3QgYnVyc3RzOiBhbnlbXSA9IFtdO1xuXG4gICAgLy8g6K+75Y+W5pe26Ze05oizXG4gICAgaWYgKHRpbWVzdGFtcExlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2Vzc2lvbi5sb29wQ291bnQgKyAyOyBpKyspIHtcbiAgICAgICAgdGltZXN0YW1wc1tpXSA9IEJpZ0ludChkYXRhLnJlYWRVSW50MzJMRShvZmZzZXQpKTtcbiAgICAgICAgb2Zmc2V0ICs9IDQ7XG4gICAgICB9XG5cbiAgICAgIC8vIOWkhOeQhueqgeWPkemXtOmalO+8iOWfuuS6jkMj55qE5aSN5p2C5pe26Ze05oiz5aSE55CG6YC76L6R77yJXG4gICAgICB0aGlzLnByb2Nlc3NCdXJzdFRpbWVzdGFtcHModGltZXN0YW1wcywgc2Vzc2lvbiwgYnVyc3RzKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBzYW1wbGVzLCB0aW1lc3RhbXBzLCBidXJzdHMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbnqoHlj5Hml7bpl7TmiLNcbiAgICog5Z+65LqOQyMgUmVhZENhcHR1cmXkuK3nmoTlpI3mnYLml7bpl7TmiLPlpITnkIbpgLvovpFcbiAgICovXG4gIHByaXZhdGUgcHJvY2Vzc0J1cnN0VGltZXN0YW1wcyhcbiAgICB0aW1lc3RhbXBzOiBCaWdVaW50NjRBcnJheSwgXG4gICAgc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24sIFxuICAgIGJ1cnN0czogYW55W11cbiAgKTogdm9pZCB7XG4gICAgaWYgKHRpbWVzdGFtcHMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAvLyDlj43ovazml7bpl7TmiLPnmoTkvY7kvY3pg6jliIbvvIhTeXNUaWNr6K6h5pWw5Zmo6YCS5YeP77yJXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aW1lc3RhbXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB0dCA9IHRpbWVzdGFtcHNbaV07XG4gICAgICB0aW1lc3RhbXBzW2ldID0gKHR0ICYgMHhGRjAwMDAwMG4pIHwgKDB4MDBGRkZGRkZuIC0gKHR0ICYgMHgwMEZGRkZGRm4pKTtcbiAgICB9XG5cbiAgICAvLyDorqHnrpfnurPnp5Lmr4/moLfmnKzlkozmr4/nqoHlj5FcbiAgICBjb25zdCBuc1BlclNhbXBsZSA9IDEwMDAwMDAwMDAuMCAvIHNlc3Npb24uZnJlcXVlbmN5O1xuICAgIGNvbnN0IHRpY2tzUGVyU2FtcGxlID0gbnNQZXJTYW1wbGUgLyA1O1xuICAgIGNvbnN0IG5zUGVyQnVyc3QgPSBuc1BlclNhbXBsZSAqIHNlc3Npb24ucG9zdFRyaWdnZXJTYW1wbGVzO1xuICAgIGNvbnN0IHRpY2tzUGVyQnVyc3QgPSBuc1BlckJ1cnN0IC8gNTtcblxuICAgIC8vIOiwg+aVtOaXtumXtOaIs+S7peihpeWBv+aKluWKqFxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGltZXN0YW1wcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHRvcCA9IHRpbWVzdGFtcHNbaV0gPCB0aW1lc3RhbXBzW2kgLSAxXSA/IFxuICAgICAgICB0aW1lc3RhbXBzW2ldICsgMHhGRkZGRkZGRm4gOiB0aW1lc3RhbXBzW2ldO1xuXG4gICAgICBpZiAoTnVtYmVyKHRvcCAtIHRpbWVzdGFtcHNbaSAtIDFdKSA8PSB0aWNrc1BlckJ1cnN0KSB7XG4gICAgICAgIGNvbnN0IGRpZmYgPSBCaWdJbnQodGlja3NQZXJCdXJzdCAtIE51bWJlcih0b3AgLSB0aW1lc3RhbXBzW2kgLSAxXSkgKyAodGlja3NQZXJTYW1wbGUgKiAyKSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBqID0gaTsgaiA8IHRpbWVzdGFtcHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICB0aW1lc3RhbXBzW2pdICs9IGRpZmY7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDorqHnrpflu7bov59cbiAgICBjb25zdCBkZWxheXMgPSBuZXcgQmlnVWludDY0QXJyYXkodGltZXN0YW1wcy5sZW5ndGggLSAyKTtcbiAgICBmb3IgKGxldCBpID0gMjsgaSA8IHRpbWVzdGFtcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCB0b3AgPSB0aW1lc3RhbXBzW2ldIDwgdGltZXN0YW1wc1tpIC0gMV0gPyBcbiAgICAgICAgdGltZXN0YW1wc1tpXSArIDB4RkZGRkZGRkZuIDogdGltZXN0YW1wc1tpXTtcbiAgICAgIGRlbGF5c1tpIC0gMl0gPSAodG9wIC0gdGltZXN0YW1wc1tpIC0gMV0gLSBCaWdJbnQodGlja3NQZXJCdXJzdCkpICogNW47XG4gICAgfVxuXG4gICAgLy8g5Yib5bu656qB5Y+R5L+h5oGvXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aW1lc3RhbXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBidXJzdEluZm8gPSB7XG4gICAgICAgIGJ1cnN0U2FtcGxlU3RhcnQ6IGkgPT09IDEgPyBzZXNzaW9uLnByZVRyaWdnZXJTYW1wbGVzIDogXG4gICAgICAgICAgc2Vzc2lvbi5wcmVUcmlnZ2VyU2FtcGxlcyArIChzZXNzaW9uLnBvc3RUcmlnZ2VyU2FtcGxlcyAqIChpIC0gMSkpLFxuICAgICAgICBidXJzdFNhbXBsZUVuZDogc2Vzc2lvbi5wcmVUcmlnZ2VyU2FtcGxlcyArIChzZXNzaW9uLnBvc3RUcmlnZ2VyU2FtcGxlcyAqIGkpLFxuICAgICAgICBidXJzdFNhbXBsZUdhcDogaSA9PT0gMSA/IDBuIDogTnVtYmVyKGRlbGF5c1tpIC0gMl0pIC8gbnNQZXJTYW1wbGUsXG4gICAgICAgIGJ1cnN0VGltZUdhcDogaSA9PT0gMSA/IDBuIDogZGVsYXlzW2kgLSAyXVxuICAgICAgfTtcbiAgICAgIGJ1cnN0cy5wdXNoKGJ1cnN0SW5mbyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaPkOWPluagt+acrOaVsOaNruWIsOmAmumBk1xuICAgKiDln7rkuo5DIyBFeHRyYWN0U2FtcGxlc+aWueazlVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0U2FtcGxlc1RvQ2hhbm5lbHMoXG4gICAgc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24sIFxuICAgIGNhcHR1cmVEYXRhOiB7IHNhbXBsZXM6IFVpbnQzMkFycmF5OyB0aW1lc3RhbXBzOiBCaWdVaW50NjRBcnJheTsgYnVyc3RzOiBhbnlbXSB9XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHsgc2FtcGxlcyB9ID0gY2FwdHVyZURhdGE7XG4gICAgXG4gICAgZm9yIChsZXQgY2hhbm5lbEluZGV4ID0gMDsgY2hhbm5lbEluZGV4IDwgc2Vzc2lvbi5jYXB0dXJlQ2hhbm5lbHMubGVuZ3RoOyBjaGFubmVsSW5kZXgrKykge1xuICAgICAgY29uc3QgY2hhbm5lbCA9IHNlc3Npb24uY2FwdHVyZUNoYW5uZWxzW2NoYW5uZWxJbmRleF07XG4gICAgICBjb25zdCBtYXNrID0gMSA8PCBjaGFubmVsSW5kZXg7XG4gICAgICBcbiAgICAgIGNoYW5uZWwuc2FtcGxlcyA9IG5ldyBVaW50OEFycmF5KHNhbXBsZXMubGVuZ3RoKTtcbiAgICAgIGZvciAobGV0IHNhbXBsZUluZGV4ID0gMDsgc2FtcGxlSW5kZXggPCBzYW1wbGVzLmxlbmd0aDsgc2FtcGxlSW5kZXgrKykge1xuICAgICAgICBjaGFubmVsLnNhbXBsZXNbc2FtcGxlSW5kZXhdID0gKHNhbXBsZXNbc2FtcGxlSW5kZXhdICYgbWFzaykgIT09IDAgPyAxIDogMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDorr7nva7nqoHlj5Hkv6Hmga9cbiAgICBpZiAoY2FwdHVyZURhdGEuYnVyc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNlc3Npb24uYnVyc3RzID0gY2FwdHVyZURhdGEuYnVyc3RzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmnoTlu7rnoazku7bog73lipvmj4/ov7BcbiAgICovXG4gIHByaXZhdGUgYnVpbGRDYXBhYmlsaXRpZXMoKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhbm5lbHM6IHtcbiAgICAgICAgZGlnaXRhbDogdGhpcy5fY2hhbm5lbENvdW50LFxuICAgICAgICBtYXhWb2x0YWdlOiA1LjAsXG4gICAgICAgIGlucHV0SW1wZWRhbmNlOiAxMDAwMDAwXG4gICAgICB9LFxuICAgICAgc2FtcGxpbmc6IHtcbiAgICAgICAgbWF4UmF0ZTogdGhpcy5fbWF4RnJlcXVlbmN5LFxuICAgICAgICBtaW5SYXRlOiB0aGlzLm1pbkZyZXF1ZW5jeSxcbiAgICAgICAgc3VwcG9ydGVkUmF0ZXM6IFt0aGlzLl9tYXhGcmVxdWVuY3ksIHRoaXMuX2JsYXN0RnJlcXVlbmN5XSxcbiAgICAgICAgYnVmZmVyU2l6ZTogdGhpcy5fYnVmZmVyU2l6ZSxcbiAgICAgICAgc3RyZWFtaW5nU3VwcG9ydDogZmFsc2VcbiAgICAgIH0sXG4gICAgICB0cmlnZ2Vyczoge1xuICAgICAgICB0eXBlczogWzAsIDEsIDIsIDNdLCAvLyBFZGdlLCBDb21wbGV4LCBGYXN0LCBCbGFzdFxuICAgICAgICBtYXhDaGFubmVsczogdGhpcy5fY2hhbm5lbENvdW50LFxuICAgICAgICBwYXR0ZXJuV2lkdGg6IDE2LFxuICAgICAgICBzZXF1ZW50aWFsU3VwcG9ydDogZmFsc2UsXG4gICAgICAgIGNvbmRpdGlvbnM6IFsncmlzaW5nJywgJ2ZhbGxpbmcnLCAnaGlnaCcsICdsb3cnXVxuICAgICAgfSxcbiAgICAgIGNvbm5lY3Rpdml0eToge1xuICAgICAgICBpbnRlcmZhY2VzOiB0aGlzLl9pc05ldHdvcmsgPyBbJ2V0aGVybmV0J10gOiBbJ3NlcmlhbCddLFxuICAgICAgICBwcm90b2NvbHM6IFsnY3VzdG9tJ11cbiAgICAgIH0sXG4gICAgICBmZWF0dXJlczoge1xuICAgICAgICB2b2x0YWdlTW9uaXRvcmluZzogdHJ1ZSxcbiAgICAgICAgc2lnbmFsR2VuZXJhdGlvbjogZmFsc2VcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOi1hOa6kOa4heeQhlxuICAgKi9cbiAgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/drivers/LogicAnalyzerDriver.ts\n\n}");

/***/ }),

/***/ "./src/drivers/MultiAnalyzerDriver.ts":
/*!********************************************!*\
  !*** ./src/drivers/MultiAnalyzerDriver.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.MultiAnalyzerDriver = void 0;\nconst AnalyzerDriverBase_1 = __webpack_require__(/*! ./AnalyzerDriverBase */ \"./src/drivers/AnalyzerDriverBase.ts\");\nconst LogicAnalyzerDriver_1 = __webpack_require__(/*! ./LogicAnalyzerDriver */ \"./src/drivers/LogicAnalyzerDriver.ts\");\nconst AnalyzerTypes_1 = __webpack_require__(/*! ../models/AnalyzerTypes */ \"./src/models/AnalyzerTypes.ts\");\n/**\n * 多设备逻辑分析器同步驱动\n * 基于C# MultiAnalyzerDriver的TypeScript移植\n * 支持2-5个设备的同步采集，提供最多120个通道\n */\nclass MultiAnalyzerDriver extends AnalyzerDriverBase_1.AnalyzerDriverBase {\n    // 属性实现 - 基于所有连接设备的最小值\n    get deviceVersion() {\n        return this._version;\n    }\n    get channelCount() {\n        // 总通道数 = 每个设备的最小通道数 × 设备数量\n        const minChannelsPerDevice = Math.min(...this._connectedDevices.map(d => d.channelCount));\n        return minChannelsPerDevice * this._connectedDevices.length;\n    }\n    get maxFrequency() {\n        // 返回所有设备的最小最大频率（确保所有设备都能支持）\n        return Math.min(...this._connectedDevices.map(d => d.maxFrequency));\n    }\n    get minFrequency() {\n        // 返回所有设备的最大最小频率（确保所有设备都能支持）\n        return Math.max(...this._connectedDevices.map(d => d.minFrequency));\n    }\n    get blastFrequency() {\n        // 多设备模式不支持突发采集\n        return 0;\n    }\n    get bufferSize() {\n        // 返回所有设备的最小缓冲区大小\n        return Math.min(...this._connectedDevices.map(d => d.bufferSize));\n    }\n    get isNetwork() {\n        return false; // 多设备驱动本身不是网络设备\n    }\n    get isCapturing() {\n        return this._capturing;\n    }\n    get driverType() {\n        return AnalyzerTypes_1.AnalyzerDriverType.Multi;\n    }\n    constructor(connectionStrings) {\n        super();\n        // 私有变量\n        this._capturing = false;\n        this._version = null;\n        this._connectedDevices = [];\n        this._deviceCaptures = [];\n        this._sourceSession = null;\n        this._locker = {}; // 用于同步控制\n        if (!connectionStrings || connectionStrings.length < 2 || connectionStrings.length > 5) {\n            throw new Error('无效的设备数量，必须提供2-5个连接字符串');\n        }\n        // 第一个连接字符串必须是主设备\n        this._connectedDevices = new Array(connectionStrings.length);\n        this.initializeDevices(connectionStrings);\n    }\n    /**\n     * 初始化所有设备\n     */\n    async initializeDevices(connectionStrings) {\n        try {\n            // 连接所有设备\n            for (let i = 0; i < connectionStrings.length; i++) {\n                this._connectedDevices[i] = new LogicAnalyzerDriver_1.LogicAnalyzerDriver(connectionStrings[i]);\n                this._connectedDevices[i].tag = i; // 设置设备标识\n            }\n            // 为每个设备设置捕获完成事件处理器\n            for (const device of this._connectedDevices) {\n                device.on('captureCompleted', this.handleDeviceCaptureCompleted.bind(this));\n            }\n        }\n        catch (error) {\n            // 清理已连接的设备\n            for (const device of this._connectedDevices) {\n                if (device) {\n                    device.dispose();\n                }\n            }\n            throw new Error(`设备连接失败: ${error}`);\n        }\n    }\n    /**\n     * 连接所有设备\n     */\n    async connect(params) {\n        try {\n            // 连接所有设备\n            const connectionPromises = this._connectedDevices.map(device => device.connect(params));\n            const results = await Promise.all(connectionPromises);\n            // 检查所有连接是否成功\n            const failedConnections = results.filter(result => !result.success);\n            if (failedConnections.length > 0) {\n                throw new Error(`设备连接失败: ${failedConnections.map(r => r.error).join(', ')}`);\n            }\n            // 验证设备版本兼容性\n            this.validateDeviceVersions();\n            // 设置多设备版本信息\n            const masterDevice = this._connectedDevices[0];\n            const masterVersion = this.parseVersion(masterDevice.deviceVersion);\n            this._version = `MULTI_ANALYZER_${masterVersion.major}_${masterVersion.minor}`;\n            return {\n                success: true,\n                deviceInfo: {\n                    name: this._version,\n                    version: this._version,\n                    type: this.driverType,\n                    connectionPath: 'Multi-Device',\n                    isNetwork: false,\n                    capabilities: this.buildCapabilities()\n                }\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : '多设备连接失败'\n            };\n        }\n    }\n    /**\n     * 验证设备版本兼容性\n     */\n    validateDeviceVersions() {\n        let masterVersion = null;\n        for (let i = 0; i < this._connectedDevices.length; i++) {\n            const device = this._connectedDevices[i];\n            const deviceVersion = this.parseVersion(device.deviceVersion);\n            if (!deviceVersion.isValid) {\n                throw new Error(`设备 ${i} 版本无效: ${device.deviceVersion}`);\n            }\n            if (masterVersion === null) {\n                masterVersion = deviceVersion;\n            }\n            else {\n                if (masterVersion.major !== deviceVersion.major ||\n                    masterVersion.minor !== deviceVersion.minor) {\n                    throw new Error(`设备版本不兼容。主设备版本: V${masterVersion.major}_${masterVersion.minor}, ` +\n                        `设备 ${i} 版本: V${deviceVersion.major}_${deviceVersion.minor}`);\n                }\n            }\n        }\n    }\n    /**\n     * 解析版本字符串\n     */\n    parseVersion(versionString) {\n        if (!versionString) {\n            return { major: 0, minor: 0, isValid: false };\n        }\n        // 假设版本格式类似 \"V1_23\" 或 \"ANALYZER_V1_23\"\n        const match = versionString.match(/V(\\d+)_(\\d+)/);\n        if (match) {\n            return {\n                major: parseInt(match[1], 10),\n                minor: parseInt(match[2], 10),\n                isValid: true\n            };\n        }\n        return { major: 0, minor: 0, isValid: false };\n    }\n    /**\n     * 断开所有设备连接\n     */\n    async disconnect() {\n        for (const device of this._connectedDevices) {\n            await device.disconnect();\n        }\n    }\n    /**\n     * 获取设备状态\n     */\n    async getStatus() {\n        // 获取所有设备状态\n        const statuses = await Promise.all(this._connectedDevices.map(device => device.getStatus()));\n        return {\n            isConnected: statuses.every(status => status.isConnected),\n            isCapturing: this._capturing,\n            batteryVoltage: 'N/A',\n            multiDeviceStatus: statuses\n        };\n    }\n    /**\n     * 开始同步采集\n     */\n    async startCapture(session, captureCompletedHandler) {\n        // 多设备模式不支持边沿触发\n        if (session.triggerType === AnalyzerTypes_1.TriggerType.Edge) {\n            return AnalyzerTypes_1.CaptureError.BadParams;\n        }\n        if (this._capturing) {\n            return AnalyzerTypes_1.CaptureError.Busy;\n        }\n        if (!session.captureChannels || session.captureChannels.length === 0) {\n            return AnalyzerTypes_1.CaptureError.BadParams;\n        }\n        try {\n            // 验证采集参数\n            const validationError = this.validateCaptureParameters(session);\n            if (validationError !== AnalyzerTypes_1.CaptureError.None) {\n                return validationError;\n            }\n            // 分配通道到各个设备\n            const channelsPerDevice = this.splitChannelsPerDevice(session.captureChannels.map(ch => ch.channelNumber));\n            if (channelsPerDevice[0].length < 1) {\n                return AnalyzerTypes_1.CaptureError.BadParams;\n            }\n            // 计算触发延迟偏移\n            const samplePeriod = 1000000000.0 / session.frequency;\n            const delay = session.triggerType === AnalyzerTypes_1.TriggerType.Fast ?\n                AnalyzerTypes_1.TriggerDelays.FastTriggerDelay : AnalyzerTypes_1.TriggerDelays.ComplexTriggerDelay;\n            const offset = Math.round((delay / samplePeriod) + 0.3);\n            // 初始化设备捕获状态\n            this._deviceCaptures = new Array(this._connectedDevices.length);\n            for (let i = 0; i < this._deviceCaptures.length; i++) {\n                this._deviceCaptures[i] = { completed: false, session: null };\n            }\n            this._currentCaptureHandler = captureCompletedHandler;\n            this._sourceSession = session;\n            this._capturing = true;\n            // 启动从设备采集（除了主设备外的所有设备）\n            let channelsCapturing = 1;\n            for (let i = 1; i < channelsPerDevice.length; i++) {\n                const channels = channelsPerDevice[i];\n                if (channels.length === 0) {\n                    this._deviceCaptures[i].completed = true;\n                    continue;\n                }\n                // 创建从设备采集会话\n                const slaveSession = this.createSlaveSession(session, channels, offset);\n                this._connectedDevices[i].tag = channelsCapturing;\n                const error = await this._connectedDevices[i].startCapture(slaveSession);\n                if (error !== AnalyzerTypes_1.CaptureError.None) {\n                    await this.stopCapture();\n                    return error;\n                }\n                channelsCapturing++;\n            }\n            // 启动主设备采集（最后启动，作为同步信号）\n            this._connectedDevices[0].tag = 0;\n            const masterChannels = channelsPerDevice[0];\n            const masterSession = this.createMasterSession(session, masterChannels);\n            const masterError = await this._connectedDevices[0].startCapture(masterSession);\n            if (masterError !== AnalyzerTypes_1.CaptureError.None) {\n                await this.stopCapture();\n                return masterError;\n            }\n            return AnalyzerTypes_1.CaptureError.None;\n        }\n        catch (error) {\n            this._capturing = false;\n            console.error('多设备采集启动失败:', error);\n            return AnalyzerTypes_1.CaptureError.UnexpectedError;\n        }\n    }\n    /**\n     * 验证采集参数\n     */\n    validateCaptureParameters(session) {\n        const channelNumbers = session.captureChannels.map(ch => ch.channelNumber);\n        const captureLimits = this.getLimits(channelNumbers);\n        // 检查基本参数\n        if (channelNumbers.some(ch => ch < 0 || ch >= this.channelCount) ||\n            (session.triggerBitCount !== undefined && session.triggerBitCount < 1) ||\n            (session.triggerBitCount !== undefined && session.triggerBitCount > 16) ||\n            (session.triggerChannel !== undefined && (session.triggerChannel < 0 || session.triggerChannel > 15)) ||\n            session.preTriggerSamples < captureLimits.minPreSamples ||\n            session.postTriggerSamples < captureLimits.minPostSamples ||\n            session.preTriggerSamples > captureLimits.maxPreSamples ||\n            session.postTriggerSamples > captureLimits.maxPostSamples ||\n            (session.preTriggerSamples + session.postTriggerSamples) > captureLimits.maxTotalSamples ||\n            session.frequency < this.minFrequency ||\n            session.frequency > this.maxFrequency) {\n            return AnalyzerTypes_1.CaptureError.BadParams;\n        }\n        return AnalyzerTypes_1.CaptureError.None;\n    }\n    /**\n     * 将通道分配到各个设备\n     */\n    splitChannelsPerDevice(channels) {\n        const channelsPerDevice = [];\n        const maxChannelsPerDevice = Math.min(...this._connectedDevices.map(d => d.channelCount));\n        for (let deviceIndex = 0; deviceIndex < this._connectedDevices.length; deviceIndex++) {\n            const firstChannel = deviceIndex * maxChannelsPerDevice;\n            const lastChannel = (deviceIndex + 1) * maxChannelsPerDevice;\n            const deviceChannels = channels\n                .filter(ch => ch >= firstChannel && ch < lastChannel)\n                .map(ch => ch - firstChannel);\n            channelsPerDevice.push(deviceChannels);\n        }\n        return channelsPerDevice;\n    }\n    /**\n     * 创建从设备采集会话\n     */\n    createSlaveSession(originalSession, channels, offset) {\n        const slaveSession = {\n            ...originalSession,\n            captureChannels: channels.map(ch => ({\n                channelNumber: ch,\n                channelName: `Channel ${ch + 1}`,\n                hidden: false\n            })),\n            triggerChannel: 24,\n            triggerType: AnalyzerTypes_1.TriggerType.Edge,\n            preTriggerSamples: originalSession.preTriggerSamples + offset,\n            postTriggerSamples: originalSession.postTriggerSamples - offset,\n            loopCount: 0,\n            measureBursts: false,\n            triggerInverted: false\n        };\n        return slaveSession;\n    }\n    /**\n     * 创建主设备采集会话\n     */\n    createMasterSession(originalSession, channels) {\n        const masterSession = {\n            ...originalSession,\n            captureChannels: channels.map(ch => ({\n                channelNumber: ch,\n                channelName: `Channel ${ch + 1}`,\n                hidden: false\n            }))\n        };\n        return masterSession;\n    }\n    /**\n     * 停止所有设备采集\n     */\n    async stopCapture() {\n        if (!this._capturing) {\n            return true;\n        }\n        try {\n            // 停止所有设备\n            const stopPromises = this._connectedDevices.map(device => device.stopCapture());\n            await Promise.all(stopPromises);\n            this._capturing = false;\n            return true;\n        }\n        catch (error) {\n            console.error('停止多设备采集失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 进入引导加载程序模式\n     */\n    async enterBootloader() {\n        if (this._capturing) {\n            return false;\n        }\n        try {\n            // 所有设备都需要成功进入引导加载程序模式\n            const results = await Promise.all(this._connectedDevices.map(device => device.enterBootloader()));\n            return results.every(result => result === true);\n        }\n        catch (error) {\n            console.error('进入引导加载程序失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 处理单个设备的采集完成事件\n     */\n    handleDeviceCaptureCompleted(args) {\n        // 同步锁定\n        if (!this._capturing || !this._sourceSession) {\n            return;\n        }\n        if (!args.success) {\n            this.stopCapture();\n            this._deviceCaptures = [];\n            const eventArgs = {\n                success: false,\n                session: this._sourceSession\n            };\n            if (this._currentCaptureHandler) {\n                this._currentCaptureHandler(eventArgs);\n            }\n            else {\n                this.emitCaptureCompleted(eventArgs);\n            }\n            return;\n        }\n        // 获取设备索引\n        const deviceIndex = args.session.deviceTag || 0;\n        this._deviceCaptures[deviceIndex].session = args.session;\n        this._deviceCaptures[deviceIndex].completed = true;\n        // 检查所有设备是否都完成采集\n        if (this._deviceCaptures.every(capture => capture.completed)) {\n            this.combineDeviceResults();\n        }\n    }\n    /**\n     * 合并所有设备的采集结果\n     */\n    combineDeviceResults() {\n        if (!this._sourceSession)\n            return;\n        const maxChannelsPerDevice = Math.min(...this._connectedDevices.map(d => d.channelCount));\n        // 合并所有设备的通道数据\n        for (let deviceIndex = 0; deviceIndex < this._deviceCaptures.length; deviceIndex++) {\n            const deviceCapture = this._deviceCaptures[deviceIndex];\n            if (deviceCapture.session) {\n                for (const deviceChannel of deviceCapture.session.captureChannels) {\n                    // 计算在源会话中的通道索引\n                    const globalChannelNumber = deviceChannel.channelNumber + deviceIndex * maxChannelsPerDevice;\n                    // 找到对应的源会话通道\n                    const sourceChannel = this._sourceSession.captureChannels.find(ch => ch.channelNumber === globalChannelNumber);\n                    if (sourceChannel) {\n                        sourceChannel.samples = deviceChannel.samples;\n                    }\n                }\n            }\n        }\n        this._capturing = false;\n        const eventArgs = {\n            success: true,\n            session: this._sourceSession\n        };\n        if (this._currentCaptureHandler) {\n            this._currentCaptureHandler(eventArgs);\n        }\n        else {\n            this.emitCaptureCompleted(eventArgs);\n        }\n    }\n    /**\n     * 获取多设备采集模式\n     */\n    getCaptureMode(channels) {\n        const splitChannels = this.splitChannelsPerDevice(channels);\n        const maxChannelPerDevice = splitChannels\n            .map(deviceChannels => Math.max(...deviceChannels, 0))\n            .reduce((max, current) => Math.max(max, current), 0);\n        if (maxChannelPerDevice < 8)\n            return AnalyzerTypes_1.CaptureMode.Channels_8;\n        if (maxChannelPerDevice < 16)\n            return AnalyzerTypes_1.CaptureMode.Channels_16;\n        return AnalyzerTypes_1.CaptureMode.Channels_24;\n    }\n    /**\n     * 获取多设备采集限制\n     */\n    getLimits(channels) {\n        const splitChannels = this.splitChannelsPerDevice(channels);\n        const deviceLimits = this._connectedDevices.map((device, index) => device.getLimits(splitChannels[index] || []));\n        // 返回所有设备的最严格限制\n        return {\n            minPreSamples: Math.max(...deviceLimits.map(limit => limit.minPreSamples)),\n            maxPreSamples: Math.min(...deviceLimits.map(limit => limit.maxPreSamples)),\n            minPostSamples: Math.max(...deviceLimits.map(limit => limit.minPostSamples)),\n            maxPostSamples: Math.min(...deviceLimits.map(limit => limit.maxPostSamples)),\n            get maxTotalSamples() {\n                return this.minPreSamples + this.maxPostSamples;\n            }\n        };\n    }\n    /**\n     * 网络配置（多设备不支持）\n     */\n    async sendNetworkConfig(accessPointName, password, ipAddress, port) {\n        return false; // 多设备驱动不支持网络配置\n    }\n    /**\n     * 获取电压状态（多设备不支持）\n     */\n    async getVoltageStatus() {\n        return 'UNSUPPORTED'; // 多设备驱动不支持电压监控\n    }\n    /**\n     * 构建硬件能力描述\n     */\n    buildCapabilities() {\n        return {\n            channels: {\n                digital: this.channelCount,\n                maxVoltage: 5.0,\n                inputImpedance: 1000000\n            },\n            sampling: {\n                maxRate: this.maxFrequency,\n                minRate: this.minFrequency,\n                supportedRates: [this.maxFrequency],\n                bufferSize: this.bufferSize,\n                streamingSupport: false\n            },\n            triggers: {\n                types: [1, 2],\n                maxChannels: 16,\n                patternWidth: 16,\n                sequentialSupport: true,\n                conditions: ['pattern', 'complex']\n            },\n            connectivity: {\n                interfaces: ['multi-device'],\n                protocols: ['custom']\n            },\n            features: {\n                multiDevice: true,\n                synchronization: true,\n                maxDevices: 5,\n                totalChannels: this.channelCount\n            }\n        };\n    }\n    /**\n     * 资源清理\n     */\n    dispose() {\n        for (const device of this._connectedDevices) {\n            device.dispose();\n        }\n        super.dispose();\n    }\n}\nexports.MultiAnalyzerDriver = MultiAnalyzerDriver;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZXIvLi9zcmMvZHJpdmVycy9NdWx0aUFuYWx5emVyRHJpdmVyLnRzPzI5YjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQW5hbHl6ZXJEcml2ZXJCYXNlIH0gZnJvbSAnLi9BbmFseXplckRyaXZlckJhc2UnO1xyXG5pbXBvcnQgeyBMb2dpY0FuYWx5emVyRHJpdmVyIH0gZnJvbSAnLi9Mb2dpY0FuYWx5emVyRHJpdmVyJztcclxuaW1wb3J0IHtcclxuICBBbmFseXplckRyaXZlclR5cGUsXHJcbiAgQ2FwdHVyZUVycm9yLFxyXG4gIENhcHR1cmVTZXNzaW9uLFxyXG4gIENhcHR1cmVFdmVudEFyZ3MsXHJcbiAgQ2FwdHVyZUNvbXBsZXRlZEhhbmRsZXIsXHJcbiAgQ29ubmVjdGlvblBhcmFtcyxcclxuICBDb25uZWN0aW9uUmVzdWx0LFxyXG4gIERldmljZVN0YXR1cyxcclxuICBDYXB0dXJlTW9kZSxcclxuICBUcmlnZ2VyVHlwZSxcclxuICBUcmlnZ2VyRGVsYXlzXHJcbn0gZnJvbSAnLi4vbW9kZWxzL0FuYWx5emVyVHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIOWkmuiuvuWkh+mAu+i+keWIhuaekOWZqOWQjOatpempseWKqFxyXG4gKiDln7rkuo5DIyBNdWx0aUFuYWx5emVyRHJpdmVy55qEVHlwZVNjcmlwdOenu+akjVxyXG4gKiDmlK/mjIEyLTXkuKrorr7lpIfnmoTlkIzmraXph4fpm4bvvIzmj5DkvpvmnIDlpJoxMjDkuKrpgJrpgZNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNdWx0aUFuYWx5emVyRHJpdmVyIGV4dGVuZHMgQW5hbHl6ZXJEcml2ZXJCYXNlIHtcclxuICAvLyDlsZ7mgKflrp7njrAgLSDln7rkuo7miYDmnInov57mjqXorr7lpIfnmoTmnIDlsI/lgLxcclxuICBnZXQgZGV2aWNlVmVyc2lvbigpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLl92ZXJzaW9uO1xyXG4gIH1cclxuICBnZXQgY2hhbm5lbENvdW50KCk6IG51bWJlciB7XHJcbiAgICAvLyDmgLvpgJrpgZPmlbAgPSDmr4/kuKrorr7lpIfnmoTmnIDlsI/pgJrpgZPmlbAgw5cg6K6+5aSH5pWw6YePXHJcbiAgICBjb25zdCBtaW5DaGFubmVsc1BlckRldmljZSA9IE1hdGgubWluKC4uLnRoaXMuX2Nvbm5lY3RlZERldmljZXMubWFwKGQgPT4gZC5jaGFubmVsQ291bnQpKTtcclxuICAgIHJldHVybiBtaW5DaGFubmVsc1BlckRldmljZSAqIHRoaXMuX2Nvbm5lY3RlZERldmljZXMubGVuZ3RoO1xyXG4gIH1cclxuICBnZXQgbWF4RnJlcXVlbmN5KCk6IG51bWJlciB7XHJcbiAgICAvLyDov5Tlm57miYDmnInorr7lpIfnmoTmnIDlsI/mnIDlpKfpopHnjofvvIjnoa7kv53miYDmnInorr7lpIfpg73og73mlK/mjIHvvIlcclxuICAgIHJldHVybiBNYXRoLm1pbiguLi50aGlzLl9jb25uZWN0ZWREZXZpY2VzLm1hcChkID0+IGQubWF4RnJlcXVlbmN5KSk7XHJcbiAgfVxyXG4gIGdldCBtaW5GcmVxdWVuY3koKTogbnVtYmVyIHtcclxuICAgIC8vIOi/lOWbnuaJgOacieiuvuWkh+eahOacgOWkp+acgOWwj+mikeeOh++8iOehruS/neaJgOacieiuvuWkh+mDveiDveaUr+aMge+8iVxyXG4gICAgcmV0dXJuIE1hdGgubWF4KC4uLnRoaXMuX2Nvbm5lY3RlZERldmljZXMubWFwKGQgPT4gZC5taW5GcmVxdWVuY3kpKTtcclxuICB9XHJcbiAgZ2V0IGJsYXN0RnJlcXVlbmN5KCk6IG51bWJlciB7XHJcbiAgICAvLyDlpJrorr7lpIfmqKHlvI/kuI3mlK/mjIHnqoHlj5Hph4fpm4ZcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuICBnZXQgYnVmZmVyU2l6ZSgpOiBudW1iZXIge1xyXG4gICAgLy8g6L+U5Zue5omA5pyJ6K6+5aSH55qE5pyA5bCP57yT5Yay5Yy65aSn5bCPXHJcbiAgICByZXR1cm4gTWF0aC5taW4oLi4udGhpcy5fY29ubmVjdGVkRGV2aWNlcy5tYXAoZCA9PiBkLmJ1ZmZlclNpemUpKTtcclxuICB9XHJcbiAgZ2V0IGlzTmV0d29yaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBmYWxzZTsgLy8g5aSa6K6+5aSH6amx5Yqo5pys6Lqr5LiN5piv572R57uc6K6+5aSHXHJcbiAgfVxyXG4gIGdldCBpc0NhcHR1cmluZygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXB0dXJpbmc7XHJcbiAgfVxyXG4gIGdldCBkcml2ZXJUeXBlKCk6IEFuYWx5emVyRHJpdmVyVHlwZSB7XHJcbiAgICByZXR1cm4gQW5hbHl6ZXJEcml2ZXJUeXBlLk11bHRpO1xyXG4gIH1cclxuXHJcbiAgLy8g56eB5pyJ5Y+Y6YePXHJcbiAgcHJpdmF0ZSBfY2FwdHVyaW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBfdmVyc2lvbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBfY29ubmVjdGVkRGV2aWNlczogTG9naWNBbmFseXplckRyaXZlcltdID0gW107XHJcbiAgcHJpdmF0ZSBfZGV2aWNlQ2FwdHVyZXM6IEFycmF5PHtcclxuICAgIGNvbXBsZXRlZDogYm9vbGVhbjtcclxuICAgIHNlc3Npb246IENhcHR1cmVTZXNzaW9uIHwgbnVsbDtcclxuICB9PiA9IFtdO1xyXG4gIHByaXZhdGUgX3NvdXJjZVNlc3Npb246IENhcHR1cmVTZXNzaW9uIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBfY3VycmVudENhcHR1cmVIYW5kbGVyPzogQ2FwdHVyZUNvbXBsZXRlZEhhbmRsZXI7XHJcbiAgcHJpdmF0ZSBfbG9ja2VyID0ge307IC8vIOeUqOS6juWQjOatpeaOp+WItlxyXG5cclxuICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uU3RyaW5nczogc3RyaW5nW10pIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgaWYgKCFjb25uZWN0aW9uU3RyaW5ncyB8fCBjb25uZWN0aW9uU3RyaW5ncy5sZW5ndGggPCAyIHx8IGNvbm5lY3Rpb25TdHJpbmdzLmxlbmd0aCA+IDUpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCfml6DmlYjnmoTorr7lpIfmlbDph4/vvIzlv4Xpobvmj5DkvpsyLTXkuKrov57mjqXlrZfnrKbkuLInKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDnrKzkuIDkuKrov57mjqXlrZfnrKbkuLLlv4XpobvmmK/kuLvorr7lpIdcclxuICAgIHRoaXMuX2Nvbm5lY3RlZERldmljZXMgPSBuZXcgQXJyYXkoY29ubmVjdGlvblN0cmluZ3MubGVuZ3RoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZURldmljZXMoY29ubmVjdGlvblN0cmluZ3MpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yid5aeL5YyW5omA5pyJ6K6+5aSHXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplRGV2aWNlcyhjb25uZWN0aW9uU3RyaW5nczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOi/nuaOpeaJgOacieiuvuWkh1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbm5lY3Rpb25TdHJpbmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkRGV2aWNlc1tpXSA9IG5ldyBMb2dpY0FuYWx5emVyRHJpdmVyKGNvbm5lY3Rpb25TdHJpbmdzW2ldKTtcclxuICAgICAgICB0aGlzLl9jb25uZWN0ZWREZXZpY2VzW2ldLnRhZyA9IGk7IC8vIOiuvue9ruiuvuWkh+agh+ivhlxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDkuLrmr4/kuKrorr7lpIforr7nva7mjZXojrflrozmiJDkuovku7blpITnkIblmahcclxuICAgICAgZm9yIChjb25zdCBkZXZpY2Ugb2YgdGhpcy5fY29ubmVjdGVkRGV2aWNlcykge1xyXG4gICAgICAgIGRldmljZS5vbignY2FwdHVyZUNvbXBsZXRlZCcsIHRoaXMuaGFuZGxlRGV2aWNlQ2FwdHVyZUNvbXBsZXRlZC5iaW5kKHRoaXMpKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIOa4heeQhuW3sui/nuaOpeeahOiuvuWkh1xyXG4gICAgICBmb3IgKGNvbnN0IGRldmljZSBvZiB0aGlzLl9jb25uZWN0ZWREZXZpY2VzKSB7XHJcbiAgICAgICAgaWYgKGRldmljZSkge1xyXG4gICAgICAgICAgZGV2aWNlLmRpc3Bvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGDorr7lpIfov57mjqXlpLHotKU6ICR7ZXJyb3J9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDov57mjqXmiYDmnInorr7lpIdcclxuICAgKi9cclxuICBhc3luYyBjb25uZWN0KHBhcmFtcz86IENvbm5lY3Rpb25QYXJhbXMpOiBQcm9taXNlPENvbm5lY3Rpb25SZXN1bHQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOi/nuaOpeaJgOacieiuvuWkh1xyXG4gICAgICBjb25zdCBjb25uZWN0aW9uUHJvbWlzZXMgPSB0aGlzLl9jb25uZWN0ZWREZXZpY2VzLm1hcChkZXZpY2UgPT4gZGV2aWNlLmNvbm5lY3QocGFyYW1zKSk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChjb25uZWN0aW9uUHJvbWlzZXMpO1xyXG5cclxuICAgICAgLy8g5qOA5p+l5omA5pyJ6L+e5o6l5piv5ZCm5oiQ5YqfXHJcbiAgICAgIGNvbnN0IGZhaWxlZENvbm5lY3Rpb25zID0gcmVzdWx0cy5maWx0ZXIocmVzdWx0ID0+ICFyZXN1bHQuc3VjY2Vzcyk7XHJcbiAgICAgIGlmIChmYWlsZWRDb25uZWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDorr7lpIfov57mjqXlpLHotKU6ICR7ZmFpbGVkQ29ubmVjdGlvbnMubWFwKHIgPT4gci5lcnJvcikuam9pbignLCAnKX1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6aqM6K+B6K6+5aSH54mI5pys5YW85a655oCnXHJcbiAgICAgIHRoaXMudmFsaWRhdGVEZXZpY2VWZXJzaW9ucygpO1xyXG5cclxuICAgICAgLy8g6K6+572u5aSa6K6+5aSH54mI5pys5L+h5oGvXHJcbiAgICAgIGNvbnN0IG1hc3RlckRldmljZSA9IHRoaXMuX2Nvbm5lY3RlZERldmljZXNbMF07XHJcbiAgICAgIGNvbnN0IG1hc3RlclZlcnNpb24gPSB0aGlzLnBhcnNlVmVyc2lvbihtYXN0ZXJEZXZpY2UuZGV2aWNlVmVyc2lvbik7XHJcbiAgICAgIHRoaXMuX3ZlcnNpb24gPSBgTVVMVElfQU5BTFlaRVJfJHttYXN0ZXJWZXJzaW9uLm1ham9yfV8ke21hc3RlclZlcnNpb24ubWlub3J9YDtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBkZXZpY2VJbmZvOiB7XHJcbiAgICAgICAgICBuYW1lOiB0aGlzLl92ZXJzaW9uLFxyXG4gICAgICAgICAgdmVyc2lvbjogdGhpcy5fdmVyc2lvbixcclxuICAgICAgICAgIHR5cGU6IHRoaXMuZHJpdmVyVHlwZSxcclxuICAgICAgICAgIGNvbm5lY3Rpb25QYXRoOiAnTXVsdGktRGV2aWNlJyxcclxuICAgICAgICAgIGlzTmV0d29yazogZmFsc2UsXHJcbiAgICAgICAgICBjYXBhYmlsaXRpZXM6IHRoaXMuYnVpbGRDYXBhYmlsaXRpZXMoKVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ+WkmuiuvuWkh+i/nuaOpeWksei0pSdcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmqjOivgeiuvuWkh+eJiOacrOWFvOWuueaAp1xyXG4gICAqL1xyXG4gIHByaXZhdGUgdmFsaWRhdGVEZXZpY2VWZXJzaW9ucygpOiB2b2lkIHtcclxuICAgIGxldCBtYXN0ZXJWZXJzaW9uOiB7IG1ham9yOiBudW1iZXI7IG1pbm9yOiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fY29ubmVjdGVkRGV2aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLl9jb25uZWN0ZWREZXZpY2VzW2ldO1xyXG4gICAgICBjb25zdCBkZXZpY2VWZXJzaW9uID0gdGhpcy5wYXJzZVZlcnNpb24oZGV2aWNlLmRldmljZVZlcnNpb24pO1xyXG5cclxuICAgICAgaWYgKCFkZXZpY2VWZXJzaW9uLmlzVmFsaWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOiuvuWkhyAke2l9IOeJiOacrOaXoOaViDogJHtkZXZpY2UuZGV2aWNlVmVyc2lvbn1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKG1hc3RlclZlcnNpb24gPT09IG51bGwpIHtcclxuICAgICAgICBtYXN0ZXJWZXJzaW9uID0gZGV2aWNlVmVyc2lvbjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAobWFzdGVyVmVyc2lvbi5tYWpvciAhPT0gZGV2aWNlVmVyc2lvbi5tYWpvciB8fCBcclxuICAgICAgICAgICAgbWFzdGVyVmVyc2lvbi5taW5vciAhPT0gZGV2aWNlVmVyc2lvbi5taW5vcikge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICBg6K6+5aSH54mI5pys5LiN5YW85a6544CC5Li76K6+5aSH54mI5pysOiBWJHttYXN0ZXJWZXJzaW9uLm1ham9yfV8ke21hc3RlclZlcnNpb24ubWlub3J9LCBgICtcclxuICAgICAgICAgICAgYOiuvuWkhyAke2l9IOeJiOacrDogViR7ZGV2aWNlVmVyc2lvbi5tYWpvcn1fJHtkZXZpY2VWZXJzaW9uLm1pbm9yfWBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDop6PmnpDniYjmnKzlrZfnrKbkuLJcclxuICAgKi9cclxuICBwcml2YXRlIHBhcnNlVmVyc2lvbih2ZXJzaW9uU3RyaW5nOiBzdHJpbmcgfCBudWxsKTogeyBcclxuICAgIG1ham9yOiBudW1iZXI7IFxyXG4gICAgbWlub3I6IG51bWJlcjsgXHJcbiAgICBpc1ZhbGlkOiBib29sZWFuOyBcclxuICB9IHtcclxuICAgIGlmICghdmVyc2lvblN0cmluZykge1xyXG4gICAgICByZXR1cm4geyBtYWpvcjogMCwgbWlub3I6IDAsIGlzVmFsaWQ6IGZhbHNlIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5YGH6K6+54mI5pys5qC85byP57G75Ly8IFwiVjFfMjNcIiDmiJYgXCJBTkFMWVpFUl9WMV8yM1wiXHJcbiAgICBjb25zdCBtYXRjaCA9IHZlcnNpb25TdHJpbmcubWF0Y2goL1YoXFxkKylfKFxcZCspLyk7XHJcbiAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBtYWpvcjogcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSxcclxuICAgICAgICBtaW5vcjogcGFyc2VJbnQobWF0Y2hbMl0sIDEwKSxcclxuICAgICAgICBpc1ZhbGlkOiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgbWFqb3I6IDAsIG1pbm9yOiAwLCBpc1ZhbGlkOiBmYWxzZSB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pat5byA5omA5pyJ6K6+5aSH6L+e5o6lXHJcbiAgICovXHJcbiAgYXN5bmMgZGlzY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGZvciAoY29uc3QgZGV2aWNlIG9mIHRoaXMuX2Nvbm5lY3RlZERldmljZXMpIHtcclxuICAgICAgYXdhaXQgZGV2aWNlLmRpc2Nvbm5lY3QoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluiuvuWkh+eKtuaAgVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFN0YXR1cygpOiBQcm9taXNlPERldmljZVN0YXR1cz4ge1xyXG4gICAgLy8g6I635Y+W5omA5pyJ6K6+5aSH54q25oCBXHJcbiAgICBjb25zdCBzdGF0dXNlcyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICB0aGlzLl9jb25uZWN0ZWREZXZpY2VzLm1hcChkZXZpY2UgPT4gZGV2aWNlLmdldFN0YXR1cygpKVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc0Nvbm5lY3RlZDogc3RhdHVzZXMuZXZlcnkoc3RhdHVzID0+IHN0YXR1cy5pc0Nvbm5lY3RlZCksXHJcbiAgICAgIGlzQ2FwdHVyaW5nOiB0aGlzLl9jYXB0dXJpbmcsXHJcbiAgICAgIGJhdHRlcnlWb2x0YWdlOiAnTi9BJywgLy8g5aSa6K6+5aSH5LiN5oql5ZGK55S15rGg54q25oCBXHJcbiAgICAgIG11bHRpRGV2aWNlU3RhdHVzOiBzdGF0dXNlc1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW8gOWni+WQjOatpemHh+mbhlxyXG4gICAqL1xyXG4gIGFzeW5jIHN0YXJ0Q2FwdHVyZShcclxuICAgIHNlc3Npb246IENhcHR1cmVTZXNzaW9uLFxyXG4gICAgY2FwdHVyZUNvbXBsZXRlZEhhbmRsZXI/OiBDYXB0dXJlQ29tcGxldGVkSGFuZGxlclxyXG4gICk6IFByb21pc2U8Q2FwdHVyZUVycm9yPiB7XHJcbiAgICAvLyDlpJrorr7lpIfmqKHlvI/kuI3mlK/mjIHovrnmsr/op6blj5FcclxuICAgIGlmIChzZXNzaW9uLnRyaWdnZXJUeXBlID09PSBUcmlnZ2VyVHlwZS5FZGdlKSB7XHJcbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuQmFkUGFyYW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLl9jYXB0dXJpbmcpIHtcclxuICAgICAgcmV0dXJuIENhcHR1cmVFcnJvci5CdXN5O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghc2Vzc2lvbi5jYXB0dXJlQ2hhbm5lbHMgfHwgc2Vzc2lvbi5jYXB0dXJlQ2hhbm5lbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuQmFkUGFyYW1zO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOmqjOivgemHh+mbhuWPguaVsFxyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSB0aGlzLnZhbGlkYXRlQ2FwdHVyZVBhcmFtZXRlcnMoc2Vzc2lvbik7XHJcbiAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3IgIT09IENhcHR1cmVFcnJvci5Ob25lKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25FcnJvcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5YiG6YWN6YCa6YGT5Yiw5ZCE5Liq6K6+5aSHXHJcbiAgICAgIGNvbnN0IGNoYW5uZWxzUGVyRGV2aWNlID0gdGhpcy5zcGxpdENoYW5uZWxzUGVyRGV2aWNlKFxyXG4gICAgICAgIHNlc3Npb24uY2FwdHVyZUNoYW5uZWxzLm1hcChjaCA9PiBjaC5jaGFubmVsTnVtYmVyKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGNoYW5uZWxzUGVyRGV2aWNlWzBdLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICByZXR1cm4gQ2FwdHVyZUVycm9yLkJhZFBhcmFtcztcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6K6h566X6Kem5Y+R5bu26L+f5YGP56e7XHJcbiAgICAgIGNvbnN0IHNhbXBsZVBlcmlvZCA9IDEwMDAwMDAwMDAuMCAvIHNlc3Npb24uZnJlcXVlbmN5O1xyXG4gICAgICBjb25zdCBkZWxheSA9IHNlc3Npb24udHJpZ2dlclR5cGUgPT09IFRyaWdnZXJUeXBlLkZhc3QgPyBcclxuICAgICAgICBUcmlnZ2VyRGVsYXlzLkZhc3RUcmlnZ2VyRGVsYXkgOiBUcmlnZ2VyRGVsYXlzLkNvbXBsZXhUcmlnZ2VyRGVsYXk7XHJcbiAgICAgIGNvbnN0IG9mZnNldCA9IE1hdGgucm91bmQoKGRlbGF5IC8gc2FtcGxlUGVyaW9kKSArIDAuMyk7XHJcblxyXG4gICAgICAvLyDliJ3lp4vljJborr7lpIfmjZXojrfnirbmgIFcclxuICAgICAgdGhpcy5fZGV2aWNlQ2FwdHVyZXMgPSBuZXcgQXJyYXkodGhpcy5fY29ubmVjdGVkRGV2aWNlcy5sZW5ndGgpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2RldmljZUNhcHR1cmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5fZGV2aWNlQ2FwdHVyZXNbaV0gPSB7IGNvbXBsZXRlZDogZmFsc2UsIHNlc3Npb246IG51bGwgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5fY3VycmVudENhcHR1cmVIYW5kbGVyID0gY2FwdHVyZUNvbXBsZXRlZEhhbmRsZXI7XHJcbiAgICAgIHRoaXMuX3NvdXJjZVNlc3Npb24gPSBzZXNzaW9uO1xyXG4gICAgICB0aGlzLl9jYXB0dXJpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgLy8g5ZCv5Yqo5LuO6K6+5aSH6YeH6ZuG77yI6Zmk5LqG5Li76K6+5aSH5aSW55qE5omA5pyJ6K6+5aSH77yJXHJcbiAgICAgIGxldCBjaGFubmVsc0NhcHR1cmluZyA9IDE7XHJcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY2hhbm5lbHNQZXJEZXZpY2UubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjaGFubmVscyA9IGNoYW5uZWxzUGVyRGV2aWNlW2ldO1xyXG5cclxuICAgICAgICBpZiAoY2hhbm5lbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICB0aGlzLl9kZXZpY2VDYXB0dXJlc1tpXS5jb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDliJvlu7rku47orr7lpIfph4fpm4bkvJror51cclxuICAgICAgICBjb25zdCBzbGF2ZVNlc3Npb24gPSB0aGlzLmNyZWF0ZVNsYXZlU2Vzc2lvbihzZXNzaW9uLCBjaGFubmVscywgb2Zmc2V0KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9jb25uZWN0ZWREZXZpY2VzW2ldLnRhZyA9IGNoYW5uZWxzQ2FwdHVyaW5nO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgdGhpcy5fY29ubmVjdGVkRGV2aWNlc1tpXS5zdGFydENhcHR1cmUoc2xhdmVTZXNzaW9uKTtcclxuXHJcbiAgICAgICAgaWYgKGVycm9yICE9PSBDYXB0dXJlRXJyb3IuTm9uZSkge1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5zdG9wQ2FwdHVyZSgpO1xyXG4gICAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2hhbm5lbHNDYXB0dXJpbmcrKztcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5ZCv5Yqo5Li76K6+5aSH6YeH6ZuG77yI5pyA5ZCO5ZCv5Yqo77yM5L2c5Li65ZCM5q2l5L+h5Y+377yJXHJcbiAgICAgIHRoaXMuX2Nvbm5lY3RlZERldmljZXNbMF0udGFnID0gMDtcclxuICAgICAgY29uc3QgbWFzdGVyQ2hhbm5lbHMgPSBjaGFubmVsc1BlckRldmljZVswXTtcclxuICAgICAgY29uc3QgbWFzdGVyU2Vzc2lvbiA9IHRoaXMuY3JlYXRlTWFzdGVyU2Vzc2lvbihzZXNzaW9uLCBtYXN0ZXJDaGFubmVscyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBtYXN0ZXJFcnJvciA9IGF3YWl0IHRoaXMuX2Nvbm5lY3RlZERldmljZXNbMF0uc3RhcnRDYXB0dXJlKG1hc3RlclNlc3Npb24pO1xyXG4gICAgICBpZiAobWFzdGVyRXJyb3IgIT09IENhcHR1cmVFcnJvci5Ob25lKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zdG9wQ2FwdHVyZSgpO1xyXG4gICAgICAgIHJldHVybiBtYXN0ZXJFcnJvcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIENhcHR1cmVFcnJvci5Ob25lO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+WkmuiuvuWkh+mHh+mbhuWQr+WKqOWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuVW5leHBlY3RlZEVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6aqM6K+B6YeH6ZuG5Y+C5pWwXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB2YWxpZGF0ZUNhcHR1cmVQYXJhbWV0ZXJzKHNlc3Npb246IENhcHR1cmVTZXNzaW9uKTogQ2FwdHVyZUVycm9yIHtcclxuICAgIGNvbnN0IGNoYW5uZWxOdW1iZXJzID0gc2Vzc2lvbi5jYXB0dXJlQ2hhbm5lbHMubWFwKGNoID0+IGNoLmNoYW5uZWxOdW1iZXIpO1xyXG4gICAgY29uc3QgY2FwdHVyZUxpbWl0cyA9IHRoaXMuZ2V0TGltaXRzKGNoYW5uZWxOdW1iZXJzKTtcclxuXHJcbiAgICAvLyDmo4Dmn6Xln7rmnKzlj4LmlbBcclxuICAgIGlmIChjaGFubmVsTnVtYmVycy5zb21lKGNoID0+IGNoIDwgMCB8fCBjaCA+PSB0aGlzLmNoYW5uZWxDb3VudCkgfHxcclxuICAgICAgICAoc2Vzc2lvbi50cmlnZ2VyQml0Q291bnQgIT09IHVuZGVmaW5lZCAmJiBzZXNzaW9uLnRyaWdnZXJCaXRDb3VudCA8IDEpIHx8XHJcbiAgICAgICAgKHNlc3Npb24udHJpZ2dlckJpdENvdW50ICE9PSB1bmRlZmluZWQgJiYgc2Vzc2lvbi50cmlnZ2VyQml0Q291bnQgPiAxNikgfHxcclxuICAgICAgICAoc2Vzc2lvbi50cmlnZ2VyQ2hhbm5lbCAhPT0gdW5kZWZpbmVkICYmIChzZXNzaW9uLnRyaWdnZXJDaGFubmVsIDwgMCB8fCBzZXNzaW9uLnRyaWdnZXJDaGFubmVsID4gMTUpKSB8fFxyXG4gICAgICAgIHNlc3Npb24ucHJlVHJpZ2dlclNhbXBsZXMgPCBjYXB0dXJlTGltaXRzLm1pblByZVNhbXBsZXMgfHxcclxuICAgICAgICBzZXNzaW9uLnBvc3RUcmlnZ2VyU2FtcGxlcyA8IGNhcHR1cmVMaW1pdHMubWluUG9zdFNhbXBsZXMgfHxcclxuICAgICAgICBzZXNzaW9uLnByZVRyaWdnZXJTYW1wbGVzID4gY2FwdHVyZUxpbWl0cy5tYXhQcmVTYW1wbGVzIHx8XHJcbiAgICAgICAgc2Vzc2lvbi5wb3N0VHJpZ2dlclNhbXBsZXMgPiBjYXB0dXJlTGltaXRzLm1heFBvc3RTYW1wbGVzIHx8XHJcbiAgICAgICAgKHNlc3Npb24ucHJlVHJpZ2dlclNhbXBsZXMgKyBzZXNzaW9uLnBvc3RUcmlnZ2VyU2FtcGxlcykgPiBjYXB0dXJlTGltaXRzLm1heFRvdGFsU2FtcGxlcyB8fFxyXG4gICAgICAgIHNlc3Npb24uZnJlcXVlbmN5IDwgdGhpcy5taW5GcmVxdWVuY3kgfHxcclxuICAgICAgICBzZXNzaW9uLmZyZXF1ZW5jeSA+IHRoaXMubWF4RnJlcXVlbmN5KSB7XHJcbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuQmFkUGFyYW1zO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBDYXB0dXJlRXJyb3IuTm9uZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWwhumAmumBk+WIhumFjeWIsOWQhOS4quiuvuWkh1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc3BsaXRDaGFubmVsc1BlckRldmljZShjaGFubmVsczogbnVtYmVyW10pOiBudW1iZXJbXVtdIHtcclxuICAgIGNvbnN0IGNoYW5uZWxzUGVyRGV2aWNlOiBudW1iZXJbXVtdID0gW107XHJcbiAgICBjb25zdCBtYXhDaGFubmVsc1BlckRldmljZSA9IE1hdGgubWluKC4uLnRoaXMuX2Nvbm5lY3RlZERldmljZXMubWFwKGQgPT4gZC5jaGFubmVsQ291bnQpKTtcclxuXHJcbiAgICBmb3IgKGxldCBkZXZpY2VJbmRleCA9IDA7IGRldmljZUluZGV4IDwgdGhpcy5fY29ubmVjdGVkRGV2aWNlcy5sZW5ndGg7IGRldmljZUluZGV4KyspIHtcclxuICAgICAgY29uc3QgZmlyc3RDaGFubmVsID0gZGV2aWNlSW5kZXggKiBtYXhDaGFubmVsc1BlckRldmljZTtcclxuICAgICAgY29uc3QgbGFzdENoYW5uZWwgPSAoZGV2aWNlSW5kZXggKyAxKSAqIG1heENoYW5uZWxzUGVyRGV2aWNlO1xyXG5cclxuICAgICAgY29uc3QgZGV2aWNlQ2hhbm5lbHMgPSBjaGFubmVsc1xyXG4gICAgICAgIC5maWx0ZXIoY2ggPT4gY2ggPj0gZmlyc3RDaGFubmVsICYmIGNoIDwgbGFzdENoYW5uZWwpXHJcbiAgICAgICAgLm1hcChjaCA9PiBjaCAtIGZpcnN0Q2hhbm5lbCk7XHJcbiAgICAgIFxyXG4gICAgICBjaGFubmVsc1BlckRldmljZS5wdXNoKGRldmljZUNoYW5uZWxzKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2hhbm5lbHNQZXJEZXZpY2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJvlu7rku47orr7lpIfph4fpm4bkvJror51cclxuICAgKi9cclxuICBwcml2YXRlIGNyZWF0ZVNsYXZlU2Vzc2lvbihcclxuICAgIG9yaWdpbmFsU2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24sIFxyXG4gICAgY2hhbm5lbHM6IG51bWJlcltdLCBcclxuICAgIG9mZnNldDogbnVtYmVyXHJcbiAgKTogQ2FwdHVyZVNlc3Npb24ge1xyXG4gICAgY29uc3Qgc2xhdmVTZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbiA9IHtcclxuICAgICAgLi4ub3JpZ2luYWxTZXNzaW9uLFxyXG4gICAgICBjYXB0dXJlQ2hhbm5lbHM6IGNoYW5uZWxzLm1hcChjaCA9PiAoe1xyXG4gICAgICAgIGNoYW5uZWxOdW1iZXI6IGNoLFxyXG4gICAgICAgIGNoYW5uZWxOYW1lOiBgQ2hhbm5lbCAke2NoICsgMX1gLFxyXG4gICAgICAgIGhpZGRlbjogZmFsc2VcclxuICAgICAgfSkpLFxyXG4gICAgICB0cmlnZ2VyQ2hhbm5lbDogMjQsIC8vIOS9v+eUqOWklumDqOinpuWPkVxyXG4gICAgICB0cmlnZ2VyVHlwZTogVHJpZ2dlclR5cGUuRWRnZSxcclxuICAgICAgcHJlVHJpZ2dlclNhbXBsZXM6IG9yaWdpbmFsU2Vzc2lvbi5wcmVUcmlnZ2VyU2FtcGxlcyArIG9mZnNldCxcclxuICAgICAgcG9zdFRyaWdnZXJTYW1wbGVzOiBvcmlnaW5hbFNlc3Npb24ucG9zdFRyaWdnZXJTYW1wbGVzIC0gb2Zmc2V0LFxyXG4gICAgICBsb29wQ291bnQ6IDAsXHJcbiAgICAgIG1lYXN1cmVCdXJzdHM6IGZhbHNlLFxyXG4gICAgICB0cmlnZ2VySW52ZXJ0ZWQ6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBzbGF2ZVNlc3Npb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJvlu7rkuLvorr7lpIfph4fpm4bkvJror51cclxuICAgKi9cclxuICBwcml2YXRlIGNyZWF0ZU1hc3RlclNlc3Npb24oXHJcbiAgICBvcmlnaW5hbFNlc3Npb246IENhcHR1cmVTZXNzaW9uLCBcclxuICAgIGNoYW5uZWxzOiBudW1iZXJbXVxyXG4gICk6IENhcHR1cmVTZXNzaW9uIHtcclxuICAgIGNvbnN0IG1hc3RlclNlc3Npb246IENhcHR1cmVTZXNzaW9uID0ge1xyXG4gICAgICAuLi5vcmlnaW5hbFNlc3Npb24sXHJcbiAgICAgIGNhcHR1cmVDaGFubmVsczogY2hhbm5lbHMubWFwKGNoID0+ICh7XHJcbiAgICAgICAgY2hhbm5lbE51bWJlcjogY2gsXHJcbiAgICAgICAgY2hhbm5lbE5hbWU6IGBDaGFubmVsICR7Y2ggKyAxfWAsXHJcbiAgICAgICAgaGlkZGVuOiBmYWxzZVxyXG4gICAgICB9KSlcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG1hc3RlclNlc3Npb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgZzmraLmiYDmnInorr7lpIfph4fpm4ZcclxuICAgKi9cclxuICBhc3luYyBzdG9wQ2FwdHVyZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGlmICghdGhpcy5fY2FwdHVyaW5nKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOWBnOatouaJgOacieiuvuWkh1xyXG4gICAgICBjb25zdCBzdG9wUHJvbWlzZXMgPSB0aGlzLl9jb25uZWN0ZWREZXZpY2VzLm1hcChkZXZpY2UgPT4gZGV2aWNlLnN0b3BDYXB0dXJlKCkpO1xyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChzdG9wUHJvbWlzZXMpO1xyXG5cclxuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign5YGc5q2i5aSa6K6+5aSH6YeH6ZuG5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6L+b5YWl5byV5a+85Yqg6L2956iL5bqP5qih5byPXHJcbiAgICovXHJcbiAgYXN5bmMgZW50ZXJCb290bG9hZGVyKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgaWYgKHRoaXMuX2NhcHR1cmluZykge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5omA5pyJ6K6+5aSH6YO96ZyA6KaB5oiQ5Yqf6L+b5YWl5byV5a+85Yqg6L2956iL5bqP5qih5byPXHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICB0aGlzLl9jb25uZWN0ZWREZXZpY2VzLm1hcChkZXZpY2UgPT4gZGV2aWNlLmVudGVyQm9vdGxvYWRlcigpKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdHMuZXZlcnkocmVzdWx0ID0+IHJlc3VsdCA9PT0gdHJ1ZSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfov5vlhaXlvJXlr7zliqDovb3nqIvluo/lpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIbljZXkuKrorr7lpIfnmoTph4fpm4blrozmiJDkuovku7ZcclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZURldmljZUNhcHR1cmVDb21wbGV0ZWQoYXJnczogQ2FwdHVyZUV2ZW50QXJncyk6IHZvaWQge1xyXG4gICAgLy8g5ZCM5q2l6ZSB5a6aXHJcbiAgICBpZiAoIXRoaXMuX2NhcHR1cmluZyB8fCAhdGhpcy5fc291cmNlU2Vzc2lvbikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFhcmdzLnN1Y2Nlc3MpIHtcclxuICAgICAgdGhpcy5zdG9wQ2FwdHVyZSgpO1xyXG4gICAgICB0aGlzLl9kZXZpY2VDYXB0dXJlcyA9IFtdO1xyXG5cclxuICAgICAgY29uc3QgZXZlbnRBcmdzOiBDYXB0dXJlRXZlbnRBcmdzID0ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIHNlc3Npb246IHRoaXMuX3NvdXJjZVNlc3Npb25cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGlmICh0aGlzLl9jdXJyZW50Q2FwdHVyZUhhbmRsZXIpIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50Q2FwdHVyZUhhbmRsZXIoZXZlbnRBcmdzKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmVtaXRDYXB0dXJlQ29tcGxldGVkKGV2ZW50QXJncyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPluiuvuWkh+e0ouW8lVxyXG4gICAgY29uc3QgZGV2aWNlSW5kZXggPSAoYXJncy5zZXNzaW9uIGFzIGFueSkuZGV2aWNlVGFnIHx8IDA7XHJcbiAgICBcclxuICAgIHRoaXMuX2RldmljZUNhcHR1cmVzW2RldmljZUluZGV4XS5zZXNzaW9uID0gYXJncy5zZXNzaW9uO1xyXG4gICAgdGhpcy5fZGV2aWNlQ2FwdHVyZXNbZGV2aWNlSW5kZXhdLmNvbXBsZXRlZCA9IHRydWU7XHJcblxyXG4gICAgLy8g5qOA5p+l5omA5pyJ6K6+5aSH5piv5ZCm6YO95a6M5oiQ6YeH6ZuGXHJcbiAgICBpZiAodGhpcy5fZGV2aWNlQ2FwdHVyZXMuZXZlcnkoY2FwdHVyZSA9PiBjYXB0dXJlLmNvbXBsZXRlZCkpIHtcclxuICAgICAgdGhpcy5jb21iaW5lRGV2aWNlUmVzdWx0cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5ZCI5bm25omA5pyJ6K6+5aSH55qE6YeH6ZuG57uT5p6cXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjb21iaW5lRGV2aWNlUmVzdWx0cygpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5fc291cmNlU2Vzc2lvbikgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IG1heENoYW5uZWxzUGVyRGV2aWNlID0gTWF0aC5taW4oLi4udGhpcy5fY29ubmVjdGVkRGV2aWNlcy5tYXAoZCA9PiBkLmNoYW5uZWxDb3VudCkpO1xyXG5cclxuICAgIC8vIOWQiOW5tuaJgOacieiuvuWkh+eahOmAmumBk+aVsOaNrlxyXG4gICAgZm9yIChsZXQgZGV2aWNlSW5kZXggPSAwOyBkZXZpY2VJbmRleCA8IHRoaXMuX2RldmljZUNhcHR1cmVzLmxlbmd0aDsgZGV2aWNlSW5kZXgrKykge1xyXG4gICAgICBjb25zdCBkZXZpY2VDYXB0dXJlID0gdGhpcy5fZGV2aWNlQ2FwdHVyZXNbZGV2aWNlSW5kZXhdO1xyXG4gICAgICBcclxuICAgICAgaWYgKGRldmljZUNhcHR1cmUuc2Vzc2lvbikge1xyXG4gICAgICAgIGZvciAoY29uc3QgZGV2aWNlQ2hhbm5lbCBvZiBkZXZpY2VDYXB0dXJlLnNlc3Npb24uY2FwdHVyZUNoYW5uZWxzKSB7XHJcbiAgICAgICAgICAvLyDorqHnrpflnKjmupDkvJror53kuK3nmoTpgJrpgZPntKLlvJVcclxuICAgICAgICAgIGNvbnN0IGdsb2JhbENoYW5uZWxOdW1iZXIgPSBkZXZpY2VDaGFubmVsLmNoYW5uZWxOdW1iZXIgKyBkZXZpY2VJbmRleCAqIG1heENoYW5uZWxzUGVyRGV2aWNlO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyDmib7liLDlr7nlupTnmoTmupDkvJror53pgJrpgZNcclxuICAgICAgICAgIGNvbnN0IHNvdXJjZUNoYW5uZWwgPSB0aGlzLl9zb3VyY2VTZXNzaW9uLmNhcHR1cmVDaGFubmVscy5maW5kKFxyXG4gICAgICAgICAgICBjaCA9PiBjaC5jaGFubmVsTnVtYmVyID09PSBnbG9iYWxDaGFubmVsTnVtYmVyXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGlmIChzb3VyY2VDaGFubmVsKSB7XHJcbiAgICAgICAgICAgIHNvdXJjZUNoYW5uZWwuc2FtcGxlcyA9IGRldmljZUNoYW5uZWwuc2FtcGxlcztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jYXB0dXJpbmcgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdCBldmVudEFyZ3M6IENhcHR1cmVFdmVudEFyZ3MgPSB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHNlc3Npb246IHRoaXMuX3NvdXJjZVNlc3Npb25cclxuICAgIH07XHJcblxyXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRDYXB0dXJlSGFuZGxlcikge1xyXG4gICAgICB0aGlzLl9jdXJyZW50Q2FwdHVyZUhhbmRsZXIoZXZlbnRBcmdzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZW1pdENhcHR1cmVDb21wbGV0ZWQoZXZlbnRBcmdzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWkmuiuvuWkh+mHh+mbhuaooeW8j1xyXG4gICAqL1xyXG4gIG92ZXJyaWRlIGdldENhcHR1cmVNb2RlKGNoYW5uZWxzOiBudW1iZXJbXSk6IENhcHR1cmVNb2RlIHtcclxuICAgIGNvbnN0IHNwbGl0Q2hhbm5lbHMgPSB0aGlzLnNwbGl0Q2hhbm5lbHNQZXJEZXZpY2UoY2hhbm5lbHMpO1xyXG4gICAgY29uc3QgbWF4Q2hhbm5lbFBlckRldmljZSA9IHNwbGl0Q2hhbm5lbHNcclxuICAgICAgLm1hcChkZXZpY2VDaGFubmVscyA9PiBNYXRoLm1heCguLi5kZXZpY2VDaGFubmVscywgMCkpXHJcbiAgICAgIC5yZWR1Y2UoKG1heCwgY3VycmVudCkgPT4gTWF0aC5tYXgobWF4LCBjdXJyZW50KSwgMCk7XHJcblxyXG4gICAgaWYgKG1heENoYW5uZWxQZXJEZXZpY2UgPCA4KSByZXR1cm4gQ2FwdHVyZU1vZGUuQ2hhbm5lbHNfODtcclxuICAgIGlmIChtYXhDaGFubmVsUGVyRGV2aWNlIDwgMTYpIHJldHVybiBDYXB0dXJlTW9kZS5DaGFubmVsc18xNjtcclxuICAgIHJldHVybiBDYXB0dXJlTW9kZS5DaGFubmVsc18yNDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWkmuiuvuWkh+mHh+mbhumZkOWItlxyXG4gICAqL1xyXG4gIG92ZXJyaWRlIGdldExpbWl0cyhjaGFubmVsczogbnVtYmVyW10pOiBhbnkge1xyXG4gICAgY29uc3Qgc3BsaXRDaGFubmVscyA9IHRoaXMuc3BsaXRDaGFubmVsc1BlckRldmljZShjaGFubmVscyk7XHJcbiAgICBjb25zdCBkZXZpY2VMaW1pdHMgPSB0aGlzLl9jb25uZWN0ZWREZXZpY2VzLm1hcCgoZGV2aWNlLCBpbmRleCkgPT4gXHJcbiAgICAgIGRldmljZS5nZXRMaW1pdHMoc3BsaXRDaGFubmVsc1tpbmRleF0gfHwgW10pXHJcbiAgICApO1xyXG5cclxuICAgIC8vIOi/lOWbnuaJgOacieiuvuWkh+eahOacgOS4peagvOmZkOWItlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWluUHJlU2FtcGxlczogTWF0aC5tYXgoLi4uZGV2aWNlTGltaXRzLm1hcChsaW1pdCA9PiBsaW1pdC5taW5QcmVTYW1wbGVzKSksXHJcbiAgICAgIG1heFByZVNhbXBsZXM6IE1hdGgubWluKC4uLmRldmljZUxpbWl0cy5tYXAobGltaXQgPT4gbGltaXQubWF4UHJlU2FtcGxlcykpLFxyXG4gICAgICBtaW5Qb3N0U2FtcGxlczogTWF0aC5tYXgoLi4uZGV2aWNlTGltaXRzLm1hcChsaW1pdCA9PiBsaW1pdC5taW5Qb3N0U2FtcGxlcykpLFxyXG4gICAgICBtYXhQb3N0U2FtcGxlczogTWF0aC5taW4oLi4uZGV2aWNlTGltaXRzLm1hcChsaW1pdCA9PiBsaW1pdC5tYXhQb3N0U2FtcGxlcykpLFxyXG4gICAgICBnZXQgbWF4VG90YWxTYW1wbGVzKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWluUHJlU2FtcGxlcyArIHRoaXMubWF4UG9zdFNhbXBsZXM7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnvZHnu5zphY3nva7vvIjlpJrorr7lpIfkuI3mlK/mjIHvvIlcclxuICAgKi9cclxuICBvdmVycmlkZSBhc3luYyBzZW5kTmV0d29ya0NvbmZpZyhcclxuICAgIGFjY2Vzc1BvaW50TmFtZTogc3RyaW5nLFxyXG4gICAgcGFzc3dvcmQ6IHN0cmluZyxcclxuICAgIGlwQWRkcmVzczogc3RyaW5nLFxyXG4gICAgcG9ydDogbnVtYmVyXHJcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICByZXR1cm4gZmFsc2U7IC8vIOWkmuiuvuWkh+mpseWKqOS4jeaUr+aMgee9kee7nOmFjee9rlxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W55S15Y6L54q25oCB77yI5aSa6K6+5aSH5LiN5pSv5oyB77yJXHJcbiAgICovXHJcbiAgb3ZlcnJpZGUgYXN5bmMgZ2V0Vm9sdGFnZVN0YXR1cygpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgcmV0dXJuICdVTlNVUFBPUlRFRCc7IC8vIOWkmuiuvuWkh+mpseWKqOS4jeaUr+aMgeeUteWOi+ebkeaOp1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5p6E5bu656Gs5Lu26IO95Yqb5o+P6L+wXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBidWlsZENhcGFiaWxpdGllcygpOiBhbnkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2hhbm5lbHM6IHtcclxuICAgICAgICBkaWdpdGFsOiB0aGlzLmNoYW5uZWxDb3VudCxcclxuICAgICAgICBtYXhWb2x0YWdlOiA1LjAsXHJcbiAgICAgICAgaW5wdXRJbXBlZGFuY2U6IDEwMDAwMDBcclxuICAgICAgfSxcclxuICAgICAgc2FtcGxpbmc6IHtcclxuICAgICAgICBtYXhSYXRlOiB0aGlzLm1heEZyZXF1ZW5jeSxcclxuICAgICAgICBtaW5SYXRlOiB0aGlzLm1pbkZyZXF1ZW5jeSxcclxuICAgICAgICBzdXBwb3J0ZWRSYXRlczogW3RoaXMubWF4RnJlcXVlbmN5XSxcclxuICAgICAgICBidWZmZXJTaXplOiB0aGlzLmJ1ZmZlclNpemUsXHJcbiAgICAgICAgc3RyZWFtaW5nU3VwcG9ydDogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgdHJpZ2dlcnM6IHtcclxuICAgICAgICB0eXBlczogWzEsIDJdLCAvLyBDb21wbGV4LCBGYXN0ICjkuI3mlK/mjIFFZGdl5ZKMQmxhc3QpXHJcbiAgICAgICAgbWF4Q2hhbm5lbHM6IDE2LFxyXG4gICAgICAgIHBhdHRlcm5XaWR0aDogMTYsXHJcbiAgICAgICAgc2VxdWVudGlhbFN1cHBvcnQ6IHRydWUsXHJcbiAgICAgICAgY29uZGl0aW9uczogWydwYXR0ZXJuJywgJ2NvbXBsZXgnXVxyXG4gICAgICB9LFxyXG4gICAgICBjb25uZWN0aXZpdHk6IHtcclxuICAgICAgICBpbnRlcmZhY2VzOiBbJ211bHRpLWRldmljZSddLFxyXG4gICAgICAgIHByb3RvY29sczogWydjdXN0b20nXVxyXG4gICAgICB9LFxyXG4gICAgICBmZWF0dXJlczoge1xyXG4gICAgICAgIG11bHRpRGV2aWNlOiB0cnVlLFxyXG4gICAgICAgIHN5bmNocm9uaXphdGlvbjogdHJ1ZSxcclxuICAgICAgICBtYXhEZXZpY2VzOiA1LFxyXG4gICAgICAgIHRvdGFsQ2hhbm5lbHM6IHRoaXMuY2hhbm5lbENvdW50XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDotYTmupDmuIXnkIZcclxuICAgKi9cclxuICBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgZm9yIChjb25zdCBkZXZpY2Ugb2YgdGhpcy5fY29ubmVjdGVkRGV2aWNlcykge1xyXG4gICAgICBkZXZpY2UuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/drivers/MultiAnalyzerDriver.ts\n\n}");

/***/ }),

/***/ "./src/drivers/NetworkLogicAnalyzerDriver.ts":
/*!***************************************************!*\
  !*** ./src/drivers/NetworkLogicAnalyzerDriver.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.NetworkLogicAnalyzerDriver = void 0;\nconst net_1 = __webpack_require__(/*! net */ \"net\");\nconst dgram_1 = __webpack_require__(/*! dgram */ \"dgram\");\nconst AnalyzerDriverBase_1 = __webpack_require__(/*! ./AnalyzerDriverBase */ \"./src/drivers/AnalyzerDriverBase.ts\");\nconst AnalyzerTypes_1 = __webpack_require__(/*! ../models/AnalyzerTypes */ \"./src/models/AnalyzerTypes.ts\");\n/**\n * 网络逻辑分析器通用驱动\n * 支持通过TCP/UDP协议通信的各种网络设备\n * 包括：ESP32逻辑分析器、树莓派逻辑分析器、FPGA逻辑分析器等\n */\n// 协议类型枚举\nvar ProtocolType;\n(function (ProtocolType) {\n    ProtocolType[\"TCP\"] = \"tcp\";\n    ProtocolType[\"UDP\"] = \"udp\";\n    ProtocolType[\"HTTP\"] = \"http\";\n    ProtocolType[\"WEBSOCKET\"] = \"websocket\";\n})(ProtocolType || (ProtocolType = {}));\n// 数据格式类型枚举\nvar DataFormat;\n(function (DataFormat) {\n    DataFormat[\"BINARY\"] = \"binary\";\n    DataFormat[\"JSON\"] = \"json\";\n    DataFormat[\"CSV\"] = \"csv\";\n    DataFormat[\"RAW\"] = \"raw\";\n})(DataFormat || (DataFormat = {}));\nclass NetworkLogicAnalyzerDriver extends AnalyzerDriverBase_1.AnalyzerDriverBase {\n    // 属性实现\n    get deviceVersion() {\n        return this._version;\n    }\n    get channelCount() {\n        return this._channelCount;\n    }\n    get maxFrequency() {\n        return this._maxFrequency;\n    }\n    get blastFrequency() {\n        return this._blastFrequency;\n    }\n    get bufferSize() {\n        return this._bufferSize;\n    }\n    get isNetwork() {\n        return true;\n    }\n    get isCapturing() {\n        return this._capturing;\n    }\n    get driverType() {\n        return AnalyzerTypes_1.AnalyzerDriverType.Network;\n    }\n    constructor(host, port, protocol = ProtocolType.TCP, dataFormat = DataFormat.JSON, authToken) {\n        super();\n        // 私有变量\n        this._capturing = false;\n        this._version = null;\n        this._channelCount = 8;\n        this._maxFrequency = 40000000; // 40MHz默认\n        this._blastFrequency = 80000000; // 80MHz默认\n        this._bufferSize = 8000000; // 8M样本默认\n        // 通信对象\n        this._tcpSocket = undefined;\n        this._udpSocket = undefined;\n        this._isConnected = false;\n        this._deviceConfig = {};\n        this._authToken = '';\n        this._host = host;\n        this._port = port;\n        this._protocol = protocol;\n        this._dataFormat = dataFormat;\n        this._authToken = authToken || '';\n    }\n    /**\n     * 连接设备\n     */\n    async connect(params) {\n        try {\n            // 根据协议类型初始化连接\n            switch (this._protocol) {\n                case ProtocolType.TCP:\n                case ProtocolType.HTTP:\n                    await this.initializeTCP();\n                    break;\n                case ProtocolType.UDP:\n                    await this.initializeUDP();\n                    break;\n                case ProtocolType.WEBSOCKET:\n                    await this.initializeWebSocket();\n                    break;\n                default:\n                    throw new Error(`不支持的协议类型: ${this._protocol}`);\n            }\n            // 进行设备握手和认证\n            await this.performHandshake();\n            // 查询设备信息\n            await this.queryDeviceInfo();\n            this._isConnected = true;\n            return {\n                success: true,\n                deviceInfo: {\n                    name: this._version || 'Network Logic Analyzer',\n                    version: this._version ?? undefined,\n                    type: this.driverType,\n                    connectionPath: `${this._protocol}://${this._host}:${this._port}`,\n                    isNetwork: true,\n                    capabilities: this.buildCapabilities()\n                }\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : '连接失败'\n            };\n        }\n    }\n    /**\n     * 断开连接\n     */\n    async disconnect() {\n        this._isConnected = false;\n        if (this._tcpSocket) {\n            this._tcpSocket.destroy();\n            this._tcpSocket = undefined;\n        }\n        if (this._udpSocket) {\n            this._udpSocket.close();\n            this._udpSocket = undefined;\n        }\n    }\n    /**\n     * 获取设备状态\n     */\n    async getStatus() {\n        try {\n            const statusResponse = await this.sendNetworkCommand({\n                command: 'GET_STATUS',\n                timestamp: Date.now()\n            });\n            return {\n                isConnected: this._isConnected,\n                isCapturing: this._capturing,\n                batteryVoltage: statusResponse.battery_voltage || 'N/A',\n                temperature: statusResponse.temperature,\n                lastError: statusResponse.last_error\n            };\n        }\n        catch (error) {\n            return {\n                isConnected: this._isConnected,\n                isCapturing: this._capturing,\n                batteryVoltage: 'N/A',\n                lastError: error instanceof Error ? error.message : '状态查询失败'\n            };\n        }\n    }\n    /**\n     * 开始采集\n     */\n    async startCapture(session, captureCompletedHandler) {\n        if (this._capturing) {\n            return AnalyzerTypes_1.CaptureError.Busy;\n        }\n        if (!this._isConnected) {\n            return AnalyzerTypes_1.CaptureError.HardwareError;\n        }\n        try {\n            this._capturing = true;\n            // 设置捕获完成处理器\n            if (captureCompletedHandler) {\n                this.once('captureCompleted', captureCompletedHandler);\n            }\n            // 发送采集配置\n            const captureConfig = this.buildCaptureConfig(session);\n            const response = await this.sendNetworkCommand({\n                command: 'START_CAPTURE',\n                config: captureConfig,\n                timestamp: Date.now()\n            });\n            if (!response.success) {\n                throw new Error(response.error || '采集启动失败');\n            }\n            // 监控采集进度\n            this.monitorCaptureProgress(session, response.capture_id);\n            return AnalyzerTypes_1.CaptureError.None;\n        }\n        catch (error) {\n            this._capturing = false;\n            console.error('网络采集启动失败:', error);\n            return AnalyzerTypes_1.CaptureError.UnexpectedError;\n        }\n    }\n    /**\n     * 停止采集\n     */\n    async stopCapture() {\n        if (!this._capturing) {\n            return true;\n        }\n        try {\n            await this.sendNetworkCommand({\n                command: 'STOP_CAPTURE',\n                timestamp: Date.now()\n            });\n            this._capturing = false;\n            return true;\n        }\n        catch (error) {\n            console.error('停止网络采集失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 进入引导加载程序模式\n     */\n    async enterBootloader() {\n        try {\n            const response = await this.sendNetworkCommand({\n                command: 'ENTER_BOOTLOADER',\n                timestamp: Date.now()\n            });\n            return response.success === true;\n        }\n        catch (error) {\n            console.error('进入引导加载程序失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 发送网络配置\n     */\n    async sendNetworkConfig(accessPointName, password, ipAddress, port) {\n        try {\n            const response = await this.sendNetworkCommand({\n                command: 'SET_NETWORK_CONFIG',\n                config: {\n                    ssid: accessPointName,\n                    password: password,\n                    ip_address: ipAddress,\n                    port: port\n                },\n                timestamp: Date.now()\n            });\n            return response.success === true;\n        }\n        catch (error) {\n            console.error('发送网络配置失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 获取电压状态\n     */\n    async getVoltageStatus() {\n        try {\n            const response = await this.sendNetworkCommand({\n                command: 'GET_VOLTAGE',\n                timestamp: Date.now()\n            });\n            return response.voltage || 'N/A';\n        }\n        catch (error) {\n            console.error('获取电压状态失败:', error);\n            return 'ERROR';\n        }\n    }\n    /**\n     * 初始化TCP连接\n     */\n    async initializeTCP() {\n        return new Promise((resolve, reject) => {\n            this._tcpSocket = new net_1.Socket();\n            this._tcpSocket.connect(this._port, this._host, () => {\n                console.log(`TCP连接已建立: ${this._host}:${this._port}`);\n                resolve();\n            });\n            this._tcpSocket.on('error', error => {\n                reject(new Error(`TCP连接失败: ${error.message}`));\n            });\n            this._tcpSocket.on('close', () => {\n                this._isConnected = false;\n                console.log('TCP连接已关闭');\n            });\n        });\n    }\n    /**\n     * 初始化UDP连接\n     */\n    async initializeUDP() {\n        return new Promise((resolve, reject) => {\n            this._udpSocket = (0, dgram_1.createSocket)('udp4');\n            this._udpSocket.bind(0, () => {\n                console.log(`UDP套接字已创建，目标: ${this._host}:${this._port}`);\n                resolve();\n            });\n            this._udpSocket.on('error', error => {\n                reject(new Error(`UDP连接失败: ${error.message}`));\n            });\n            this._udpSocket.on('close', () => {\n                this._isConnected = false;\n                console.log('UDP连接已关闭');\n            });\n        });\n    }\n    /**\n     * 初始化WebSocket连接\n     */\n    async initializeWebSocket() {\n        // 注意：这里需要WebSocket库，实际实现中可能需要import WebSocket库\n        return new Promise((resolve, reject) => {\n            try {\n                // 这里是WebSocket连接的占位符实现\n                // 实际使用时需要安装和导入ws库\n                console.log(`WebSocket连接: ws://${this._host}:${this._port}`);\n                resolve();\n            }\n            catch (error) {\n                reject(new Error(`WebSocket连接失败: ${error}`));\n            }\n        });\n    }\n    /**\n     * 执行握手和认证\n     */\n    async performHandshake() {\n        const handshakeData = {\n            command: 'HANDSHAKE',\n            version: '1.0',\n            client_type: 'vscode-logic-analyzer',\n            auth_token: this._authToken,\n            timestamp: Date.now()\n        };\n        const response = await this.sendNetworkCommand(handshakeData);\n        if (!response.success) {\n            throw new Error(`握手失败: ${response.error || '未知错误'}`);\n        }\n        console.log('设备握手成功');\n    }\n    /**\n     * 查询设备信息\n     */\n    async queryDeviceInfo() {\n        const response = await this.sendNetworkCommand({\n            command: 'GET_DEVICE_INFO',\n            timestamp: Date.now()\n        });\n        if (response.device_info) {\n            const info = response.device_info;\n            this._version = info.version || 'Unknown Network Device';\n            this._channelCount = info.channels || 8;\n            this._maxFrequency = info.max_frequency || 40000000;\n            this._blastFrequency = info.blast_frequency || this._maxFrequency * 2;\n            this._bufferSize = info.buffer_size || 8000000;\n            this._deviceConfig = info.config || {};\n        }\n    }\n    /**\n     * 构建采集配置\n     */\n    buildCaptureConfig(session) {\n        return {\n            channels: session.captureChannels.map(ch => ({\n                number: ch.channelNumber,\n                name: ch.channelName,\n                enabled: true\n            })),\n            sample_rate: session.frequency,\n            pre_trigger_samples: session.preTriggerSamples,\n            post_trigger_samples: session.postTriggerSamples,\n            trigger: {\n                type: session.triggerType,\n                channel: session.triggerChannel,\n                inverted: session.triggerInverted,\n                pattern: session.triggerPattern,\n                bit_count: session.triggerBitCount\n            },\n            loop_count: session.loopCount,\n            measure_bursts: session.measureBursts,\n            data_format: this._dataFormat\n        };\n    }\n    /**\n     * 监控采集进度\n     */\n    async monitorCaptureProgress(session, captureId) {\n        const checkInterval = setInterval(async () => {\n            try {\n                if (!this._capturing) {\n                    clearInterval(checkInterval);\n                    return;\n                }\n                const statusResponse = await this.sendNetworkCommand({\n                    command: 'GET_CAPTURE_STATUS',\n                    capture_id: captureId,\n                    timestamp: Date.now()\n                });\n                if (statusResponse.status === 'COMPLETED') {\n                    clearInterval(checkInterval);\n                    await this.processCaptureResults(session, captureId);\n                }\n                else if (statusResponse.status === 'ERROR') {\n                    clearInterval(checkInterval);\n                    this.handleCaptureError(session, statusResponse.error_message);\n                }\n                else if (statusResponse.progress !== undefined) {\n                    // 可选：报告采集进度\n                    console.log(`采集进度: ${statusResponse.progress}%`);\n                }\n            }\n            catch (error) {\n                clearInterval(checkInterval);\n                this.handleCaptureError(session, `监控采集进度失败: ${error}`);\n            }\n        }, 200); // 每200ms检查一次状态\n        // 设置超时保护\n        setTimeout(() => {\n            if (this._capturing) {\n                clearInterval(checkInterval);\n                this.handleCaptureError(session, '采集超时');\n            }\n        }, 300000); // 5分钟超时\n    }\n    /**\n     * 处理采集结果\n     */\n    async processCaptureResults(session, captureId) {\n        try {\n            // 请求采集数据\n            const dataResponse = await this.sendNetworkCommand({\n                command: 'GET_CAPTURE_DATA',\n                capture_id: captureId,\n                format: this._dataFormat,\n                timestamp: Date.now()\n            });\n            if (!dataResponse.success) {\n                throw new Error(dataResponse.error || '获取采集数据失败');\n            }\n            // 根据数据格式解析数据\n            this.parseNetworkCaptureData(session, dataResponse);\n            this._capturing = false;\n            const eventArgs = {\n                success: true,\n                session\n            };\n            this.emitCaptureCompleted(eventArgs);\n        }\n        catch (error) {\n            this.handleCaptureError(session, `处理采集结果失败: ${error}`);\n        }\n    }\n    /**\n     * 解析网络采集数据\n     */\n    parseNetworkCaptureData(session, dataResponse) {\n        switch (this._dataFormat) {\n            case DataFormat.JSON:\n                this.parseJSONData(session, dataResponse.data);\n                break;\n            case DataFormat.BINARY:\n                this.parseBinaryData(session, dataResponse.data);\n                break;\n            case DataFormat.CSV:\n                this.parseCSVData(session, dataResponse.data);\n                break;\n            case DataFormat.RAW:\n                this.parseRawData(session, dataResponse.data);\n                break;\n            default:\n                throw new Error(`不支持的数据格式: ${this._dataFormat}`);\n        }\n    }\n    /**\n     * 解析JSON格式数据\n     */\n    parseJSONData(session, data) {\n        if (data.channels && Array.isArray(data.channels)) {\n            for (let i = 0; i < session.captureChannels.length; i++) {\n                const channel = session.captureChannels[i];\n                const channelData = data.channels.find((ch) => ch.number === channel.channelNumber);\n                if (channelData && channelData.samples) {\n                    channel.samples = new Uint8Array(channelData.samples);\n                }\n            }\n        }\n        // 解析突发信息\n        if (data.bursts && Array.isArray(data.bursts)) {\n            session.bursts = data.bursts;\n        }\n    }\n    /**\n     * 解析二进制格式数据\n     */\n    parseBinaryData(session, data) {\n        // data应该是Base64编码的二进制数据\n        const binaryData = Buffer.from(data, 'base64');\n        const sampleCount = binaryData.length / session.captureChannels.length;\n        for (let i = 0; i < session.captureChannels.length; i++) {\n            const channel = session.captureChannels[i];\n            channel.samples = new Uint8Array(sampleCount);\n            for (let j = 0; j < sampleCount; j++) {\n                const byteIndex = j * session.captureChannels.length + i;\n                channel.samples[j] = binaryData[byteIndex];\n            }\n        }\n    }\n    /**\n     * 解析CSV格式数据\n     */\n    parseCSVData(session, csvData) {\n        const lines = csvData.split('\\\\n');\n        if (lines.length < 2)\n            return;\n        const headers = lines[0].split(',').map(h => h.trim());\n        const dataLines = lines.slice(1).filter(line => line.trim());\n        // 初始化通道数据\n        for (const channel of session.captureChannels) {\n            channel.samples = new Uint8Array(dataLines.length);\n        }\n        // 解析数据行\n        for (let rowIndex = 0; rowIndex < dataLines.length; rowIndex++) {\n            const values = dataLines[rowIndex].split(',');\n            for (const channel of session.captureChannels) {\n                const channelName = `CH${channel.channelNumber}`;\n                const columnIndex = headers.indexOf(channelName);\n                if (columnIndex >= 0 && columnIndex < values.length) {\n                    const value = values[columnIndex].trim();\n                    channel.samples[rowIndex] = value === '1' ? 1 : 0;\n                }\n            }\n        }\n    }\n    /**\n     * 解析原始格式数据\n     */\n    parseRawData(session, data) {\n        // 假设data是样本数组的数组\n        if (Array.isArray(data) && data.length >= session.captureChannels.length) {\n            for (let i = 0; i < session.captureChannels.length; i++) {\n                const channel = session.captureChannels[i];\n                if (Array.isArray(data[i])) {\n                    channel.samples = new Uint8Array(data[i]);\n                }\n            }\n        }\n    }\n    /**\n     * 处理采集错误\n     */\n    handleCaptureError(session, errorMessage) {\n        this._capturing = false;\n        console.error('网络采集错误:', errorMessage);\n        const eventArgs = {\n            success: false,\n            session\n        };\n        this.emitCaptureCompleted(eventArgs);\n    }\n    /**\n     * 发送网络命令\n     */\n    async sendNetworkCommand(command) {\n        return new Promise((resolve, reject) => {\n            const commandData = JSON.stringify(command);\n            if (this._protocol === ProtocolType.TCP && this._tcpSocket) {\n                this.sendTCPCommand(commandData, resolve, reject);\n            }\n            else if (this._protocol === ProtocolType.UDP && this._udpSocket) {\n                this.sendUDPCommand(commandData, resolve, reject);\n            }\n            else {\n                reject(new Error('无效的网络连接'));\n            }\n        });\n    }\n    /**\n     * 发送TCP命令\n     */\n    sendTCPCommand(commandData, resolve, reject) {\n        let responseData = '';\n        const responseHandler = (data) => {\n            responseData += data.toString();\n            // 检查响应是否完整（简单的换行符检查）\n            if (responseData.includes('\\\\n')) {\n                this._tcpSocket.off('data', responseHandler);\n                clearTimeout(timeoutId);\n                try {\n                    const response = JSON.parse(responseData.trim());\n                    resolve(response);\n                }\n                catch (error) {\n                    reject(new Error(`解析响应失败: ${error}`));\n                }\n            }\n        };\n        const timeoutId = setTimeout(() => {\n            this._tcpSocket.off('data', responseHandler);\n            reject(new Error('网络命令超时'));\n        }, 10000);\n        this._tcpSocket.on('data', responseHandler);\n        this._tcpSocket.write(commandData + '\\\\n', error => {\n            if (error) {\n                clearTimeout(timeoutId);\n                reject(new Error(`发送TCP命令失败: ${error.message}`));\n            }\n        });\n    }\n    /**\n     * 发送UDP命令\n     */\n    sendUDPCommand(commandData, resolve, reject) {\n        const responseHandler = (msg, rinfo) => {\n            this._udpSocket.off('message', responseHandler);\n            clearTimeout(timeoutId);\n            try {\n                const response = JSON.parse(msg.toString());\n                resolve(response);\n            }\n            catch (error) {\n                reject(new Error(`解析UDP响应失败: ${error}`));\n            }\n        };\n        const timeoutId = setTimeout(() => {\n            this._udpSocket.off('message', responseHandler);\n            reject(new Error('UDP命令超时'));\n        }, 10000);\n        this._udpSocket.on('message', responseHandler);\n        this._udpSocket.send(commandData, this._port, this._host, error => {\n            if (error) {\n                clearTimeout(timeoutId);\n                reject(new Error(`发送UDP命令失败: ${error.message}`));\n            }\n        });\n    }\n    /**\n     * 构建硬件能力描述\n     */\n    buildCapabilities() {\n        return {\n            channels: {\n                digital: this._channelCount,\n                maxVoltage: 5.0,\n                inputImpedance: 1000000\n            },\n            sampling: {\n                maxRate: this._maxFrequency,\n                minRate: this.minFrequency,\n                supportedRates: [this._maxFrequency, this._blastFrequency],\n                bufferSize: this._bufferSize,\n                streamingSupport: true\n            },\n            triggers: {\n                types: [0, 1, 2, 3],\n                maxChannels: this._channelCount,\n                patternWidth: 16,\n                sequentialSupport: true,\n                conditions: ['rising', 'falling', 'high', 'low', 'change']\n            },\n            connectivity: {\n                interfaces: ['ethernet', 'wifi'],\n                protocols: [this._protocol]\n            },\n            features: {\n                signalGeneration: this._deviceConfig.signal_generation || false,\n                powerSupply: this._deviceConfig.power_supply || false,\n                voltageMonitoring: this._deviceConfig.voltage_monitoring || false,\n                remoteControl: true,\n                firmwareUpdate: this._deviceConfig.firmware_update || false\n            }\n        };\n    }\n    /**\n     * 资源清理\n     */\n    dispose() {\n        this.disconnect();\n        super.dispose();\n    }\n}\nexports.NetworkLogicAnalyzerDriver = NetworkLogicAnalyzerDriver;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZHJpdmVycy9OZXR3b3JrTG9naWNBbmFseXplckRyaXZlci50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSxvREFBNkI7QUFDN0IsMERBQTBEO0FBQzFELG9IQUEwRDtBQUMxRCw0R0FVaUM7QUFFakM7Ozs7R0FJRztBQUNILFNBQVM7QUFDVCxJQUFLLFlBS0o7QUFMRCxXQUFLLFlBQVk7SUFDZiwyQkFBVztJQUNYLDJCQUFXO0lBQ1gsNkJBQWE7SUFDYix1Q0FBdUI7QUFDekIsQ0FBQyxFQUxJLFlBQVksS0FBWixZQUFZLFFBS2hCO0FBRUQsV0FBVztBQUNYLElBQUssVUFLSjtBQUxELFdBQUssVUFBVTtJQUNiLCtCQUFpQjtJQUNqQiwyQkFBYTtJQUNiLHlCQUFXO0lBQ1gseUJBQVc7QUFDYixDQUFDLEVBTEksVUFBVSxLQUFWLFVBQVUsUUFLZDtBQUVELE1BQWEsMEJBQTJCLFNBQVEsdUNBQWtCO0lBRWhFLE9BQU87SUFDUCxJQUFJLGFBQWE7UUFDZixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztJQUNELElBQUksWUFBWTtRQUNkLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM1QixDQUFDO0lBQ0QsSUFBSSxZQUFZO1FBQ2QsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzVCLENBQUM7SUFDRCxJQUFJLGNBQWM7UUFDaEIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDO0lBQzlCLENBQUM7SUFDRCxJQUFJLFVBQVU7UUFDWixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDMUIsQ0FBQztJQUNELElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUNELElBQUksV0FBVztRQUNiLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBQ0QsSUFBSSxVQUFVO1FBQ1osT0FBTyxrQ0FBa0IsQ0FBQyxPQUFPLENBQUM7SUFDcEMsQ0FBQztJQXFCRCxZQUNFLElBQVksRUFDWixJQUFZLEVBQ1os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QyxhQUFhLENBQUMsZUFBZSxJQUFJLEtBQUs7YUFDNUQ7U0FDRixDQUFDO0lBQ0osQ0FBQztJQUVEOztPQUVHO0lBQ00sT0FBTztRQUNkLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDbEIsQ0FBQztDQUNGO0FBOXVCRCxnRUE4dUJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnNjb2RlLWxvZ2ljLWFuYWx5emVyLy4vc3JjL2RyaXZlcnMvTmV0d29ya0xvZ2ljQW5hbHl6ZXJEcml2ZXIudHM/N2JiYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTb2NrZXQgfSBmcm9tICduZXQnO1xyXG5pbXBvcnQgeyBjcmVhdGVTb2NrZXQsIFNvY2tldCBhcyBVRFBTb2NrZXQgfSBmcm9tICdkZ3JhbSc7XHJcbmltcG9ydCB7IEFuYWx5emVyRHJpdmVyQmFzZSB9IGZyb20gJy4vQW5hbHl6ZXJEcml2ZXJCYXNlJztcclxuaW1wb3J0IHtcclxuICBBbmFseXplckRyaXZlclR5cGUsXHJcbiAgQ2FwdHVyZUVycm9yLFxyXG4gIENhcHR1cmVTZXNzaW9uLFxyXG4gIENhcHR1cmVFdmVudEFyZ3MsXHJcbiAgQ2FwdHVyZUNvbXBsZXRlZEhhbmRsZXIsXHJcbiAgQ29ubmVjdGlvblBhcmFtcyxcclxuICBDb25uZWN0aW9uUmVzdWx0LFxyXG4gIERldmljZVN0YXR1cyxcclxuICBDYXB0dXJlTW9kZVxyXG59IGZyb20gJy4uL21vZGVscy9BbmFseXplclR5cGVzJztcclxuXHJcbi8qKlxyXG4gKiDnvZHnu5zpgLvovpHliIbmnpDlmajpgJrnlKjpqbHliqhcclxuICog5pSv5oyB6YCa6L+HVENQL1VEUOWNj+iurumAmuS/oeeahOWQhOenjee9kee7nOiuvuWkh1xyXG4gKiDljIXmi6zvvJpFU1AzMumAu+i+keWIhuaekOWZqOOAgeagkeiOk+a0vumAu+i+keWIhuaekOWZqOOAgUZQR0HpgLvovpHliIbmnpDlmajnrYlcclxuICovXHJcbi8vIOWNj+iuruexu+Wei+aemuS4vlxyXG5lbnVtIFByb3RvY29sVHlwZSB7XHJcbiAgVENQID0gJ3RjcCcsXHJcbiAgVURQID0gJ3VkcCcsXHJcbiAgSFRUUCA9ICdodHRwJyxcclxuICBXRUJTT0NLRVQgPSAnd2Vic29ja2V0J1xyXG59XHJcblxyXG4vLyDmlbDmja7moLzlvI/nsbvlnovmnprkuL5cclxuZW51bSBEYXRhRm9ybWF0IHtcclxuICBCSU5BUlkgPSAnYmluYXJ5JyxcclxuICBKU09OID0gJ2pzb24nLFxyXG4gIENTViA9ICdjc3YnLFxyXG4gIFJBVyA9ICdyYXcnXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOZXR3b3JrTG9naWNBbmFseXplckRyaXZlciBleHRlbmRzIEFuYWx5emVyRHJpdmVyQmFzZSB7XHJcblxyXG4gIC8vIOWxnuaAp+WunueOsFxyXG4gIGdldCBkZXZpY2VWZXJzaW9uKCk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgcmV0dXJuIHRoaXMuX3ZlcnNpb247XHJcbiAgfVxyXG4gIGdldCBjaGFubmVsQ291bnQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9jaGFubmVsQ291bnQ7XHJcbiAgfVxyXG4gIGdldCBtYXhGcmVxdWVuY3koKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9tYXhGcmVxdWVuY3k7XHJcbiAgfVxyXG4gIGdldCBibGFzdEZyZXF1ZW5jeSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2JsYXN0RnJlcXVlbmN5O1xyXG4gIH1cclxuICBnZXQgYnVmZmVyU2l6ZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2J1ZmZlclNpemU7XHJcbiAgfVxyXG4gIGdldCBpc05ldHdvcmsoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgZ2V0IGlzQ2FwdHVyaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcHR1cmluZztcclxuICB9XHJcbiAgZ2V0IGRyaXZlclR5cGUoKTogQW5hbHl6ZXJEcml2ZXJUeXBlIHtcclxuICAgIHJldHVybiBBbmFseXplckRyaXZlclR5cGUuTmV0d29yaztcclxuICB9XHJcblxyXG4gIC8vIOengeacieWPmOmHj1xyXG4gIHByaXZhdGUgX2NhcHR1cmluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX3ZlcnNpb246IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgX2NoYW5uZWxDb3VudDogbnVtYmVyID0gODtcclxuICBwcml2YXRlIF9tYXhGcmVxdWVuY3k6IG51bWJlciA9IDQwMDAwMDAwOyAvLyA0ME1Ieum7mOiupFxyXG4gIHByaXZhdGUgX2JsYXN0RnJlcXVlbmN5OiBudW1iZXIgPSA4MDAwMDAwMDsgLy8gODBNSHrpu5jorqRcclxuICBwcml2YXRlIF9idWZmZXJTaXplOiBudW1iZXIgPSA4MDAwMDAwOyAvLyA4Teagt+acrOm7mOiupFxyXG4gIHByaXZhdGUgX2hvc3Q6IHN0cmluZztcclxuICBwcml2YXRlIF9wb3J0OiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBfcHJvdG9jb2w6IFByb3RvY29sVHlwZTtcclxuICBwcml2YXRlIF9kYXRhRm9ybWF0OiBEYXRhRm9ybWF0O1xyXG5cclxuICAvLyDpgJrkv6Hlr7nosaFcclxuICBwcml2YXRlIF90Y3BTb2NrZXQ6IFNvY2tldCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuICBwcml2YXRlIF91ZHBTb2NrZXQ6IFVEUFNvY2tldCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuICBwcml2YXRlIF9pc0Nvbm5lY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX2RldmljZUNvbmZpZzogYW55ID0ge307XHJcbiAgcHJpdmF0ZSBfYXV0aFRva2VuOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBob3N0OiBzdHJpbmcsXHJcbiAgICBwb3J0OiBudW1iZXIsXHJcbiAgICBwcm90b2NvbDogUHJvdG9jb2xUeXBlID0gUHJvdG9jb2xUeXBlLlRDUCxcclxuICAgIGRhdGFGb3JtYXQ6IERhdGFGb3JtYXQgPSBEYXRhRm9ybWF0LkpTT04sXHJcbiAgICBhdXRoVG9rZW4/OiBzdHJpbmdcclxuICApIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5faG9zdCA9IGhvc3Q7XHJcbiAgICB0aGlzLl9wb3J0ID0gcG9ydDtcclxuICAgIHRoaXMuX3Byb3RvY29sID0gcHJvdG9jb2w7XHJcbiAgICB0aGlzLl9kYXRhRm9ybWF0ID0gZGF0YUZvcm1hdDtcclxuICAgIHRoaXMuX2F1dGhUb2tlbiA9IGF1dGhUb2tlbiB8fCAnJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOi/nuaOpeiuvuWkh1xyXG4gICAqL1xyXG4gIGFzeW5jIGNvbm5lY3QocGFyYW1zPzogQ29ubmVjdGlvblBhcmFtcyk6IFByb21pc2U8Q29ubmVjdGlvblJlc3VsdD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5qC55o2u5Y2P6K6u57G75Z6L5Yid5aeL5YyW6L+e5o6lXHJcbiAgICAgIHN3aXRjaCAodGhpcy5fcHJvdG9jb2wpIHtcclxuICAgICAgICBjYXNlIFByb3RvY29sVHlwZS5UQ1A6XHJcbiAgICAgICAgY2FzZSBQcm90b2NvbFR5cGUuSFRUUDpcclxuICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVRDUCgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBQcm90b2NvbFR5cGUuVURQOlxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplVURQKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFByb3RvY29sVHlwZS5XRUJTT0NLRVQ6XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVXZWJTb2NrZXQoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOS4jeaUr+aMgeeahOWNj+iuruexu+WeizogJHt0aGlzLl9wcm90b2NvbH1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6L+b6KGM6K6+5aSH5o+h5omL5ZKM6K6k6K+BXHJcbiAgICAgIGF3YWl0IHRoaXMucGVyZm9ybUhhbmRzaGFrZSgpO1xyXG5cclxuICAgICAgLy8g5p+l6K+i6K6+5aSH5L+h5oGvXHJcbiAgICAgIGF3YWl0IHRoaXMucXVlcnlEZXZpY2VJbmZvKCk7XHJcblxyXG4gICAgICB0aGlzLl9pc0Nvbm5lY3RlZCA9IHRydWU7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGV2aWNlSW5mbzoge1xyXG4gICAgICAgICAgbmFtZTogdGhpcy5fdmVyc2lvbiB8fCAnTmV0d29yayBMb2dpYyBBbmFseXplcicsXHJcbiAgICAgICAgICB2ZXJzaW9uOiB0aGlzLl92ZXJzaW9uID8/IHVuZGVmaW5lZCxcclxuICAgICAgICAgIHR5cGU6IHRoaXMuZHJpdmVyVHlwZSxcclxuICAgICAgICAgIGNvbm5lY3Rpb25QYXRoOiBgJHt0aGlzLl9wcm90b2NvbH06Ly8ke3RoaXMuX2hvc3R9OiR7dGhpcy5fcG9ydH1gLFxyXG4gICAgICAgICAgaXNOZXR3b3JrOiB0cnVlLFxyXG4gICAgICAgICAgY2FwYWJpbGl0aWVzOiB0aGlzLmJ1aWxkQ2FwYWJpbGl0aWVzKClcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfov57mjqXlpLHotKUnXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmlq3lvIDov57mjqVcclxuICAgKi9cclxuICBhc3luYyBkaXNjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5faXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAodGhpcy5fdGNwU29ja2V0KSB7XHJcbiAgICAgIHRoaXMuX3RjcFNvY2tldC5kZXN0cm95KCk7XHJcbiAgICAgIHRoaXMuX3RjcFNvY2tldCA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5fdWRwU29ja2V0KSB7XHJcbiAgICAgIHRoaXMuX3VkcFNvY2tldC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLl91ZHBTb2NrZXQgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5borr7lpIfnirbmgIFcclxuICAgKi9cclxuICBhc3luYyBnZXRTdGF0dXMoKTogUHJvbWlzZTxEZXZpY2VTdGF0dXM+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN0YXR1c1Jlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kTmV0d29ya0NvbW1hbmQoe1xyXG4gICAgICAgIGNvbW1hbmQ6ICdHRVRfU1RBVFVTJyxcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLl9pc0Nvbm5lY3RlZCxcclxuICAgICAgICBpc0NhcHR1cmluZzogdGhpcy5fY2FwdHVyaW5nLFxyXG4gICAgICAgIGJhdHRlcnlWb2x0YWdlOiBzdGF0dXNSZXNwb25zZS5iYXR0ZXJ5X3ZvbHRhZ2UgfHwgJ04vQScsXHJcbiAgICAgICAgdGVtcGVyYXR1cmU6IHN0YXR1c1Jlc3BvbnNlLnRlbXBlcmF0dXJlLFxyXG4gICAgICAgIGxhc3RFcnJvcjogc3RhdHVzUmVzcG9uc2UubGFzdF9lcnJvclxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpc0Nvbm5lY3RlZDogdGhpcy5faXNDb25uZWN0ZWQsXHJcbiAgICAgICAgaXNDYXB0dXJpbmc6IHRoaXMuX2NhcHR1cmluZyxcclxuICAgICAgICBiYXR0ZXJ5Vm9sdGFnZTogJ04vQScsXHJcbiAgICAgICAgbGFzdEVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfnirbmgIHmn6Xor6LlpLHotKUnXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlvIDlp4vph4fpm4ZcclxuICAgKi9cclxuICBhc3luYyBzdGFydENhcHR1cmUoXHJcbiAgICBzZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbixcclxuICAgIGNhcHR1cmVDb21wbGV0ZWRIYW5kbGVyPzogQ2FwdHVyZUNvbXBsZXRlZEhhbmRsZXJcclxuICApOiBQcm9taXNlPENhcHR1cmVFcnJvcj4ge1xyXG4gICAgaWYgKHRoaXMuX2NhcHR1cmluZykge1xyXG4gICAgICByZXR1cm4gQ2FwdHVyZUVycm9yLkJ1c3k7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLl9pc0Nvbm5lY3RlZCkge1xyXG4gICAgICByZXR1cm4gQ2FwdHVyZUVycm9yLkhhcmR3YXJlRXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIOiuvue9ruaNleiOt+WujOaIkOWkhOeQhuWZqFxyXG4gICAgICBpZiAoY2FwdHVyZUNvbXBsZXRlZEhhbmRsZXIpIHtcclxuICAgICAgICB0aGlzLm9uY2UoJ2NhcHR1cmVDb21wbGV0ZWQnLCBjYXB0dXJlQ29tcGxldGVkSGFuZGxlcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWPkemAgemHh+mbhumFjee9rlxyXG4gICAgICBjb25zdCBjYXB0dXJlQ29uZmlnID0gdGhpcy5idWlsZENhcHR1cmVDb25maWcoc2Vzc2lvbik7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kTmV0d29ya0NvbW1hbmQoe1xyXG4gICAgICAgIGNvbW1hbmQ6ICdTVEFSVF9DQVBUVVJFJyxcclxuICAgICAgICBjb25maWc6IGNhcHR1cmVDb25maWcsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICfph4fpm4blkK/liqjlpLHotKUnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g55uR5o6n6YeH6ZuG6L+b5bqmXHJcbiAgICAgIHRoaXMubW9uaXRvckNhcHR1cmVQcm9ncmVzcyhzZXNzaW9uLCByZXNwb25zZS5jYXB0dXJlX2lkKTtcclxuXHJcbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuTm9uZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuX2NhcHR1cmluZyA9IGZhbHNlO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfnvZHnu5zph4fpm4blkK/liqjlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gQ2FwdHVyZUVycm9yLlVuZXhwZWN0ZWRFcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWBnOatoumHh+mbhlxyXG4gICAqL1xyXG4gIGFzeW5jIHN0b3BDYXB0dXJlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgaWYgKCF0aGlzLl9jYXB0dXJpbmcpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdGhpcy5zZW5kTmV0d29ya0NvbW1hbmQoe1xyXG4gICAgICAgIGNvbW1hbmQ6ICdTVE9QX0NBUFRVUkUnLFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuX2NhcHR1cmluZyA9IGZhbHNlO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+WBnOatoue9kee7nOmHh+mbhuWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOi/m+WFpeW8leWvvOWKoOi9veeoi+W6j+aooeW8j1xyXG4gICAqL1xyXG4gIGFzeW5jIGVudGVyQm9vdGxvYWRlcigpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kTmV0d29ya0NvbW1hbmQoe1xyXG4gICAgICAgIGNvbW1hbmQ6ICdFTlRFUl9CT09UTE9BREVSJyxcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzcG9uc2Uuc3VjY2VzcyA9PT0gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+i/m+WFpeW8leWvvOWKoOi9veeoi+W6j+Wksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPkemAgee9kee7nOmFjee9rlxyXG4gICAqL1xyXG4gIG92ZXJyaWRlIGFzeW5jIHNlbmROZXR3b3JrQ29uZmlnKFxyXG4gICAgYWNjZXNzUG9pbnROYW1lOiBzdHJpbmcsXHJcbiAgICBwYXNzd29yZDogc3RyaW5nLFxyXG4gICAgaXBBZGRyZXNzOiBzdHJpbmcsXHJcbiAgICBwb3J0OiBudW1iZXJcclxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kTmV0d29ya0NvbW1hbmQoe1xyXG4gICAgICAgIGNvbW1hbmQ6ICdTRVRfTkVUV09SS19DT05GSUcnLFxyXG4gICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgc3NpZDogYWNjZXNzUG9pbnROYW1lLFxyXG4gICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxyXG4gICAgICAgICAgaXBfYWRkcmVzczogaXBBZGRyZXNzLFxyXG4gICAgICAgICAgcG9ydDogcG9ydFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3BvbnNlLnN1Y2Nlc3MgPT09IHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCflj5HpgIHnvZHnu5zphY3nva7lpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bnlLXljovnirbmgIFcclxuICAgKi9cclxuICBvdmVycmlkZSBhc3luYyBnZXRWb2x0YWdlU3RhdHVzKCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZE5ldHdvcmtDb21tYW5kKHtcclxuICAgICAgICBjb21tYW5kOiAnR0VUX1ZPTFRBR0UnLFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiByZXNwb25zZS52b2x0YWdlIHx8ICdOL0EnO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign6I635Y+W55S15Y6L54q25oCB5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuICdFUlJPUic7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJZUQ1Dov57mjqVcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVUQ1AoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLl90Y3BTb2NrZXQgPSBuZXcgU29ja2V0KCk7XHJcblxyXG4gICAgICB0aGlzLl90Y3BTb2NrZXQuY29ubmVjdCh0aGlzLl9wb3J0LCB0aGlzLl9ob3N0LCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFRDUOi/nuaOpeW3suW7uuerizogJHt0aGlzLl9ob3N0fToke3RoaXMuX3BvcnR9YCk7XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuX3RjcFNvY2tldC5vbignZXJyb3InLCBlcnJvciA9PiB7XHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgVENQ6L+e5o6l5aSx6LSlOiAke2Vycm9yLm1lc3NhZ2V9YCkpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuX3RjcFNvY2tldC5vbignY2xvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICBjb25zb2xlLmxvZygnVENQ6L+e5o6l5bey5YWz6ZetJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJZVRFDov57mjqVcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVVRFAoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLl91ZHBTb2NrZXQgPSBjcmVhdGVTb2NrZXQoJ3VkcDQnKTtcclxuXHJcbiAgICAgIHRoaXMuX3VkcFNvY2tldC5iaW5kKDAsICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgVURQ5aWX5o6l5a2X5bey5Yib5bu677yM55uu5qCHOiAke3RoaXMuX2hvc3R9OiR7dGhpcy5fcG9ydH1gKTtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5fdWRwU29ja2V0Lm9uKCdlcnJvcicsIGVycm9yID0+IHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKGBVRFDov57mjqXlpLHotKU6ICR7ZXJyb3IubWVzc2FnZX1gKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5fdWRwU29ja2V0Lm9uKCdjbG9zZScsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9pc0Nvbm5lY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVRFDov57mjqXlt7LlhbPpl60nKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMlldlYlNvY2tldOi/nuaOpVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVdlYlNvY2tldCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIC8vIOazqOaEj++8mui/memHjOmcgOimgVdlYlNvY2tldOW6k++8jOWunumZheWunueOsOS4reWPr+iDvemcgOimgWltcG9ydCBXZWJTb2NrZXTlupNcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8g6L+Z6YeM5pivV2ViU29ja2V06L+e5o6l55qE5Y2g5L2N56ym5a6e546wXHJcbiAgICAgICAgLy8g5a6e6ZmF5L2/55So5pe26ZyA6KaB5a6J6KOF5ZKM5a+85YWld3PlupNcclxuICAgICAgICBjb25zb2xlLmxvZyhgV2ViU29ja2V06L+e5o6lOiB3czovLyR7dGhpcy5faG9zdH06JHt0aGlzLl9wb3J0fWApO1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKGBXZWJTb2NrZXTov57mjqXlpLHotKU6ICR7ZXJyb3J9YCkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJp+ihjOaPoeaJi+WSjOiupOivgVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybUhhbmRzaGFrZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IGhhbmRzaGFrZURhdGEgPSB7XHJcbiAgICAgIGNvbW1hbmQ6ICdIQU5EU0hBS0UnLFxyXG4gICAgICB2ZXJzaW9uOiAnMS4wJyxcclxuICAgICAgY2xpZW50X3R5cGU6ICd2c2NvZGUtbG9naWMtYW5hbHl6ZXInLFxyXG4gICAgICBhdXRoX3Rva2VuOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZE5ldHdvcmtDb21tYW5kKGhhbmRzaGFrZURhdGEpO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYOaPoeaJi+Wksei0pTogJHtyZXNwb25zZS5lcnJvciB8fCAn5pyq55+l6ZSZ6K+vJ31gKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygn6K6+5aSH5o+h5omL5oiQ5YqfJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmn6Xor6Lorr7lpIfkv6Hmga9cclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHF1ZXJ5RGV2aWNlSW5mbygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kTmV0d29ya0NvbW1hbmQoe1xyXG4gICAgICBjb21tYW5kOiAnR0VUX0RFVklDRV9JTkZPJyxcclxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAocmVzcG9uc2UuZGV2aWNlX2luZm8pIHtcclxuICAgICAgY29uc3QgaW5mbyA9IHJlc3BvbnNlLmRldmljZV9pbmZvO1xyXG4gICAgICB0aGlzLl92ZXJzaW9uID0gaW5mby52ZXJzaW9uIHx8ICdVbmtub3duIE5ldHdvcmsgRGV2aWNlJztcclxuICAgICAgdGhpcy5fY2hhbm5lbENvdW50ID0gaW5mby5jaGFubmVscyB8fCA4O1xyXG4gICAgICB0aGlzLl9tYXhGcmVxdWVuY3kgPSBpbmZvLm1heF9mcmVxdWVuY3kgfHwgNDAwMDAwMDA7XHJcbiAgICAgIHRoaXMuX2JsYXN0RnJlcXVlbmN5ID0gaW5mby5ibGFzdF9mcmVxdWVuY3kgfHwgdGhpcy5fbWF4RnJlcXVlbmN5ICogMjtcclxuICAgICAgdGhpcy5fYnVmZmVyU2l6ZSA9IGluZm8uYnVmZmVyX3NpemUgfHwgODAwMDAwMDtcclxuICAgICAgdGhpcy5fZGV2aWNlQ29uZmlnID0gaW5mby5jb25maWcgfHwge307XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmnoTlu7rph4fpm4bphY3nva5cclxuICAgKi9cclxuICBwcml2YXRlIGJ1aWxkQ2FwdHVyZUNvbmZpZyhzZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbik6IGFueSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjaGFubmVsczogc2Vzc2lvbi5jYXB0dXJlQ2hhbm5lbHMubWFwKGNoID0+ICh7XHJcbiAgICAgICAgbnVtYmVyOiBjaC5jaGFubmVsTnVtYmVyLFxyXG4gICAgICAgIG5hbWU6IGNoLmNoYW5uZWxOYW1lLFxyXG4gICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgfSkpLFxyXG4gICAgICBzYW1wbGVfcmF0ZTogc2Vzc2lvbi5mcmVxdWVuY3ksXHJcbiAgICAgIHByZV90cmlnZ2VyX3NhbXBsZXM6IHNlc3Npb24ucHJlVHJpZ2dlclNhbXBsZXMsXHJcbiAgICAgIHBvc3RfdHJpZ2dlcl9zYW1wbGVzOiBzZXNzaW9uLnBvc3RUcmlnZ2VyU2FtcGxlcyxcclxuICAgICAgdHJpZ2dlcjoge1xyXG4gICAgICAgIHR5cGU6IHNlc3Npb24udHJpZ2dlclR5cGUsXHJcbiAgICAgICAgY2hhbm5lbDogc2Vzc2lvbi50cmlnZ2VyQ2hhbm5lbCxcclxuICAgICAgICBpbnZlcnRlZDogc2Vzc2lvbi50cmlnZ2VySW52ZXJ0ZWQsXHJcbiAgICAgICAgcGF0dGVybjogc2Vzc2lvbi50cmlnZ2VyUGF0dGVybixcclxuICAgICAgICBiaXRfY291bnQ6IHNlc3Npb24udHJpZ2dlckJpdENvdW50XHJcbiAgICAgIH0sXHJcbiAgICAgIGxvb3BfY291bnQ6IHNlc3Npb24ubG9vcENvdW50LFxyXG4gICAgICBtZWFzdXJlX2J1cnN0czogc2Vzc2lvbi5tZWFzdXJlQnVyc3RzLFxyXG4gICAgICBkYXRhX2Zvcm1hdDogdGhpcy5fZGF0YUZvcm1hdFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOebkeaOp+mHh+mbhui/m+W6plxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgbW9uaXRvckNhcHR1cmVQcm9ncmVzcyhzZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbiwgY2FwdHVyZUlkPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBjaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICghdGhpcy5fY2FwdHVyaW5nKSB7XHJcbiAgICAgICAgICBjbGVhckludGVydmFsKGNoZWNrSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3RhdHVzUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmROZXR3b3JrQ29tbWFuZCh7XHJcbiAgICAgICAgICBjb21tYW5kOiAnR0VUX0NBUFRVUkVfU1RBVFVTJyxcclxuICAgICAgICAgIGNhcHR1cmVfaWQ6IGNhcHR1cmVJZCxcclxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoc3RhdHVzUmVzcG9uc2Uuc3RhdHVzID09PSAnQ09NUExFVEVEJykge1xyXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChjaGVja0ludGVydmFsKTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc0NhcHR1cmVSZXN1bHRzKHNlc3Npb24sIGNhcHR1cmVJZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0dXNSZXNwb25zZS5zdGF0dXMgPT09ICdFUlJPUicpIHtcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tJbnRlcnZhbCk7XHJcbiAgICAgICAgICB0aGlzLmhhbmRsZUNhcHR1cmVFcnJvcihzZXNzaW9uLCBzdGF0dXNSZXNwb25zZS5lcnJvcl9tZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1c1Jlc3BvbnNlLnByb2dyZXNzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIC8vIOWPr+mAie+8muaKpeWRiumHh+mbhui/m+W6plxyXG4gICAgICAgICAgY29uc29sZS5sb2coYOmHh+mbhui/m+W6pjogJHtzdGF0dXNSZXNwb25zZS5wcm9ncmVzc30lYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tJbnRlcnZhbCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYXB0dXJlRXJyb3Ioc2Vzc2lvbiwgYOebkeaOp+mHh+mbhui/m+W6puWksei0pTogJHtlcnJvcn1gKTtcclxuICAgICAgfVxyXG4gICAgfSwgMjAwKTsgLy8g5q+PMjAwbXPmo4Dmn6XkuIDmrKHnirbmgIFcclxuXHJcbiAgICAvLyDorr7nva7otoXml7bkv53miqRcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5fY2FwdHVyaW5nKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChjaGVja0ludGVydmFsKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUNhcHR1cmVFcnJvcihzZXNzaW9uLCAn6YeH6ZuG6LaF5pe2Jyk7XHJcbiAgICAgIH1cclxuICAgIH0sIDMwMDAwMCk7IC8vIDXliIbpkp/otoXml7ZcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhumHh+mbhue7k+aenFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc0NhcHR1cmVSZXN1bHRzKHNlc3Npb246IENhcHR1cmVTZXNzaW9uLCBjYXB0dXJlSWQ/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOivt+axgumHh+mbhuaVsOaNrlxyXG4gICAgICBjb25zdCBkYXRhUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmROZXR3b3JrQ29tbWFuZCh7XHJcbiAgICAgICAgY29tbWFuZDogJ0dFVF9DQVBUVVJFX0RBVEEnLFxyXG4gICAgICAgIGNhcHR1cmVfaWQ6IGNhcHR1cmVJZCxcclxuICAgICAgICBmb3JtYXQ6IHRoaXMuX2RhdGFGb3JtYXQsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCFkYXRhUmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhUmVzcG9uc2UuZXJyb3IgfHwgJ+iOt+WPlumHh+mbhuaVsOaNruWksei0pScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmoLnmja7mlbDmja7moLzlvI/op6PmnpDmlbDmja5cclxuICAgICAgdGhpcy5wYXJzZU5ldHdvcmtDYXB0dXJlRGF0YShzZXNzaW9uLCBkYXRhUmVzcG9uc2UpO1xyXG5cclxuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICBjb25zdCBldmVudEFyZ3M6IENhcHR1cmVFdmVudEFyZ3MgPSB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBzZXNzaW9uXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmVtaXRDYXB0dXJlQ29tcGxldGVkKGV2ZW50QXJncyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZUNhcHR1cmVFcnJvcihzZXNzaW9uLCBg5aSE55CG6YeH6ZuG57uT5p6c5aSx6LSlOiAke2Vycm9yfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kej5p6Q572R57uc6YeH6ZuG5pWw5o2uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwYXJzZU5ldHdvcmtDYXB0dXJlRGF0YShzZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbiwgZGF0YVJlc3BvbnNlOiBhbnkpOiB2b2lkIHtcclxuICAgIHN3aXRjaCAodGhpcy5fZGF0YUZvcm1hdCkge1xyXG4gICAgICBjYXNlIERhdGFGb3JtYXQuSlNPTjpcclxuICAgICAgICB0aGlzLnBhcnNlSlNPTkRhdGEoc2Vzc2lvbiwgZGF0YVJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIERhdGFGb3JtYXQuQklOQVJZOlxyXG4gICAgICAgIHRoaXMucGFyc2VCaW5hcnlEYXRhKHNlc3Npb24sIGRhdGFSZXNwb25zZS5kYXRhKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBEYXRhRm9ybWF0LkNTVjpcclxuICAgICAgICB0aGlzLnBhcnNlQ1NWRGF0YShzZXNzaW9uLCBkYXRhUmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgRGF0YUZvcm1hdC5SQVc6XHJcbiAgICAgICAgdGhpcy5wYXJzZVJhd0RhdGEoc2Vzc2lvbiwgZGF0YVJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg5LiN5pSv5oyB55qE5pWw5o2u5qC85byPOiAke3RoaXMuX2RhdGFGb3JtYXR9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDop6PmnpBKU09O5qC85byP5pWw5o2uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwYXJzZUpTT05EYXRhKHNlc3Npb246IENhcHR1cmVTZXNzaW9uLCBkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgIGlmIChkYXRhLmNoYW5uZWxzICYmIEFycmF5LmlzQXJyYXkoZGF0YS5jaGFubmVscykpIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXNzaW9uLmNhcHR1cmVDaGFubmVscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSBzZXNzaW9uLmNhcHR1cmVDaGFubmVsc1tpXTtcclxuICAgICAgICBjb25zdCBjaGFubmVsRGF0YSA9IGRhdGEuY2hhbm5lbHMuZmluZCgoY2g6IGFueSkgPT4gY2gubnVtYmVyID09PSBjaGFubmVsLmNoYW5uZWxOdW1iZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjaGFubmVsRGF0YSAmJiBjaGFubmVsRGF0YS5zYW1wbGVzKSB7XHJcbiAgICAgICAgICBjaGFubmVsLnNhbXBsZXMgPSBuZXcgVWludDhBcnJheShjaGFubmVsRGF0YS5zYW1wbGVzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDop6PmnpDnqoHlj5Hkv6Hmga9cclxuICAgIGlmIChkYXRhLmJ1cnN0cyAmJiBBcnJheS5pc0FycmF5KGRhdGEuYnVyc3RzKSkge1xyXG4gICAgICBzZXNzaW9uLmJ1cnN0cyA9IGRhdGEuYnVyc3RzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kej5p6Q5LqM6L+b5Yi25qC85byP5pWw5o2uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwYXJzZUJpbmFyeURhdGEoc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24sIGRhdGE6IGFueSk6IHZvaWQge1xyXG4gICAgLy8gZGF0YeW6lOivpeaYr0Jhc2U2NOe8lueggeeahOS6jOi/m+WItuaVsOaNrlxyXG4gICAgY29uc3QgYmluYXJ5RGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEsICdiYXNlNjQnKTtcclxuICAgIGNvbnN0IHNhbXBsZUNvdW50ID0gYmluYXJ5RGF0YS5sZW5ndGggLyBzZXNzaW9uLmNhcHR1cmVDaGFubmVscy5sZW5ndGg7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXNzaW9uLmNhcHR1cmVDaGFubmVscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBjaGFubmVsID0gc2Vzc2lvbi5jYXB0dXJlQ2hhbm5lbHNbaV07XHJcbiAgICAgIGNoYW5uZWwuc2FtcGxlcyA9IG5ldyBVaW50OEFycmF5KHNhbXBsZUNvdW50KTtcclxuICAgICAgXHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2FtcGxlQ291bnQ7IGorKykge1xyXG4gICAgICAgIGNvbnN0IGJ5dGVJbmRleCA9IGogKiBzZXNzaW9uLmNhcHR1cmVDaGFubmVscy5sZW5ndGggKyBpO1xyXG4gICAgICAgIGNoYW5uZWwuc2FtcGxlc1tqXSA9IGJpbmFyeURhdGFbYnl0ZUluZGV4XTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kej5p6QQ1NW5qC85byP5pWw5o2uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwYXJzZUNTVkRhdGEoc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24sIGNzdkRhdGE6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgbGluZXMgPSBjc3ZEYXRhLnNwbGl0KCdcXFxcbicpO1xyXG4gICAgaWYgKGxpbmVzLmxlbmd0aCA8IDIpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBoZWFkZXJzID0gbGluZXNbMF0uc3BsaXQoJywnKS5tYXAoaCA9PiBoLnRyaW0oKSk7XHJcbiAgICBjb25zdCBkYXRhTGluZXMgPSBsaW5lcy5zbGljZSgxKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSk7XHJcblxyXG4gICAgLy8g5Yid5aeL5YyW6YCa6YGT5pWw5o2uXHJcbiAgICBmb3IgKGNvbnN0IGNoYW5uZWwgb2Ygc2Vzc2lvbi5jYXB0dXJlQ2hhbm5lbHMpIHtcclxuICAgICAgY2hhbm5lbC5zYW1wbGVzID0gbmV3IFVpbnQ4QXJyYXkoZGF0YUxpbmVzLmxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6Kej5p6Q5pWw5o2u6KGMXHJcbiAgICBmb3IgKGxldCByb3dJbmRleCA9IDA7IHJvd0luZGV4IDwgZGF0YUxpbmVzLmxlbmd0aDsgcm93SW5kZXgrKykge1xyXG4gICAgICBjb25zdCB2YWx1ZXMgPSBkYXRhTGluZXNbcm93SW5kZXhdLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGNoYW5uZWwgb2Ygc2Vzc2lvbi5jYXB0dXJlQ2hhbm5lbHMpIHtcclxuICAgICAgICBjb25zdCBjaGFubmVsTmFtZSA9IGBDSCR7Y2hhbm5lbC5jaGFubmVsTnVtYmVyfWA7XHJcbiAgICAgICAgY29uc3QgY29sdW1uSW5kZXggPSBoZWFkZXJzLmluZGV4T2YoY2hhbm5lbE5hbWUpO1xyXG5cclxuICAgICAgICBpZiAoY29sdW1uSW5kZXggPj0gMCAmJiBjb2x1bW5JbmRleCA8IHZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2NvbHVtbkluZGV4XS50cmltKCk7XHJcbiAgICAgICAgICBjaGFubmVsLnNhbXBsZXMhW3Jvd0luZGV4XSA9IHZhbHVlID09PSAnMScgPyAxIDogMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOino+aekOWOn+Wni+agvOW8j+aVsOaNrlxyXG4gICAqL1xyXG4gIHByaXZhdGUgcGFyc2VSYXdEYXRhKHNlc3Npb246IENhcHR1cmVTZXNzaW9uLCBkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgIC8vIOWBh+iuvmRhdGHmmK/moLfmnKzmlbDnu4TnmoTmlbDnu4RcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpICYmIGRhdGEubGVuZ3RoID49IHNlc3Npb24uY2FwdHVyZUNoYW5uZWxzLmxlbmd0aCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlc3Npb24uY2FwdHVyZUNoYW5uZWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IHNlc3Npb24uY2FwdHVyZUNoYW5uZWxzW2ldO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGFbaV0pKSB7XHJcbiAgICAgICAgICBjaGFubmVsLnNhbXBsZXMgPSBuZXcgVWludDhBcnJheShkYXRhW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhumHh+mbhumUmeivr1xyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFuZGxlQ2FwdHVyZUVycm9yKHNlc3Npb246IENhcHR1cmVTZXNzaW9uLCBlcnJvck1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XHJcbiAgICBjb25zb2xlLmVycm9yKCfnvZHnu5zph4fpm4bplJnor686JywgZXJyb3JNZXNzYWdlKTtcclxuXHJcbiAgICBjb25zdCBldmVudEFyZ3M6IENhcHR1cmVFdmVudEFyZ3MgPSB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBzZXNzaW9uXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZW1pdENhcHR1cmVDb21wbGV0ZWQoZXZlbnRBcmdzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPkemAgee9kee7nOWRveS7pFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgc2VuZE5ldHdvcmtDb21tYW5kKGNvbW1hbmQ6IGFueSk6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBjb21tYW5kRGF0YSA9IEpTT04uc3RyaW5naWZ5KGNvbW1hbmQpO1xyXG4gICAgICBcclxuICAgICAgaWYgKHRoaXMuX3Byb3RvY29sID09PSBQcm90b2NvbFR5cGUuVENQICYmIHRoaXMuX3RjcFNvY2tldCkge1xyXG4gICAgICAgIHRoaXMuc2VuZFRDUENvbW1hbmQoY29tbWFuZERhdGEsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fcHJvdG9jb2wgPT09IFByb3RvY29sVHlwZS5VRFAgJiYgdGhpcy5fdWRwU29ja2V0KSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVURQQ29tbWFuZChjb21tYW5kRGF0YSwgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKCfml6DmlYjnmoTnvZHnu5zov57mjqUnKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+R6YCBVENQ5ZG95LukXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzZW5kVENQQ29tbWFuZChcclxuICAgIGNvbW1hbmREYXRhOiBzdHJpbmcsXHJcbiAgICByZXNvbHZlOiAodmFsdWU6IGFueSkgPT4gdm9pZCxcclxuICAgIHJlamVjdDogKGVycm9yOiBFcnJvcikgPT4gdm9pZFxyXG4gICk6IHZvaWQge1xyXG4gICAgbGV0IHJlc3BvbnNlRGF0YSA9ICcnO1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlSGFuZGxlciA9IChkYXRhOiBCdWZmZXIpID0+IHtcclxuICAgICAgcmVzcG9uc2VEYXRhICs9IGRhdGEudG9TdHJpbmcoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIOajgOafpeWTjeW6lOaYr+WQpuWujOaVtO+8iOeugOWNleeahOaNouihjOespuajgOafpe+8iVxyXG4gICAgICBpZiAocmVzcG9uc2VEYXRhLmluY2x1ZGVzKCdcXFxcbicpKSB7XHJcbiAgICAgICAgdGhpcy5fdGNwU29ja2V0IS5vZmYoJ2RhdGEnLCByZXNwb25zZUhhbmRsZXIpO1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2VEYXRhLnRyaW0oKSk7XHJcbiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihg6Kej5p6Q5ZON5bqU5aSx6LSlOiAke2Vycm9yfWApKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuX3RjcFNvY2tldCEub2ZmKCdkYXRhJywgcmVzcG9uc2VIYW5kbGVyKTtcclxuICAgICAgcmVqZWN0KG5ldyBFcnJvcign572R57uc5ZG95Luk6LaF5pe2JykpO1xyXG4gICAgfSwgMTAwMDApO1xyXG5cclxuICAgIHRoaXMuX3RjcFNvY2tldCEub24oJ2RhdGEnLCByZXNwb25zZUhhbmRsZXIpO1xyXG4gICAgdGhpcy5fdGNwU29ja2V0IS53cml0ZShjb21tYW5kRGF0YSArICdcXFxcbicsIGVycm9yID0+IHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihg5Y+R6YCBVENQ5ZG95Luk5aSx6LSlOiAke2Vycm9yLm1lc3NhZ2V9YCkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPkemAgVVEUOWRveS7pFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2VuZFVEUENvbW1hbmQoXHJcbiAgICBjb21tYW5kRGF0YTogc3RyaW5nLFxyXG4gICAgcmVzb2x2ZTogKHZhbHVlOiBhbnkpID0+IHZvaWQsXHJcbiAgICByZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWRcclxuICApOiB2b2lkIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlSGFuZGxlciA9IChtc2c6IEJ1ZmZlciwgcmluZm86IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLl91ZHBTb2NrZXQhLm9mZignbWVzc2FnZScsIHJlc3BvbnNlSGFuZGxlcik7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICBcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UobXNnLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYOino+aekFVEUOWTjeW6lOWksei0pTogJHtlcnJvcn1gKSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuX3VkcFNvY2tldCEub2ZmKCdtZXNzYWdlJywgcmVzcG9uc2VIYW5kbGVyKTtcclxuICAgICAgcmVqZWN0KG5ldyBFcnJvcignVURQ5ZG95Luk6LaF5pe2JykpO1xyXG4gICAgfSwgMTAwMDApO1xyXG5cclxuICAgIHRoaXMuX3VkcFNvY2tldCEub24oJ21lc3NhZ2UnLCByZXNwb25zZUhhbmRsZXIpO1xyXG4gICAgdGhpcy5fdWRwU29ja2V0IS5zZW5kKGNvbW1hbmREYXRhLCB0aGlzLl9wb3J0LCB0aGlzLl9ob3N0LCBlcnJvciA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYOWPkemAgVVEUOWRveS7pOWksei0pTogJHtlcnJvci5tZXNzYWdlfWApKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmnoTlu7rnoazku7bog73lipvmj4/ov7BcclxuICAgKi9cclxuICBwcml2YXRlIGJ1aWxkQ2FwYWJpbGl0aWVzKCk6IGFueSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjaGFubmVsczoge1xyXG4gICAgICAgIGRpZ2l0YWw6IHRoaXMuX2NoYW5uZWxDb3VudCxcclxuICAgICAgICBtYXhWb2x0YWdlOiA1LjAsXHJcbiAgICAgICAgaW5wdXRJbXBlZGFuY2U6IDEwMDAwMDBcclxuICAgICAgfSxcclxuICAgICAgc2FtcGxpbmc6IHtcclxuICAgICAgICBtYXhSYXRlOiB0aGlzLl9tYXhGcmVxdWVuY3ksXHJcbiAgICAgICAgbWluUmF0ZTogdGhpcy5taW5GcmVxdWVuY3ksXHJcbiAgICAgICAgc3VwcG9ydGVkUmF0ZXM6IFt0aGlzLl9tYXhGcmVxdWVuY3ksIHRoaXMuX2JsYXN0RnJlcXVlbmN5XSxcclxuICAgICAgICBidWZmZXJTaXplOiB0aGlzLl9idWZmZXJTaXplLFxyXG4gICAgICAgIHN0cmVhbWluZ1N1cHBvcnQ6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgdHJpZ2dlcnM6IHtcclxuICAgICAgICB0eXBlczogWzAsIDEsIDIsIDNdLCAvLyBFZGdlLCBDb21wbGV4LCBGYXN0LCBCbGFzdFxyXG4gICAgICAgIG1heENoYW5uZWxzOiB0aGlzLl9jaGFubmVsQ291bnQsXHJcbiAgICAgICAgcGF0dGVybldpZHRoOiAxNixcclxuICAgICAgICBzZXF1ZW50aWFsU3VwcG9ydDogdHJ1ZSxcclxuICAgICAgICBjb25kaXRpb25zOiBbJ3Jpc2luZycsICdmYWxsaW5nJywgJ2hpZ2gnLCAnbG93JywgJ2NoYW5nZSddXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbm5lY3Rpdml0eToge1xyXG4gICAgICAgIGludGVyZmFjZXM6IFsnZXRoZXJuZXQnLCAnd2lmaSddLFxyXG4gICAgICAgIHByb3RvY29sczogW3RoaXMuX3Byb3RvY29sXVxyXG4gICAgICB9LFxyXG4gICAgICBmZWF0dXJlczoge1xyXG4gICAgICAgIHNpZ25hbEdlbmVyYXRpb246IHRoaXMuX2RldmljZUNvbmZpZy5zaWduYWxfZ2VuZXJhdGlvbiB8fCBmYWxzZSxcclxuICAgICAgICBwb3dlclN1cHBseTogdGhpcy5fZGV2aWNlQ29uZmlnLnBvd2VyX3N1cHBseSB8fCBmYWxzZSxcclxuICAgICAgICB2b2x0YWdlTW9uaXRvcmluZzogdGhpcy5fZGV2aWNlQ29uZmlnLnZvbHRhZ2VfbW9uaXRvcmluZyB8fCBmYWxzZSxcclxuICAgICAgICByZW1vdGVDb250cm9sOiB0cnVlLFxyXG4gICAgICAgIGZpcm13YXJlVXBkYXRlOiB0aGlzLl9kZXZpY2VDb25maWcuZmlybXdhcmVfdXBkYXRlIHx8IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDotYTmupDmuIXnkIZcclxuICAgKi9cclxuICBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/drivers/NetworkLogicAnalyzerDriver.ts\n\n}");

/***/ }),

/***/ "./src/drivers/RigolSiglentDriver.ts":
/*!*******************************************!*\
  !*** ./src/drivers/RigolSiglentDriver.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RigolSiglentDriver = void 0;\nconst net_1 = __webpack_require__(/*! net */ \"net\");\nconst AnalyzerDriverBase_1 = __webpack_require__(/*! ./AnalyzerDriverBase */ \"./src/drivers/AnalyzerDriverBase.ts\");\nconst AnalyzerTypes_1 = __webpack_require__(/*! ../models/AnalyzerTypes */ \"./src/models/AnalyzerTypes.ts\");\n/**\n * Rigol/Siglent逻辑分析器驱动实现\n * 基于SCPI (Standard Commands for Programmable Instruments) 协议\n * 支持设备型号：Rigol DS1000Z系列, Siglent SDS系列等\n */\nclass RigolSiglentDriver extends AnalyzerDriverBase_1.AnalyzerDriverBase {\n    // 属性实现\n    get deviceVersion() {\n        return this._version;\n    }\n    get channelCount() {\n        return this._channelCount;\n    }\n    get maxFrequency() {\n        return this._maxFrequency;\n    }\n    get blastFrequency() {\n        return this._blastFrequency;\n    }\n    get bufferSize() {\n        return this._bufferSize;\n    }\n    get isNetwork() {\n        return this._isNetwork;\n    }\n    get isCapturing() {\n        return this._capturing;\n    }\n    get driverType() {\n        return this._isNetwork ? AnalyzerTypes_1.AnalyzerDriverType.Network : AnalyzerTypes_1.AnalyzerDriverType.Serial;\n    }\n    constructor(connectionString) {\n        super();\n        // 私有变量\n        this._capturing = false;\n        this._isNetwork = true; // 大多数现代设备支持网络\n        this._version = null;\n        this._channelCount = 16; // 默认16通道\n        this._maxFrequency = 1000000000; // 1GHz默认\n        this._blastFrequency = 2000000000; // 2GHz默认\n        this._bufferSize = 56000000; // 56M样本默认\n        this._manufacturer = 'unknown';\n        // 通信对象\n        this._socket = undefined;\n        this._isConnected = false;\n        this._commandQueue = [];\n        this._isProcessingCommand = false;\n        if (!connectionString) {\n            throw new Error('连接字符串不能为空');\n        }\n        // 解析连接字符串 \"host:port\" 或 \"host\"\n        if (connectionString.includes(':')) {\n            const parts = connectionString.split(':');\n            this._host = parts[0];\n            this._port = parseInt(parts[1], 10);\n        }\n        else {\n            this._host = connectionString;\n            this._port = RigolSiglentDriver.SCPI_PORT;\n        }\n    }\n    /**\n     * 连接设备\n     */\n    async connect(params) {\n        try {\n            await this.initializeSocket();\n            await this.queryDeviceInfo();\n            await this.initializeLogicAnalyzer();\n            this._isConnected = true;\n            return {\n                success: true,\n                deviceInfo: {\n                    name: this._version || 'Rigol/Siglent Logic Analyzer',\n                    version: this._version ?? undefined,\n                    type: this.driverType,\n                    connectionPath: `${this._host}:${this._port}`,\n                    isNetwork: this._isNetwork,\n                    capabilities: this.buildCapabilities()\n                }\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : '连接失败'\n            };\n        }\n    }\n    /**\n     * 断开连接\n     */\n    async disconnect() {\n        this._isConnected = false;\n        if (this._socket) {\n            this._socket.destroy();\n            this._socket = undefined;\n        }\n        this._commandQueue = [];\n        this._isProcessingCommand = false;\n    }\n    /**\n     * 获取设备状态\n     */\n    async getStatus() {\n        try {\n            const status = await this.sendSCPICommand('SYST:ERR?');\n            return {\n                isConnected: this._isConnected,\n                isCapturing: this._capturing,\n                batteryVoltage: 'N/A',\n                lastError: status !== '+0,\"No error\"' ? status : undefined\n            };\n        }\n        catch (error) {\n            return {\n                isConnected: this._isConnected,\n                isCapturing: this._capturing,\n                batteryVoltage: 'N/A',\n                lastError: error instanceof Error ? error.message : '状态查询失败'\n            };\n        }\n    }\n    /**\n     * 开始采集\n     */\n    async startCapture(session, captureCompletedHandler) {\n        if (this._capturing) {\n            return AnalyzerTypes_1.CaptureError.Busy;\n        }\n        if (!this._isConnected || !this._socket) {\n            return AnalyzerTypes_1.CaptureError.HardwareError;\n        }\n        try {\n            this._capturing = true;\n            // 配置逻辑分析器设置\n            await this.configureLogicAnalyzer(session);\n            // 启动采集\n            await this.startSCPICapture();\n            // 设置捕获完成处理器\n            if (captureCompletedHandler) {\n                this.once('captureCompleted', captureCompletedHandler);\n            }\n            // 监控采集状态\n            this.monitorCaptureStatus(session);\n            return AnalyzerTypes_1.CaptureError.None;\n        }\n        catch (error) {\n            this._capturing = false;\n            console.error('Rigol/Siglent采集启动失败:', error);\n            return AnalyzerTypes_1.CaptureError.UnexpectedError;\n        }\n    }\n    /**\n     * 停止采集\n     */\n    async stopCapture() {\n        if (!this._capturing) {\n            return true;\n        }\n        try {\n            // 发送停止命令\n            await this.sendSCPICommand('LA:STOP');\n            this._capturing = false;\n            return true;\n        }\n        catch (error) {\n            console.error('停止Rigol/Siglent采集失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 进入引导加载程序模式（不支持）\n     */\n    async enterBootloader() {\n        return false; // Rigol/Siglent设备不支持引导加载程序模式\n    }\n    /**\n     * 初始化Socket连接\n     */\n    async initializeSocket() {\n        return new Promise((resolve, reject) => {\n            this._socket = new net_1.Socket();\n            this._socket.connect(this._port, this._host, () => {\n                console.log(`已连接到Rigol/Siglent设备: ${this._host}:${this._port}`);\n                resolve();\n            });\n            this._socket.on('error', error => {\n                reject(new Error(`Socket连接失败: ${error.message}`));\n            });\n            this._socket.on('close', () => {\n                this._isConnected = false;\n                console.log('Rigol/Siglent连接已关闭');\n            });\n            this._socket.on('data', data => {\n                this.handleIncomingData(data);\n            });\n        });\n    }\n    /**\n     * 查询设备信息\n     */\n    async queryDeviceInfo() {\n        try {\n            // 查询设备身份信息\n            const idn = await this.sendSCPICommand('*IDN?');\n            this.parseIDNResponse(idn);\n            // 查询逻辑分析器能力\n            await this.queryLogicAnalyzerCapabilities();\n        }\n        catch (error) {\n            throw new Error(`查询设备信息失败: ${error}`);\n        }\n    }\n    /**\n     * 解析IDN响应\n     */\n    parseIDNResponse(idn) {\n        // IDN格式: \"厂商,型号,序列号,固件版本\"\n        const parts = idn.split(',');\n        if (parts.length >= 4) {\n            const manufacturer = parts[0].toLowerCase();\n            const model = parts[1];\n            const firmware = parts[3];\n            this._version = `${parts[0]} ${model} (${firmware})`;\n            // 识别制造商\n            if (manufacturer.includes('rigol')) {\n                this._manufacturer = 'rigol';\n            }\n            else if (manufacturer.includes('siglent')) {\n                this._manufacturer = 'siglent';\n            }\n            // 根据型号设置默认参数\n            this.setModelCapabilities(model);\n        }\n    }\n    /**\n     * 根据型号设置能力参数\n     */\n    setModelCapabilities(model) {\n        const modelLower = model.toLowerCase();\n        // Rigol设备\n        if (modelLower.includes('ds1000z') || modelLower.includes('ds2000') || modelLower.includes('ds4000')) {\n            this._channelCount = 16;\n            this._maxFrequency = 1000000000; // 1GHz\n            this._blastFrequency = 2000000000; // 2GHz\n            this._bufferSize = 56000000; // 56M样本\n        }\n        // Siglent设备\n        else if (modelLower.includes('sds') || modelLower.includes('sps')) {\n            this._channelCount = 16;\n            this._maxFrequency = 1000000000; // 1GHz\n            this._blastFrequency = 2000000000; // 2GHz\n            this._bufferSize = 100000000; // 100M样本\n        }\n        // 默认配置\n        else {\n            this._channelCount = 16;\n            this._maxFrequency = 500000000; // 500MHz\n            this._blastFrequency = 1000000000; // 1GHz\n            this._bufferSize = 28000000; // 28M样本\n        }\n    }\n    /**\n     * 查询逻辑分析器能力\n     */\n    async queryLogicAnalyzerCapabilities() {\n        try {\n            // 查询逻辑分析器是否可用\n            const laAvailable = await this.sendSCPICommand('LA:STAT?');\n            if (!laAvailable.includes('1') && !laAvailable.toLowerCase().includes('on')) {\n                console.warn('逻辑分析器功能可能不可用或未激活');\n            }\n            // 查询通道数\n            try {\n                const channels = await this.sendSCPICommand('LA:CHAN?');\n                const channelMatch = channels.match(/\\\\d+/);\n                if (channelMatch) {\n                    this._channelCount = parseInt(channelMatch[0], 10);\n                }\n            }\n            catch (error) {\n                console.warn('无法查询逻辑分析器通道数:', error);\n            }\n            // 查询采样率范围\n            try {\n                const sampleRate = await this.sendSCPICommand('LA:SRAT:MAX?');\n                const rateMatch = sampleRate.match(/([0-9.]+)[E]?([+-]?[0-9]+)?/);\n                if (rateMatch) {\n                    const baseRate = parseFloat(rateMatch[1]);\n                    const exponent = rateMatch[2] ? parseInt(rateMatch[2], 10) : 0;\n                    this._maxFrequency = baseRate * Math.pow(10, exponent);\n                }\n            }\n            catch (error) {\n                console.warn('无法查询最大采样率:', error);\n            }\n            // 查询内存深度\n            try {\n                const memDepth = await this.sendSCPICommand('LA:MDEP?');\n                const depthMatch = memDepth.match(/([0-9.]+)[E]?([+-]?[0-9]+)?/);\n                if (depthMatch) {\n                    const baseDepth = parseFloat(depthMatch[1]);\n                    const exponent = depthMatch[2] ? parseInt(depthMatch[2], 10) : 0;\n                    this._bufferSize = baseDepth * Math.pow(10, exponent);\n                }\n            }\n            catch (error) {\n                console.warn('无法查询内存深度:', error);\n            }\n        }\n        catch (error) {\n            console.warn('查询逻辑分析器能力失败:', error);\n        }\n    }\n    /**\n     * 初始化逻辑分析器\n     */\n    async initializeLogicAnalyzer() {\n        try {\n            // 重置逻辑分析器\n            await this.sendSCPICommand('LA:RST');\n            // 设置为逻辑分析模式\n            await this.sendSCPICommand('LA:STAT ON');\n            // 等待设备稳定\n            await new Promise(resolve => setTimeout(resolve, 1000));\n        }\n        catch (error) {\n            console.warn('初始化逻辑分析器失败:', error);\n        }\n    }\n    /**\n     * 配置逻辑分析器\n     */\n    async configureLogicAnalyzer(session) {\n        try {\n            // 配置采样率\n            await this.sendSCPICommand(`LA:SRAT ${session.frequency}`);\n            // 配置内存深度\n            const totalSamples = session.preTriggerSamples + session.postTriggerSamples;\n            await this.sendSCPICommand(`LA:MDEP ${totalSamples}`);\n            // 配置通道\n            for (const channel of session.captureChannels) {\n                const channelNum = channel.channelNumber + 1; // SCPI通常从1开始编号\n                await this.sendSCPICommand(`LA:D${channelNum}:DISP ON`);\n                if (channel.channelName) {\n                    await this.sendSCPICommand(`LA:D${channelNum}:LAB \"${channel.channelName}\"`);\n                }\n            }\n            // 配置触发\n            if (session.triggerType !== undefined && session.triggerChannel !== undefined) {\n                await this.configureTrigger(session);\n            }\n            // 配置时基\n            const timeRange = totalSamples / session.frequency;\n            await this.sendSCPICommand(`LA:SCAL ${timeRange}`);\n        }\n        catch (error) {\n            throw new Error(`配置逻辑分析器失败: ${error}`);\n        }\n    }\n    /**\n     * 配置触发\n     */\n    async configureTrigger(session) {\n        const triggerChannel = session.triggerChannel + 1; // SCPI从1开始编号\n        try {\n            // 设置触发源\n            await this.sendSCPICommand(`LA:TRIG:SOUR D${triggerChannel}`);\n            // 设置触发类型\n            let triggerSlope = 'POS'; // 默认上升沿\n            if (session.triggerInverted) {\n                triggerSlope = 'NEG';\n            }\n            await this.sendSCPICommand(`LA:TRIG:SLOP ${triggerSlope}`);\n            // 设置触发模式\n            switch (session.triggerType) {\n                case 0: // Edge\n                    await this.sendSCPICommand('LA:TRIG:TYP EDGE');\n                    break;\n                case 1: // Complex/Pattern\n                    await this.sendSCPICommand('LA:TRIG:TYP PATT');\n                    if (session.triggerPattern !== undefined) {\n                        // 将触发模式转换为SCPI格式\n                        const pattern = session.triggerPattern.toString(2).padStart(16, '0');\n                        await this.sendSCPICommand(`LA:TRIG:PATT:DATA \"${pattern}\"`);\n                    }\n                    break;\n                default:\n                    await this.sendSCPICommand('LA:TRIG:TYP EDGE');\n            }\n            // 设置触发位置\n            if (session.preTriggerSamples > 0) {\n                const triggerPosition = session.preTriggerSamples /\n                    (session.preTriggerSamples + session.postTriggerSamples);\n                await this.sendSCPICommand(`LA:TRIG:POS ${triggerPosition * 100}`);\n            }\n        }\n        catch (error) {\n            console.warn('配置触发失败:', error);\n        }\n    }\n    /**\n     * 启动SCPI采集\n     */\n    async startSCPICapture() {\n        try {\n            // 清除错误状态\n            await this.sendSCPICommand('*CLS');\n            // 启动单次采集\n            await this.sendSCPICommand('LA:RUN');\n            console.log('Rigol/Siglent逻辑分析器采集已启动');\n        }\n        catch (error) {\n            throw new Error(`启动采集失败: ${error}`);\n        }\n    }\n    /**\n     * 监控采集状态\n     */\n    async monitorCaptureStatus(session) {\n        const checkInterval = setInterval(async () => {\n            try {\n                if (!this._capturing) {\n                    clearInterval(checkInterval);\n                    return;\n                }\n                // 查询采集状态\n                const status = await this.sendSCPICommand('LA:STAT?');\n                if (status.includes('STOP') || status.includes('0')) {\n                    clearInterval(checkInterval);\n                    await this.processCaptureResults(session);\n                }\n            }\n            catch (error) {\n                clearInterval(checkInterval);\n                this.handleCaptureError(session, `监控采集状态失败: ${error}`);\n            }\n        }, 500); // 每500ms检查一次状态\n        // 设置超时保护\n        setTimeout(() => {\n            if (this._capturing) {\n                clearInterval(checkInterval);\n                this.handleCaptureError(session, '采集超时');\n            }\n        }, 60000); // 60秒超时\n    }\n    /**\n     * 处理采集结果\n     */\n    async processCaptureResults(session) {\n        try {\n            // 读取采集数据\n            for (const channel of session.captureChannels) {\n                const channelNum = channel.channelNumber + 1;\n                // 请求通道数据\n                const dataCommand = `LA:D${channelNum}:DATA?`;\n                const rawData = await this.sendSCPICommand(dataCommand);\n                // 解析数据\n                channel.samples = this.parseSCPIBinaryData(rawData);\n            }\n            this._capturing = false;\n            const eventArgs = {\n                success: true,\n                session\n            };\n            this.emitCaptureCompleted(eventArgs);\n        }\n        catch (error) {\n            this.handleCaptureError(session, `处理采集结果失败: ${error}`);\n        }\n    }\n    /**\n     * 解析SCPI二进制数据\n     */\n    parseSCPIBinaryData(rawData) {\n        // SCPI二进制数据格式通常是: #<digit><count><data>\n        if (rawData.startsWith('#')) {\n            const digitCount = parseInt(rawData[1], 10);\n            const dataLength = parseInt(rawData.substring(2, 2 + digitCount), 10);\n            const binaryStart = 2 + digitCount;\n            // 提取二进制数据部分\n            const binaryData = rawData.substring(binaryStart, binaryStart + dataLength);\n            // 转换为Uint8Array\n            const samples = new Uint8Array(binaryData.length);\n            for (let i = 0; i < binaryData.length; i++) {\n                samples[i] = binaryData.charCodeAt(i) !== 0 ? 1 : 0;\n            }\n            return samples;\n        }\n        // 如果不是二进制格式，尝试解析为ASCII格式\n        const values = rawData.split(',').map(val => parseInt(val.trim(), 10));\n        const samples = new Uint8Array(values.length);\n        for (let i = 0; i < values.length; i++) {\n            samples[i] = values[i] ? 1 : 0;\n        }\n        return samples;\n    }\n    /**\n     * 处理采集错误\n     */\n    handleCaptureError(session, errorMessage) {\n        this._capturing = false;\n        console.error('Rigol/Siglent采集错误:', errorMessage);\n        const eventArgs = {\n            success: false,\n            session\n        };\n        this.emitCaptureCompleted(eventArgs);\n    }\n    /**\n     * 发送SCPI命令\n     */\n    async sendSCPICommand(command) {\n        return new Promise((resolve, reject) => {\n            this._commandQueue.push({ command, resolve, reject });\n            this.processCommandQueue();\n        });\n    }\n    /**\n     * 处理命令队列\n     */\n    async processCommandQueue() {\n        if (this._isProcessingCommand || this._commandQueue.length === 0) {\n            return;\n        }\n        this._isProcessingCommand = true;\n        const { command, resolve, reject } = this._commandQueue.shift();\n        try {\n            if (!this._socket) {\n                reject(new Error('Socket未连接'));\n                return;\n            }\n            let responseData = '';\n            const isQuery = command.includes('?');\n            // 数据接收处理器\n            const dataHandler = (data) => {\n                responseData += data.toString();\n                // 检查响应是否完整（以换行符结束）\n                if (responseData.includes('\\\\n')) {\n                    this._socket.off('data', dataHandler);\n                    clearTimeout(timeoutId);\n                    resolve(responseData.trim());\n                    // 继续处理队列中的其他命令\n                    this._isProcessingCommand = false;\n                    setTimeout(() => this.processCommandQueue(), 10);\n                }\n            };\n            // 设置超时\n            const timeoutId = setTimeout(() => {\n                this._socket.off('data', dataHandler);\n                reject(new Error(`SCPI命令超时: ${command}`));\n                this._isProcessingCommand = false;\n                setTimeout(() => this.processCommandQueue(), 10);\n            }, 5000);\n            // 如果是查询命令，设置数据接收器\n            if (isQuery) {\n                this._socket.on('data', dataHandler);\n            }\n            else {\n                // 非查询命令，直接返回\n                setTimeout(() => {\n                    resolve('OK');\n                    this._isProcessingCommand = false;\n                    setTimeout(() => this.processCommandQueue(), 10);\n                }, 100);\n            }\n            // 发送命令\n            this._socket.write(command + '\\\\n', error => {\n                if (error) {\n                    if (isQuery) {\n                        this._socket.off('data', dataHandler);\n                    }\n                    clearTimeout(timeoutId);\n                    reject(new Error(`发送SCPI命令失败: ${error.message}`));\n                    this._isProcessingCommand = false;\n                    setTimeout(() => this.processCommandQueue(), 10);\n                }\n            });\n        }\n        catch (error) {\n            reject(error);\n            this._isProcessingCommand = false;\n            setTimeout(() => this.processCommandQueue(), 10);\n        }\n    }\n    /**\n     * 处理接收到的数据\n     */\n    handleIncomingData(data) {\n        // 这个方法主要用于处理异步数据或状态更新\n        const dataStr = data.toString();\n        // 可以在这里处理设备主动发送的状态信息\n        if (dataStr.includes('ERROR') || dataStr.includes('FAIL')) {\n            console.warn('设备报告错误:', dataStr);\n        }\n    }\n    /**\n     * 构建硬件能力描述\n     */\n    buildCapabilities() {\n        return {\n            channels: {\n                digital: this._channelCount,\n                maxVoltage: 5.0,\n                inputImpedance: 1000000\n            },\n            sampling: {\n                maxRate: this._maxFrequency,\n                minRate: this.minFrequency,\n                supportedRates: [this._maxFrequency, this._blastFrequency],\n                bufferSize: this._bufferSize,\n                streamingSupport: false\n            },\n            triggers: {\n                types: [0, 1, 2],\n                maxChannels: this._channelCount,\n                patternWidth: 16,\n                sequentialSupport: true,\n                conditions: ['rising', 'falling', 'high', 'low', 'change']\n            },\n            connectivity: {\n                interfaces: ['ethernet', 'usb'],\n                protocols: ['scpi', 'vxi11']\n            },\n            features: {\n                signalGeneration: false,\n                powerSupply: false,\n                voltageMonitoring: false,\n                mathFunctions: true,\n                protocolDecoding: true\n            }\n        };\n    }\n    /**\n     * 资源清理\n     */\n    dispose() {\n        this.disconnect();\n        super.dispose();\n    }\n}\nexports.RigolSiglentDriver = RigolSiglentDriver;\n// SCPI端口配置\nRigolSiglentDriver.SCPI_PORT = 5555;\nRigolSiglentDriver.VXI11_PORT = 111;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEsQ0FBQzthQUMzRDtZQUNELFlBQVksRUFBRTtnQkFDWixVQUFVLEVBQUUsQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDO2dCQUMvQixTQUFTLEVBQUUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDO2FBQzdCO1lBQ0QsUUFBUSxFQUFFO2dCQUNSLGdCQUFnQixFQUFFLEtBQUs7Z0JBQ3ZCLFdBQVcsRUFBRSxLQUFLO2dCQUNsQixpQkFBaUIsRUFBRSxLQUFLO2dCQUN4QixhQUFhLEVBQUUsSUFBSTtnQkFDbkIsZ0JBQWdCLEVBQUUsSUFBSTthQUN2QjtTQUNGLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDTSxPQUFPO1FBQ2QsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNsQixDQUFDOztBQXB0QkgsZ0RBcXRCQztBQXB0QkMsV0FBVztBQUNhLDRCQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ2pCLDZCQUFVLEdBQUcsR0FBRyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnNjb2RlLWxvZ2ljLWFuYWx5emVyLy4vc3JjL2RyaXZlcnMvUmlnb2xTaWdsZW50RHJpdmVyLnRzPzM3MTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU29ja2V0IH0gZnJvbSAnbmV0JztcclxuaW1wb3J0IHsgQW5hbHl6ZXJEcml2ZXJCYXNlIH0gZnJvbSAnLi9BbmFseXplckRyaXZlckJhc2UnO1xyXG5pbXBvcnQge1xyXG4gIEFuYWx5emVyRHJpdmVyVHlwZSxcclxuICBDYXB0dXJlRXJyb3IsXHJcbiAgQ2FwdHVyZVNlc3Npb24sXHJcbiAgQ2FwdHVyZUV2ZW50QXJncyxcclxuICBDYXB0dXJlQ29tcGxldGVkSGFuZGxlcixcclxuICBDb25uZWN0aW9uUGFyYW1zLFxyXG4gIENvbm5lY3Rpb25SZXN1bHQsXHJcbiAgRGV2aWNlU3RhdHVzLFxyXG4gIENhcHR1cmVNb2RlXHJcbn0gZnJvbSAnLi4vbW9kZWxzL0FuYWx5emVyVHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIFJpZ29sL1NpZ2xlbnTpgLvovpHliIbmnpDlmajpqbHliqjlrp7njrBcclxuICog5Z+65LqOU0NQSSAoU3RhbmRhcmQgQ29tbWFuZHMgZm9yIFByb2dyYW1tYWJsZSBJbnN0cnVtZW50cykg5Y2P6K6uXHJcbiAqIOaUr+aMgeiuvuWkh+Wei+WPt++8mlJpZ29sIERTMTAwMFrns7vliJcsIFNpZ2xlbnQgU0RT57O75YiX562JXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmlnb2xTaWdsZW50RHJpdmVyIGV4dGVuZHMgQW5hbHl6ZXJEcml2ZXJCYXNlIHtcclxuICAvLyBTQ1BJ56uv5Y+j6YWN572uXHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgU0NQSV9QT1JUID0gNTU1NTtcclxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBWWEkxMV9QT1JUID0gMTExO1xyXG5cclxuICAvLyDlsZ7mgKflrp7njrBcclxuICBnZXQgZGV2aWNlVmVyc2lvbigpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLl92ZXJzaW9uO1xyXG4gIH1cclxuICBnZXQgY2hhbm5lbENvdW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2hhbm5lbENvdW50O1xyXG4gIH1cclxuICBnZXQgbWF4RnJlcXVlbmN5KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWF4RnJlcXVlbmN5O1xyXG4gIH1cclxuICBnZXQgYmxhc3RGcmVxdWVuY3koKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9ibGFzdEZyZXF1ZW5jeTtcclxuICB9XHJcbiAgZ2V0IGJ1ZmZlclNpemUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9idWZmZXJTaXplO1xyXG4gIH1cclxuICBnZXQgaXNOZXR3b3JrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzTmV0d29yaztcclxuICB9XHJcbiAgZ2V0IGlzQ2FwdHVyaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcHR1cmluZztcclxuICB9XHJcbiAgZ2V0IGRyaXZlclR5cGUoKTogQW5hbHl6ZXJEcml2ZXJUeXBlIHtcclxuICAgIHJldHVybiB0aGlzLl9pc05ldHdvcmsgPyBBbmFseXplckRyaXZlclR5cGUuTmV0d29yayA6IEFuYWx5emVyRHJpdmVyVHlwZS5TZXJpYWw7XHJcbiAgfVxyXG5cclxuICAvLyDnp4HmnInlj5jph49cclxuICBwcml2YXRlIF9jYXB0dXJpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIF9pc05ldHdvcms6IGJvb2xlYW4gPSB0cnVlOyAvLyDlpKflpJrmlbDnjrDku6Porr7lpIfmlK/mjIHnvZHnu5xcclxuICBwcml2YXRlIF92ZXJzaW9uOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIF9jaGFubmVsQ291bnQ6IG51bWJlciA9IDE2OyAvLyDpu5jorqQxNumAmumBk1xyXG4gIHByaXZhdGUgX21heEZyZXF1ZW5jeTogbnVtYmVyID0gMTAwMDAwMDAwMDsgLy8gMUdIeum7mOiupFxyXG4gIHByaXZhdGUgX2JsYXN0RnJlcXVlbmN5OiBudW1iZXIgPSAyMDAwMDAwMDAwOyAvLyAyR0h66buY6K6kXHJcbiAgcHJpdmF0ZSBfYnVmZmVyU2l6ZTogbnVtYmVyID0gNTYwMDAwMDA7IC8vIDU2Teagt+acrOm7mOiupFxyXG4gIHByaXZhdGUgX2hvc3Q6IHN0cmluZztcclxuICBwcml2YXRlIF9wb3J0OiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBfbWFudWZhY3R1cmVyOiAncmlnb2wnIHwgJ3NpZ2xlbnQnIHwgJ3Vua25vd24nID0gJ3Vua25vd24nO1xyXG5cclxuICAvLyDpgJrkv6Hlr7nosaFcclxuICBwcml2YXRlIF9zb2NrZXQ6IFNvY2tldCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuICBwcml2YXRlIF9pc0Nvbm5lY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX2NvbW1hbmRRdWV1ZTogQXJyYXk8e1xyXG4gICAgY29tbWFuZDogc3RyaW5nO1xyXG4gICAgcmVzb2x2ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgICByZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XHJcbiAgfT4gPSBbXTtcclxuICBwcml2YXRlIF9pc1Byb2Nlc3NpbmdDb21tYW5kOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25TdHJpbmc6IHN0cmluZykge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICBpZiAoIWNvbm5lY3Rpb25TdHJpbmcpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCfov57mjqXlrZfnrKbkuLLkuI3og73kuLrnqbonKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDop6PmnpDov57mjqXlrZfnrKbkuLIgXCJob3N0OnBvcnRcIiDmiJYgXCJob3N0XCJcclxuICAgIGlmIChjb25uZWN0aW9uU3RyaW5nLmluY2x1ZGVzKCc6JykpIHtcclxuICAgICAgY29uc3QgcGFydHMgPSBjb25uZWN0aW9uU3RyaW5nLnNwbGl0KCc6Jyk7XHJcbiAgICAgIHRoaXMuX2hvc3QgPSBwYXJ0c1swXTtcclxuICAgICAgdGhpcy5fcG9ydCA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9ob3N0ID0gY29ubmVjdGlvblN0cmluZztcclxuICAgICAgdGhpcy5fcG9ydCA9IFJpZ29sU2lnbGVudERyaXZlci5TQ1BJX1BPUlQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDov57mjqXorr7lpIdcclxuICAgKi9cclxuICBhc3luYyBjb25uZWN0KHBhcmFtcz86IENvbm5lY3Rpb25QYXJhbXMpOiBQcm9taXNlPENvbm5lY3Rpb25SZXN1bHQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVNvY2tldCgpO1xyXG4gICAgICBhd2FpdCB0aGlzLnF1ZXJ5RGV2aWNlSW5mbygpO1xyXG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVMb2dpY0FuYWx5emVyKCk7XHJcblxyXG4gICAgICB0aGlzLl9pc0Nvbm5lY3RlZCA9IHRydWU7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGV2aWNlSW5mbzoge1xyXG4gICAgICAgICAgbmFtZTogdGhpcy5fdmVyc2lvbiB8fCAnUmlnb2wvU2lnbGVudCBMb2dpYyBBbmFseXplcicsXHJcbiAgICAgICAgICB2ZXJzaW9uOiB0aGlzLl92ZXJzaW9uID8/IHVuZGVmaW5lZCxcclxuICAgICAgICAgIHR5cGU6IHRoaXMuZHJpdmVyVHlwZSxcclxuICAgICAgICAgIGNvbm5lY3Rpb25QYXRoOiBgJHt0aGlzLl9ob3N0fToke3RoaXMuX3BvcnR9YCxcclxuICAgICAgICAgIGlzTmV0d29yazogdGhpcy5faXNOZXR3b3JrLFxyXG4gICAgICAgICAgY2FwYWJpbGl0aWVzOiB0aGlzLmJ1aWxkQ2FwYWJpbGl0aWVzKClcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfov57mjqXlpLHotKUnXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmlq3lvIDov57mjqVcclxuICAgKi9cclxuICBhc3luYyBkaXNjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5faXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAodGhpcy5fc29ja2V0KSB7XHJcbiAgICAgIHRoaXMuX3NvY2tldC5kZXN0cm95KCk7XHJcbiAgICAgIHRoaXMuX3NvY2tldCA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jb21tYW5kUXVldWUgPSBbXTtcclxuICAgIHRoaXMuX2lzUHJvY2Vzc2luZ0NvbW1hbmQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluiuvuWkh+eKtuaAgVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFN0YXR1cygpOiBQcm9taXNlPERldmljZVN0YXR1cz4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoJ1NZU1Q6RVJSPycpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLl9pc0Nvbm5lY3RlZCxcclxuICAgICAgICBpc0NhcHR1cmluZzogdGhpcy5fY2FwdHVyaW5nLFxyXG4gICAgICAgIGJhdHRlcnlWb2x0YWdlOiAnTi9BJywgLy8g5Y+w5byP6K6+5aSH6YCa5bi45LiN5L2/55So55S15rGgXHJcbiAgICAgICAgbGFzdEVycm9yOiBzdGF0dXMgIT09ICcrMCxcIk5vIGVycm9yXCInID8gc3RhdHVzIDogdW5kZWZpbmVkXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLl9pc0Nvbm5lY3RlZCxcclxuICAgICAgICBpc0NhcHR1cmluZzogdGhpcy5fY2FwdHVyaW5nLFxyXG4gICAgICAgIGJhdHRlcnlWb2x0YWdlOiAnTi9BJyxcclxuICAgICAgICBsYXN0RXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ+eKtuaAgeafpeivouWksei0pSdcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW8gOWni+mHh+mbhlxyXG4gICAqL1xyXG4gIGFzeW5jIHN0YXJ0Q2FwdHVyZShcclxuICAgIHNlc3Npb246IENhcHR1cmVTZXNzaW9uLFxyXG4gICAgY2FwdHVyZUNvbXBsZXRlZEhhbmRsZXI/OiBDYXB0dXJlQ29tcGxldGVkSGFuZGxlclxyXG4gICk6IFByb21pc2U8Q2FwdHVyZUVycm9yPiB7XHJcbiAgICBpZiAodGhpcy5fY2FwdHVyaW5nKSB7XHJcbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuQnVzeTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuX2lzQ29ubmVjdGVkIHx8ICF0aGlzLl9zb2NrZXQpIHtcclxuICAgICAgcmV0dXJuIENhcHR1cmVFcnJvci5IYXJkd2FyZUVycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuX2NhcHR1cmluZyA9IHRydWU7XHJcblxyXG4gICAgICAvLyDphY3nva7pgLvovpHliIbmnpDlmajorr7nva5cclxuICAgICAgYXdhaXQgdGhpcy5jb25maWd1cmVMb2dpY0FuYWx5emVyKHNlc3Npb24pO1xyXG5cclxuICAgICAgLy8g5ZCv5Yqo6YeH6ZuGXHJcbiAgICAgIGF3YWl0IHRoaXMuc3RhcnRTQ1BJQ2FwdHVyZSgpO1xyXG5cclxuICAgICAgLy8g6K6+572u5o2V6I635a6M5oiQ5aSE55CG5ZmoXHJcbiAgICAgIGlmIChjYXB0dXJlQ29tcGxldGVkSGFuZGxlcikge1xyXG4gICAgICAgIHRoaXMub25jZSgnY2FwdHVyZUNvbXBsZXRlZCcsIGNhcHR1cmVDb21wbGV0ZWRIYW5kbGVyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g55uR5o6n6YeH6ZuG54q25oCBXHJcbiAgICAgIHRoaXMubW9uaXRvckNhcHR1cmVTdGF0dXMoc2Vzc2lvbik7XHJcblxyXG4gICAgICByZXR1cm4gQ2FwdHVyZUVycm9yLk5vbmU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLl9jYXB0dXJpbmcgPSBmYWxzZTtcclxuICAgICAgY29uc29sZS5lcnJvcignUmlnb2wvU2lnbGVudOmHh+mbhuWQr+WKqOWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuVW5leHBlY3RlZEVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YGc5q2i6YeH6ZuGXHJcbiAgICovXHJcbiAgYXN5bmMgc3RvcENhcHR1cmUoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBpZiAoIXRoaXMuX2NhcHR1cmluZykge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDlj5HpgIHlgZzmraLlkb3ku6RcclxuICAgICAgYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoJ0xBOlNUT1AnKTtcclxuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign5YGc5q2iUmlnb2wvU2lnbGVudOmHh+mbhuWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOi/m+WFpeW8leWvvOWKoOi9veeoi+W6j+aooeW8j++8iOS4jeaUr+aMge+8iVxyXG4gICAqL1xyXG4gIGFzeW5jIGVudGVyQm9vdGxvYWRlcigpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHJldHVybiBmYWxzZTsgLy8gUmlnb2wvU2lnbGVudOiuvuWkh+S4jeaUr+aMgeW8leWvvOWKoOi9veeoi+W6j+aooeW8j1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yid5aeL5YyWU29ja2V06L+e5o6lXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplU29ja2V0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgdGhpcy5fc29ja2V0ID0gbmV3IFNvY2tldCgpO1xyXG5cclxuICAgICAgdGhpcy5fc29ja2V0LmNvbm5lY3QodGhpcy5fcG9ydCwgdGhpcy5faG9zdCwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDlt7Lov57mjqXliLBSaWdvbC9TaWdsZW506K6+5aSHOiAke3RoaXMuX2hvc3R9OiR7dGhpcy5fcG9ydH1gKTtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5fc29ja2V0Lm9uKCdlcnJvcicsIGVycm9yID0+IHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKGBTb2NrZXTov57mjqXlpLHotKU6ICR7ZXJyb3IubWVzc2FnZX1gKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5fc29ja2V0Lm9uKCdjbG9zZScsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9pc0Nvbm5lY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdSaWdvbC9TaWdsZW506L+e5o6l5bey5YWz6ZetJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5fc29ja2V0Lm9uKCdkYXRhJywgZGF0YSA9PiB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVJbmNvbWluZ0RhdGEoZGF0YSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmn6Xor6Lorr7lpIfkv6Hmga9cclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHF1ZXJ5RGV2aWNlSW5mbygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOafpeivouiuvuWkh+i6q+S7veS/oeaBr1xyXG4gICAgICBjb25zdCBpZG4gPSBhd2FpdCB0aGlzLnNlbmRTQ1BJQ29tbWFuZCgnKklETj8nKTtcclxuICAgICAgdGhpcy5wYXJzZUlETlJlc3BvbnNlKGlkbik7XHJcblxyXG4gICAgICAvLyDmn6Xor6LpgLvovpHliIbmnpDlmajog73liptcclxuICAgICAgYXdhaXQgdGhpcy5xdWVyeUxvZ2ljQW5hbHl6ZXJDYXBhYmlsaXRpZXMoKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihg5p+l6K+i6K6+5aSH5L+h5oGv5aSx6LSlOiAke2Vycm9yfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kej5p6QSURO5ZON5bqUXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwYXJzZUlETlJlc3BvbnNlKGlkbjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAvLyBJRE7moLzlvI86IFwi5Y6C5ZWGLOWei+WPtyzluo/liJflj7cs5Zu65Lu254mI5pysXCJcclxuICAgIGNvbnN0IHBhcnRzID0gaWRuLnNwbGl0KCcsJyk7XHJcbiAgICBpZiAocGFydHMubGVuZ3RoID49IDQpIHtcclxuICAgICAgY29uc3QgbWFudWZhY3R1cmVyID0gcGFydHNbMF0udG9Mb3dlckNhc2UoKTtcclxuICAgICAgY29uc3QgbW9kZWwgPSBwYXJ0c1sxXTtcclxuICAgICAgY29uc3QgZmlybXdhcmUgPSBwYXJ0c1szXTtcclxuXHJcbiAgICAgIHRoaXMuX3ZlcnNpb24gPSBgJHtwYXJ0c1swXX0gJHttb2RlbH0gKCR7ZmlybXdhcmV9KWA7XHJcblxyXG4gICAgICAvLyDor4bliKvliLbpgKDllYZcclxuICAgICAgaWYgKG1hbnVmYWN0dXJlci5pbmNsdWRlcygncmlnb2wnKSkge1xyXG4gICAgICAgIHRoaXMuX21hbnVmYWN0dXJlciA9ICdyaWdvbCc7XHJcbiAgICAgIH0gZWxzZSBpZiAobWFudWZhY3R1cmVyLmluY2x1ZGVzKCdzaWdsZW50JykpIHtcclxuICAgICAgICB0aGlzLl9tYW51ZmFjdHVyZXIgPSAnc2lnbGVudCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOagueaNruWei+WPt+iuvue9rum7mOiupOWPguaVsFxyXG4gICAgICB0aGlzLnNldE1vZGVsQ2FwYWJpbGl0aWVzKG1vZGVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOagueaNruWei+WPt+iuvue9ruiDveWKm+WPguaVsFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0TW9kZWxDYXBhYmlsaXRpZXMobW9kZWw6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgbW9kZWxMb3dlciA9IG1vZGVsLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgLy8gUmlnb2zorr7lpIdcclxuICAgIGlmIChtb2RlbExvd2VyLmluY2x1ZGVzKCdkczEwMDB6JykgfHwgbW9kZWxMb3dlci5pbmNsdWRlcygnZHMyMDAwJykgfHwgbW9kZWxMb3dlci5pbmNsdWRlcygnZHM0MDAwJykpIHtcclxuICAgICAgdGhpcy5fY2hhbm5lbENvdW50ID0gMTY7XHJcbiAgICAgIHRoaXMuX21heEZyZXF1ZW5jeSA9IDEwMDAwMDAwMDA7IC8vIDFHSHpcclxuICAgICAgdGhpcy5fYmxhc3RGcmVxdWVuY3kgPSAyMDAwMDAwMDAwOyAvLyAyR0h6XHJcbiAgICAgIHRoaXMuX2J1ZmZlclNpemUgPSA1NjAwMDAwMDsgLy8gNTZN5qC35pysXHJcbiAgICB9XHJcbiAgICAvLyBTaWdsZW506K6+5aSHXHJcbiAgICBlbHNlIGlmIChtb2RlbExvd2VyLmluY2x1ZGVzKCdzZHMnKSB8fCBtb2RlbExvd2VyLmluY2x1ZGVzKCdzcHMnKSkge1xyXG4gICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSAxNjtcclxuICAgICAgdGhpcy5fbWF4RnJlcXVlbmN5ID0gMTAwMDAwMDAwMDsgLy8gMUdIelxyXG4gICAgICB0aGlzLl9ibGFzdEZyZXF1ZW5jeSA9IDIwMDAwMDAwMDA7IC8vIDJHSHpcclxuICAgICAgdGhpcy5fYnVmZmVyU2l6ZSA9IDEwMDAwMDAwMDsgLy8gMTAwTeagt+acrFxyXG4gICAgfVxyXG4gICAgLy8g6buY6K6k6YWN572uXHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5fY2hhbm5lbENvdW50ID0gMTY7XHJcbiAgICAgIHRoaXMuX21heEZyZXF1ZW5jeSA9IDUwMDAwMDAwMDsgLy8gNTAwTUh6XHJcbiAgICAgIHRoaXMuX2JsYXN0RnJlcXVlbmN5ID0gMTAwMDAwMDAwMDsgLy8gMUdIelxyXG4gICAgICB0aGlzLl9idWZmZXJTaXplID0gMjgwMDAwMDA7IC8vIDI4Teagt+acrFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5p+l6K+i6YC76L6R5YiG5p6Q5Zmo6IO95YqbXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBxdWVyeUxvZ2ljQW5hbHl6ZXJDYXBhYmlsaXRpZXMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmn6Xor6LpgLvovpHliIbmnpDlmajmmK/lkKblj6/nlKhcclxuICAgICAgY29uc3QgbGFBdmFpbGFibGUgPSBhd2FpdCB0aGlzLnNlbmRTQ1BJQ29tbWFuZCgnTEE6U1RBVD8nKTtcclxuICAgICAgaWYgKCFsYUF2YWlsYWJsZS5pbmNsdWRlcygnMScpICYmICFsYUF2YWlsYWJsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdvbicpKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCfpgLvovpHliIbmnpDlmajlip/og73lj6/og73kuI3lj6/nlKjmiJbmnKrmv4DmtLsnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5p+l6K+i6YCa6YGT5pWwXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgY2hhbm5lbHMgPSBhd2FpdCB0aGlzLnNlbmRTQ1BJQ29tbWFuZCgnTEE6Q0hBTj8nKTtcclxuICAgICAgICBjb25zdCBjaGFubmVsTWF0Y2ggPSBjaGFubmVscy5tYXRjaCgvXFxcXGQrLyk7XHJcbiAgICAgICAgaWYgKGNoYW5uZWxNYXRjaCkge1xyXG4gICAgICAgICAgdGhpcy5fY2hhbm5lbENvdW50ID0gcGFyc2VJbnQoY2hhbm5lbE1hdGNoWzBdLCAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2Fybign5peg5rOV5p+l6K+i6YC76L6R5YiG5p6Q5Zmo6YCa6YGT5pWwOicsIGVycm9yKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5p+l6K+i6YeH5qC3546H6IyD5Zu0XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc2FtcGxlUmF0ZSA9IGF3YWl0IHRoaXMuc2VuZFNDUElDb21tYW5kKCdMQTpTUkFUOk1BWD8nKTtcclxuICAgICAgICBjb25zdCByYXRlTWF0Y2ggPSBzYW1wbGVSYXRlLm1hdGNoKC8oWzAtOS5dKylbRV0/KFsrLV0/WzAtOV0rKT8vKTtcclxuICAgICAgICBpZiAocmF0ZU1hdGNoKSB7XHJcbiAgICAgICAgICBjb25zdCBiYXNlUmF0ZSA9IHBhcnNlRmxvYXQocmF0ZU1hdGNoWzFdKTtcclxuICAgICAgICAgIGNvbnN0IGV4cG9uZW50ID0gcmF0ZU1hdGNoWzJdID8gcGFyc2VJbnQocmF0ZU1hdGNoWzJdLCAxMCkgOiAwO1xyXG4gICAgICAgICAgdGhpcy5fbWF4RnJlcXVlbmN5ID0gYmFzZVJhdGUgKiBNYXRoLnBvdygxMCwgZXhwb25lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ+aXoOazleafpeivouacgOWkp+mHh+agt+eOhzonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOafpeivouWGheWtmOa3seW6plxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IG1lbURlcHRoID0gYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoJ0xBOk1ERVA/Jyk7XHJcbiAgICAgICAgY29uc3QgZGVwdGhNYXRjaCA9IG1lbURlcHRoLm1hdGNoKC8oWzAtOS5dKylbRV0/KFsrLV0/WzAtOV0rKT8vKTtcclxuICAgICAgICBpZiAoZGVwdGhNYXRjaCkge1xyXG4gICAgICAgICAgY29uc3QgYmFzZURlcHRoID0gcGFyc2VGbG9hdChkZXB0aE1hdGNoWzFdKTtcclxuICAgICAgICAgIGNvbnN0IGV4cG9uZW50ID0gZGVwdGhNYXRjaFsyXSA/IHBhcnNlSW50KGRlcHRoTWF0Y2hbMl0sIDEwKSA6IDA7XHJcbiAgICAgICAgICB0aGlzLl9idWZmZXJTaXplID0gYmFzZURlcHRoICogTWF0aC5wb3coMTAsIGV4cG9uZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCfml6Dms5Xmn6Xor6LlhoXlrZjmt7HluqY6JywgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+afpeivoumAu+i+keWIhuaekOWZqOiDveWKm+Wksei0pTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJbpgLvovpHliIbmnpDlmahcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVMb2dpY0FuYWx5emVyKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g6YeN572u6YC76L6R5YiG5p6Q5ZmoXHJcbiAgICAgIGF3YWl0IHRoaXMuc2VuZFNDUElDb21tYW5kKCdMQTpSU1QnKTtcclxuXHJcbiAgICAgIC8vIOiuvue9ruS4uumAu+i+keWIhuaekOaooeW8j1xyXG4gICAgICBhd2FpdCB0aGlzLnNlbmRTQ1BJQ29tbWFuZCgnTEE6U1RBVCBPTicpO1xyXG5cclxuICAgICAgLy8g562J5b6F6K6+5aSH56iz5a6aXHJcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+WIneWni+WMlumAu+i+keWIhuaekOWZqOWksei0pTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDphY3nva7pgLvovpHliIbmnpDlmahcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGNvbmZpZ3VyZUxvZ2ljQW5hbHl6ZXIoc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOmFjee9rumHh+agt+eOh1xyXG4gICAgICBhd2FpdCB0aGlzLnNlbmRTQ1BJQ29tbWFuZChgTEE6U1JBVCAke3Nlc3Npb24uZnJlcXVlbmN5fWApO1xyXG5cclxuICAgICAgLy8g6YWN572u5YaF5a2Y5rex5bqmXHJcbiAgICAgIGNvbnN0IHRvdGFsU2FtcGxlcyA9IHNlc3Npb24ucHJlVHJpZ2dlclNhbXBsZXMgKyBzZXNzaW9uLnBvc3RUcmlnZ2VyU2FtcGxlcztcclxuICAgICAgYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoYExBOk1ERVAgJHt0b3RhbFNhbXBsZXN9YCk7XHJcblxyXG4gICAgICAvLyDphY3nva7pgJrpgZNcclxuICAgICAgZm9yIChjb25zdCBjaGFubmVsIG9mIHNlc3Npb24uY2FwdHVyZUNoYW5uZWxzKSB7XHJcbiAgICAgICAgY29uc3QgY2hhbm5lbE51bSA9IGNoYW5uZWwuY2hhbm5lbE51bWJlciArIDE7IC8vIFNDUEnpgJrluLjku44x5byA5aeL57yW5Y+3XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoYExBOkQke2NoYW5uZWxOdW19OkRJU1AgT05gKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoY2hhbm5lbC5jaGFubmVsTmFtZSkge1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoYExBOkQke2NoYW5uZWxOdW19OkxBQiBcIiR7Y2hhbm5lbC5jaGFubmVsTmFtZX1cImApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6YWN572u6Kem5Y+RXHJcbiAgICAgIGlmIChzZXNzaW9uLnRyaWdnZXJUeXBlICE9PSB1bmRlZmluZWQgJiYgc2Vzc2lvbi50cmlnZ2VyQ2hhbm5lbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5jb25maWd1cmVUcmlnZ2VyKHNlc3Npb24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDphY3nva7ml7bln7pcclxuICAgICAgY29uc3QgdGltZVJhbmdlID0gdG90YWxTYW1wbGVzIC8gc2Vzc2lvbi5mcmVxdWVuY3k7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2VuZFNDUElDb21tYW5kKGBMQTpTQ0FMICR7dGltZVJhbmdlfWApO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihg6YWN572u6YC76L6R5YiG5p6Q5Zmo5aSx6LSlOiAke2Vycm9yfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YWN572u6Kem5Y+RXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBjb25maWd1cmVUcmlnZ2VyKHNlc3Npb246IENhcHR1cmVTZXNzaW9uKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCB0cmlnZ2VyQ2hhbm5lbCA9IHNlc3Npb24udHJpZ2dlckNoYW5uZWwhICsgMTsgLy8gU0NQSeS7jjHlvIDlp4vnvJblj7dcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDorr7nva7op6blj5HmupBcclxuICAgICAgYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoYExBOlRSSUc6U09VUiBEJHt0cmlnZ2VyQ2hhbm5lbH1gKTtcclxuXHJcbiAgICAgIC8vIOiuvue9ruinpuWPkeexu+Wei1xyXG4gICAgICBsZXQgdHJpZ2dlclNsb3BlID0gJ1BPUyc7IC8vIOm7mOiupOS4iuWNh+ayv1xyXG4gICAgICBpZiAoc2Vzc2lvbi50cmlnZ2VySW52ZXJ0ZWQpIHtcclxuICAgICAgICB0cmlnZ2VyU2xvcGUgPSAnTkVHJztcclxuICAgICAgfVxyXG5cclxuICAgICAgYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoYExBOlRSSUc6U0xPUCAke3RyaWdnZXJTbG9wZX1gKTtcclxuXHJcbiAgICAgIC8vIOiuvue9ruinpuWPkeaooeW8j1xyXG4gICAgICBzd2l0Y2ggKHNlc3Npb24udHJpZ2dlclR5cGUpIHtcclxuICAgICAgICBjYXNlIDA6IC8vIEVkZ2VcclxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZFNDUElDb21tYW5kKCdMQTpUUklHOlRZUCBFREdFJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDE6IC8vIENvbXBsZXgvUGF0dGVyblxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoJ0xBOlRSSUc6VFlQIFBBVFQnKTtcclxuICAgICAgICAgIGlmIChzZXNzaW9uLnRyaWdnZXJQYXR0ZXJuICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgLy8g5bCG6Kem5Y+R5qih5byP6L2s5o2i5Li6U0NQSeagvOW8j1xyXG4gICAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gc2Vzc2lvbi50cmlnZ2VyUGF0dGVybi50b1N0cmluZygyKS5wYWRTdGFydCgxNiwgJzAnKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoYExBOlRSSUc6UEFUVDpEQVRBIFwiJHtwYXR0ZXJufVwiYCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoJ0xBOlRSSUc6VFlQIEVER0UnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6K6+572u6Kem5Y+R5L2N572uXHJcbiAgICAgIGlmIChzZXNzaW9uLnByZVRyaWdnZXJTYW1wbGVzID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHRyaWdnZXJQb3NpdGlvbiA9IHNlc3Npb24ucHJlVHJpZ2dlclNhbXBsZXMgLyBcclxuICAgICAgICAgIChzZXNzaW9uLnByZVRyaWdnZXJTYW1wbGVzICsgc2Vzc2lvbi5wb3N0VHJpZ2dlclNhbXBsZXMpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZFNDUElDb21tYW5kKGBMQTpUUklHOlBPUyAke3RyaWdnZXJQb3NpdGlvbiAqIDEwMH1gKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybign6YWN572u6Kem5Y+R5aSx6LSlOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWQr+WKqFNDUEnph4fpm4ZcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHN0YXJ0U0NQSUNhcHR1cmUoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmuIXpmaTplJnor6/nirbmgIFcclxuICAgICAgYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoJypDTFMnKTtcclxuXHJcbiAgICAgIC8vIOWQr+WKqOWNleasoemHh+mbhlxyXG4gICAgICBhd2FpdCB0aGlzLnNlbmRTQ1BJQ29tbWFuZCgnTEE6UlVOJyk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnUmlnb2wvU2lnbGVudOmAu+i+keWIhuaekOWZqOmHh+mbhuW3suWQr+WKqCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGDlkK/liqjph4fpm4blpLHotKU6ICR7ZXJyb3J9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnm5Hmjqfph4fpm4bnirbmgIFcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIG1vbml0b3JDYXB0dXJlU3RhdHVzKHNlc3Npb246IENhcHR1cmVTZXNzaW9uKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBjaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICghdGhpcy5fY2FwdHVyaW5nKSB7XHJcbiAgICAgICAgICBjbGVhckludGVydmFsKGNoZWNrSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5p+l6K+i6YeH6ZuG54q25oCBXHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgdGhpcy5zZW5kU0NQSUNvbW1hbmQoJ0xBOlNUQVQ/Jyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHN0YXR1cy5pbmNsdWRlcygnU1RPUCcpIHx8IHN0YXR1cy5pbmNsdWRlcygnMCcpKSB7XHJcbiAgICAgICAgICBjbGVhckludGVydmFsKGNoZWNrSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzQ2FwdHVyZVJlc3VsdHMoc2Vzc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tJbnRlcnZhbCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYXB0dXJlRXJyb3Ioc2Vzc2lvbiwgYOebkeaOp+mHh+mbhueKtuaAgeWksei0pTogJHtlcnJvcn1gKTtcclxuICAgICAgfVxyXG4gICAgfSwgNTAwKTsgLy8g5q+PNTAwbXPmo4Dmn6XkuIDmrKHnirbmgIFcclxuXHJcbiAgICAvLyDorr7nva7otoXml7bkv53miqRcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5fY2FwdHVyaW5nKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChjaGVja0ludGVydmFsKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUNhcHR1cmVFcnJvcihzZXNzaW9uLCAn6YeH6ZuG6LaF5pe2Jyk7XHJcbiAgICAgIH1cclxuICAgIH0sIDYwMDAwKTsgLy8gNjDnp5LotoXml7ZcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhumHh+mbhue7k+aenFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc0NhcHR1cmVSZXN1bHRzKHNlc3Npb246IENhcHR1cmVTZXNzaW9uKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDor7vlj5bph4fpm4bmlbDmja5cclxuICAgICAgZm9yIChjb25zdCBjaGFubmVsIG9mIHNlc3Npb24uY2FwdHVyZUNoYW5uZWxzKSB7XHJcbiAgICAgICAgY29uc3QgY2hhbm5lbE51bSA9IGNoYW5uZWwuY2hhbm5lbE51bWJlciArIDE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g6K+35rGC6YCa6YGT5pWw5o2uXHJcbiAgICAgICAgY29uc3QgZGF0YUNvbW1hbmQgPSBgTEE6RCR7Y2hhbm5lbE51bX06REFUQT9gO1xyXG4gICAgICAgIGNvbnN0IHJhd0RhdGEgPSBhd2FpdCB0aGlzLnNlbmRTQ1BJQ29tbWFuZChkYXRhQ29tbWFuZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g6Kej5p6Q5pWw5o2uXHJcbiAgICAgICAgY2hhbm5lbC5zYW1wbGVzID0gdGhpcy5wYXJzZVNDUElCaW5hcnlEYXRhKHJhd0RhdGEpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl9jYXB0dXJpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgIGNvbnN0IGV2ZW50QXJnczogQ2FwdHVyZUV2ZW50QXJncyA9IHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIHNlc3Npb25cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMuZW1pdENhcHR1cmVDb21wbGV0ZWQoZXZlbnRBcmdzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlQ2FwdHVyZUVycm9yKHNlc3Npb24sIGDlpITnkIbph4fpm4bnu5PmnpzlpLHotKU6ICR7ZXJyb3J9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDop6PmnpBTQ1BJ5LqM6L+b5Yi25pWw5o2uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwYXJzZVNDUElCaW5hcnlEYXRhKHJhd0RhdGE6IHN0cmluZyk6IFVpbnQ4QXJyYXkge1xyXG4gICAgLy8gU0NQSeS6jOi/m+WItuaVsOaNruagvOW8j+mAmuW4uOaYrzogIzxkaWdpdD48Y291bnQ+PGRhdGE+XHJcbiAgICBpZiAocmF3RGF0YS5zdGFydHNXaXRoKCcjJykpIHtcclxuICAgICAgY29uc3QgZGlnaXRDb3VudCA9IHBhcnNlSW50KHJhd0RhdGFbMV0sIDEwKTtcclxuICAgICAgY29uc3QgZGF0YUxlbmd0aCA9IHBhcnNlSW50KHJhd0RhdGEuc3Vic3RyaW5nKDIsIDIgKyBkaWdpdENvdW50KSwgMTApO1xyXG4gICAgICBjb25zdCBiaW5hcnlTdGFydCA9IDIgKyBkaWdpdENvdW50O1xyXG4gICAgICBcclxuICAgICAgLy8g5o+Q5Y+W5LqM6L+b5Yi25pWw5o2u6YOo5YiGXHJcbiAgICAgIGNvbnN0IGJpbmFyeURhdGEgPSByYXdEYXRhLnN1YnN0cmluZyhiaW5hcnlTdGFydCwgYmluYXJ5U3RhcnQgKyBkYXRhTGVuZ3RoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIOi9rOaNouS4ulVpbnQ4QXJyYXlcclxuICAgICAgY29uc3Qgc2FtcGxlcyA9IG5ldyBVaW50OEFycmF5KGJpbmFyeURhdGEubGVuZ3RoKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnlEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgc2FtcGxlc1tpXSA9IGJpbmFyeURhdGEuY2hhckNvZGVBdChpKSAhPT0gMCA/IDEgOiAwO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gc2FtcGxlcztcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g5aaC5p6c5LiN5piv5LqM6L+b5Yi25qC85byP77yM5bCd6K+V6Kej5p6Q5Li6QVNDSUnmoLzlvI9cclxuICAgIGNvbnN0IHZhbHVlcyA9IHJhd0RhdGEuc3BsaXQoJywnKS5tYXAodmFsID0+IHBhcnNlSW50KHZhbC50cmltKCksIDEwKSk7XHJcbiAgICBjb25zdCBzYW1wbGVzID0gbmV3IFVpbnQ4QXJyYXkodmFsdWVzLmxlbmd0aCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBzYW1wbGVzW2ldID0gdmFsdWVzW2ldID8gMSA6IDA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBzYW1wbGVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG6YeH6ZuG6ZSZ6K+vXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVDYXB0dXJlRXJyb3Ioc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24sIGVycm9yTWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLl9jYXB0dXJpbmcgPSBmYWxzZTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1JpZ29sL1NpZ2xlbnTph4fpm4bplJnor686JywgZXJyb3JNZXNzYWdlKTtcclxuXHJcbiAgICBjb25zdCBldmVudEFyZ3M6IENhcHR1cmVFdmVudEFyZ3MgPSB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBzZXNzaW9uXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZW1pdENhcHR1cmVDb21wbGV0ZWQoZXZlbnRBcmdzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPkemAgVNDUEnlkb3ku6RcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHNlbmRTQ1BJQ29tbWFuZChjb21tYW5kOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgdGhpcy5fY29tbWFuZFF1ZXVlLnB1c2goeyBjb21tYW5kLCByZXNvbHZlLCByZWplY3QgfSk7XHJcbiAgICAgIHRoaXMucHJvY2Vzc0NvbW1hbmRRdWV1ZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIblkb3ku6TpmJ/liJdcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NDb21tYW5kUXVldWUoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBpZiAodGhpcy5faXNQcm9jZXNzaW5nQ29tbWFuZCB8fCB0aGlzLl9jb21tYW5kUXVldWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9pc1Byb2Nlc3NpbmdDb21tYW5kID0gdHJ1ZTtcclxuICAgIGNvbnN0IHsgY29tbWFuZCwgcmVzb2x2ZSwgcmVqZWN0IH0gPSB0aGlzLl9jb21tYW5kUXVldWUuc2hpZnQoKSE7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCF0aGlzLl9zb2NrZXQpIHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKCdTb2NrZXTmnKrov57mjqUnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcmVzcG9uc2VEYXRhID0gJyc7XHJcbiAgICAgIGNvbnN0IGlzUXVlcnkgPSBjb21tYW5kLmluY2x1ZGVzKCc/Jyk7XHJcblxyXG4gICAgICAvLyDmlbDmja7mjqXmlLblpITnkIblmahcclxuICAgICAgY29uc3QgZGF0YUhhbmRsZXIgPSAoZGF0YTogQnVmZmVyKSA9PiB7XHJcbiAgICAgICAgcmVzcG9uc2VEYXRhICs9IGRhdGEudG9TdHJpbmcoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDmo4Dmn6Xlk43lupTmmK/lkKblrozmlbTvvIjku6XmjaLooYznrKbnu5PmnZ/vvIlcclxuICAgICAgICBpZiAocmVzcG9uc2VEYXRhLmluY2x1ZGVzKCdcXFxcbicpKSB7XHJcbiAgICAgICAgICB0aGlzLl9zb2NrZXQhLm9mZignZGF0YScsIGRhdGFIYW5kbGVyKTtcclxuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgICAgcmVzb2x2ZShyZXNwb25zZURhdGEudHJpbSgpKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8g57un57ut5aSE55CG6Zif5YiX5Lit55qE5YW25LuW5ZG95LukXHJcbiAgICAgICAgICB0aGlzLl9pc1Byb2Nlc3NpbmdDb21tYW5kID0gZmFsc2U7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucHJvY2Vzc0NvbW1hbmRRdWV1ZSgpLCAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8g6K6+572u6LaF5pe2XHJcbiAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3NvY2tldCEub2ZmKCdkYXRhJywgZGF0YUhhbmRsZXIpO1xyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFNDUEnlkb3ku6TotoXml7Y6ICR7Y29tbWFuZH1gKSk7XHJcbiAgICAgICAgdGhpcy5faXNQcm9jZXNzaW5nQ29tbWFuZCA9IGZhbHNlO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5wcm9jZXNzQ29tbWFuZFF1ZXVlKCksIDEwKTtcclxuICAgICAgfSwgNTAwMCk7XHJcblxyXG4gICAgICAvLyDlpoLmnpzmmK/mn6Xor6Llkb3ku6TvvIzorr7nva7mlbDmja7mjqXmlLblmahcclxuICAgICAgaWYgKGlzUXVlcnkpIHtcclxuICAgICAgICB0aGlzLl9zb2NrZXQub24oJ2RhdGEnLCBkYXRhSGFuZGxlcik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8g6Z2e5p+l6K+i5ZG95Luk77yM55u05o6l6L+U5ZueXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKCdPSycpO1xyXG4gICAgICAgICAgdGhpcy5faXNQcm9jZXNzaW5nQ29tbWFuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnByb2Nlc3NDb21tYW5kUXVldWUoKSwgMTApO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWPkemAgeWRveS7pFxyXG4gICAgICB0aGlzLl9zb2NrZXQud3JpdGUoY29tbWFuZCArICdcXFxcbicsIGVycm9yID0+IHtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgIGlmIChpc1F1ZXJ5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NvY2tldCEub2ZmKCdkYXRhJywgZGF0YUhhbmRsZXIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKGDlj5HpgIFTQ1BJ5ZG95Luk5aSx6LSlOiAke2Vycm9yLm1lc3NhZ2V9YCkpO1xyXG4gICAgICAgICAgdGhpcy5faXNQcm9jZXNzaW5nQ29tbWFuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnByb2Nlc3NDb21tYW5kUXVldWUoKSwgMTApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgdGhpcy5faXNQcm9jZXNzaW5nQ29tbWFuZCA9IGZhbHNlO1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucHJvY2Vzc0NvbW1hbmRRdWV1ZSgpLCAxMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIbmjqXmlLbliLDnmoTmlbDmja5cclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZUluY29taW5nRGF0YShkYXRhOiBCdWZmZXIpOiB2b2lkIHtcclxuICAgIC8vIOi/meS4quaWueazleS4u+imgeeUqOS6juWkhOeQhuW8guatpeaVsOaNruaIlueKtuaAgeabtOaWsFxyXG4gICAgY29uc3QgZGF0YVN0ciA9IGRhdGEudG9TdHJpbmcoKTtcclxuICAgIFxyXG4gICAgLy8g5Y+v5Lul5Zyo6L+Z6YeM5aSE55CG6K6+5aSH5Li75Yqo5Y+R6YCB55qE54q25oCB5L+h5oGvXHJcbiAgICBpZiAoZGF0YVN0ci5pbmNsdWRlcygnRVJST1InKSB8fCBkYXRhU3RyLmluY2x1ZGVzKCdGQUlMJykpIHtcclxuICAgICAgY29uc29sZS53YXJuKCforr7lpIfmiqXlkYrplJnor686JywgZGF0YVN0cik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmnoTlu7rnoazku7bog73lipvmj4/ov7BcclxuICAgKi9cclxuICBwcml2YXRlIGJ1aWxkQ2FwYWJpbGl0aWVzKCk6IGFueSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjaGFubmVsczoge1xyXG4gICAgICAgIGRpZ2l0YWw6IHRoaXMuX2NoYW5uZWxDb3VudCxcclxuICAgICAgICBtYXhWb2x0YWdlOiA1LjAsXHJcbiAgICAgICAgaW5wdXRJbXBlZGFuY2U6IDEwMDAwMDBcclxuICAgICAgfSxcclxuICAgICAgc2FtcGxpbmc6IHtcclxuICAgICAgICBtYXhSYXRlOiB0aGlzLl9tYXhGcmVxdWVuY3ksXHJcbiAgICAgICAgbWluUmF0ZTogdGhpcy5taW5GcmVxdWVuY3ksXHJcbiAgICAgICAgc3VwcG9ydGVkUmF0ZXM6IFt0aGlzLl9tYXhGcmVxdWVuY3ksIHRoaXMuX2JsYXN0RnJlcXVlbmN5XSxcclxuICAgICAgICBidWZmZXJTaXplOiB0aGlzLl9idWZmZXJTaXplLFxyXG4gICAgICAgIHN0cmVhbWluZ1N1cHBvcnQ6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIHRyaWdnZXJzOiB7XHJcbiAgICAgICAgdHlwZXM6IFswLCAxLCAyXSwgLy8gRWRnZSwgUGF0dGVybiwgQ29tcGxleFxyXG4gICAgICAgIG1heENoYW5uZWxzOiB0aGlzLl9jaGFubmVsQ291bnQsXHJcbiAgICAgICAgcGF0dGVybldpZHRoOiAxNixcclxuICAgICAgICBzZXF1ZW50aWFsU3VwcG9ydDogdHJ1ZSxcclxuICAgICAgICBjb25kaXRpb25zOiBbJ3Jpc2luZycsICdmYWxsaW5nJywgJ2hpZ2gnLCAnbG93JywgJ2NoYW5nZSddXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbm5lY3Rpdml0eToge1xyXG4gICAgICAgIGludGVyZmFjZXM6IFsnZXRoZXJuZXQnLCAndXNiJ10sXHJcbiAgICAgICAgcHJvdG9jb2xzOiBbJ3NjcGknLCAndnhpMTEnXVxyXG4gICAgICB9LFxyXG4gICAgICBmZWF0dXJlczoge1xyXG4gICAgICAgIHNpZ25hbEdlbmVyYXRpb246IGZhbHNlLFxyXG4gICAgICAgIHBvd2VyU3VwcGx5OiBmYWxzZSxcclxuICAgICAgICB2b2x0YWdlTW9uaXRvcmluZzogZmFsc2UsXHJcbiAgICAgICAgbWF0aEZ1bmN0aW9uczogdHJ1ZSxcclxuICAgICAgICBwcm90b2NvbERlY29kaW5nOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDotYTmupDmuIXnkIZcclxuICAgKi9cclxuICBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/drivers/RigolSiglentDriver.ts\n\n}");

/***/ }),

/***/ "./src/drivers/SaleaeLogicDriver.ts":
/*!******************************************!*\
  !*** ./src/drivers/SaleaeLogicDriver.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.SaleaeLogicDriver = void 0;\nconst net_1 = __webpack_require__(/*! net */ \"net\");\nconst AnalyzerDriverBase_1 = __webpack_require__(/*! ./AnalyzerDriverBase */ \"./src/drivers/AnalyzerDriverBase.ts\");\nconst AnalyzerTypes_1 = __webpack_require__(/*! ../models/AnalyzerTypes */ \"./src/models/AnalyzerTypes.ts\");\n/**\n * Saleae Logic兼容驱动实现\n * 基于Saleae Logic 2 Socket API\n */\nclass SaleaeLogicDriver extends AnalyzerDriverBase_1.AnalyzerDriverBase {\n    // 属性实现\n    get deviceVersion() {\n        return this._version;\n    }\n    get channelCount() {\n        return this._channelCount;\n    }\n    get maxFrequency() {\n        return this._maxFrequency;\n    }\n    get blastFrequency() {\n        return this._blastFrequency;\n    }\n    get bufferSize() {\n        return this._bufferSize;\n    }\n    get isNetwork() {\n        return true; // Saleae Logic总是通过网络API通信\n    }\n    get isCapturing() {\n        return this._capturing;\n    }\n    get driverType() {\n        return AnalyzerTypes_1.AnalyzerDriverType.Network;\n    }\n    constructor(connectionString) {\n        super();\n        // 私有变量\n        this._capturing = false;\n        this._version = null;\n        this._channelCount = 8; // 默认8通道，实际会从设备查询\n        this._maxFrequency = 100000000; // 100MHz，默认值\n        this._blastFrequency = 500000000; // 500MHz，默认值\n        this._bufferSize = 10000000; // 默认10M样本\n        // 通信对象\n        this._socket = undefined;\n        this._isConnected = false;\n        this._deviceId = null;\n        this._currentCaptureId = null;\n        // 解析连接字符串 \"host:port\" 或使用默认值\n        if (connectionString && connectionString.includes(':')) {\n            const parts = connectionString.split(':');\n            this._host = parts[0];\n            this._port = parseInt(parts[1], 10);\n        }\n        else {\n            this._host = SaleaeLogicDriver.DEFAULT_HOST;\n            this._port = SaleaeLogicDriver.DEFAULT_PORT;\n        }\n    }\n    /**\n     * 连接设备\n     */\n    async connect(params) {\n        try {\n            await this.initializeSocket();\n            await this.queryDeviceInfo();\n            this._isConnected = true;\n            return {\n                success: true,\n                deviceInfo: {\n                    name: this._version || 'Saleae Logic Analyzer',\n                    version: this._version ?? undefined,\n                    type: this.driverType,\n                    connectionPath: `${this._host}:${this._port}`,\n                    isNetwork: true,\n                    capabilities: this.buildCapabilities()\n                }\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : '连接失败'\n            };\n        }\n    }\n    /**\n     * 断开连接\n     */\n    async disconnect() {\n        this._isConnected = false;\n        if (this._socket) {\n            this._socket.destroy();\n            this._socket = undefined;\n        }\n        this._deviceId = null;\n        this._currentCaptureId = null;\n    }\n    /**\n     * 获取设备状态\n     */\n    async getStatus() {\n        return {\n            isConnected: this._isConnected,\n            isCapturing: this._capturing,\n            batteryVoltage: 'N/A' // Saleae Logic通常是USB供电\n        };\n    }\n    /**\n     * 开始采集\n     */\n    async startCapture(session, captureCompletedHandler) {\n        if (this._capturing) {\n            return AnalyzerTypes_1.CaptureError.Busy;\n        }\n        if (!this._isConnected || !this._socket) {\n            return AnalyzerTypes_1.CaptureError.HardwareError;\n        }\n        try {\n            this._capturing = true;\n            // 设置捕获配置\n            await this.configureCaptureSettings(session);\n            // 开始采集\n            const captureId = await this.startSaleaeCapture();\n            this._currentCaptureId = captureId;\n            // 设置捕获完成处理器\n            if (captureCompletedHandler) {\n                this.once('captureCompleted', captureCompletedHandler);\n            }\n            // 监控采集状态\n            this.monitorCaptureProgress(session);\n            return AnalyzerTypes_1.CaptureError.None;\n        }\n        catch (error) {\n            this._capturing = false;\n            console.error('Saleae采集启动失败:', error);\n            return AnalyzerTypes_1.CaptureError.UnexpectedError;\n        }\n    }\n    /**\n     * 停止采集\n     */\n    async stopCapture() {\n        if (!this._capturing) {\n            return true;\n        }\n        try {\n            if (this._currentCaptureId) {\n                await this.sendCommand({\n                    command: 'STOP_CAPTURE',\n                    capture_id: this._currentCaptureId\n                });\n            }\n            this._capturing = false;\n            this._currentCaptureId = null;\n            return true;\n        }\n        catch (error) {\n            console.error('停止Saleae采集失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 进入引导加载程序模式（Saleae不支持）\n     */\n    async enterBootloader() {\n        return false; // Saleae Logic不支持引导加载程序模式\n    }\n    /**\n     * 初始化Socket连接\n     */\n    async initializeSocket() {\n        return new Promise((resolve, reject) => {\n            this._socket = new net_1.Socket();\n            this._socket.connect(this._port, this._host, () => {\n                console.log(`已连接到Saleae Logic API: ${this._host}:${this._port}`);\n                resolve();\n            });\n            this._socket.on('error', error => {\n                reject(new Error(`Socket连接失败: ${error.message}`));\n            });\n            this._socket.on('close', () => {\n                this._isConnected = false;\n                console.log('Saleae Logic连接已关闭');\n            });\n        });\n    }\n    /**\n     * 查询设备信息\n     */\n    async queryDeviceInfo() {\n        try {\n            // 获取连接的设备列表\n            const devicesResponse = await this.sendCommand({ command: 'GET_CONNECTED_DEVICES' });\n            if (devicesResponse.connected_devices && devicesResponse.connected_devices.length > 0) {\n                const device = devicesResponse.connected_devices[0];\n                this._deviceId = device.device_id;\n                this._version = `Saleae Logic ${device.device_type}`;\n                // 根据设备类型设置通道数和频率\n                this.setDeviceCapabilities(device.device_type);\n            }\n            else {\n                throw new Error('未发现连接的Saleae Logic设备');\n            }\n            // 获取详细的设备能力信息\n            if (this._deviceId) {\n                const capabilitiesResponse = await this.sendCommand({\n                    command: 'GET_DEVICE_CAPABILITIES',\n                    device_id: this._deviceId\n                });\n                if (capabilitiesResponse.capabilities) {\n                    this.parseDeviceCapabilities(capabilitiesResponse.capabilities);\n                }\n            }\n        }\n        catch (error) {\n            throw new Error(`查询Saleae设备信息失败: ${error}`);\n        }\n    }\n    /**\n     * 根据设备类型设置能力参数\n     */\n    setDeviceCapabilities(deviceType) {\n        // 根据Saleae Logic设备类型设置默认参数\n        switch (deviceType.toLowerCase()) {\n            case 'logic 4':\n                this._channelCount = 4;\n                this._maxFrequency = 12500000; // 12.5MHz\n                this._blastFrequency = 25000000; // 25MHz\n                break;\n            case 'logic 8':\n                this._channelCount = 8;\n                this._maxFrequency = 100000000; // 100MHz\n                this._blastFrequency = 500000000; // 500MHz\n                break;\n            case 'logic 16':\n                this._channelCount = 16;\n                this._maxFrequency = 100000000; // 100MHz\n                this._blastFrequency = 500000000; // 500MHz\n                break;\n            case 'logic pro 8':\n                this._channelCount = 8;\n                this._maxFrequency = 500000000; // 500MHz\n                this._blastFrequency = 1000000000; // 1GHz\n                break;\n            case 'logic pro 16':\n                this._channelCount = 16;\n                this._maxFrequency = 500000000; // 500MHz\n                this._blastFrequency = 1000000000; // 1GHz\n                break;\n            default:\n                this._channelCount = 8;\n                this._maxFrequency = 100000000;\n                this._blastFrequency = 500000000;\n        }\n    }\n    /**\n     * 解析设备能力信息\n     */\n    parseDeviceCapabilities(capabilities) {\n        if (capabilities.digital_channels) {\n            this._channelCount = capabilities.digital_channels.length;\n        }\n        if (capabilities.supported_sample_rates) {\n            const rates = capabilities.supported_sample_rates;\n            this._maxFrequency = Math.max(...rates);\n            this._blastFrequency = this._maxFrequency;\n        }\n        if (capabilities.memory_size) {\n            this._bufferSize = capabilities.memory_size;\n        }\n    }\n    /**\n     * 配置采集设置\n     */\n    async configureCaptureSettings(session) {\n        if (!this._deviceId) {\n            throw new Error('设备ID未设置');\n        }\n        // 配置数字通道\n        const digitalChannels = session.captureChannels.map(ch => ({\n            index: ch.channelNumber,\n            enabled: true,\n            label: ch.channelName || `Channel ${ch.channelNumber + 1}`\n        }));\n        await this.sendCommand({\n            command: 'SET_CAPTURE_CONFIGURATION',\n            device_id: this._deviceId,\n            configuration: {\n                digital_channels: digitalChannels,\n                sample_rate: session.frequency,\n                capture_mode: this.getSaleaeCaptureMode(session),\n                trigger_settings: this.buildTriggerSettings(session)\n            }\n        });\n    }\n    /**\n     * 获取Saleae采集模式\n     */\n    getSaleaeCaptureMode(session) {\n        // Saleae Logic 2的采集模式\n        if (session.measureBursts || session.loopCount > 0) {\n            return 'LOOPING';\n        }\n        return 'NORMAL';\n    }\n    /**\n     * 构建触发设置\n     */\n    buildTriggerSettings(session) {\n        const triggers = [];\n        // 基于原始触发类型构建Saleae触发设置\n        if (session.triggerType !== undefined && session.triggerChannel !== undefined) {\n            triggers.push({\n                channel_index: session.triggerChannel,\n                trigger_type: session.triggerInverted ? 'FALLING_EDGE' : 'RISING_EDGE',\n                minimum_pulse_width_seconds: 0\n            });\n        }\n        return {\n            triggers,\n            capture_mode: 'ALWAYS' // 始终捕获，或根据触发条件调整\n        };\n    }\n    /**\n     * 开始Saleae采集\n     */\n    async startSaleaeCapture() {\n        const response = await this.sendCommand({\n            command: 'START_CAPTURE',\n            device_id: this._deviceId\n        });\n        if (!response.capture_id) {\n            throw new Error('Saleae采集启动失败：未收到capture_id');\n        }\n        return response.capture_id;\n    }\n    /**\n     * 监控采集进度\n     */\n    async monitorCaptureProgress(session) {\n        const checkInterval = setInterval(async () => {\n            try {\n                if (!this._currentCaptureId || !this._capturing) {\n                    clearInterval(checkInterval);\n                    return;\n                }\n                const statusResponse = await this.sendCommand({\n                    command: 'GET_CAPTURE_STATUS',\n                    capture_id: this._currentCaptureId\n                });\n                if (statusResponse.status === 'COMPLETE') {\n                    clearInterval(checkInterval);\n                    await this.processCaptureResults(session);\n                }\n                else if (statusResponse.status === 'ERROR') {\n                    clearInterval(checkInterval);\n                    this.handleCaptureError(session, statusResponse.error_message);\n                }\n            }\n            catch (error) {\n                clearInterval(checkInterval);\n                this.handleCaptureError(session, `监控采集进度失败: ${error}`);\n            }\n        }, 100); // 每100ms检查一次状态\n    }\n    /**\n     * 处理采集结果\n     */\n    async processCaptureResults(session) {\n        try {\n            // 获取采集数据\n            const dataResponse = await this.sendCommand({\n                command: 'GET_CAPTURE_DATA',\n                capture_id: this._currentCaptureId,\n                format: 'BINARY'\n            });\n            // 解析数据到session.captureChannels\n            this.parseSaleaeData(session, dataResponse);\n            this._capturing = false;\n            this._currentCaptureId = null;\n            const eventArgs = {\n                success: true,\n                session\n            };\n            this.emitCaptureCompleted(eventArgs);\n        }\n        catch (error) {\n            this.handleCaptureError(session, `处理采集结果失败: ${error}`);\n        }\n    }\n    /**\n     * 解析Saleae数据格式\n     */\n    parseSaleaeData(session, dataResponse) {\n        // Saleae Logic 2 API返回的数据格式处理\n        if (dataResponse.digital_samples) {\n            const samples = dataResponse.digital_samples;\n            for (let channelIndex = 0; channelIndex < session.captureChannels.length; channelIndex++) {\n                const channel = session.captureChannels[channelIndex];\n                const channelData = samples[channel.channelNumber];\n                if (channelData && channelData.samples) {\n                    // 转换Saleae的时间序列数据为样本数组\n                    channel.samples = this.convertSaleaeTimeSeriesToSamples(channelData.samples, channelData.sample_rate || session.frequency);\n                }\n            }\n        }\n    }\n    /**\n     * 转换Saleae时间序列数据为样本数组\n     */\n    convertSaleaeTimeSeriesToSamples(timeSeries, sampleRate) {\n        if (timeSeries.length === 0)\n            return new Uint8Array(0);\n        // 计算总样本数\n        const lastTime = timeSeries[timeSeries.length - 1].time;\n        const totalSamples = Math.ceil(lastTime * sampleRate) + 1;\n        const samples = new Uint8Array(totalSamples);\n        // 填充样本数据\n        let currentValue = 0;\n        let timeSeriesIndex = 0;\n        for (let sampleIndex = 0; sampleIndex < totalSamples; sampleIndex++) {\n            const currentTime = sampleIndex / sampleRate;\n            // 检查是否需要更新当前值\n            while (timeSeriesIndex < timeSeries.length &&\n                timeSeries[timeSeriesIndex].time <= currentTime) {\n                currentValue = timeSeries[timeSeriesIndex].value ? 1 : 0;\n                timeSeriesIndex++;\n            }\n            samples[sampleIndex] = currentValue;\n        }\n        return samples;\n    }\n    /**\n     * 处理采集错误\n     */\n    handleCaptureError(session, errorMessage) {\n        this._capturing = false;\n        this._currentCaptureId = null;\n        console.error('Saleae采集错误:', errorMessage);\n        const eventArgs = {\n            success: false,\n            session\n        };\n        this.emitCaptureCompleted(eventArgs);\n    }\n    /**\n     * 发送命令到Saleae Logic API\n     */\n    async sendCommand(command) {\n        return new Promise((resolve, reject) => {\n            if (!this._socket) {\n                reject(new Error('Socket未连接'));\n                return;\n            }\n            const commandStr = JSON.stringify(command) + '\\n';\n            // 设置响应处理器\n            const responseHandler = (data) => {\n                try {\n                    const response = JSON.parse(data.toString());\n                    this._socket.off('data', responseHandler);\n                    if (response.success === false) {\n                        reject(new Error(response.error_message || '命令执行失败'));\n                    }\n                    else {\n                        resolve(response);\n                    }\n                }\n                catch (error) {\n                    reject(new Error(`解析响应失败: ${error}`));\n                }\n            };\n            this._socket.once('data', responseHandler);\n            // 发送命令\n            this._socket.write(commandStr, error => {\n                if (error) {\n                    reject(new Error(`发送命令失败: ${error.message}`));\n                }\n            });\n            // 设置超时\n            setTimeout(() => {\n                this._socket.off('data', responseHandler);\n                reject(new Error('命令执行超时'));\n            }, 10000);\n        });\n    }\n    /**\n     * 构建硬件能力描述\n     */\n    buildCapabilities() {\n        return {\n            channels: {\n                digital: this._channelCount,\n                maxVoltage: 5.0,\n                inputImpedance: 1000000\n            },\n            sampling: {\n                maxRate: this._maxFrequency,\n                minRate: this.minFrequency,\n                supportedRates: [this._maxFrequency, this._blastFrequency],\n                bufferSize: this._bufferSize,\n                streamingSupport: true\n            },\n            triggers: {\n                types: [0, 1],\n                maxChannels: this._channelCount,\n                patternWidth: this._channelCount,\n                sequentialSupport: true,\n                conditions: ['rising', 'falling', 'high', 'low', 'change']\n            },\n            connectivity: {\n                interfaces: ['usb'],\n                protocols: ['saleae_api']\n            },\n            features: {\n                signalGeneration: false,\n                powerSupply: false,\n                voltageMonitoring: false\n            }\n        };\n    }\n    /**\n     * 资源清理\n     */\n    dispose() {\n        this.disconnect();\n        super.dispose();\n    }\n}\nexports.SaleaeLogicDriver = SaleaeLogicDriver;\n// Saleae Logic 2 默认端口\nSaleaeLogicDriver.DEFAULT_PORT = 10429;\nSaleaeLogicDriver.DEFAULT_HOST = 'localhost';\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxJQUFJLENBQUMsV0FBVztnQkFDNUIsZ0JBQWdCLEVBQUUsSUFBSTthQUN2QjtZQUNELFFBQVEsRUFBRTtnQkFDUixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNiLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYTtnQkFDL0IsWUFBWSxFQUFFLElBQUksQ0FBQyxhQUFhO2dCQUNoQyxpQkFBaUIsRUFBRSxJQUFJO2dCQUN2QixVQUFVLEVBQUUsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDO2FBQzNEO1lBQ0QsWUFBWSxFQUFFO2dCQUNaLFVBQVUsRUFBRSxDQUFDLEtBQUssQ0FBQztnQkFDbkIsU0FBUyxFQUFFLENBQUMsWUFBWSxDQUFDO2FBQzFCO1lBQ0QsUUFBUSxFQUFFO2dCQUNSLGdCQUFnQixFQUFFLEtBQUs7Z0JBQ3ZCLFdBQVcsRUFBRSxLQUFLO2dCQUNsQixpQkFBaUIsRUFBRSxLQUFLO2FBQ3pCO1NBQ0YsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNNLE9BQU87UUFDZCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEIsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2xCLENBQUM7O0FBdmxCSCw4Q0F3bEJDO0FBdmxCQyxzQkFBc0I7QUFDRSw4QkFBWSxHQUFHLEtBQUssQ0FBQztBQUNyQiw4QkFBWSxHQUFHLFdBQVcsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZzY29kZS1sb2dpYy1hbmFseXplci8uL3NyYy9kcml2ZXJzL1NhbGVhZUxvZ2ljRHJpdmVyLnRzPzZlOGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU29ja2V0IH0gZnJvbSAnbmV0JztcclxuaW1wb3J0IHsgQW5hbHl6ZXJEcml2ZXJCYXNlIH0gZnJvbSAnLi9BbmFseXplckRyaXZlckJhc2UnO1xyXG5pbXBvcnQge1xyXG4gIEFuYWx5emVyRHJpdmVyVHlwZSxcclxuICBDYXB0dXJlRXJyb3IsXHJcbiAgQ2FwdHVyZVNlc3Npb24sXHJcbiAgQ2FwdHVyZUV2ZW50QXJncyxcclxuICBDYXB0dXJlQ29tcGxldGVkSGFuZGxlcixcclxuICBDb25uZWN0aW9uUGFyYW1zLFxyXG4gIENvbm5lY3Rpb25SZXN1bHQsXHJcbiAgRGV2aWNlU3RhdHVzLFxyXG4gIENhcHR1cmVNb2RlXHJcbn0gZnJvbSAnLi4vbW9kZWxzL0FuYWx5emVyVHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIFNhbGVhZSBMb2dpY+WFvOWuuempseWKqOWunueOsFxyXG4gKiDln7rkuo5TYWxlYWUgTG9naWMgMiBTb2NrZXQgQVBJXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2FsZWFlTG9naWNEcml2ZXIgZXh0ZW5kcyBBbmFseXplckRyaXZlckJhc2Uge1xyXG4gIC8vIFNhbGVhZSBMb2dpYyAyIOm7mOiupOerr+WPo1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfUE9SVCA9IDEwNDI5O1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfSE9TVCA9ICdsb2NhbGhvc3QnO1xyXG5cclxuICAvLyDlsZ7mgKflrp7njrBcclxuICBnZXQgZGV2aWNlVmVyc2lvbigpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLl92ZXJzaW9uO1xyXG4gIH1cclxuICBnZXQgY2hhbm5lbENvdW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2hhbm5lbENvdW50O1xyXG4gIH1cclxuICBnZXQgbWF4RnJlcXVlbmN5KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWF4RnJlcXVlbmN5O1xyXG4gIH1cclxuICBnZXQgYmxhc3RGcmVxdWVuY3koKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9ibGFzdEZyZXF1ZW5jeTtcclxuICB9XHJcbiAgZ2V0IGJ1ZmZlclNpemUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9idWZmZXJTaXplO1xyXG4gIH1cclxuICBnZXQgaXNOZXR3b3JrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRydWU7IC8vIFNhbGVhZSBMb2dpY+aAu+aYr+mAmui/h+e9kee7nEFQSemAmuS/oVxyXG4gIH1cclxuICBnZXQgaXNDYXB0dXJpbmcoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FwdHVyaW5nO1xyXG4gIH1cclxuICBnZXQgZHJpdmVyVHlwZSgpOiBBbmFseXplckRyaXZlclR5cGUge1xyXG4gICAgcmV0dXJuIEFuYWx5emVyRHJpdmVyVHlwZS5OZXR3b3JrO1xyXG4gIH1cclxuXHJcbiAgLy8g56eB5pyJ5Y+Y6YePXHJcbiAgcHJpdmF0ZSBfY2FwdHVyaW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBfdmVyc2lvbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBfY2hhbm5lbENvdW50OiBudW1iZXIgPSA4OyAvLyDpu5jorqQ46YCa6YGT77yM5a6e6ZmF5Lya5LuO6K6+5aSH5p+l6K+iXHJcbiAgcHJpdmF0ZSBfbWF4RnJlcXVlbmN5OiBudW1iZXIgPSAxMDAwMDAwMDA7IC8vIDEwME1Ieu+8jOm7mOiupOWAvFxyXG4gIHByaXZhdGUgX2JsYXN0RnJlcXVlbmN5OiBudW1iZXIgPSA1MDAwMDAwMDA7IC8vIDUwME1Ieu+8jOm7mOiupOWAvFxyXG4gIHByaXZhdGUgX2J1ZmZlclNpemU6IG51bWJlciA9IDEwMDAwMDAwOyAvLyDpu5jorqQxME3moLfmnKxcclxuICBwcml2YXRlIF9ob3N0OiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfcG9ydDogbnVtYmVyO1xyXG5cclxuICAvLyDpgJrkv6Hlr7nosaFcclxuICBwcml2YXRlIF9zb2NrZXQ6IFNvY2tldCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuICBwcml2YXRlIF9pc0Nvbm5lY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX2RldmljZUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIF9jdXJyZW50Q2FwdHVyZUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29ubmVjdGlvblN0cmluZz86IHN0cmluZykge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvLyDop6PmnpDov57mjqXlrZfnrKbkuLIgXCJob3N0OnBvcnRcIiDmiJbkvb/nlKjpu5jorqTlgLxcclxuICAgIGlmIChjb25uZWN0aW9uU3RyaW5nICYmIGNvbm5lY3Rpb25TdHJpbmcuaW5jbHVkZXMoJzonKSkge1xyXG4gICAgICBjb25zdCBwYXJ0cyA9IGNvbm5lY3Rpb25TdHJpbmcuc3BsaXQoJzonKTtcclxuICAgICAgdGhpcy5faG9zdCA9IHBhcnRzWzBdO1xyXG4gICAgICB0aGlzLl9wb3J0ID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hvc3QgPSBTYWxlYWVMb2dpY0RyaXZlci5ERUZBVUxUX0hPU1Q7XHJcbiAgICAgIHRoaXMuX3BvcnQgPSBTYWxlYWVMb2dpY0RyaXZlci5ERUZBVUxUX1BPUlQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDov57mjqXorr7lpIdcclxuICAgKi9cclxuICBhc3luYyBjb25uZWN0KHBhcmFtcz86IENvbm5lY3Rpb25QYXJhbXMpOiBQcm9taXNlPENvbm5lY3Rpb25SZXN1bHQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVNvY2tldCgpO1xyXG4gICAgICBhd2FpdCB0aGlzLnF1ZXJ5RGV2aWNlSW5mbygpO1xyXG5cclxuICAgICAgdGhpcy5faXNDb25uZWN0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGRldmljZUluZm86IHtcclxuICAgICAgICAgIG5hbWU6IHRoaXMuX3ZlcnNpb24gfHwgJ1NhbGVhZSBMb2dpYyBBbmFseXplcicsXHJcbiAgICAgICAgICB2ZXJzaW9uOiB0aGlzLl92ZXJzaW9uID8/IHVuZGVmaW5lZCxcclxuICAgICAgICAgIHR5cGU6IHRoaXMuZHJpdmVyVHlwZSxcclxuICAgICAgICAgIGNvbm5lY3Rpb25QYXRoOiBgJHt0aGlzLl9ob3N0fToke3RoaXMuX3BvcnR9YCxcclxuICAgICAgICAgIGlzTmV0d29yazogdHJ1ZSxcclxuICAgICAgICAgIGNhcGFiaWxpdGllczogdGhpcy5idWlsZENhcGFiaWxpdGllcygpXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn6L+e5o6l5aSx6LSlJ1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pat5byA6L+e5o6lXHJcbiAgICovXHJcbiAgYXN5bmMgZGlzY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMuX2lzQ29ubmVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKHRoaXMuX3NvY2tldCkge1xyXG4gICAgICB0aGlzLl9zb2NrZXQuZGVzdHJveSgpO1xyXG4gICAgICB0aGlzLl9zb2NrZXQgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZGV2aWNlSWQgPSBudWxsO1xyXG4gICAgdGhpcy5fY3VycmVudENhcHR1cmVJZCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5borr7lpIfnirbmgIFcclxuICAgKi9cclxuICBhc3luYyBnZXRTdGF0dXMoKTogUHJvbWlzZTxEZXZpY2VTdGF0dXM+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLl9pc0Nvbm5lY3RlZCxcclxuICAgICAgaXNDYXB0dXJpbmc6IHRoaXMuX2NhcHR1cmluZyxcclxuICAgICAgYmF0dGVyeVZvbHRhZ2U6ICdOL0EnIC8vIFNhbGVhZSBMb2dpY+mAmuW4uOaYr1VTQuS+m+eUtVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW8gOWni+mHh+mbhlxyXG4gICAqL1xyXG4gIGFzeW5jIHN0YXJ0Q2FwdHVyZShcclxuICAgIHNlc3Npb246IENhcHR1cmVTZXNzaW9uLFxyXG4gICAgY2FwdHVyZUNvbXBsZXRlZEhhbmRsZXI/OiBDYXB0dXJlQ29tcGxldGVkSGFuZGxlclxyXG4gICk6IFByb21pc2U8Q2FwdHVyZUVycm9yPiB7XHJcbiAgICBpZiAodGhpcy5fY2FwdHVyaW5nKSB7XHJcbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuQnVzeTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuX2lzQ29ubmVjdGVkIHx8ICF0aGlzLl9zb2NrZXQpIHtcclxuICAgICAgcmV0dXJuIENhcHR1cmVFcnJvci5IYXJkd2FyZUVycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuX2NhcHR1cmluZyA9IHRydWU7XHJcblxyXG4gICAgICAvLyDorr7nva7mjZXojrfphY3nva5cclxuICAgICAgYXdhaXQgdGhpcy5jb25maWd1cmVDYXB0dXJlU2V0dGluZ3Moc2Vzc2lvbik7XHJcblxyXG4gICAgICAvLyDlvIDlp4vph4fpm4ZcclxuICAgICAgY29uc3QgY2FwdHVyZUlkID0gYXdhaXQgdGhpcy5zdGFydFNhbGVhZUNhcHR1cmUoKTtcclxuICAgICAgdGhpcy5fY3VycmVudENhcHR1cmVJZCA9IGNhcHR1cmVJZDtcclxuXHJcbiAgICAgIC8vIOiuvue9ruaNleiOt+WujOaIkOWkhOeQhuWZqFxyXG4gICAgICBpZiAoY2FwdHVyZUNvbXBsZXRlZEhhbmRsZXIpIHtcclxuICAgICAgICB0aGlzLm9uY2UoJ2NhcHR1cmVDb21wbGV0ZWQnLCBjYXB0dXJlQ29tcGxldGVkSGFuZGxlcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOebkeaOp+mHh+mbhueKtuaAgVxyXG4gICAgICB0aGlzLm1vbml0b3JDYXB0dXJlUHJvZ3Jlc3Moc2Vzc2lvbik7XHJcblxyXG4gICAgICByZXR1cm4gQ2FwdHVyZUVycm9yLk5vbmU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLl9jYXB0dXJpbmcgPSBmYWxzZTtcclxuICAgICAgY29uc29sZS5lcnJvcignU2FsZWFl6YeH6ZuG5ZCv5Yqo5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIENhcHR1cmVFcnJvci5VbmV4cGVjdGVkRXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgZzmraLph4fpm4ZcclxuICAgKi9cclxuICBhc3luYyBzdG9wQ2FwdHVyZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGlmICghdGhpcy5fY2FwdHVyaW5nKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh0aGlzLl9jdXJyZW50Q2FwdHVyZUlkKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kQ29tbWFuZCh7XHJcbiAgICAgICAgICBjb21tYW5kOiAnU1RPUF9DQVBUVVJFJyxcclxuICAgICAgICAgIGNhcHR1cmVfaWQ6IHRoaXMuX2N1cnJlbnRDYXB0dXJlSWRcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuX2N1cnJlbnRDYXB0dXJlSWQgPSBudWxsO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+WBnOatolNhbGVhZemHh+mbhuWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOi/m+WFpeW8leWvvOWKoOi9veeoi+W6j+aooeW8j++8iFNhbGVhZeS4jeaUr+aMge+8iVxyXG4gICAqL1xyXG4gIGFzeW5jIGVudGVyQm9vdGxvYWRlcigpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHJldHVybiBmYWxzZTsgLy8gU2FsZWFlIExvZ2lj5LiN5pSv5oyB5byV5a+85Yqg6L2956iL5bqP5qih5byPXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJZTb2NrZXTov57mjqVcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVTb2NrZXQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLl9zb2NrZXQgPSBuZXcgU29ja2V0KCk7XHJcblxyXG4gICAgICB0aGlzLl9zb2NrZXQuY29ubmVjdCh0aGlzLl9wb3J0LCB0aGlzLl9ob3N0LCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYOW3sui/nuaOpeWIsFNhbGVhZSBMb2dpYyBBUEk6ICR7dGhpcy5faG9zdH06JHt0aGlzLl9wb3J0fWApO1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLl9zb2NrZXQub24oJ2Vycm9yJywgZXJyb3IgPT4ge1xyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFNvY2tldOi/nuaOpeWksei0pTogJHtlcnJvci5tZXNzYWdlfWApKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLl9zb2NrZXQub24oJ2Nsb3NlJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lzQ29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NhbGVhZSBMb2dpY+i/nuaOpeW3suWFs+mXrScpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5p+l6K+i6K6+5aSH5L+h5oGvXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBxdWVyeURldmljZUluZm8oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDojrflj5bov57mjqXnmoTorr7lpIfliJfooahcclxuICAgICAgY29uc3QgZGV2aWNlc1Jlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ29tbWFuZCh7IGNvbW1hbmQ6ICdHRVRfQ09OTkVDVEVEX0RFVklDRVMnIH0pO1xyXG4gICAgICBcclxuICAgICAgaWYgKGRldmljZXNSZXNwb25zZS5jb25uZWN0ZWRfZGV2aWNlcyAmJiBkZXZpY2VzUmVzcG9uc2UuY29ubmVjdGVkX2RldmljZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGRldmljZSA9IGRldmljZXNSZXNwb25zZS5jb25uZWN0ZWRfZGV2aWNlc1swXTtcclxuICAgICAgICB0aGlzLl9kZXZpY2VJZCA9IGRldmljZS5kZXZpY2VfaWQ7XHJcbiAgICAgICAgdGhpcy5fdmVyc2lvbiA9IGBTYWxlYWUgTG9naWMgJHtkZXZpY2UuZGV2aWNlX3R5cGV9YDtcclxuICAgICAgICBcclxuICAgICAgICAvLyDmoLnmja7orr7lpIfnsbvlnovorr7nva7pgJrpgZPmlbDlkozpopHnjodcclxuICAgICAgICB0aGlzLnNldERldmljZUNhcGFiaWxpdGllcyhkZXZpY2UuZGV2aWNlX3R5cGUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign5pyq5Y+R546w6L+e5o6l55qEU2FsZWFlIExvZ2lj6K6+5aSHJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOiOt+WPluivpue7hueahOiuvuWkh+iDveWKm+S/oeaBr1xyXG4gICAgICBpZiAodGhpcy5fZGV2aWNlSWQpIHtcclxuICAgICAgICBjb25zdCBjYXBhYmlsaXRpZXNSZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENvbW1hbmQoe1xyXG4gICAgICAgICAgY29tbWFuZDogJ0dFVF9ERVZJQ0VfQ0FQQUJJTElUSUVTJyxcclxuICAgICAgICAgIGRldmljZV9pZDogdGhpcy5fZGV2aWNlSWRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGNhcGFiaWxpdGllc1Jlc3BvbnNlLmNhcGFiaWxpdGllcykge1xyXG4gICAgICAgICAgdGhpcy5wYXJzZURldmljZUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNSZXNwb25zZS5jYXBhYmlsaXRpZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGDmn6Xor6JTYWxlYWXorr7lpIfkv6Hmga/lpLHotKU6ICR7ZXJyb3J9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmoLnmja7orr7lpIfnsbvlnovorr7nva7og73lipvlj4LmlbBcclxuICAgKi9cclxuICBwcml2YXRlIHNldERldmljZUNhcGFiaWxpdGllcyhkZXZpY2VUeXBlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIC8vIOagueaNrlNhbGVhZSBMb2dpY+iuvuWkh+exu+Wei+iuvue9rum7mOiupOWPguaVsFxyXG4gICAgc3dpdGNoIChkZXZpY2VUeXBlLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgY2FzZSAnbG9naWMgNCc6XHJcbiAgICAgICAgdGhpcy5fY2hhbm5lbENvdW50ID0gNDtcclxuICAgICAgICB0aGlzLl9tYXhGcmVxdWVuY3kgPSAxMjUwMDAwMDsgLy8gMTIuNU1IelxyXG4gICAgICAgIHRoaXMuX2JsYXN0RnJlcXVlbmN5ID0gMjUwMDAwMDA7IC8vIDI1TUh6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xvZ2ljIDgnOlxyXG4gICAgICAgIHRoaXMuX2NoYW5uZWxDb3VudCA9IDg7XHJcbiAgICAgICAgdGhpcy5fbWF4RnJlcXVlbmN5ID0gMTAwMDAwMDAwOyAvLyAxMDBNSHpcclxuICAgICAgICB0aGlzLl9ibGFzdEZyZXF1ZW5jeSA9IDUwMDAwMDAwMDsgLy8gNTAwTUh6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xvZ2ljIDE2JzpcclxuICAgICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSAxNjtcclxuICAgICAgICB0aGlzLl9tYXhGcmVxdWVuY3kgPSAxMDAwMDAwMDA7IC8vIDEwME1IelxyXG4gICAgICAgIHRoaXMuX2JsYXN0RnJlcXVlbmN5ID0gNTAwMDAwMDAwOyAvLyA1MDBNSHpcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbG9naWMgcHJvIDgnOlxyXG4gICAgICAgIHRoaXMuX2NoYW5uZWxDb3VudCA9IDg7XHJcbiAgICAgICAgdGhpcy5fbWF4RnJlcXVlbmN5ID0gNTAwMDAwMDAwOyAvLyA1MDBNSHpcclxuICAgICAgICB0aGlzLl9ibGFzdEZyZXF1ZW5jeSA9IDEwMDAwMDAwMDA7IC8vIDFHSHpcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbG9naWMgcHJvIDE2JzpcclxuICAgICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSAxNjtcclxuICAgICAgICB0aGlzLl9tYXhGcmVxdWVuY3kgPSA1MDAwMDAwMDA7IC8vIDUwME1IelxyXG4gICAgICAgIHRoaXMuX2JsYXN0RnJlcXVlbmN5ID0gMTAwMDAwMDAwMDsgLy8gMUdIelxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRoaXMuX2NoYW5uZWxDb3VudCA9IDg7XHJcbiAgICAgICAgdGhpcy5fbWF4RnJlcXVlbmN5ID0gMTAwMDAwMDAwO1xyXG4gICAgICAgIHRoaXMuX2JsYXN0RnJlcXVlbmN5ID0gNTAwMDAwMDAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kej5p6Q6K6+5aSH6IO95Yqb5L+h5oGvXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwYXJzZURldmljZUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXM6IGFueSk6IHZvaWQge1xyXG4gICAgaWYgKGNhcGFiaWxpdGllcy5kaWdpdGFsX2NoYW5uZWxzKSB7XHJcbiAgICAgIHRoaXMuX2NoYW5uZWxDb3VudCA9IGNhcGFiaWxpdGllcy5kaWdpdGFsX2NoYW5uZWxzLmxlbmd0aDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGNhcGFiaWxpdGllcy5zdXBwb3J0ZWRfc2FtcGxlX3JhdGVzKSB7XHJcbiAgICAgIGNvbnN0IHJhdGVzID0gY2FwYWJpbGl0aWVzLnN1cHBvcnRlZF9zYW1wbGVfcmF0ZXM7XHJcbiAgICAgIHRoaXMuX21heEZyZXF1ZW5jeSA9IE1hdGgubWF4KC4uLnJhdGVzKTtcclxuICAgICAgdGhpcy5fYmxhc3RGcmVxdWVuY3kgPSB0aGlzLl9tYXhGcmVxdWVuY3k7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNhcGFiaWxpdGllcy5tZW1vcnlfc2l6ZSkge1xyXG4gICAgICB0aGlzLl9idWZmZXJTaXplID0gY2FwYWJpbGl0aWVzLm1lbW9yeV9zaXplO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YWN572u6YeH6ZuG6K6+572uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBjb25maWd1cmVDYXB0dXJlU2V0dGluZ3Moc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGlmICghdGhpcy5fZGV2aWNlSWQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCforr7lpIdJROacquiuvue9ricpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmFjee9ruaVsOWtl+mAmumBk1xyXG4gICAgY29uc3QgZGlnaXRhbENoYW5uZWxzID0gc2Vzc2lvbi5jYXB0dXJlQ2hhbm5lbHMubWFwKGNoID0+ICh7XHJcbiAgICAgIGluZGV4OiBjaC5jaGFubmVsTnVtYmVyLFxyXG4gICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICBsYWJlbDogY2guY2hhbm5lbE5hbWUgfHwgYENoYW5uZWwgJHtjaC5jaGFubmVsTnVtYmVyICsgMX1gXHJcbiAgICB9KSk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5zZW5kQ29tbWFuZCh7XHJcbiAgICAgIGNvbW1hbmQ6ICdTRVRfQ0FQVFVSRV9DT05GSUdVUkFUSU9OJyxcclxuICAgICAgZGV2aWNlX2lkOiB0aGlzLl9kZXZpY2VJZCxcclxuICAgICAgY29uZmlndXJhdGlvbjoge1xyXG4gICAgICAgIGRpZ2l0YWxfY2hhbm5lbHM6IGRpZ2l0YWxDaGFubmVscyxcclxuICAgICAgICBzYW1wbGVfcmF0ZTogc2Vzc2lvbi5mcmVxdWVuY3ksXHJcbiAgICAgICAgY2FwdHVyZV9tb2RlOiB0aGlzLmdldFNhbGVhZUNhcHR1cmVNb2RlKHNlc3Npb24pLFxyXG4gICAgICAgIHRyaWdnZXJfc2V0dGluZ3M6IHRoaXMuYnVpbGRUcmlnZ2VyU2V0dGluZ3Moc2Vzc2lvbilcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5ZTYWxlYWXph4fpm4bmqKHlvI9cclxuICAgKi9cclxuICBwcml2YXRlIGdldFNhbGVhZUNhcHR1cmVNb2RlKHNlc3Npb246IENhcHR1cmVTZXNzaW9uKTogc3RyaW5nIHtcclxuICAgIC8vIFNhbGVhZSBMb2dpYyAy55qE6YeH6ZuG5qih5byPXHJcbiAgICBpZiAoc2Vzc2lvbi5tZWFzdXJlQnVyc3RzIHx8IHNlc3Npb24ubG9vcENvdW50ID4gMCkge1xyXG4gICAgICByZXR1cm4gJ0xPT1BJTkcnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICdOT1JNQUwnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5p6E5bu66Kem5Y+R6K6+572uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBidWlsZFRyaWdnZXJTZXR0aW5ncyhzZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbik6IGFueSB7XHJcbiAgICBjb25zdCB0cmlnZ2VycyA9IFtdO1xyXG5cclxuICAgIC8vIOWfuuS6juWOn+Wni+inpuWPkeexu+Wei+aehOW7ulNhbGVhZeinpuWPkeiuvue9rlxyXG4gICAgaWYgKHNlc3Npb24udHJpZ2dlclR5cGUgIT09IHVuZGVmaW5lZCAmJiBzZXNzaW9uLnRyaWdnZXJDaGFubmVsICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdHJpZ2dlcnMucHVzaCh7XHJcbiAgICAgICAgY2hhbm5lbF9pbmRleDogc2Vzc2lvbi50cmlnZ2VyQ2hhbm5lbCxcclxuICAgICAgICB0cmlnZ2VyX3R5cGU6IHNlc3Npb24udHJpZ2dlckludmVydGVkID8gJ0ZBTExJTkdfRURHRScgOiAnUklTSU5HX0VER0UnLFxyXG4gICAgICAgIG1pbmltdW1fcHVsc2Vfd2lkdGhfc2Vjb25kczogMFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0cmlnZ2VycyxcclxuICAgICAgY2FwdHVyZV9tb2RlOiAnQUxXQVlTJyAvLyDlp4vnu4jmjZXojrfvvIzmiJbmoLnmja7op6blj5HmnaHku7bosIPmlbRcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlvIDlp4tTYWxlYWXph4fpm4ZcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHN0YXJ0U2FsZWFlQ2FwdHVyZSgpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDb21tYW5kKHtcclxuICAgICAgY29tbWFuZDogJ1NUQVJUX0NBUFRVUkUnLFxyXG4gICAgICBkZXZpY2VfaWQ6IHRoaXMuX2RldmljZUlkXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLmNhcHR1cmVfaWQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTYWxlYWXph4fpm4blkK/liqjlpLHotKXvvJrmnKrmlLbliLBjYXB0dXJlX2lkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3BvbnNlLmNhcHR1cmVfaWQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnm5Hmjqfph4fpm4bov5vluqZcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIG1vbml0b3JDYXB0dXJlUHJvZ3Jlc3Moc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IGNoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9jdXJyZW50Q2FwdHVyZUlkIHx8ICF0aGlzLl9jYXB0dXJpbmcpIHtcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tJbnRlcnZhbCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzdGF0dXNSZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENvbW1hbmQoe1xyXG4gICAgICAgICAgY29tbWFuZDogJ0dFVF9DQVBUVVJFX1NUQVRVUycsXHJcbiAgICAgICAgICBjYXB0dXJlX2lkOiB0aGlzLl9jdXJyZW50Q2FwdHVyZUlkXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChzdGF0dXNSZXNwb25zZS5zdGF0dXMgPT09ICdDT01QTEVURScpIHtcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tJbnRlcnZhbCk7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnByb2Nlc3NDYXB0dXJlUmVzdWx0cyhzZXNzaW9uKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1c1Jlc3BvbnNlLnN0YXR1cyA9PT0gJ0VSUk9SJykge1xyXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChjaGVja0ludGVydmFsKTtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlQ2FwdHVyZUVycm9yKHNlc3Npb24sIHN0YXR1c1Jlc3BvbnNlLmVycm9yX21lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKGNoZWNrSW50ZXJ2YWwpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2FwdHVyZUVycm9yKHNlc3Npb24sIGDnm5Hmjqfph4fpm4bov5vluqblpLHotKU6ICR7ZXJyb3J9YCk7XHJcbiAgICAgIH1cclxuICAgIH0sIDEwMCk7IC8vIOavjzEwMG1z5qOA5p+l5LiA5qyh54q25oCBXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIbph4fpm4bnu5PmnpxcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NDYXB0dXJlUmVzdWx0cyhzZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g6I635Y+W6YeH6ZuG5pWw5o2uXHJcbiAgICAgIGNvbnN0IGRhdGFSZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENvbW1hbmQoe1xyXG4gICAgICAgIGNvbW1hbmQ6ICdHRVRfQ0FQVFVSRV9EQVRBJyxcclxuICAgICAgICBjYXB0dXJlX2lkOiB0aGlzLl9jdXJyZW50Q2FwdHVyZUlkLFxyXG4gICAgICAgIGZvcm1hdDogJ0JJTkFSWSdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDop6PmnpDmlbDmja7liLBzZXNzaW9uLmNhcHR1cmVDaGFubmVsc1xyXG4gICAgICB0aGlzLnBhcnNlU2FsZWFlRGF0YShzZXNzaW9uLCBkYXRhUmVzcG9uc2UpO1xyXG5cclxuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuX2N1cnJlbnRDYXB0dXJlSWQgPSBudWxsO1xyXG5cclxuICAgICAgY29uc3QgZXZlbnRBcmdzOiBDYXB0dXJlRXZlbnRBcmdzID0ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgc2Vzc2lvblxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5lbWl0Q2FwdHVyZUNvbXBsZXRlZChldmVudEFyZ3MpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVDYXB0dXJlRXJyb3Ioc2Vzc2lvbiwgYOWkhOeQhumHh+mbhue7k+aenOWksei0pTogJHtlcnJvcn1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOino+aekFNhbGVhZeaVsOaNruagvOW8j1xyXG4gICAqL1xyXG4gIHByaXZhdGUgcGFyc2VTYWxlYWVEYXRhKHNlc3Npb246IENhcHR1cmVTZXNzaW9uLCBkYXRhUmVzcG9uc2U6IGFueSk6IHZvaWQge1xyXG4gICAgLy8gU2FsZWFlIExvZ2ljIDIgQVBJ6L+U5Zue55qE5pWw5o2u5qC85byP5aSE55CGXHJcbiAgICBpZiAoZGF0YVJlc3BvbnNlLmRpZ2l0YWxfc2FtcGxlcykge1xyXG4gICAgICBjb25zdCBzYW1wbGVzID0gZGF0YVJlc3BvbnNlLmRpZ2l0YWxfc2FtcGxlcztcclxuICAgICAgXHJcbiAgICAgIGZvciAobGV0IGNoYW5uZWxJbmRleCA9IDA7IGNoYW5uZWxJbmRleCA8IHNlc3Npb24uY2FwdHVyZUNoYW5uZWxzLmxlbmd0aDsgY2hhbm5lbEluZGV4KyspIHtcclxuICAgICAgICBjb25zdCBjaGFubmVsID0gc2Vzc2lvbi5jYXB0dXJlQ2hhbm5lbHNbY2hhbm5lbEluZGV4XTtcclxuICAgICAgICBjb25zdCBjaGFubmVsRGF0YSA9IHNhbXBsZXNbY2hhbm5lbC5jaGFubmVsTnVtYmVyXTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoY2hhbm5lbERhdGEgJiYgY2hhbm5lbERhdGEuc2FtcGxlcykge1xyXG4gICAgICAgICAgLy8g6L2s5o2iU2FsZWFl55qE5pe26Ze05bqP5YiX5pWw5o2u5Li65qC35pys5pWw57uEXHJcbiAgICAgICAgICBjaGFubmVsLnNhbXBsZXMgPSB0aGlzLmNvbnZlcnRTYWxlYWVUaW1lU2VyaWVzVG9TYW1wbGVzKFxyXG4gICAgICAgICAgICBjaGFubmVsRGF0YS5zYW1wbGVzLFxyXG4gICAgICAgICAgICBjaGFubmVsRGF0YS5zYW1wbGVfcmF0ZSB8fCBzZXNzaW9uLmZyZXF1ZW5jeVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOi9rOaNolNhbGVhZeaXtumXtOW6j+WIl+aVsOaNruS4uuagt+acrOaVsOe7hFxyXG4gICAqL1xyXG4gIHByaXZhdGUgY29udmVydFNhbGVhZVRpbWVTZXJpZXNUb1NhbXBsZXMoXHJcbiAgICB0aW1lU2VyaWVzOiBBcnJheTx7IHRpbWU6IG51bWJlcjsgdmFsdWU6IGJvb2xlYW4gfT4sXHJcbiAgICBzYW1wbGVSYXRlOiBudW1iZXJcclxuICApOiBVaW50OEFycmF5IHtcclxuICAgIGlmICh0aW1lU2VyaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO1xyXG5cclxuICAgIC8vIOiuoeeul+aAu+agt+acrOaVsFxyXG4gICAgY29uc3QgbGFzdFRpbWUgPSB0aW1lU2VyaWVzW3RpbWVTZXJpZXMubGVuZ3RoIC0gMV0udGltZTtcclxuICAgIGNvbnN0IHRvdGFsU2FtcGxlcyA9IE1hdGguY2VpbChsYXN0VGltZSAqIHNhbXBsZVJhdGUpICsgMTtcclxuICAgIGNvbnN0IHNhbXBsZXMgPSBuZXcgVWludDhBcnJheSh0b3RhbFNhbXBsZXMpO1xyXG5cclxuICAgIC8vIOWhq+WFheagt+acrOaVsOaNrlxyXG4gICAgbGV0IGN1cnJlbnRWYWx1ZSA9IDA7XHJcbiAgICBsZXQgdGltZVNlcmllc0luZGV4ID0gMDtcclxuXHJcbiAgICBmb3IgKGxldCBzYW1wbGVJbmRleCA9IDA7IHNhbXBsZUluZGV4IDwgdG90YWxTYW1wbGVzOyBzYW1wbGVJbmRleCsrKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gc2FtcGxlSW5kZXggLyBzYW1wbGVSYXRlO1xyXG5cclxuICAgICAgLy8g5qOA5p+l5piv5ZCm6ZyA6KaB5pu05paw5b2T5YmN5YC8XHJcbiAgICAgIHdoaWxlICh0aW1lU2VyaWVzSW5kZXggPCB0aW1lU2VyaWVzLmxlbmd0aCAmJiBcclxuICAgICAgICAgICAgIHRpbWVTZXJpZXNbdGltZVNlcmllc0luZGV4XS50aW1lIDw9IGN1cnJlbnRUaW1lKSB7XHJcbiAgICAgICAgY3VycmVudFZhbHVlID0gdGltZVNlcmllc1t0aW1lU2VyaWVzSW5kZXhdLnZhbHVlID8gMSA6IDA7XHJcbiAgICAgICAgdGltZVNlcmllc0luZGV4Kys7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNhbXBsZXNbc2FtcGxlSW5kZXhdID0gY3VycmVudFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzYW1wbGVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG6YeH6ZuG6ZSZ6K+vXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVDYXB0dXJlRXJyb3Ioc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24sIGVycm9yTWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLl9jYXB0dXJpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuX2N1cnJlbnRDYXB0dXJlSWQgPSBudWxsO1xyXG5cclxuICAgIGNvbnNvbGUuZXJyb3IoJ1NhbGVhZemHh+mbhumUmeivrzonLCBlcnJvck1lc3NhZ2UpO1xyXG5cclxuICAgIGNvbnN0IGV2ZW50QXJnczogQ2FwdHVyZUV2ZW50QXJncyA9IHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIHNlc3Npb25cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5lbWl0Q2FwdHVyZUNvbXBsZXRlZChldmVudEFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+R6YCB5ZG95Luk5YiwU2FsZWFlIExvZ2ljIEFQSVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgc2VuZENvbW1hbmQoY29tbWFuZDogYW55KTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5fc29ja2V0KSB7XHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignU29ja2V05pyq6L+e5o6lJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY29tbWFuZFN0ciA9IEpTT04uc3RyaW5naWZ5KGNvbW1hbmQpICsgJ1xcbic7XHJcbiAgICAgIFxyXG4gICAgICAvLyDorr7nva7lk43lupTlpITnkIblmahcclxuICAgICAgY29uc3QgcmVzcG9uc2VIYW5kbGVyID0gKGRhdGE6IEJ1ZmZlcikgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UoZGF0YS50b1N0cmluZygpKTtcclxuICAgICAgICAgIHRoaXMuX3NvY2tldCEub2ZmKCdkYXRhJywgcmVzcG9uc2VIYW5kbGVyKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3JfbWVzc2FnZSB8fCAn5ZG95Luk5omn6KGM5aSx6LSlJykpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYOino+aekOWTjeW6lOWksei0pTogJHtlcnJvcn1gKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5fc29ja2V0Lm9uY2UoJ2RhdGEnLCByZXNwb25zZUhhbmRsZXIpO1xyXG5cclxuICAgICAgLy8g5Y+R6YCB5ZG95LukXHJcbiAgICAgIHRoaXMuX3NvY2tldC53cml0ZShjb21tYW5kU3RyLCBlcnJvciA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKGDlj5HpgIHlkb3ku6TlpLHotKU6ICR7ZXJyb3IubWVzc2FnZX1gKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIOiuvue9rui2heaXtlxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLl9zb2NrZXQhLm9mZignZGF0YScsIHJlc3BvbnNlSGFuZGxlcik7XHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcign5ZG95Luk5omn6KGM6LaF5pe2JykpO1xyXG4gICAgICB9LCAxMDAwMCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaehOW7uuehrOS7tuiDveWKm+aPj+i/sFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYnVpbGRDYXBhYmlsaXRpZXMoKTogYW55IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNoYW5uZWxzOiB7XHJcbiAgICAgICAgZGlnaXRhbDogdGhpcy5fY2hhbm5lbENvdW50LFxyXG4gICAgICAgIG1heFZvbHRhZ2U6IDUuMCxcclxuICAgICAgICBpbnB1dEltcGVkYW5jZTogMTAwMDAwMFxyXG4gICAgICB9LFxyXG4gICAgICBzYW1wbGluZzoge1xyXG4gICAgICAgIG1heFJhdGU6IHRoaXMuX21heEZyZXF1ZW5jeSxcclxuICAgICAgICBtaW5SYXRlOiB0aGlzLm1pbkZyZXF1ZW5jeSxcclxuICAgICAgICBzdXBwb3J0ZWRSYXRlczogW3RoaXMuX21heEZyZXF1ZW5jeSwgdGhpcy5fYmxhc3RGcmVxdWVuY3ldLFxyXG4gICAgICAgIGJ1ZmZlclNpemU6IHRoaXMuX2J1ZmZlclNpemUsXHJcbiAgICAgICAgc3RyZWFtaW5nU3VwcG9ydDogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICB0cmlnZ2Vyczoge1xyXG4gICAgICAgIHR5cGVzOiBbMCwgMV0sIC8vIEVkZ2UgdHJpZ2dlcnMgcHJpbWFyaWx5XHJcbiAgICAgICAgbWF4Q2hhbm5lbHM6IHRoaXMuX2NoYW5uZWxDb3VudCxcclxuICAgICAgICBwYXR0ZXJuV2lkdGg6IHRoaXMuX2NoYW5uZWxDb3VudCxcclxuICAgICAgICBzZXF1ZW50aWFsU3VwcG9ydDogdHJ1ZSxcclxuICAgICAgICBjb25kaXRpb25zOiBbJ3Jpc2luZycsICdmYWxsaW5nJywgJ2hpZ2gnLCAnbG93JywgJ2NoYW5nZSddXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbm5lY3Rpdml0eToge1xyXG4gICAgICAgIGludGVyZmFjZXM6IFsndXNiJ10sXHJcbiAgICAgICAgcHJvdG9jb2xzOiBbJ3NhbGVhZV9hcGknXVxyXG4gICAgICB9LFxyXG4gICAgICBmZWF0dXJlczoge1xyXG4gICAgICAgIHNpZ25hbEdlbmVyYXRpb246IGZhbHNlLFxyXG4gICAgICAgIHBvd2VyU3VwcGx5OiBmYWxzZSxcclxuICAgICAgICB2b2x0YWdlTW9uaXRvcmluZzogZmFsc2VcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOi1hOa6kOa4heeQhlxyXG4gICAqL1xyXG4gIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/drivers/SaleaeLogicDriver.ts\n\n}");

/***/ }),

/***/ "./src/drivers/SigrokAdapter.ts":
/*!**************************************!*\
  !*** ./src/drivers/SigrokAdapter.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.SigrokAdapter = void 0;\nconst child_process_1 = __webpack_require__(/*! child_process */ \"child_process\");\nconst fs_1 = __webpack_require__(/*! fs */ \"fs\");\nconst path_1 = __webpack_require__(/*! path */ \"path\");\nconst os_1 = __webpack_require__(/*! os */ \"os\");\nconst AnalyzerDriverBase_1 = __webpack_require__(/*! ./AnalyzerDriverBase */ \"./src/drivers/AnalyzerDriverBase.ts\");\nconst AnalyzerTypes_1 = __webpack_require__(/*! ../models/AnalyzerTypes */ \"./src/models/AnalyzerTypes.ts\");\n/**\n * sigrok通用驱动适配器\n * 通过sigrok-cli命令行工具支持80+种硬件设备\n * 包括：fx2lafw, hantek-dso, rigol-ds, saleae-logic16, openbench-logic-sniffer等\n */\nclass SigrokAdapter extends AnalyzerDriverBase_1.AnalyzerDriverBase {\n    // 属性实现\n    get deviceVersion() {\n        return this._version;\n    }\n    get channelCount() {\n        return this._channelCount;\n    }\n    get maxFrequency() {\n        return this._maxFrequency;\n    }\n    get blastFrequency() {\n        return this._blastFrequency;\n    }\n    get bufferSize() {\n        return this._bufferSize;\n    }\n    get isNetwork() {\n        return false; // sigrok主要通过USB等本地接口\n    }\n    get isCapturing() {\n        return this._capturing;\n    }\n    get driverType() {\n        return AnalyzerTypes_1.AnalyzerDriverType.Serial; // 通过本地接口\n    }\n    constructor(deviceDriver = 'fx2lafw', deviceId, sigrokCliPath) {\n        super();\n        // 私有变量\n        this._capturing = false;\n        this._version = null;\n        this._channelCount = 8;\n        this._maxFrequency = 24000000; // 24MHz默认\n        this._blastFrequency = 100000000; // 100MHz默认\n        this._bufferSize = 2000000; // 2M样本默认\n        this._isConnected = false;\n        this._deviceDriver = '';\n        this._deviceId = '';\n        this._sigrokCliPath = 'sigrok-cli';\n        this._tempDir = '';\n        this._currentProcess = null;\n        this._deviceDriver = deviceDriver;\n        this._deviceId = deviceId || '';\n        this._sigrokCliPath = sigrokCliPath || 'sigrok-cli';\n        this._tempDir = (0, path_1.join)((0, os_1.tmpdir)(), `sigrok-${Date.now()}`);\n    }\n    /**\n     * 连接设备\n     */\n    async connect(params) {\n        try {\n            // 检查sigrok-cli是否可用\n            await this.checkSigrokCli();\n            // 扫描设备\n            const devices = await this.scanDevices();\n            if (devices.length === 0) {\n                throw new Error('未发现支持的sigrok设备');\n            }\n            // 选择设备\n            const selectedDevice = this.selectBestDevice(devices);\n            this._deviceId = selectedDevice.id;\n            this._deviceDriver = selectedDevice.driver;\n            // 查询设备信息\n            await this.queryDeviceInfo();\n            // 创建临时目录\n            await fs_1.promises.mkdir(this._tempDir, { recursive: true });\n            this._isConnected = true;\n            return {\n                success: true,\n                deviceInfo: {\n                    name: this._version || `Sigrok ${this._deviceDriver}`,\n                    version: this._version ?? undefined,\n                    type: this.driverType,\n                    connectionPath: `${this._deviceDriver}:${this._deviceId}`,\n                    isNetwork: false,\n                    capabilities: this.buildCapabilities()\n                }\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : '连接失败'\n            };\n        }\n    }\n    /**\n     * 断开连接\n     */\n    async disconnect() {\n        this._isConnected = false;\n        // 停止当前进程\n        if (this._currentProcess) {\n            this._currentProcess.kill('SIGTERM');\n            this._currentProcess = null;\n        }\n        // 清理临时目录\n        try {\n            await fs_1.promises.rm(this._tempDir, { recursive: true, force: true });\n        }\n        catch (error) {\n            console.warn('清理临时目录失败:', error);\n        }\n    }\n    /**\n     * 获取设备状态\n     */\n    async getStatus() {\n        return {\n            isConnected: this._isConnected,\n            isCapturing: this._capturing,\n            batteryVoltage: 'N/A' // sigrok设备通常不报告电池状态\n        };\n    }\n    /**\n     * 开始采集\n     */\n    async startCapture(session, captureCompletedHandler) {\n        if (this._capturing) {\n            return AnalyzerTypes_1.CaptureError.Busy;\n        }\n        if (!this._isConnected) {\n            return AnalyzerTypes_1.CaptureError.HardwareError;\n        }\n        try {\n            this._capturing = true;\n            // 设置捕获完成处理器\n            if (captureCompletedHandler) {\n                this.once('captureCompleted', captureCompletedHandler);\n            }\n            // 启动sigrok采集\n            await this.startSigrokCapture(session);\n            return AnalyzerTypes_1.CaptureError.None;\n        }\n        catch (error) {\n            this._capturing = false;\n            console.error('sigrok采集启动失败:', error);\n            return AnalyzerTypes_1.CaptureError.UnexpectedError;\n        }\n    }\n    /**\n     * 停止采集\n     */\n    async stopCapture() {\n        if (!this._capturing) {\n            return true;\n        }\n        try {\n            if (this._currentProcess) {\n                this._currentProcess.kill('SIGTERM');\n                this._currentProcess = null;\n            }\n            this._capturing = false;\n            return true;\n        }\n        catch (error) {\n            console.error('停止sigrok采集失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 进入引导加载程序模式（不支持）\n     */\n    async enterBootloader() {\n        return false; // sigrok设备通常不支持引导加载程序模式\n    }\n    /**\n     * 检查sigrok-cli是否可用\n     */\n    async checkSigrokCli() {\n        return new Promise((resolve, reject) => {\n            const process = (0, child_process_1.spawn)(this._sigrokCliPath, ['--version']);\n            let output = '';\n            process.stdout.on('data', (data) => {\n                output += data.toString();\n            });\n            process.on('close', (code) => {\n                if (code === 0) {\n                    console.log('sigrok-cli版本:', output.trim());\n                    resolve();\n                }\n                else {\n                    reject(new Error('sigrok-cli未安装或不可用。请安装sigrok软件包。'));\n                }\n            });\n            process.on('error', (error) => {\n                reject(new Error(`sigrok-cli执行失败: ${error.message}`));\n            });\n        });\n    }\n    /**\n     * 扫描sigrok设备\n     */\n    async scanDevices() {\n        return new Promise((resolve, reject) => {\n            const process = (0, child_process_1.spawn)(this._sigrokCliPath, ['--scan']);\n            let output = '';\n            process.stdout.on('data', (data) => {\n                output += data.toString();\n            });\n            process.on('close', (code) => {\n                if (code === 0) {\n                    const devices = this.parseScanOutput(output);\n                    resolve(devices);\n                }\n                else {\n                    reject(new Error('设备扫描失败'));\n                }\n            });\n            process.on('error', (error) => {\n                reject(new Error(`设备扫描执行失败: ${error.message}`));\n            });\n        });\n    }\n    /**\n     * 解析扫描输出\n     */\n    parseScanOutput(output) {\n        const devices = [];\n        const lines = output.split('\\\\n');\n        for (const line of lines) {\n            const trimmed = line.trim();\n            if (!trimmed || trimmed.startsWith('The following'))\n                continue;\n            // 解析格式: \"driver:conn=value - Description\"\n            const match = trimmed.match(/^([^:]+):([^-]+)\\\\s*-\\\\s*(.+)$/);\n            if (match) {\n                const driver = match[1].trim();\n                const connection = match[2].trim();\n                const description = match[3].trim();\n                devices.push({\n                    id: connection,\n                    driver: driver,\n                    description: description\n                });\n            }\n        }\n        return devices;\n    }\n    /**\n     * 选择最佳设备\n     */\n    selectBestDevice(devices) {\n        // 如果指定了设备驱动，优先选择\n        if (this._deviceDriver) {\n            const matchingDevice = devices.find(d => d.driver === this._deviceDriver);\n            if (matchingDevice) {\n                return matchingDevice;\n            }\n        }\n        // 如果指定了设备ID，优先选择\n        if (this._deviceId) {\n            const matchingDevice = devices.find(d => d.id.includes(this._deviceId));\n            if (matchingDevice) {\n                return matchingDevice;\n            }\n        }\n        // 否则选择第一个可用设备\n        return devices[0];\n    }\n    /**\n     * 查询设备信息\n     */\n    async queryDeviceInfo() {\n        try {\n            // 查询设备配置信息\n            const configOutput = await this.runSigrokCommand([\n                '--driver', this._deviceDriver,\n                '--conn', this._deviceId,\n                '--show'\n            ]);\n            this.parseDeviceConfig(configOutput);\n            // 设置设备版本信息\n            const driverInfo = SigrokAdapter.SIGROK_DRIVERS.get(this._deviceDriver);\n            if (driverInfo) {\n                this._version = driverInfo.name;\n                this._channelCount = driverInfo.channels;\n                this._maxFrequency = driverInfo.maxRate;\n                this._blastFrequency = driverInfo.maxRate * 2;\n            }\n        }\n        catch (error) {\n            console.warn('查询设备信息失败:', error);\n        }\n    }\n    /**\n     * 解析设备配置\n     */\n    parseDeviceConfig(output) {\n        const lines = output.split('\\\\n');\n        for (const line of lines) {\n            const trimmed = line.trim();\n            // 解析通道数\n            if (trimmed.includes('channels:')) {\n                const channelMatch = trimmed.match(/channels:\\\\s*(\\\\d+)/);\n                if (channelMatch) {\n                    this._channelCount = parseInt(channelMatch[1], 10);\n                }\n            }\n            // 解析采样率\n            if (trimmed.includes('samplerate:')) {\n                const rateMatch = trimmed.match(/samplerate:\\\\s*([0-9.]+)\\\\s*([kMG]?Hz)/);\n                if (rateMatch) {\n                    let rate = parseFloat(rateMatch[1]);\n                    const unit = rateMatch[2];\n                    switch (unit) {\n                        case 'kHz':\n                            rate *= 1000;\n                            break;\n                        case 'MHz':\n                            rate *= 1000000;\n                            break;\n                        case 'GHz':\n                            rate *= 1000000000;\n                            break;\n                    }\n                    this._maxFrequency = rate;\n                    this._blastFrequency = rate;\n                }\n            }\n            // 解析缓冲区大小\n            if (trimmed.includes('limit_samples:')) {\n                const sampleMatch = trimmed.match(/limit_samples:\\\\s*(\\\\d+)/);\n                if (sampleMatch) {\n                    this._bufferSize = parseInt(sampleMatch[1], 10);\n                }\n            }\n        }\n    }\n    /**\n     * 启动sigrok采集\n     */\n    async startSigrokCapture(session) {\n        const outputFile = (0, path_1.join)(this._tempDir, 'capture.sr');\n        const totalSamples = session.preTriggerSamples + session.postTriggerSamples;\n        // 构建sigrok-cli命令参数\n        const args = [\n            '--driver', this._deviceDriver,\n            '--conn', this._deviceId,\n            '--config', `samplerate=${session.frequency}`,\n            '--samples', totalSamples.toString(),\n            '--output-file', outputFile,\n            '--output-format', 'srzip'\n        ];\n        // 配置通道\n        const channels = session.captureChannels.map(ch => ch.channelNumber).join(',');\n        if (channels) {\n            args.push('--channels', channels);\n        }\n        // 配置触发\n        if (session.triggerType !== undefined && session.triggerChannel !== undefined) {\n            const triggerConfig = this.buildTriggerConfig(session);\n            if (triggerConfig) {\n                args.push('--triggers', triggerConfig);\n            }\n        }\n        console.log('启动sigrok采集:', this._sigrokCliPath, args.join(' '));\n        return new Promise((resolve, reject) => {\n            this._currentProcess = (0, child_process_1.spawn)(this._sigrokCliPath, args);\n            let errorOutput = '';\n            this._currentProcess.stdout?.on('data', (data) => {\n                console.log('sigrok输出:', data.toString());\n            });\n            this._currentProcess.stderr?.on('data', (data) => {\n                errorOutput += data.toString();\n            });\n            this._currentProcess.on('close', async (code) => {\n                this._currentProcess = null;\n                if (code === 0) {\n                    try {\n                        // 读取采集结果\n                        await this.processSigrokResults(session, outputFile);\n                        resolve();\n                    }\n                    catch (error) {\n                        reject(error);\n                    }\n                }\n                else {\n                    reject(new Error(`sigrok采集失败 (代码 ${code}): ${errorOutput}`));\n                }\n            });\n            this._currentProcess.on('error', (error) => {\n                this._currentProcess = null;\n                reject(new Error(`sigrok采集进程错误: ${error.message}`));\n            });\n        });\n    }\n    /**\n     * 构建触发配置\n     */\n    buildTriggerConfig(session) {\n        if (session.triggerChannel === undefined)\n            return null;\n        const channel = session.triggerChannel;\n        let trigger = '';\n        switch (session.triggerType) {\n            case 0: // Edge\n                trigger = session.triggerInverted ? `${channel}=f` : `${channel}=r`;\n                break;\n            case 1: // Complex/Pattern\n                if (session.triggerPattern !== undefined) {\n                    // 将模式转换为sigrok格式\n                    const pattern = session.triggerPattern.toString(2).padStart(16, '0');\n                    trigger = pattern.split('').map((bit, index) => bit === '1' ? `${index}=1` : bit === '0' ? `${index}=0` : '').filter(t => t).join(',');\n                }\n                break;\n            default:\n                trigger = `${channel}=r`; // 默认上升沿\n        }\n        return trigger;\n    }\n    /**\n     * 处理sigrok采集结果\n     */\n    async processSigrokResults(session, outputFile) {\n        try {\n            // 将.sr文件转换为CSV格式以便解析\n            const csvFile = (0, path_1.join)(this._tempDir, 'capture.csv');\n            await this.convertSrToCSV(outputFile, csvFile);\n            // 读取CSV数据\n            const csvData = await fs_1.promises.readFile(csvFile, 'utf-8');\n            const lines = csvData.split('\\\\n');\n            if (lines.length < 2) {\n                throw new Error('采集数据为空');\n            }\n            // 解析CSV头部（通道名称）\n            const headers = lines[0].split(',').map(h => h.trim());\n            const dataLines = lines.slice(1).filter(line => line.trim());\n            // 初始化通道数据\n            for (const channel of session.captureChannels) {\n                channel.samples = new Uint8Array(dataLines.length);\n            }\n            // 解析数据行\n            for (let rowIndex = 0; rowIndex < dataLines.length; rowIndex++) {\n                const values = dataLines[rowIndex].split(',');\n                for (const channel of session.captureChannels) {\n                    const channelName = `D${channel.channelNumber}`;\n                    const columnIndex = headers.indexOf(channelName);\n                    if (columnIndex >= 0 && columnIndex < values.length) {\n                        const value = values[columnIndex].trim();\n                        channel.samples[rowIndex] = value === '1' ? 1 : 0;\n                    }\n                }\n            }\n            this._capturing = false;\n            const eventArgs = {\n                success: true,\n                session\n            };\n            this.emitCaptureCompleted(eventArgs);\n        }\n        catch (error) {\n            this.handleCaptureError(session, `处理sigrok结果失败: ${error}`);\n        }\n    }\n    /**\n     * 将.sr文件转换为CSV格式\n     */\n    async convertSrToCSV(srFile, csvFile) {\n        return new Promise((resolve, reject) => {\n            const process = (0, child_process_1.spawn)(this._sigrokCliPath, [\n                '--input-file', srFile,\n                '--output-file', csvFile,\n                '--output-format', 'csv'\n            ]);\n            process.on('close', (code) => {\n                if (code === 0) {\n                    resolve();\n                }\n                else {\n                    reject(new Error(`转换为CSV失败 (代码 ${code})`));\n                }\n            });\n            process.on('error', (error) => {\n                reject(new Error(`CSV转换进程错误: ${error.message}`));\n            });\n        });\n    }\n    /**\n     * 处理采集错误\n     */\n    handleCaptureError(session, errorMessage) {\n        this._capturing = false;\n        console.error('sigrok采集错误:', errorMessage);\n        const eventArgs = {\n            success: false,\n            session\n        };\n        this.emitCaptureCompleted(eventArgs);\n    }\n    /**\n     * 运行sigrok命令\n     */\n    async runSigrokCommand(args) {\n        return new Promise((resolve, reject) => {\n            const process = (0, child_process_1.spawn)(this._sigrokCliPath, args);\n            let output = '';\n            let errorOutput = '';\n            process.stdout.on('data', (data) => {\n                output += data.toString();\n            });\n            process.stderr.on('data', (data) => {\n                errorOutput += data.toString();\n            });\n            process.on('close', (code) => {\n                if (code === 0) {\n                    resolve(output);\n                }\n                else {\n                    reject(new Error(`sigrok命令失败 (代码 ${code}): ${errorOutput}`));\n                }\n            });\n            process.on('error', (error) => {\n                reject(new Error(`sigrok命令执行错误: ${error.message}`));\n            });\n        });\n    }\n    /**\n     * 构建硬件能力描述\n     */\n    buildCapabilities() {\n        return {\n            channels: {\n                digital: this._channelCount,\n                maxVoltage: 5.0,\n                inputImpedance: 1000000\n            },\n            sampling: {\n                maxRate: this._maxFrequency,\n                minRate: this.minFrequency,\n                supportedRates: [this._maxFrequency, this._blastFrequency],\n                bufferSize: this._bufferSize,\n                streamingSupport: false\n            },\n            triggers: {\n                types: [0, 1],\n                maxChannels: this._channelCount,\n                patternWidth: this._channelCount,\n                sequentialSupport: false,\n                conditions: ['rising', 'falling', 'high', 'low', 'change']\n            },\n            connectivity: {\n                interfaces: ['usb', 'serial'],\n                protocols: ['sigrok']\n            },\n            features: {\n                signalGeneration: false,\n                powerSupply: false,\n                voltageMonitoring: false,\n                protocolDecoding: true // sigrok有强大的协议解码功能\n            }\n        };\n    }\n    /**\n     * 获取支持的设备列表\n     */\n    static getSupportedDevices() {\n        return Array.from(SigrokAdapter.SIGROK_DRIVERS.entries()).map(([driver, info]) => ({\n            driver,\n            name: info.name,\n            channels: info.channels,\n            maxRate: info.maxRate\n        }));\n    }\n    /**\n     * 资源清理\n     */\n    dispose() {\n        this.disconnect();\n        super.dispose();\n    }\n}\nexports.SigrokAdapter = SigrokAdapter;\n// sigrok支持的设备类型映射\nSigrokAdapter.SIGROK_DRIVERS = new Map([\n    // USB逻辑分析器\n    ['fx2lafw', { name: 'FX2 Logic Analyzer', channels: 16, maxRate: 24000000 }],\n    ['saleae-logic16', { name: 'Saleae Logic16', channels: 16, maxRate: 100000000 }],\n    ['openbench-logic-sniffer', { name: 'OpenBench Logic Sniffer', channels: 32, maxRate: 200000000 }],\n    ['kingst-la2016', { name: 'Kingst LA2016', channels: 16, maxRate: 200000000 }],\n    ['hantek-6022be', { name: 'Hantek 6022BE', channels: 2, maxRate: 48000000 }],\n    // 示波器的逻辑分析功能\n    ['rigol-ds', { name: 'Rigol DS Series', channels: 16, maxRate: 1000000000 }],\n    ['siglent-sds', { name: 'Siglent SDS Series', channels: 16, maxRate: 1000000000 }],\n    ['tek-mso', { name: 'Tektronix MSO Series', channels: 16, maxRate: 2500000000 }],\n    ['lecroy-logicstudio', { name: 'LeCroy LogicStudio', channels: 16, maxRate: 500000000 }],\n    // 其他专业设备\n    ['chronovu-la', { name: 'ChronoVu LA Series', channels: 32, maxRate: 200000000 }],\n    ['ikalogic-scanalogic2', { name: 'Ikalogic Scanalogic-2', channels: 4, maxRate: 20000000 }],\n    ['link-mso19', { name: 'Link MSO-19', channels: 16, maxRate: 200000000 }],\n    ['zeroplus-logic-cube', { name: 'Zeroplus Logic Cube', channels: 16, maxRate: 200000000 }]\n]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVMsRUFBRSxDQUFDO0lBQ2pGLENBQUMsc0JBQXNCLEVBQUUsRUFBRSxJQUFJLEVBQUUsdUJBQXVCLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLENBQUM7SUFDM0YsQ0FBQyxZQUFZLEVBQUUsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDO0lBQ3pFLENBQUMscUJBQXFCLEVBQUUsRUFBRSxJQUFJLEVBQUUscUJBQXFCLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLENBQUM7Q0FDM0YsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnNjb2RlLWxvZ2ljLWFuYWx5emVyLy4vc3JjL2RyaXZlcnMvU2lncm9rQWRhcHRlci50cz8zMmNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNwYXduLCBDaGlsZFByb2Nlc3MgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcclxuaW1wb3J0IHsgcHJvbWlzZXMgYXMgZnMgfSBmcm9tICdmcyc7XHJcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcclxuaW1wb3J0IHsgdG1wZGlyIH0gZnJvbSAnb3MnO1xyXG5pbXBvcnQgeyBBbmFseXplckRyaXZlckJhc2UgfSBmcm9tICcuL0FuYWx5emVyRHJpdmVyQmFzZSc7XHJcbmltcG9ydCB7XHJcbiAgQW5hbHl6ZXJEcml2ZXJUeXBlLFxyXG4gIENhcHR1cmVFcnJvcixcclxuICBDYXB0dXJlU2Vzc2lvbixcclxuICBDYXB0dXJlRXZlbnRBcmdzLFxyXG4gIENhcHR1cmVDb21wbGV0ZWRIYW5kbGVyLFxyXG4gIENvbm5lY3Rpb25QYXJhbXMsXHJcbiAgQ29ubmVjdGlvblJlc3VsdCxcclxuICBEZXZpY2VTdGF0dXMsXHJcbiAgQ2FwdHVyZU1vZGVcclxufSBmcm9tICcuLi9tb2RlbHMvQW5hbHl6ZXJUeXBlcyc7XHJcblxyXG4vKipcclxuICogc2lncm9r6YCa55So6amx5Yqo6YCC6YWN5ZmoXHJcbiAqIOmAmui/h3NpZ3Jvay1jbGnlkb3ku6TooYzlt6XlhbfmlK/mjIE4MCvnp43noazku7borr7lpIdcclxuICog5YyF5ous77yaZngybGFmdywgaGFudGVrLWRzbywgcmlnb2wtZHMsIHNhbGVhZS1sb2dpYzE2LCBvcGVuYmVuY2gtbG9naWMtc25pZmZlcuetiVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNpZ3Jva0FkYXB0ZXIgZXh0ZW5kcyBBbmFseXplckRyaXZlckJhc2Uge1xyXG4gIC8vIHNpZ3Jva+aUr+aMgeeahOiuvuWkh+exu+Wei+aYoOWwhFxyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFNJR1JPS19EUklWRVJTID0gbmV3IE1hcChbXHJcbiAgICAvLyBVU0LpgLvovpHliIbmnpDlmahcclxuICAgIFsnZngybGFmdycsIHsgbmFtZTogJ0ZYMiBMb2dpYyBBbmFseXplcicsIGNoYW5uZWxzOiAxNiwgbWF4UmF0ZTogMjQwMDAwMDAgfV0sXHJcbiAgICBbJ3NhbGVhZS1sb2dpYzE2JywgeyBuYW1lOiAnU2FsZWFlIExvZ2ljMTYnLCBjaGFubmVsczogMTYsIG1heFJhdGU6IDEwMDAwMDAwMCB9XSxcclxuICAgIFsnb3BlbmJlbmNoLWxvZ2ljLXNuaWZmZXInLCB7IG5hbWU6ICdPcGVuQmVuY2ggTG9naWMgU25pZmZlcicsIGNoYW5uZWxzOiAzMiwgbWF4UmF0ZTogMjAwMDAwMDAwIH1dLFxyXG4gICAgWydraW5nc3QtbGEyMDE2JywgeyBuYW1lOiAnS2luZ3N0IExBMjAxNicsIGNoYW5uZWxzOiAxNiwgbWF4UmF0ZTogMjAwMDAwMDAwIH1dLFxyXG4gICAgWydoYW50ZWstNjAyMmJlJywgeyBuYW1lOiAnSGFudGVrIDYwMjJCRScsIGNoYW5uZWxzOiAyLCBtYXhSYXRlOiA0ODAwMDAwMCB9XSxcclxuICAgIFxyXG4gICAgLy8g56S65rOi5Zmo55qE6YC76L6R5YiG5p6Q5Yqf6IO9XHJcbiAgICBbJ3JpZ29sLWRzJywgeyBuYW1lOiAnUmlnb2wgRFMgU2VyaWVzJywgY2hhbm5lbHM6IDE2LCBtYXhSYXRlOiAxMDAwMDAwMDAwIH1dLFxyXG4gICAgWydzaWdsZW50LXNkcycsIHsgbmFtZTogJ1NpZ2xlbnQgU0RTIFNlcmllcycsIGNoYW5uZWxzOiAxNiwgbWF4UmF0ZTogMTAwMDAwMDAwMCB9XSxcclxuICAgIFsndGVrLW1zbycsIHsgbmFtZTogJ1Rla3Ryb25peCBNU08gU2VyaWVzJywgY2hhbm5lbHM6IDE2LCBtYXhSYXRlOiAyNTAwMDAwMDAwIH1dLFxyXG4gICAgWydsZWNyb3ktbG9naWNzdHVkaW8nLCB7IG5hbWU6ICdMZUNyb3kgTG9naWNTdHVkaW8nLCBjaGFubmVsczogMTYsIG1heFJhdGU6IDUwMDAwMDAwMCB9XSxcclxuICAgIFxyXG4gICAgLy8g5YW25LuW5LiT5Lia6K6+5aSHXHJcbiAgICBbJ2Nocm9ub3Z1LWxhJywgeyBuYW1lOiAnQ2hyb25vVnUgTEEgU2VyaWVzJywgY2hhbm5lbHM6IDMyLCBtYXhSYXRlOiAyMDAwMDAwMDAgfV0sXHJcbiAgICBbJ2lrYWxvZ2ljLXNjYW5hbG9naWMyJywgeyBuYW1lOiAnSWthbG9naWMgU2NhbmFsb2dpYy0yJywgY2hhbm5lbHM6IDQsIG1heFJhdGU6IDIwMDAwMDAwIH1dLFxyXG4gICAgWydsaW5rLW1zbzE5JywgeyBuYW1lOiAnTGluayBNU08tMTknLCBjaGFubmVsczogMTYsIG1heFJhdGU6IDIwMDAwMDAwMCB9XSxcclxuICAgIFsnemVyb3BsdXMtbG9naWMtY3ViZScsIHsgbmFtZTogJ1plcm9wbHVzIExvZ2ljIEN1YmUnLCBjaGFubmVsczogMTYsIG1heFJhdGU6IDIwMDAwMDAwMCB9XVxyXG4gIF0pO1xyXG5cclxuICAvLyDlsZ7mgKflrp7njrBcclxuICBnZXQgZGV2aWNlVmVyc2lvbigpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLl92ZXJzaW9uO1xyXG4gIH1cclxuICBnZXQgY2hhbm5lbENvdW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2hhbm5lbENvdW50O1xyXG4gIH1cclxuICBnZXQgbWF4RnJlcXVlbmN5KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWF4RnJlcXVlbmN5O1xyXG4gIH1cclxuICBnZXQgYmxhc3RGcmVxdWVuY3koKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9ibGFzdEZyZXF1ZW5jeTtcclxuICB9XHJcbiAgZ2V0IGJ1ZmZlclNpemUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9idWZmZXJTaXplO1xyXG4gIH1cclxuICBnZXQgaXNOZXR3b3JrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBzaWdyb2vkuLvopoHpgJrov4dVU0LnrYnmnKzlnLDmjqXlj6NcclxuICB9XHJcbiAgZ2V0IGlzQ2FwdHVyaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcHR1cmluZztcclxuICB9XHJcbiAgZ2V0IGRyaXZlclR5cGUoKTogQW5hbHl6ZXJEcml2ZXJUeXBlIHtcclxuICAgIHJldHVybiBBbmFseXplckRyaXZlclR5cGUuU2VyaWFsOyAvLyDpgJrov4fmnKzlnLDmjqXlj6NcclxuICB9XHJcblxyXG4gIC8vIOengeacieWPmOmHj1xyXG4gIHByaXZhdGUgX2NhcHR1cmluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX3ZlcnNpb246IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgX2NoYW5uZWxDb3VudDogbnVtYmVyID0gODtcclxuICBwcml2YXRlIF9tYXhGcmVxdWVuY3k6IG51bWJlciA9IDI0MDAwMDAwOyAvLyAyNE1Ieum7mOiupFxyXG4gIHByaXZhdGUgX2JsYXN0RnJlcXVlbmN5OiBudW1iZXIgPSAxMDAwMDAwMDA7IC8vIDEwME1Ieum7mOiupFxyXG4gIHByaXZhdGUgX2J1ZmZlclNpemU6IG51bWJlciA9IDIwMDAwMDA7IC8vIDJN5qC35pys6buY6K6kXHJcbiAgcHJpdmF0ZSBfaXNDb25uZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIF9kZXZpY2VEcml2ZXI6IHN0cmluZyA9ICcnO1xyXG4gIHByaXZhdGUgX2RldmljZUlkOiBzdHJpbmcgPSAnJztcclxuICBwcml2YXRlIF9zaWdyb2tDbGlQYXRoOiBzdHJpbmcgPSAnc2lncm9rLWNsaSc7XHJcbiAgcHJpdmF0ZSBfdGVtcERpcjogc3RyaW5nID0gJyc7XHJcbiAgcHJpdmF0ZSBfY3VycmVudFByb2Nlc3M6IENoaWxkUHJvY2VzcyB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRldmljZURyaXZlcjogc3RyaW5nID0gJ2Z4MmxhZncnLFxyXG4gICAgZGV2aWNlSWQ/OiBzdHJpbmcsXHJcbiAgICBzaWdyb2tDbGlQYXRoPzogc3RyaW5nXHJcbiAgKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuX2RldmljZURyaXZlciA9IGRldmljZURyaXZlcjtcclxuICAgIHRoaXMuX2RldmljZUlkID0gZGV2aWNlSWQgfHwgJyc7XHJcbiAgICB0aGlzLl9zaWdyb2tDbGlQYXRoID0gc2lncm9rQ2xpUGF0aCB8fCAnc2lncm9rLWNsaSc7XHJcbiAgICB0aGlzLl90ZW1wRGlyID0gam9pbih0bXBkaXIoKSwgYHNpZ3Jvay0ke0RhdGUubm93KCl9YCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDov57mjqXorr7lpIdcclxuICAgKi9cclxuICBhc3luYyBjb25uZWN0KHBhcmFtcz86IENvbm5lY3Rpb25QYXJhbXMpOiBQcm9taXNlPENvbm5lY3Rpb25SZXN1bHQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOajgOafpXNpZ3Jvay1jbGnmmK/lkKblj6/nlKhcclxuICAgICAgYXdhaXQgdGhpcy5jaGVja1NpZ3Jva0NsaSgpO1xyXG5cclxuICAgICAgLy8g5omr5o+P6K6+5aSHXHJcbiAgICAgIGNvbnN0IGRldmljZXMgPSBhd2FpdCB0aGlzLnNjYW5EZXZpY2VzKCk7XHJcbiAgICAgIGlmIChkZXZpY2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign5pyq5Y+R546w5pSv5oyB55qEc2lncm9r6K6+5aSHJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOmAieaLqeiuvuWkh1xyXG4gICAgICBjb25zdCBzZWxlY3RlZERldmljZSA9IHRoaXMuc2VsZWN0QmVzdERldmljZShkZXZpY2VzKTtcclxuICAgICAgdGhpcy5fZGV2aWNlSWQgPSBzZWxlY3RlZERldmljZS5pZDtcclxuICAgICAgdGhpcy5fZGV2aWNlRHJpdmVyID0gc2VsZWN0ZWREZXZpY2UuZHJpdmVyO1xyXG5cclxuICAgICAgLy8g5p+l6K+i6K6+5aSH5L+h5oGvXHJcbiAgICAgIGF3YWl0IHRoaXMucXVlcnlEZXZpY2VJbmZvKCk7XHJcblxyXG4gICAgICAvLyDliJvlu7rkuLTml7bnm67lvZVcclxuICAgICAgYXdhaXQgZnMubWtkaXIodGhpcy5fdGVtcERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcblxyXG4gICAgICB0aGlzLl9pc0Nvbm5lY3RlZCA9IHRydWU7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGV2aWNlSW5mbzoge1xyXG4gICAgICAgICAgbmFtZTogdGhpcy5fdmVyc2lvbiB8fCBgU2lncm9rICR7dGhpcy5fZGV2aWNlRHJpdmVyfWAsXHJcbiAgICAgICAgICB2ZXJzaW9uOiB0aGlzLl92ZXJzaW9uID8/IHVuZGVmaW5lZCxcclxuICAgICAgICAgIHR5cGU6IHRoaXMuZHJpdmVyVHlwZSxcclxuICAgICAgICAgIGNvbm5lY3Rpb25QYXRoOiBgJHt0aGlzLl9kZXZpY2VEcml2ZXJ9OiR7dGhpcy5fZGV2aWNlSWR9YCxcclxuICAgICAgICAgIGlzTmV0d29yazogZmFsc2UsXHJcbiAgICAgICAgICBjYXBhYmlsaXRpZXM6IHRoaXMuYnVpbGRDYXBhYmlsaXRpZXMoKVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ+i/nuaOpeWksei0pSdcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaWreW8gOi/nuaOpVxyXG4gICAqL1xyXG4gIGFzeW5jIGRpc2Nvbm5lY3QoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0aGlzLl9pc0Nvbm5lY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIOWBnOatouW9k+WJjei/m+eoi1xyXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRQcm9jZXNzKSB7XHJcbiAgICAgIHRoaXMuX2N1cnJlbnRQcm9jZXNzLmtpbGwoJ1NJR1RFUk0nKTtcclxuICAgICAgdGhpcy5fY3VycmVudFByb2Nlc3MgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOa4heeQhuS4tOaXtuebruW9lVxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZnMucm0odGhpcy5fdGVtcERpciwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCfmuIXnkIbkuLTml7bnm67lvZXlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W6K6+5aSH54q25oCBXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0U3RhdHVzKCk6IFByb21pc2U8RGV2aWNlU3RhdHVzPiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc0Nvbm5lY3RlZDogdGhpcy5faXNDb25uZWN0ZWQsXHJcbiAgICAgIGlzQ2FwdHVyaW5nOiB0aGlzLl9jYXB0dXJpbmcsXHJcbiAgICAgIGJhdHRlcnlWb2x0YWdlOiAnTi9BJyAvLyBzaWdyb2vorr7lpIfpgJrluLjkuI3miqXlkYrnlLXmsaDnirbmgIFcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlvIDlp4vph4fpm4ZcclxuICAgKi9cclxuICBhc3luYyBzdGFydENhcHR1cmUoXHJcbiAgICBzZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbixcclxuICAgIGNhcHR1cmVDb21wbGV0ZWRIYW5kbGVyPzogQ2FwdHVyZUNvbXBsZXRlZEhhbmRsZXJcclxuICApOiBQcm9taXNlPENhcHR1cmVFcnJvcj4ge1xyXG4gICAgaWYgKHRoaXMuX2NhcHR1cmluZykge1xyXG4gICAgICByZXR1cm4gQ2FwdHVyZUVycm9yLkJ1c3k7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLl9pc0Nvbm5lY3RlZCkge1xyXG4gICAgICByZXR1cm4gQ2FwdHVyZUVycm9yLkhhcmR3YXJlRXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIOiuvue9ruaNleiOt+WujOaIkOWkhOeQhuWZqFxyXG4gICAgICBpZiAoY2FwdHVyZUNvbXBsZXRlZEhhbmRsZXIpIHtcclxuICAgICAgICB0aGlzLm9uY2UoJ2NhcHR1cmVDb21wbGV0ZWQnLCBjYXB0dXJlQ29tcGxldGVkSGFuZGxlcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWQr+WKqHNpZ3Jva+mHh+mbhlxyXG4gICAgICBhd2FpdCB0aGlzLnN0YXJ0U2lncm9rQ2FwdHVyZShzZXNzaW9uKTtcclxuXHJcbiAgICAgIHJldHVybiBDYXB0dXJlRXJyb3IuTm9uZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuX2NhcHR1cmluZyA9IGZhbHNlO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdzaWdyb2vph4fpm4blkK/liqjlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gQ2FwdHVyZUVycm9yLlVuZXhwZWN0ZWRFcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWBnOatoumHh+mbhlxyXG4gICAqL1xyXG4gIGFzeW5jIHN0b3BDYXB0dXJlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgaWYgKCF0aGlzLl9jYXB0dXJpbmcpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHRoaXMuX2N1cnJlbnRQcm9jZXNzKSB7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFByb2Nlc3Mua2lsbCgnU0lHVEVSTScpO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRQcm9jZXNzID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign5YGc5q2ic2lncm9r6YeH6ZuG5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6L+b5YWl5byV5a+85Yqg6L2956iL5bqP5qih5byP77yI5LiN5pSv5oyB77yJXHJcbiAgICovXHJcbiAgYXN5bmMgZW50ZXJCb290bG9hZGVyKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBzaWdyb2vorr7lpIfpgJrluLjkuI3mlK/mjIHlvJXlr7zliqDovb3nqIvluo/mqKHlvI9cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOajgOafpXNpZ3Jvay1jbGnmmK/lkKblj6/nlKhcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGNoZWNrU2lncm9rQ2xpKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgcHJvY2VzcyA9IHNwYXduKHRoaXMuX3NpZ3Jva0NsaVBhdGgsIFsnLS12ZXJzaW9uJ10pO1xyXG5cclxuICAgICAgbGV0IG91dHB1dCA9ICcnO1xyXG4gICAgICBwcm9jZXNzLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgb3V0cHV0ICs9IGRhdGEudG9TdHJpbmcoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBwcm9jZXNzLm9uKCdjbG9zZScsIChjb2RlKSA9PiB7XHJcbiAgICAgICAgaWYgKGNvZGUgPT09IDApIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdzaWdyb2stY2xp54mI5pysOicsIG91dHB1dC50cmltKCkpO1xyXG4gICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdzaWdyb2stY2xp5pyq5a6J6KOF5oiW5LiN5Y+v55So44CC6K+35a6J6KOFc2lncm9r6L2v5Lu25YyF44CCJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBwcm9jZXNzLm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYHNpZ3Jvay1jbGnmiafooYzlpLHotKU6ICR7ZXJyb3IubWVzc2FnZX1gKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmiavmj49zaWdyb2vorr7lpIdcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHNjYW5EZXZpY2VzKCk6IFByb21pc2U8QXJyYXk8eyBpZDogc3RyaW5nOyBkcml2ZXI6IHN0cmluZzsgZGVzY3JpcHRpb246IHN0cmluZyB9Pj4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgcHJvY2VzcyA9IHNwYXduKHRoaXMuX3NpZ3Jva0NsaVBhdGgsIFsnLS1zY2FuJ10pO1xyXG5cclxuICAgICAgbGV0IG91dHB1dCA9ICcnO1xyXG4gICAgICBwcm9jZXNzLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgb3V0cHV0ICs9IGRhdGEudG9TdHJpbmcoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBwcm9jZXNzLm9uKCdjbG9zZScsIChjb2RlKSA9PiB7XHJcbiAgICAgICAgaWYgKGNvZGUgPT09IDApIHtcclxuICAgICAgICAgIGNvbnN0IGRldmljZXMgPSB0aGlzLnBhcnNlU2Nhbk91dHB1dChvdXRwdXQpO1xyXG4gICAgICAgICAgcmVzb2x2ZShkZXZpY2VzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcign6K6+5aSH5omr5o+P5aSx6LSlJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBwcm9jZXNzLm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYOiuvuWkh+aJq+aPj+aJp+ihjOWksei0pTogJHtlcnJvci5tZXNzYWdlfWApKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOino+aekOaJq+aPj+i+k+WHulxyXG4gICAqL1xyXG4gIHByaXZhdGUgcGFyc2VTY2FuT3V0cHV0KG91dHB1dDogc3RyaW5nKTogQXJyYXk8eyBpZDogc3RyaW5nOyBkcml2ZXI6IHN0cmluZzsgZGVzY3JpcHRpb246IHN0cmluZyB9PiB7XHJcbiAgICBjb25zdCBkZXZpY2VzOiBBcnJheTx7IGlkOiBzdHJpbmc7IGRyaXZlcjogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nIH0+ID0gW107XHJcbiAgICBjb25zdCBsaW5lcyA9IG91dHB1dC5zcGxpdCgnXFxcXG4nKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xyXG4gICAgICBpZiAoIXRyaW1tZWQgfHwgdHJpbW1lZC5zdGFydHNXaXRoKCdUaGUgZm9sbG93aW5nJykpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgLy8g6Kej5p6Q5qC85byPOiBcImRyaXZlcjpjb25uPXZhbHVlIC0gRGVzY3JpcHRpb25cIlxyXG4gICAgICBjb25zdCBtYXRjaCA9IHRyaW1tZWQubWF0Y2goL14oW146XSspOihbXi1dKylcXFxccyotXFxcXHMqKC4rKSQvKTtcclxuICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgY29uc3QgZHJpdmVyID0gbWF0Y2hbMV0udHJpbSgpO1xyXG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBtYXRjaFsyXS50cmltKCk7XHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBtYXRjaFszXS50cmltKCk7XHJcblxyXG4gICAgICAgIGRldmljZXMucHVzaCh7XHJcbiAgICAgICAgICBpZDogY29ubmVjdGlvbixcclxuICAgICAgICAgIGRyaXZlcjogZHJpdmVyLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGV2aWNlcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmAieaLqeacgOS9s+iuvuWkh1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc2VsZWN0QmVzdERldmljZShkZXZpY2VzOiBBcnJheTx7IGlkOiBzdHJpbmc7IGRyaXZlcjogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nIH0+KTogeyBpZDogc3RyaW5nOyBkcml2ZXI6IHN0cmluZzsgZGVzY3JpcHRpb246IHN0cmluZyB9IHtcclxuICAgIC8vIOWmguaenOaMh+WumuS6huiuvuWkh+mpseWKqO+8jOS8mOWFiOmAieaLqVxyXG4gICAgaWYgKHRoaXMuX2RldmljZURyaXZlcikge1xyXG4gICAgICBjb25zdCBtYXRjaGluZ0RldmljZSA9IGRldmljZXMuZmluZChkID0+IGQuZHJpdmVyID09PSB0aGlzLl9kZXZpY2VEcml2ZXIpO1xyXG4gICAgICBpZiAobWF0Y2hpbmdEZXZpY2UpIHtcclxuICAgICAgICByZXR1cm4gbWF0Y2hpbmdEZXZpY2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDlpoLmnpzmjIflrprkuoborr7lpIdJRO+8jOS8mOWFiOmAieaLqVxyXG4gICAgaWYgKHRoaXMuX2RldmljZUlkKSB7XHJcbiAgICAgIGNvbnN0IG1hdGNoaW5nRGV2aWNlID0gZGV2aWNlcy5maW5kKGQgPT4gZC5pZC5pbmNsdWRlcyh0aGlzLl9kZXZpY2VJZCkpO1xyXG4gICAgICBpZiAobWF0Y2hpbmdEZXZpY2UpIHtcclxuICAgICAgICByZXR1cm4gbWF0Y2hpbmdEZXZpY2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDlkKbliJnpgInmi6nnrKzkuIDkuKrlj6/nlKjorr7lpIdcclxuICAgIHJldHVybiBkZXZpY2VzWzBdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5p+l6K+i6K6+5aSH5L+h5oGvXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBxdWVyeURldmljZUluZm8oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmn6Xor6Lorr7lpIfphY3nva7kv6Hmga9cclxuICAgICAgY29uc3QgY29uZmlnT3V0cHV0ID0gYXdhaXQgdGhpcy5ydW5TaWdyb2tDb21tYW5kKFtcclxuICAgICAgICAnLS1kcml2ZXInLCB0aGlzLl9kZXZpY2VEcml2ZXIsXHJcbiAgICAgICAgJy0tY29ubicsIHRoaXMuX2RldmljZUlkLFxyXG4gICAgICAgICctLXNob3cnXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgdGhpcy5wYXJzZURldmljZUNvbmZpZyhjb25maWdPdXRwdXQpO1xyXG5cclxuICAgICAgLy8g6K6+572u6K6+5aSH54mI5pys5L+h5oGvXHJcbiAgICAgIGNvbnN0IGRyaXZlckluZm8gPSBTaWdyb2tBZGFwdGVyLlNJR1JPS19EUklWRVJTLmdldCh0aGlzLl9kZXZpY2VEcml2ZXIpO1xyXG4gICAgICBpZiAoZHJpdmVySW5mbykge1xyXG4gICAgICAgIHRoaXMuX3ZlcnNpb24gPSBkcml2ZXJJbmZvLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fY2hhbm5lbENvdW50ID0gZHJpdmVySW5mby5jaGFubmVscztcclxuICAgICAgICB0aGlzLl9tYXhGcmVxdWVuY3kgPSBkcml2ZXJJbmZvLm1heFJhdGU7XHJcbiAgICAgICAgdGhpcy5fYmxhc3RGcmVxdWVuY3kgPSBkcml2ZXJJbmZvLm1heFJhdGUgKiAyO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+afpeivouiuvuWkh+S/oeaBr+Wksei0pTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDop6PmnpDorr7lpIfphY3nva5cclxuICAgKi9cclxuICBwcml2YXRlIHBhcnNlRGV2aWNlQ29uZmlnKG91dHB1dDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBjb25zdCBsaW5lcyA9IG91dHB1dC5zcGxpdCgnXFxcXG4nKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xyXG5cclxuICAgICAgLy8g6Kej5p6Q6YCa6YGT5pWwXHJcbiAgICAgIGlmICh0cmltbWVkLmluY2x1ZGVzKCdjaGFubmVsczonKSkge1xyXG4gICAgICAgIGNvbnN0IGNoYW5uZWxNYXRjaCA9IHRyaW1tZWQubWF0Y2goL2NoYW5uZWxzOlxcXFxzKihcXFxcZCspLyk7XHJcbiAgICAgICAgaWYgKGNoYW5uZWxNYXRjaCkge1xyXG4gICAgICAgICAgdGhpcy5fY2hhbm5lbENvdW50ID0gcGFyc2VJbnQoY2hhbm5lbE1hdGNoWzFdLCAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDop6PmnpDph4fmoLfnjodcclxuICAgICAgaWYgKHRyaW1tZWQuaW5jbHVkZXMoJ3NhbXBsZXJhdGU6JykpIHtcclxuICAgICAgICBjb25zdCByYXRlTWF0Y2ggPSB0cmltbWVkLm1hdGNoKC9zYW1wbGVyYXRlOlxcXFxzKihbMC05Ll0rKVxcXFxzKihba01HXT9IeikvKTtcclxuICAgICAgICBpZiAocmF0ZU1hdGNoKSB7XHJcbiAgICAgICAgICBsZXQgcmF0ZSA9IHBhcnNlRmxvYXQocmF0ZU1hdGNoWzFdKTtcclxuICAgICAgICAgIGNvbnN0IHVuaXQgPSByYXRlTWF0Y2hbMl07XHJcblxyXG4gICAgICAgICAgc3dpdGNoICh1bml0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2tIeic6XHJcbiAgICAgICAgICAgICAgcmF0ZSAqPSAxMDAwO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdNSHonOlxyXG4gICAgICAgICAgICAgIHJhdGUgKj0gMTAwMDAwMDtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnR0h6JzpcclxuICAgICAgICAgICAgICByYXRlICo9IDEwMDAwMDAwMDA7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5fbWF4RnJlcXVlbmN5ID0gcmF0ZTtcclxuICAgICAgICAgIHRoaXMuX2JsYXN0RnJlcXVlbmN5ID0gcmF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOino+aekOe8k+WGsuWMuuWkp+Wwj1xyXG4gICAgICBpZiAodHJpbW1lZC5pbmNsdWRlcygnbGltaXRfc2FtcGxlczonKSkge1xyXG4gICAgICAgIGNvbnN0IHNhbXBsZU1hdGNoID0gdHJpbW1lZC5tYXRjaCgvbGltaXRfc2FtcGxlczpcXFxccyooXFxcXGQrKS8pO1xyXG4gICAgICAgIGlmIChzYW1wbGVNYXRjaCkge1xyXG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2l6ZSA9IHBhcnNlSW50KHNhbXBsZU1hdGNoWzFdLCAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlkK/liqhzaWdyb2vph4fpm4ZcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHN0YXJ0U2lncm9rQ2FwdHVyZShzZXNzaW9uOiBDYXB0dXJlU2Vzc2lvbik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3Qgb3V0cHV0RmlsZSA9IGpvaW4odGhpcy5fdGVtcERpciwgJ2NhcHR1cmUuc3InKTtcclxuICAgIGNvbnN0IHRvdGFsU2FtcGxlcyA9IHNlc3Npb24ucHJlVHJpZ2dlclNhbXBsZXMgKyBzZXNzaW9uLnBvc3RUcmlnZ2VyU2FtcGxlcztcclxuXHJcbiAgICAvLyDmnoTlu7pzaWdyb2stY2xp5ZG95Luk5Y+C5pWwXHJcbiAgICBjb25zdCBhcmdzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgJy0tZHJpdmVyJywgdGhpcy5fZGV2aWNlRHJpdmVyLFxyXG4gICAgICAnLS1jb25uJywgdGhpcy5fZGV2aWNlSWQsXHJcbiAgICAgICctLWNvbmZpZycsIGBzYW1wbGVyYXRlPSR7c2Vzc2lvbi5mcmVxdWVuY3l9YCxcclxuICAgICAgJy0tc2FtcGxlcycsIHRvdGFsU2FtcGxlcy50b1N0cmluZygpLFxyXG4gICAgICAnLS1vdXRwdXQtZmlsZScsIG91dHB1dEZpbGUsXHJcbiAgICAgICctLW91dHB1dC1mb3JtYXQnLCAnc3J6aXAnXHJcbiAgICBdO1xyXG5cclxuICAgIC8vIOmFjee9rumAmumBk1xyXG4gICAgY29uc3QgY2hhbm5lbHMgPSBzZXNzaW9uLmNhcHR1cmVDaGFubmVscy5tYXAoY2ggPT4gY2guY2hhbm5lbE51bWJlcikuam9pbignLCcpO1xyXG4gICAgaWYgKGNoYW5uZWxzKSB7XHJcbiAgICAgIGFyZ3MucHVzaCgnLS1jaGFubmVscycsIGNoYW5uZWxzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDphY3nva7op6blj5FcclxuICAgIGlmIChzZXNzaW9uLnRyaWdnZXJUeXBlICE9PSB1bmRlZmluZWQgJiYgc2Vzc2lvbi50cmlnZ2VyQ2hhbm5lbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnN0IHRyaWdnZXJDb25maWcgPSB0aGlzLmJ1aWxkVHJpZ2dlckNvbmZpZyhzZXNzaW9uKTtcclxuICAgICAgaWYgKHRyaWdnZXJDb25maWcpIHtcclxuICAgICAgICBhcmdzLnB1c2goJy0tdHJpZ2dlcnMnLCB0cmlnZ2VyQ29uZmlnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCflkK/liqhzaWdyb2vph4fpm4Y6JywgdGhpcy5fc2lncm9rQ2xpUGF0aCwgYXJncy5qb2luKCcgJykpO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2N1cnJlbnRQcm9jZXNzID0gc3Bhd24odGhpcy5fc2lncm9rQ2xpUGF0aCwgYXJncyk7XHJcblxyXG4gICAgICBsZXQgZXJyb3JPdXRwdXQgPSAnJztcclxuXHJcbiAgICAgIHRoaXMuX2N1cnJlbnRQcm9jZXNzLnN0ZG91dD8ub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzaWdyb2vovpPlh7o6JywgZGF0YS50b1N0cmluZygpKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLl9jdXJyZW50UHJvY2Vzcy5zdGRlcnI/Lm9uKCdkYXRhJywgKGRhdGEpID0+IHtcclxuICAgICAgICBlcnJvck91dHB1dCArPSBkYXRhLnRvU3RyaW5nKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5fY3VycmVudFByb2Nlc3Mub24oJ2Nsb3NlJywgYXN5bmMgKGNvZGUpID0+IHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50UHJvY2VzcyA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChjb2RlID09PSAwKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyDor7vlj5bph4fpm4bnu5PmnpxcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzU2lncm9rUmVzdWx0cyhzZXNzaW9uLCBvdXRwdXRGaWxlKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgc2lncm9r6YeH6ZuG5aSx6LSlICjku6PnoIEgJHtjb2RlfSk6ICR7ZXJyb3JPdXRwdXR9YCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLl9jdXJyZW50UHJvY2Vzcy5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50UHJvY2VzcyA9IG51bGw7XHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgc2lncm9r6YeH6ZuG6L+b56iL6ZSZ6K+vOiAke2Vycm9yLm1lc3NhZ2V9YCkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5p6E5bu66Kem5Y+R6YWN572uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBidWlsZFRyaWdnZXJDb25maWcoc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24pOiBzdHJpbmcgfCBudWxsIHtcclxuICAgIGlmIChzZXNzaW9uLnRyaWdnZXJDaGFubmVsID09PSB1bmRlZmluZWQpIHJldHVybiBudWxsO1xyXG5cclxuICAgIGNvbnN0IGNoYW5uZWwgPSBzZXNzaW9uLnRyaWdnZXJDaGFubmVsO1xyXG4gICAgbGV0IHRyaWdnZXIgPSAnJztcclxuXHJcbiAgICBzd2l0Y2ggKHNlc3Npb24udHJpZ2dlclR5cGUpIHtcclxuICAgICAgY2FzZSAwOiAvLyBFZGdlXHJcbiAgICAgICAgdHJpZ2dlciA9IHNlc3Npb24udHJpZ2dlckludmVydGVkID8gYCR7Y2hhbm5lbH09ZmAgOiBgJHtjaGFubmVsfT1yYDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAxOiAvLyBDb21wbGV4L1BhdHRlcm5cclxuICAgICAgICBpZiAoc2Vzc2lvbi50cmlnZ2VyUGF0dGVybiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAvLyDlsIbmqKHlvI/ovazmjaLkuLpzaWdyb2vmoLzlvI9cclxuICAgICAgICAgIGNvbnN0IHBhdHRlcm4gPSBzZXNzaW9uLnRyaWdnZXJQYXR0ZXJuLnRvU3RyaW5nKDIpLnBhZFN0YXJ0KDE2LCAnMCcpO1xyXG4gICAgICAgICAgdHJpZ2dlciA9IHBhdHRlcm4uc3BsaXQoJycpLm1hcCgoYml0LCBpbmRleCkgPT4gXHJcbiAgICAgICAgICAgIGJpdCA9PT0gJzEnID8gYCR7aW5kZXh9PTFgIDogYml0ID09PSAnMCcgPyBgJHtpbmRleH09MGAgOiAnJ1xyXG4gICAgICAgICAgKS5maWx0ZXIodCA9PiB0KS5qb2luKCcsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRyaWdnZXIgPSBgJHtjaGFubmVsfT1yYDsgLy8g6buY6K6k5LiK5Y2H5rK/XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRyaWdnZXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIZzaWdyb2vph4fpm4bnu5PmnpxcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NTaWdyb2tSZXN1bHRzKHNlc3Npb246IENhcHR1cmVTZXNzaW9uLCBvdXRwdXRGaWxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOWwhi5zcuaWh+S7tui9rOaNouS4ukNTVuagvOW8j+S7peS+v+ino+aekFxyXG4gICAgICBjb25zdCBjc3ZGaWxlID0gam9pbih0aGlzLl90ZW1wRGlyLCAnY2FwdHVyZS5jc3YnKTtcclxuICAgICAgYXdhaXQgdGhpcy5jb252ZXJ0U3JUb0NTVihvdXRwdXRGaWxlLCBjc3ZGaWxlKTtcclxuXHJcbiAgICAgIC8vIOivu+WPlkNTVuaVsOaNrlxyXG4gICAgICBjb25zdCBjc3ZEYXRhID0gYXdhaXQgZnMucmVhZEZpbGUoY3N2RmlsZSwgJ3V0Zi04Jyk7XHJcbiAgICAgIGNvbnN0IGxpbmVzID0gY3N2RGF0YS5zcGxpdCgnXFxcXG4nKTtcclxuXHJcbiAgICAgIGlmIChsaW5lcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfph4fpm4bmlbDmja7kuLrnqbonKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6Kej5p6QQ1NW5aS06YOo77yI6YCa6YGT5ZCN56ew77yJXHJcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSBsaW5lc1swXS5zcGxpdCgnLCcpLm1hcChoID0+IGgudHJpbSgpKTtcclxuICAgICAgY29uc3QgZGF0YUxpbmVzID0gbGluZXMuc2xpY2UoMSkuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkpO1xyXG5cclxuICAgICAgLy8g5Yid5aeL5YyW6YCa6YGT5pWw5o2uXHJcbiAgICAgIGZvciAoY29uc3QgY2hhbm5lbCBvZiBzZXNzaW9uLmNhcHR1cmVDaGFubmVscykge1xyXG4gICAgICAgIGNoYW5uZWwuc2FtcGxlcyA9IG5ldyBVaW50OEFycmF5KGRhdGFMaW5lcy5sZW5ndGgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDop6PmnpDmlbDmja7ooYxcclxuICAgICAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IGRhdGFMaW5lcy5sZW5ndGg7IHJvd0luZGV4KyspIHtcclxuICAgICAgICBjb25zdCB2YWx1ZXMgPSBkYXRhTGluZXNbcm93SW5kZXhdLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgY2hhbm5lbCBvZiBzZXNzaW9uLmNhcHR1cmVDaGFubmVscykge1xyXG4gICAgICAgICAgY29uc3QgY2hhbm5lbE5hbWUgPSBgRCR7Y2hhbm5lbC5jaGFubmVsTnVtYmVyfWA7XHJcbiAgICAgICAgICBjb25zdCBjb2x1bW5JbmRleCA9IGhlYWRlcnMuaW5kZXhPZihjaGFubmVsTmFtZSk7XHJcblxyXG4gICAgICAgICAgaWYgKGNvbHVtbkluZGV4ID49IDAgJiYgY29sdW1uSW5kZXggPCB2YWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2NvbHVtbkluZGV4XS50cmltKCk7XHJcbiAgICAgICAgICAgIGNoYW5uZWwuc2FtcGxlcyFbcm93SW5kZXhdID0gdmFsdWUgPT09ICcxJyA/IDEgOiAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5fY2FwdHVyaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICBjb25zdCBldmVudEFyZ3M6IENhcHR1cmVFdmVudEFyZ3MgPSB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBzZXNzaW9uXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmVtaXRDYXB0dXJlQ29tcGxldGVkKGV2ZW50QXJncyk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVDYXB0dXJlRXJyb3Ioc2Vzc2lvbiwgYOWkhOeQhnNpZ3Jva+e7k+aenOWksei0pTogJHtlcnJvcn1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWwhi5zcuaWh+S7tui9rOaNouS4ukNTVuagvOW8j1xyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgY29udmVydFNyVG9DU1Yoc3JGaWxlOiBzdHJpbmcsIGNzdkZpbGU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgcHJvY2VzcyA9IHNwYXduKHRoaXMuX3NpZ3Jva0NsaVBhdGgsIFtcclxuICAgICAgICAnLS1pbnB1dC1maWxlJywgc3JGaWxlLFxyXG4gICAgICAgICctLW91dHB1dC1maWxlJywgY3N2RmlsZSxcclxuICAgICAgICAnLS1vdXRwdXQtZm9ybWF0JywgJ2NzdidcclxuICAgICAgXSk7XHJcblxyXG4gICAgICBwcm9jZXNzLm9uKCdjbG9zZScsIChjb2RlKSA9PiB7XHJcbiAgICAgICAgaWYgKGNvZGUgPT09IDApIHtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihg6L2s5o2i5Li6Q1NW5aSx6LSlICjku6PnoIEgJHtjb2RlfSlgKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHByb2Nlc3Mub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgQ1NW6L2s5o2i6L+b56iL6ZSZ6K+vOiAke2Vycm9yLm1lc3NhZ2V9YCkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG6YeH6ZuG6ZSZ6K+vXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVDYXB0dXJlRXJyb3Ioc2Vzc2lvbjogQ2FwdHVyZVNlc3Npb24sIGVycm9yTWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLl9jYXB0dXJpbmcgPSBmYWxzZTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ3NpZ3Jva+mHh+mbhumUmeivrzonLCBlcnJvck1lc3NhZ2UpO1xyXG5cclxuICAgIGNvbnN0IGV2ZW50QXJnczogQ2FwdHVyZUV2ZW50QXJncyA9IHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIHNlc3Npb25cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5lbWl0Q2FwdHVyZUNvbXBsZXRlZChldmVudEFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6L+Q6KGMc2lncm9r5ZG95LukXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBydW5TaWdyb2tDb21tYW5kKGFyZ3M6IHN0cmluZ1tdKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHByb2Nlc3MgPSBzcGF3bih0aGlzLl9zaWdyb2tDbGlQYXRoLCBhcmdzKTtcclxuXHJcbiAgICAgIGxldCBvdXRwdXQgPSAnJztcclxuICAgICAgbGV0IGVycm9yT3V0cHV0ID0gJyc7XHJcblxyXG4gICAgICBwcm9jZXNzLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgb3V0cHV0ICs9IGRhdGEudG9TdHJpbmcoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBwcm9jZXNzLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgZXJyb3JPdXRwdXQgKz0gZGF0YS50b1N0cmluZygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHByb2Nlc3Mub24oJ2Nsb3NlJywgKGNvZGUpID0+IHtcclxuICAgICAgICBpZiAoY29kZSA9PT0gMCkge1xyXG4gICAgICAgICAgcmVzb2x2ZShvdXRwdXQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKGBzaWdyb2vlkb3ku6TlpLHotKUgKOS7o+eggSAke2NvZGV9KTogJHtlcnJvck91dHB1dH1gKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHByb2Nlc3Mub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgc2lncm9r5ZG95Luk5omn6KGM6ZSZ6K+vOiAke2Vycm9yLm1lc3NhZ2V9YCkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5p6E5bu656Gs5Lu26IO95Yqb5o+P6L+wXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBidWlsZENhcGFiaWxpdGllcygpOiBhbnkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2hhbm5lbHM6IHtcclxuICAgICAgICBkaWdpdGFsOiB0aGlzLl9jaGFubmVsQ291bnQsXHJcbiAgICAgICAgbWF4Vm9sdGFnZTogNS4wLFxyXG4gICAgICAgIGlucHV0SW1wZWRhbmNlOiAxMDAwMDAwXHJcbiAgICAgIH0sXHJcbiAgICAgIHNhbXBsaW5nOiB7XHJcbiAgICAgICAgbWF4UmF0ZTogdGhpcy5fbWF4RnJlcXVlbmN5LFxyXG4gICAgICAgIG1pblJhdGU6IHRoaXMubWluRnJlcXVlbmN5LFxyXG4gICAgICAgIHN1cHBvcnRlZFJhdGVzOiBbdGhpcy5fbWF4RnJlcXVlbmN5LCB0aGlzLl9ibGFzdEZyZXF1ZW5jeV0sXHJcbiAgICAgICAgYnVmZmVyU2l6ZTogdGhpcy5fYnVmZmVyU2l6ZSxcclxuICAgICAgICBzdHJlYW1pbmdTdXBwb3J0OiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICB0cmlnZ2Vyczoge1xyXG4gICAgICAgIHR5cGVzOiBbMCwgMV0sIC8vIEVkZ2UsIFBhdHRlcm5cclxuICAgICAgICBtYXhDaGFubmVsczogdGhpcy5fY2hhbm5lbENvdW50LFxyXG4gICAgICAgIHBhdHRlcm5XaWR0aDogdGhpcy5fY2hhbm5lbENvdW50LFxyXG4gICAgICAgIHNlcXVlbnRpYWxTdXBwb3J0OiBmYWxzZSxcclxuICAgICAgICBjb25kaXRpb25zOiBbJ3Jpc2luZycsICdmYWxsaW5nJywgJ2hpZ2gnLCAnbG93JywgJ2NoYW5nZSddXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbm5lY3Rpdml0eToge1xyXG4gICAgICAgIGludGVyZmFjZXM6IFsndXNiJywgJ3NlcmlhbCddLFxyXG4gICAgICAgIHByb3RvY29sczogWydzaWdyb2snXVxyXG4gICAgICB9LFxyXG4gICAgICBmZWF0dXJlczoge1xyXG4gICAgICAgIHNpZ25hbEdlbmVyYXRpb246IGZhbHNlLFxyXG4gICAgICAgIHBvd2VyU3VwcGx5OiBmYWxzZSxcclxuICAgICAgICB2b2x0YWdlTW9uaXRvcmluZzogZmFsc2UsXHJcbiAgICAgICAgcHJvdG9jb2xEZWNvZGluZzogdHJ1ZSAvLyBzaWdyb2vmnInlvLrlpKfnmoTljY/orq7op6PnoIHlip/og71cclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaUr+aMgeeahOiuvuWkh+WIl+ihqFxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRTdXBwb3J0ZWREZXZpY2VzKCk6IEFycmF5PHsgZHJpdmVyOiBzdHJpbmc7IG5hbWU6IHN0cmluZzsgY2hhbm5lbHM6IG51bWJlcjsgbWF4UmF0ZTogbnVtYmVyIH0+IHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKFNpZ3Jva0FkYXB0ZXIuU0lHUk9LX0RSSVZFUlMuZW50cmllcygpKS5tYXAoKFtkcml2ZXIsIGluZm9dKSA9PiAoe1xyXG4gICAgICBkcml2ZXIsXHJcbiAgICAgIG5hbWU6IGluZm8ubmFtZSxcclxuICAgICAgY2hhbm5lbHM6IGluZm8uY2hhbm5lbHMsXHJcbiAgICAgIG1heFJhdGU6IGluZm8ubWF4UmF0ZVxyXG4gICAgfSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6LWE5rqQ5riF55CGXHJcbiAgICovXHJcbiAgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/drivers/SigrokAdapter.ts\n\n}");

/***/ }),

/***/ "./src/extension.ts":
/*!**************************!*\
  !*** ./src/extension.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.deactivate = exports.activate = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst vscode = tslib_1.__importStar(__webpack_require__(/*! vscode */ \"vscode\"));\nconst LACEditorProvider_1 = __webpack_require__(/*! ./providers/LACEditorProvider */ \"./src/providers/LACEditorProvider.ts\");\nconst HardwareDriverManager_1 = __webpack_require__(/*! ./drivers/HardwareDriverManager */ \"./src/drivers/HardwareDriverManager.ts\");\nfunction activate(context) {\n    console.log('VSCode Logic Analyzer插件正在激活...');\n    // 注册.lac文件的自定义编辑器\n    context.subscriptions.push(LACEditorProvider_1.LACEditorProvider.register(context));\n    // 注册命令\n    const openAnalyzerCommand = vscode.commands.registerCommand('logicAnalyzer.openAnalyzer', () => {\n        vscode.window.showInformationMessage('打开逻辑分析器界面!');\n        // TODO: 实现主界面打开逻辑\n    });\n    const connectDeviceCommand = vscode.commands.registerCommand('logicAnalyzer.connectDevice', async () => {\n        try {\n            // 检测可用设备\n            vscode.window.showInformationMessage('正在检测逻辑分析器设备...');\n            const devices = await HardwareDriverManager_1.hardwareDriverManager.detectHardware();\n            if (devices.length === 0) {\n                const action = await vscode.window.showWarningMessage('未检测到逻辑分析器设备', '手动指定', '网络连接', '取消');\n                if (action === '手动指定') {\n                    const devicePath = await vscode.window.showInputBox({\n                        prompt: '请输入设备路径 (如: /dev/ttyUSB0 或 COM3)',\n                        placeHolder: '/dev/ttyUSB0'\n                    });\n                    if (devicePath) {\n                        await connectToDevice(devicePath);\n                    }\n                }\n                else if (action === '网络连接') {\n                    const networkAddress = await vscode.window.showInputBox({\n                        prompt: '请输入网络地址 (如: 192.168.1.100:3030)',\n                        placeHolder: '192.168.1.100:3030'\n                    });\n                    if (networkAddress) {\n                        await connectToDevice('network', {\n                            networkConfig: parseNetworkAddress(networkAddress)\n                        });\n                    }\n                }\n                return;\n            }\n            // 显示设备选择列表\n            const deviceItems = devices.map(device => ({\n                label: device.name,\n                description: `${device.type} - ${device.connectionPath}`,\n                detail: `置信度: ${Math.round(device.confidence * 100)}%`,\n                device\n            }));\n            // 添加特殊选项\n            deviceItems.push({\n                label: '$(broadcast) 自动检测',\n                description: '自动选择最佳匹配设备',\n                detail: '让系统自动选择置信度最高的设备',\n                device: {\n                    id: 'autodetect',\n                    name: '自动检测',\n                    type: 'Auto',\n                    connectionPath: '',\n                    confidence: 1\n                }\n            }, {\n                label: '$(globe) 网络连接',\n                description: '连接网络逻辑分析器',\n                detail: '通过TCP/IP连接网络设备',\n                device: {\n                    id: 'network',\n                    name: '网络设备',\n                    type: 'Network',\n                    connectionPath: '',\n                    confidence: 0.5\n                }\n            });\n            const selectedItem = await vscode.window.showQuickPick(deviceItems, {\n                placeHolder: '选择要连接的逻辑分析器设备',\n                matchOnDescription: true,\n                matchOnDetail: true\n            });\n            if (selectedItem) {\n                await connectToDevice(selectedItem.device.id);\n            }\n        }\n        catch (error) {\n            vscode.window.showErrorMessage(`设备检测失败: ${error}`);\n        }\n    });\n    const startCaptureCommand = vscode.commands.registerCommand('logicAnalyzer.startCapture', () => {\n        vscode.window.showInformationMessage('开始数据采集!');\n        // TODO: 实现数据采集逻辑\n    });\n    context.subscriptions.push(openAnalyzerCommand, connectDeviceCommand, startCaptureCommand);\n    console.log('VSCode Logic Analyzer插件激活完成');\n}\nexports.activate = activate;\nfunction deactivate() {\n    console.log('VSCode Logic Analyzer插件正在停用...');\n    // 清理硬件驱动管理器\n    HardwareDriverManager_1.hardwareDriverManager.dispose().catch(error => {\n        console.error('清理硬件驱动管理器失败:', error);\n    });\n}\nexports.deactivate = deactivate;\n// 连接到指定设备的辅助函数\nasync function connectToDevice(deviceId, params) {\n    try {\n        vscode.window.showInformationMessage(`正在连接设备: ${deviceId}`);\n        const result = await HardwareDriverManager_1.hardwareDriverManager.connectToDevice(deviceId, params);\n        if (result.success) {\n            vscode.window.showInformationMessage(`设备连接成功: ${result.deviceInfo?.name || deviceId}`);\n        }\n        else {\n            vscode.window.showErrorMessage(`设备连接失败: ${result.error}`);\n        }\n    }\n    catch (error) {\n        vscode.window.showErrorMessage(`设备连接异常: ${error}`);\n    }\n}\n// 解析网络地址的辅助函数\nfunction parseNetworkAddress(address) {\n    const parts = address.split(':');\n    if (parts.length !== 2) {\n        throw new Error('网络地址格式无效，应为 host:port');\n    }\n    const host = parts[0].trim();\n    const port = parseInt(parts[1].trim(), 10);\n    if (!host || isNaN(port) || port < 1 || port > 65535) {\n        throw new Error('网络地址格式无效');\n    }\n    return { host, port };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUM3QixNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRTNDLElBQUksQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLElBQUksSUFBSSxHQUFHLEtBQUssRUFBRTtRQUNwRCxNQUFNLElBQUksS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQzdCO0lBRUQsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUN4QixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnNjb2RlLWxvZ2ljLWFuYWx5emVyLy4vc3JjL2V4dGVuc2lvbi50cz9iMDIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHZzY29kZSBmcm9tICd2c2NvZGUnO1xuaW1wb3J0IHsgTEFDRWRpdG9yUHJvdmlkZXIgfSBmcm9tICcuL3Byb3ZpZGVycy9MQUNFZGl0b3JQcm92aWRlcic7XG5pbXBvcnQgeyBoYXJkd2FyZURyaXZlck1hbmFnZXIgfSBmcm9tICcuL2RyaXZlcnMvSGFyZHdhcmVEcml2ZXJNYW5hZ2VyJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlKGNvbnRleHQ6IHZzY29kZS5FeHRlbnNpb25Db250ZXh0KSB7XG4gIGNvbnNvbGUubG9nKCdWU0NvZGUgTG9naWMgQW5hbHl6ZXLmj5Lku7bmraPlnKjmv4DmtLsuLi4nKTtcblxuICAvLyDms6jlhowubGFj5paH5Lu255qE6Ieq5a6a5LmJ57yW6L6R5ZmoXG4gIGNvbnRleHQuc3Vic2NyaXB0aW9ucy5wdXNoKExBQ0VkaXRvclByb3ZpZGVyLnJlZ2lzdGVyKGNvbnRleHQpKTtcblxuICAvLyDms6jlhozlkb3ku6RcbiAgY29uc3Qgb3BlbkFuYWx5emVyQ29tbWFuZCA9IHZzY29kZS5jb21tYW5kcy5yZWdpc3RlckNvbW1hbmQoJ2xvZ2ljQW5hbHl6ZXIub3BlbkFuYWx5emVyJywgKCkgPT4ge1xuICAgIHZzY29kZS53aW5kb3cuc2hvd0luZm9ybWF0aW9uTWVzc2FnZSgn5omT5byA6YC76L6R5YiG5p6Q5Zmo55WM6Z2iIScpO1xuICAgIC8vIFRPRE86IOWunueOsOS4u+eVjOmdouaJk+W8gOmAu+i+kVxuICB9KTtcblxuICBjb25zdCBjb25uZWN0RGV2aWNlQ29tbWFuZCA9IHZzY29kZS5jb21tYW5kcy5yZWdpc3RlckNvbW1hbmQoXG4gICAgJ2xvZ2ljQW5hbHl6ZXIuY29ubmVjdERldmljZScsXG4gICAgYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8g5qOA5rWL5Y+v55So6K6+5aSHXG4gICAgICAgIHZzY29kZS53aW5kb3cuc2hvd0luZm9ybWF0aW9uTWVzc2FnZSgn5q2j5Zyo5qOA5rWL6YC76L6R5YiG5p6Q5Zmo6K6+5aSHLi4uJyk7XG4gICAgICAgIGNvbnN0IGRldmljZXMgPSBhd2FpdCBoYXJkd2FyZURyaXZlck1hbmFnZXIuZGV0ZWN0SGFyZHdhcmUoKTtcblxuICAgICAgICBpZiAoZGV2aWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBjb25zdCBhY3Rpb24gPSBhd2FpdCB2c2NvZGUud2luZG93LnNob3dXYXJuaW5nTWVzc2FnZShcbiAgICAgICAgICAgICfmnKrmo4DmtYvliLDpgLvovpHliIbmnpDlmajorr7lpIcnLFxuICAgICAgICAgICAgJ+aJi+WKqOaMh+WumicsXG4gICAgICAgICAgICAn572R57uc6L+e5o6lJyxcbiAgICAgICAgICAgICflj5bmtognXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmIChhY3Rpb24gPT09ICfmiYvliqjmjIflrponKSB7XG4gICAgICAgICAgICBjb25zdCBkZXZpY2VQYXRoID0gYXdhaXQgdnNjb2RlLndpbmRvdy5zaG93SW5wdXRCb3goe1xuICAgICAgICAgICAgICBwcm9tcHQ6ICfor7fovpPlhaXorr7lpIfot6/lvoQgKOWmgjogL2Rldi90dHlVU0IwIOaIliBDT00zKScsXG4gICAgICAgICAgICAgIHBsYWNlSG9sZGVyOiAnL2Rldi90dHlVU0IwJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChkZXZpY2VQYXRoKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGNvbm5lY3RUb0RldmljZShkZXZpY2VQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ+e9kee7nOi/nuaOpScpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ldHdvcmtBZGRyZXNzID0gYXdhaXQgdnNjb2RlLndpbmRvdy5zaG93SW5wdXRCb3goe1xuICAgICAgICAgICAgICBwcm9tcHQ6ICfor7fovpPlhaXnvZHnu5zlnLDlnYAgKOWmgjogMTkyLjE2OC4xLjEwMDozMDMwKScsXG4gICAgICAgICAgICAgIHBsYWNlSG9sZGVyOiAnMTkyLjE2OC4xLjEwMDozMDMwJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChuZXR3b3JrQWRkcmVzcykge1xuICAgICAgICAgICAgICBhd2FpdCBjb25uZWN0VG9EZXZpY2UoJ25ldHdvcmsnLCB7XG4gICAgICAgICAgICAgICAgbmV0d29ya0NvbmZpZzogcGFyc2VOZXR3b3JrQWRkcmVzcyhuZXR3b3JrQWRkcmVzcylcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOaYvuekuuiuvuWkh+mAieaLqeWIl+ihqFxuICAgICAgICBjb25zdCBkZXZpY2VJdGVtcyA9IGRldmljZXMubWFwKGRldmljZSA9PiAoe1xuICAgICAgICAgIGxhYmVsOiBkZXZpY2UubmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7ZGV2aWNlLnR5cGV9IC0gJHtkZXZpY2UuY29ubmVjdGlvblBhdGh9YCxcbiAgICAgICAgICBkZXRhaWw6IGDnva7kv6HluqY6ICR7TWF0aC5yb3VuZChkZXZpY2UuY29uZmlkZW5jZSAqIDEwMCl9JWAsXG4gICAgICAgICAgZGV2aWNlXG4gICAgICAgIH0pKTtcblxuICAgICAgICAvLyDmt7vliqDnibnmrorpgInpoblcbiAgICAgICAgZGV2aWNlSXRlbXMucHVzaChcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJyQoYnJvYWRjYXN0KSDoh6rliqjmo4DmtYsnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICfoh6rliqjpgInmi6nmnIDkvbPljLnphY3orr7lpIcnLFxuICAgICAgICAgICAgZGV0YWlsOiAn6K6p57O757uf6Ieq5Yqo6YCJ5oup572u5L+h5bqm5pyA6auY55qE6K6+5aSHJyxcbiAgICAgICAgICAgIGRldmljZToge1xuICAgICAgICAgICAgICBpZDogJ2F1dG9kZXRlY3QnLFxuICAgICAgICAgICAgICBuYW1lOiAn6Ieq5Yqo5qOA5rWLJyxcbiAgICAgICAgICAgICAgdHlwZTogJ0F1dG8nIGFzIGFueSxcbiAgICAgICAgICAgICAgY29ubmVjdGlvblBhdGg6ICcnLFxuICAgICAgICAgICAgICBjb25maWRlbmNlOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJyQoZ2xvYmUpIOe9kee7nOi/nuaOpScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ+i/nuaOpee9kee7nOmAu+i+keWIhuaekOWZqCcsXG4gICAgICAgICAgICBkZXRhaWw6ICfpgJrov4dUQ1AvSVDov57mjqXnvZHnu5zorr7lpIcnLFxuICAgICAgICAgICAgZGV2aWNlOiB7XG4gICAgICAgICAgICAgIGlkOiAnbmV0d29yaycsXG4gICAgICAgICAgICAgIG5hbWU6ICfnvZHnu5zorr7lpIcnLFxuICAgICAgICAgICAgICB0eXBlOiAnTmV0d29yaycgYXMgYW55LFxuICAgICAgICAgICAgICBjb25uZWN0aW9uUGF0aDogJycsXG4gICAgICAgICAgICAgIGNvbmZpZGVuY2U6IDAuNVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBhd2FpdCB2c2NvZGUud2luZG93LnNob3dRdWlja1BpY2soZGV2aWNlSXRlbXMsIHtcbiAgICAgICAgICBwbGFjZUhvbGRlcjogJ+mAieaLqeimgei/nuaOpeeahOmAu+i+keWIhuaekOWZqOiuvuWkhycsXG4gICAgICAgICAgbWF0Y2hPbkRlc2NyaXB0aW9uOiB0cnVlLFxuICAgICAgICAgIG1hdGNoT25EZXRhaWw6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkSXRlbSkge1xuICAgICAgICAgIGF3YWl0IGNvbm5lY3RUb0RldmljZShzZWxlY3RlZEl0ZW0uZGV2aWNlLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdnNjb2RlLndpbmRvdy5zaG93RXJyb3JNZXNzYWdlKGDorr7lpIfmo4DmtYvlpLHotKU6ICR7ZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfVxuICApO1xuXG4gIGNvbnN0IHN0YXJ0Q2FwdHVyZUNvbW1hbmQgPSB2c2NvZGUuY29tbWFuZHMucmVnaXN0ZXJDb21tYW5kKCdsb2dpY0FuYWx5emVyLnN0YXJ0Q2FwdHVyZScsICgpID0+IHtcbiAgICB2c2NvZGUud2luZG93LnNob3dJbmZvcm1hdGlvbk1lc3NhZ2UoJ+W8gOWni+aVsOaNrumHh+mbhiEnKTtcbiAgICAvLyBUT0RPOiDlrp7njrDmlbDmja7ph4fpm4bpgLvovpFcbiAgfSk7XG5cbiAgY29udGV4dC5zdWJzY3JpcHRpb25zLnB1c2gob3BlbkFuYWx5emVyQ29tbWFuZCwgY29ubmVjdERldmljZUNvbW1hbmQsIHN0YXJ0Q2FwdHVyZUNvbW1hbmQpO1xuXG4gIGNvbnNvbGUubG9nKCdWU0NvZGUgTG9naWMgQW5hbHl6ZXLmj5Lku7bmv4DmtLvlrozmiJAnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGUoKSB7XG4gIGNvbnNvbGUubG9nKCdWU0NvZGUgTG9naWMgQW5hbHl6ZXLmj5Lku7bmraPlnKjlgZznlKguLi4nKTtcblxuICAvLyDmuIXnkIbnoazku7bpqbHliqjnrqHnkIblmahcbiAgaGFyZHdhcmVEcml2ZXJNYW5hZ2VyLmRpc3Bvc2UoKS5jYXRjaChlcnJvciA9PiB7XG4gICAgY29uc29sZS5lcnJvcign5riF55CG56Gs5Lu26amx5Yqo566h55CG5Zmo5aSx6LSlOicsIGVycm9yKTtcbiAgfSk7XG59XG5cbi8vIOi/nuaOpeWIsOaMh+WumuiuvuWkh+eahOi+heWKqeWHveaVsFxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGV2aWNlKGRldmljZUlkOiBzdHJpbmcsIHBhcmFtcz86IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIHZzY29kZS53aW5kb3cuc2hvd0luZm9ybWF0aW9uTWVzc2FnZShg5q2j5Zyo6L+e5o6l6K6+5aSHOiAke2RldmljZUlkfWApO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFyZHdhcmVEcml2ZXJNYW5hZ2VyLmNvbm5lY3RUb0RldmljZShkZXZpY2VJZCwgcGFyYW1zKTtcblxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgdnNjb2RlLndpbmRvdy5zaG93SW5mb3JtYXRpb25NZXNzYWdlKGDorr7lpIfov57mjqXmiJDlip86ICR7cmVzdWx0LmRldmljZUluZm8/Lm5hbWUgfHwgZGV2aWNlSWR9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZzY29kZS53aW5kb3cuc2hvd0Vycm9yTWVzc2FnZShg6K6+5aSH6L+e5o6l5aSx6LSlOiAke3Jlc3VsdC5lcnJvcn1gKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdnNjb2RlLndpbmRvdy5zaG93RXJyb3JNZXNzYWdlKGDorr7lpIfov57mjqXlvILluLg6ICR7ZXJyb3J9YCk7XG4gIH1cbn1cblxuLy8g6Kej5p6Q572R57uc5Zyw5Z2A55qE6L6F5Yqp5Ye95pWwXG5mdW5jdGlvbiBwYXJzZU5ldHdvcmtBZGRyZXNzKGFkZHJlc3M6IHN0cmluZyk6IHsgaG9zdDogc3RyaW5nOyBwb3J0OiBudW1iZXIgfSB7XG4gIGNvbnN0IHBhcnRzID0gYWRkcmVzcy5zcGxpdCgnOicpO1xuICBpZiAocGFydHMubGVuZ3RoICE9PSAyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCfnvZHnu5zlnLDlnYDmoLzlvI/ml6DmlYjvvIzlupTkuLogaG9zdDpwb3J0Jyk7XG4gIH1cblxuICBjb25zdCBob3N0ID0gcGFydHNbMF0udHJpbSgpO1xuICBjb25zdCBwb3J0ID0gcGFyc2VJbnQocGFydHNbMV0udHJpbSgpLCAxMCk7XG5cbiAgaWYgKCFob3N0IHx8IGlzTmFOKHBvcnQpIHx8IHBvcnQgPCAxIHx8IHBvcnQgPiA2NTUzNSkge1xuICAgIHRocm93IG5ldyBFcnJvcign572R57uc5Zyw5Z2A5qC85byP5peg5pWIJyk7XG4gIH1cblxuICByZXR1cm4geyBob3N0LCBwb3J0IH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/extension.ts\n\n}");

/***/ }),

/***/ "./src/models/AnalyzerTypes.ts":
/*!*************************************!*\
  !*** ./src/models/AnalyzerTypes.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("{\n/**\n * 逻辑分析器类型定义\n * 基于C# SharedDriver模块的TypeScript移植\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TriggerDelays = exports.TriggerType = exports.CaptureError = exports.CaptureMode = exports.AnalyzerDriverType = void 0;\n// 枚举类型定义\nvar AnalyzerDriverType;\n(function (AnalyzerDriverType) {\n    AnalyzerDriverType[\"Serial\"] = \"Serial\";\n    AnalyzerDriverType[\"Network\"] = \"Network\";\n    AnalyzerDriverType[\"Multi\"] = \"Multi\";\n    AnalyzerDriverType[\"Emulated\"] = \"Emulated\";\n})(AnalyzerDriverType = exports.AnalyzerDriverType || (exports.AnalyzerDriverType = {}));\nvar CaptureMode;\n(function (CaptureMode) {\n    CaptureMode[CaptureMode[\"Channels_8\"] = 0] = \"Channels_8\";\n    CaptureMode[CaptureMode[\"Channels_16\"] = 1] = \"Channels_16\";\n    CaptureMode[CaptureMode[\"Channels_24\"] = 2] = \"Channels_24\";\n})(CaptureMode = exports.CaptureMode || (exports.CaptureMode = {}));\nvar CaptureError;\n(function (CaptureError) {\n    CaptureError[\"None\"] = \"None\";\n    CaptureError[\"Busy\"] = \"Busy\";\n    CaptureError[\"BadParams\"] = \"BadParams\";\n    CaptureError[\"HardwareError\"] = \"HardwareError\";\n    CaptureError[\"UnexpectedError\"] = \"UnexpectedError\";\n})(CaptureError = exports.CaptureError || (exports.CaptureError = {}));\nvar TriggerType;\n(function (TriggerType) {\n    TriggerType[TriggerType[\"Edge\"] = 0] = \"Edge\";\n    TriggerType[TriggerType[\"Complex\"] = 1] = \"Complex\";\n    TriggerType[TriggerType[\"Fast\"] = 2] = \"Fast\";\n    TriggerType[TriggerType[\"Blast\"] = 3] = \"Blast\";\n})(TriggerType = exports.TriggerType || (exports.TriggerType = {}));\n// 常量定义\nexports.TriggerDelays = {\n    ComplexTriggerDelay: 5,\n    FastTriggerDelay: 3 // 快速触发延迟 (纳秒)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kZWxzL0FuYWx5emVyVHlwZXMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7O0FBRUgsU0FBUztBQUNULElBQVksa0JBS1g7QUFMRCxXQUFZLGtCQUFrQjtJQUM1Qix1Q0FBaUI7SUFDakIseUNBQW1CO0lBQ25CLHFDQUFlO0lBQ2YsMkNBQXFCO0FBQ3ZCLENBQUMsRUFMVyxrQkFBa0IsR0FBbEIsMEJBQWtCLEtBQWxCLDBCQUFrQixRQUs3QjtBQUVELElBQVksV0FJWDtBQUpELFdBQVksV0FBVztJQUNyQix5REFBYztJQUNkLDJEQUFlO0lBQ2YsMkRBQWU7QUFDakIsQ0FBQyxFQUpXLFdBQVcsR0FBWCxtQkFBVyxLQUFYLG1CQUFXLFFBSXRCO0FBRUQsSUFBWSxZQU1YO0FBTkQsV0FBWSxZQUFZO0lBQ3RCLDZCQUFhO0lBQ2IsNkJBQWE7SUFDYix1Q0FBdUI7SUFDdkIsK0NBQStCO0lBQy9CLG1EQUFtQztBQUNyQyxDQUFDLEVBTlcsWUFBWSxHQUFaLG9CQUFZLEtBQVosb0JBQVksUUFNdkI7QUFFRCxJQUFZLFdBS1g7QUFMRCxXQUFZLFdBQVc7SUFDckIsNkNBQVE7SUFDUixtREFBVztJQUNYLDZDQUFRO0lBQ1IsK0NBQVM7QUFDWCxDQUFDLEVBTFcsV0FBVyxHQUFYLG1CQUFXLEtBQVgsbUJBQVcsUUFLdEI7QUF5TUQsT0FBTztBQUNNLHFCQUFhLEdBQUc7SUFDM0IsbUJBQW1CLEVBQUUsQ0FBQztJQUN0QixnQkFBZ0IsRUFBRSxDQUFDLENBQUMsY0FBYztDQUMxQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnNjb2RlLWxvZ2ljLWFuYWx5emVyLy4vc3JjL21vZGVscy9BbmFseXplclR5cGVzLnRzPzA3OWIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDpgLvovpHliIbmnpDlmajnsbvlnovlrprkuYlcbiAqIOWfuuS6jkMjIFNoYXJlZERyaXZlcuaooeWdl+eahFR5cGVTY3JpcHTnp7vmpI1cbiAqL1xuXG4vLyDmnprkuL7nsbvlnovlrprkuYlcbmV4cG9ydCBlbnVtIEFuYWx5emVyRHJpdmVyVHlwZSB7XG4gIFNlcmlhbCA9ICdTZXJpYWwnLFxuICBOZXR3b3JrID0gJ05ldHdvcmsnLFxuICBNdWx0aSA9ICdNdWx0aScsXG4gIEVtdWxhdGVkID0gJ0VtdWxhdGVkJ1xufVxuXG5leHBvcnQgZW51bSBDYXB0dXJlTW9kZSB7XG4gIENoYW5uZWxzXzggPSAwLFxuICBDaGFubmVsc18xNiA9IDEsXG4gIENoYW5uZWxzXzI0ID0gMlxufVxuXG5leHBvcnQgZW51bSBDYXB0dXJlRXJyb3Ige1xuICBOb25lID0gJ05vbmUnLFxuICBCdXN5ID0gJ0J1c3knLFxuICBCYWRQYXJhbXMgPSAnQmFkUGFyYW1zJyxcbiAgSGFyZHdhcmVFcnJvciA9ICdIYXJkd2FyZUVycm9yJyxcbiAgVW5leHBlY3RlZEVycm9yID0gJ1VuZXhwZWN0ZWRFcnJvcidcbn1cblxuZXhwb3J0IGVudW0gVHJpZ2dlclR5cGUge1xuICBFZGdlID0gMCxcbiAgQ29tcGxleCA9IDEsXG4gIEZhc3QgPSAyLFxuICBCbGFzdCA9IDNcbn1cblxuLy8g5pWw5o2u57uT5p6E5a6a5LmJXG5leHBvcnQgaW50ZXJmYWNlIENhcHR1cmVMaW1pdHMge1xuICBtaW5QcmVTYW1wbGVzOiBudW1iZXI7XG4gIG1heFByZVNhbXBsZXM6IG51bWJlcjtcbiAgbWluUG9zdFNhbXBsZXM6IG51bWJlcjtcbiAgbWF4UG9zdFNhbXBsZXM6IG51bWJlcjtcblxuICAvLyDorqHnrpflsZ7mgKdcbiAgcmVhZG9ubHkgbWF4VG90YWxTYW1wbGVzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5hbHl6ZXJEZXZpY2VJbmZvIHtcbiAgbmFtZTogc3RyaW5nO1xuICBtYXhGcmVxdWVuY3k6IG51bWJlcjtcbiAgYmxhc3RGcmVxdWVuY3k6IG51bWJlcjtcbiAgY2hhbm5lbHM6IG51bWJlcjtcbiAgYnVmZmVyU2l6ZTogbnVtYmVyO1xuICBtb2RlTGltaXRzOiBDYXB0dXJlTGltaXRzW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGV2aWNlSW5mbyB7XG4gIG5hbWU6IHN0cmluZztcbiAgdmVyc2lvbj86IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgdHlwZTogQW5hbHl6ZXJEcml2ZXJUeXBlO1xuICBjb25uZWN0aW9uUGF0aD86IHN0cmluZztcbiAgaXNOZXR3b3JrOiBib29sZWFuO1xuICBjYXBhYmlsaXRpZXM6IEhhcmR3YXJlQ2FwYWJpbGl0aWVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhhcmR3YXJlQ2FwYWJpbGl0aWVzIHtcbiAgLy8g6YCa6YGT6KeE5qC8XG4gIGNoYW5uZWxzOiB7XG4gICAgZGlnaXRhbDogbnVtYmVyO1xuICAgIGFuYWxvZz86IG51bWJlcjtcbiAgICBtaXhlZD86IGJvb2xlYW47XG4gICAgbWF4Vm9sdGFnZTogbnVtYmVyO1xuICAgIGlucHV0SW1wZWRhbmNlOiBudW1iZXI7XG4gIH07XG5cbiAgLy8g6YeH5qC36IO95YqbXG4gIHNhbXBsaW5nOiB7XG4gICAgbWF4UmF0ZTogbnVtYmVyO1xuICAgIG1pblJhdGU6IG51bWJlcjtcbiAgICBzdXBwb3J0ZWRSYXRlczogbnVtYmVyW107XG4gICAgYnVmZmVyU2l6ZTogbnVtYmVyO1xuICAgIHN0cmVhbWluZ1N1cHBvcnQ6IGJvb2xlYW47XG4gIH07XG5cbiAgLy8g6Kem5Y+R6IO95YqbXG4gIHRyaWdnZXJzOiB7XG4gICAgdHlwZXM6IFRyaWdnZXJUeXBlW107XG4gICAgbWF4Q2hhbm5lbHM6IG51bWJlcjtcbiAgICBwYXR0ZXJuV2lkdGg6IG51bWJlcjtcbiAgICBzZXF1ZW50aWFsU3VwcG9ydDogYm9vbGVhbjtcbiAgICBjb25kaXRpb25zOiBUcmlnZ2VyQ29uZGl0aW9uW107XG4gIH07XG5cbiAgLy8g6L+e5o6l5pa55byPXG4gIGNvbm5lY3Rpdml0eToge1xuICAgIGludGVyZmFjZXM6ICgndXNiJyB8ICdldGhlcm5ldCcgfCAnc2VyaWFsJyB8ICdibHVldG9vdGgnKVtdO1xuICAgIHByb3RvY29sczogKCdjdXN0b20nIHwgJ3NjcGknIHwgJ3NpZ3JvaycgfCAnc2FsZWFlJylbXTtcbiAgICBuZXR3b3JrQ29uZmlnPzogTmV0d29ya0NhcGFiaWxpdHk7XG4gIH07XG5cbiAgLy8g54m55q6K5Yqf6IO9XG4gIGZlYXR1cmVzOiB7XG4gICAgc2lnbmFsR2VuZXJhdGlvbj86IGJvb2xlYW47XG4gICAgcG93ZXJTdXBwbHk/OiBib29sZWFuO1xuICAgIGkyY1NuaWZmZXI/OiBib29sZWFuO1xuICAgIGNhblN1cHBvcnQ/OiBib29sZWFuO1xuICAgIGN1c3RvbURlY29kZXJzPzogYm9vbGVhbjtcbiAgICB2b2x0YWdlTW9uaXRvcmluZz86IGJvb2xlYW47XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTmV0d29ya0NhcGFiaWxpdHkge1xuICBzdXBwb3J0c1dpRmk6IGJvb2xlYW47XG4gIHN1cHBvcnRzRXRoZXJuZXQ6IGJvb2xlYW47XG4gIG1heENvbm5lY3Rpb25zOiBudW1iZXI7XG4gIGRlZmF1bHRQb3J0OiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIFRyaWdnZXJDb25kaXRpb24gPSAncmlzaW5nJyB8ICdmYWxsaW5nJyB8ICdoaWdoJyB8ICdsb3cnIHwgJ2FueScgfCAnbm9uZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdGlvblBhcmFtcyB7XG4gIGRldmljZVBhdGg/OiBzdHJpbmc7XG4gIG5ldHdvcmtDb25maWc/OiB7XG4gICAgaG9zdDogc3RyaW5nO1xuICAgIHBvcnQ6IG51bWJlcjtcbiAgICB0aW1lb3V0PzogbnVtYmVyO1xuICB9O1xuICBzZXJpYWxDb25maWc/OiB7XG4gICAgYmF1ZFJhdGU6IG51bWJlcjtcbiAgICBkYXRhQml0czogbnVtYmVyO1xuICAgIHN0b3BCaXRzOiBudW1iZXI7XG4gICAgcGFyaXR5OiBzdHJpbmc7XG4gIH07XG4gIGF1dG9EZXRlY3Q/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3Rpb25SZXN1bHQge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBlcnJvcj86IHN0cmluZztcbiAgZGV2aWNlSW5mbz86IERldmljZUluZm87XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FwdHVyZUNvbmZpZ3VyYXRpb24ge1xuICBmcmVxdWVuY3k6IG51bWJlcjtcbiAgcHJlVHJpZ2dlclNhbXBsZXM6IG51bWJlcjtcbiAgcG9zdFRyaWdnZXJTYW1wbGVzOiBudW1iZXI7XG4gIHRyaWdnZXJUeXBlOiBUcmlnZ2VyVHlwZTtcbiAgdHJpZ2dlckNoYW5uZWw6IG51bWJlcjtcbiAgdHJpZ2dlckludmVydGVkOiBib29sZWFuO1xuICB0cmlnZ2VyUGF0dGVybj86IG51bWJlcjtcbiAgdHJpZ2dlckJpdENvdW50PzogbnVtYmVyO1xuICBsb29wQ291bnQ6IG51bWJlcjtcbiAgbWVhc3VyZUJ1cnN0czogYm9vbGVhbjtcbiAgY2FwdHVyZUNoYW5uZWxzOiBudW1iZXJbXTtcbiAgY2FwdHVyZU1vZGU/OiBDYXB0dXJlTW9kZSB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXB0dXJlUmVzdWx0IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZXJyb3I/OiBDYXB0dXJlRXJyb3I7XG4gIHNlc3Npb24/OiBDYXB0dXJlU2Vzc2lvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXB0dXJlU2Vzc2lvbiB7XG4gIC8vIOWfuuehgOmHh+mbhuWPguaVsFxuICBmcmVxdWVuY3k6IG51bWJlcjtcbiAgcHJlVHJpZ2dlclNhbXBsZXM6IG51bWJlcjtcbiAgcG9zdFRyaWdnZXJTYW1wbGVzOiBudW1iZXI7XG5cbiAgLy8g6K6h566X5bGe5oCnXG4gIGdldCB0b3RhbFNhbXBsZXMoKTogbnVtYmVyO1xuXG4gIC8vIOinpuWPkeezu+e7n+mFjee9rlxuICB0cmlnZ2VyVHlwZTogVHJpZ2dlclR5cGU7XG4gIHRyaWdnZXJDaGFubmVsOiBudW1iZXI7XG4gIHRyaWdnZXJJbnZlcnRlZDogYm9vbGVhbjtcbiAgdHJpZ2dlclBhdHRlcm4/OiBudW1iZXI7XG4gIHRyaWdnZXJCaXRDb3VudD86IG51bWJlcjtcblxuICAvLyDnqoHlj5Hph4fpm4bns7vnu59cbiAgbG9vcENvdW50OiBudW1iZXI7XG4gIG1lYXN1cmVCdXJzdHM6IGJvb2xlYW47XG5cbiAgLy8g6YCa6YGT6YWN572uXG4gIGNhcHR1cmVDaGFubmVsczogQW5hbHl6ZXJDaGFubmVsW107XG4gIGNhcHR1cmVNb2RlPzogQ2FwdHVyZU1vZGU7XG5cbiAgLy8g56qB5Y+R5L+h5oGv5pWw57uEXG4gIGJ1cnN0cz86IEJ1cnN0SW5mb1tdO1xuXG4gIC8vIOaWueazleaOpeWPo1xuICBjbG9uZSgpOiBDYXB0dXJlU2Vzc2lvbjtcbiAgY2xvbmVTZXR0aW5ncygpOiBDYXB0dXJlU2Vzc2lvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbmFseXplckNoYW5uZWwge1xuICBjaGFubmVsTnVtYmVyOiBudW1iZXI7XG4gIGNoYW5uZWxOYW1lOiBzdHJpbmc7XG4gIGNoYW5uZWxDb2xvcj86IHN0cmluZztcbiAgaGlkZGVuOiBib29sZWFuO1xuICBzYW1wbGVzPzogVWludDhBcnJheTtcblxuICAvLyDmmL7npLrlsZ7mgKdcbiAgZ2V0IHRleHR1YWxDaGFubmVsTnVtYmVyKCk6IHN0cmluZztcblxuICAvLyDlhYvpmobmlrnms5VcbiAgY2xvbmUoKTogQW5hbHl6ZXJDaGFubmVsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJ1cnN0SW5mbyB7XG4gIGJ1cnN0U2FtcGxlU3RhcnQ6IG51bWJlcjtcbiAgYnVyc3RTYW1wbGVFbmQ6IG51bWJlcjtcbiAgYnVyc3RTYW1wbGVHYXA6IG51bWJlcjtcbiAgYnVyc3RUaW1lR2FwOiBudW1iZXI7IC8vIOe6s+enklxuXG4gIC8vIOaXtumXtOagvOW8j+WMluaWueazlVxuICBnZXRUaW1lKCk6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXZpY2VTdGF0dXMge1xuICBpc0Nvbm5lY3RlZDogYm9vbGVhbjtcbiAgaXNDYXB0dXJpbmc6IGJvb2xlYW47XG4gIGJhdHRlcnlWb2x0YWdlPzogc3RyaW5nO1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcbiAgZXJyb3JTdGF0dXM/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FwdHVyZUV2ZW50QXJncyB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIHNlc3Npb246IENhcHR1cmVTZXNzaW9uO1xufVxuXG4vLyDkuovku7bnsbvlnovlrprkuYlcbmV4cG9ydCB0eXBlIENhcHR1cmVDb21wbGV0ZWRIYW5kbGVyID0gKGFyZ3M6IENhcHR1cmVFdmVudEFyZ3MpID0+IHZvaWQ7XG5cbi8vIOW4uOmHj+WumuS5iVxuZXhwb3J0IGNvbnN0IFRyaWdnZXJEZWxheXMgPSB7XG4gIENvbXBsZXhUcmlnZ2VyRGVsYXk6IDUsIC8vIOWkjeadguinpuWPkeW7tui/nyAo57qz56eSKVxuICBGYXN0VHJpZ2dlckRlbGF5OiAzIC8vIOW/q+mAn+inpuWPkeW7tui/nyAo57qz56eSKVxufSBhcyBjb25zdDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/models/AnalyzerTypes.ts\n\n}");

/***/ }),

/***/ "./src/providers/LACEditorProvider.ts":
/*!********************************************!*\
  !*** ./src/providers/LACEditorProvider.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.LACEditorProvider = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst vscode = tslib_1.__importStar(__webpack_require__(/*! vscode */ \"vscode\"));\nconst path = tslib_1.__importStar(__webpack_require__(/*! path */ \"path\"));\n/**\n * .lac文件的自定义编辑器提供者\n * 基于VSCode Custom Editor API实现，支持.lac文件的可视化编辑\n */\nclass LACEditorProvider {\n    static register(context) {\n        const provider = new LACEditorProvider(context);\n        const providerRegistration = vscode.window.registerCustomEditorProvider(LACEditorProvider.viewType, provider);\n        return providerRegistration;\n    }\n    constructor(context) {\n        this.context = context;\n    }\n    /**\n     * 解析自定义文本编辑器\n     */\n    async resolveCustomTextEditor(document, webviewPanel, _token) {\n        // 设置webview选项\n        webviewPanel.webview.options = {\n            enableScripts: true,\n            localResourceRoots: [vscode.Uri.joinPath(this.context.extensionUri, 'out', 'webview')]\n        };\n        // 设置webview的HTML内容\n        webviewPanel.webview.html = this.getHtmlForWebview(webviewPanel.webview, document);\n        // 处理来自webview的消息\n        webviewPanel.webview.onDidReceiveMessage(async (message) => {\n            switch (message.type) {\n                case 'ready':\n                    // webview准备就绪，发送初始数据\n                    await this.sendDocumentToWebview(webviewPanel.webview, document);\n                    break;\n                case 'save':\n                    // 保存.lac文件\n                    await this.saveLACFile(document, message.data);\n                    break;\n                case 'export':\n                    // 导出数据\n                    await this.exportData(message.data);\n                    break;\n                case 'startCapture':\n                    // 开始数据采集\n                    vscode.commands.executeCommand('logicAnalyzer.startCapture');\n                    break;\n                case 'connectDevice':\n                    // 连接设备\n                    vscode.commands.executeCommand('logicAnalyzer.connectDevice');\n                    break;\n                case 'testMessage':\n                    // 测试通信\n                    console.log('收到来自webview的测试消息:', message.data);\n                    vscode.window.showInformationMessage(`通信测试成功！收到消息: ${message.data.message}`);\n                    // 向webview发送回复\n                    webviewPanel.webview.postMessage({\n                        type: 'testResponse',\n                        data: {\n                            timestamp: new Date().toISOString(),\n                            message: '来自VSCode扩展的回复消息',\n                            receivedAt: message.data.timestamp\n                        }\n                    });\n                    break;\n                default:\n                    console.warn('未知的webview消息类型:', message.type);\n            }\n        });\n        // 监听文档变化\n        const changeDocumentSubscription = vscode.workspace.onDidChangeTextDocument(e => {\n            if (e.document.uri.toString() === document.uri.toString()) {\n                this.sendDocumentToWebview(webviewPanel.webview, document);\n            }\n        });\n        webviewPanel.onDidDispose(() => {\n            changeDocumentSubscription.dispose();\n        });\n    }\n    /**\n     * 获取webview的HTML内容\n     */\n    getHtmlForWebview(webview, document) {\n        // 获取webview资源的URI\n        const webviewUri = webview.asWebviewUri(vscode.Uri.joinPath(this.context.extensionUri, 'out', 'webview', 'main.js'));\n        const styleUri = webview.asWebviewUri(vscode.Uri.joinPath(this.context.extensionUri, 'out', 'webview', 'style.css'));\n        // 生成随机nonce用于CSP\n        const nonce = getNonce();\n        return `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; style-src ${webview.cspSource} 'unsafe-inline'; script-src 'nonce-${nonce}';\">\n    <title>Logic Analyzer - ${path.basename(document.uri.fsPath)}</title>\n    <link href=\"${styleUri}\" rel=\"stylesheet\">\n</head>\n<body>\n    <div id=\"app\">\n        <!-- Vue应用挂载点 -->\n        <div class=\"loading\">\n            <div class=\"spinner\"></div>\n            <p>正在加载逻辑分析器界面...</p>\n        </div>\n    </div>\n    \n    <script nonce=\"${nonce}\">\n        // 传递VSCode API给Vue应用\n        window.vscode = acquireVsCodeApi();\n        window.documentData = {\n            uri: '${document.uri.toString()}',\n            fileName: '${path.basename(document.uri.fsPath)}',\n            content: ${JSON.stringify(document.getText())}\n        };\n    </script>\n    <script nonce=\"${nonce}\" src=\"${webviewUri}\"></script>\n</body>\n</html>`;\n    }\n    /**\n     * 发送文档内容到webview\n     */\n    async sendDocumentToWebview(webview, document) {\n        try {\n            const lacData = this.parseLACFile(document.getText());\n            webview.postMessage({\n                type: 'documentUpdate',\n                data: lacData\n            });\n        }\n        catch (error) {\n            console.error('解析.lac文件失败:', error);\n            webview.postMessage({\n                type: 'error',\n                message: `解析文件失败: ${error}`\n            });\n        }\n    }\n    /**\n     * 解析.lac文件内容\n     */\n    parseLACFile(content) {\n        try {\n            // .lac文件是JSON格式\n            return JSON.parse(content);\n        }\n        catch (error) {\n            throw new Error('无效的.lac文件格式');\n        }\n    }\n    /**\n     * 保存.lac文件\n     */\n    async saveLACFile(document, data) {\n        try {\n            const edit = new vscode.WorkspaceEdit();\n            const lacContent = JSON.stringify(data, null, 2);\n            edit.replace(document.uri, new vscode.Range(0, 0, document.lineCount, 0), lacContent);\n            await vscode.workspace.applyEdit(edit);\n            vscode.window.showInformationMessage('文件保存成功');\n        }\n        catch (error) {\n            vscode.window.showErrorMessage(`保存文件失败: ${error}`);\n        }\n    }\n    /**\n     * 导出数据\n     */\n    async exportData(_data) {\n        try {\n            const options = {\n                defaultUri: vscode.Uri.file('capture_export.csv'),\n                filters: {\n                    CSV文件: ['csv'],\n                    JSON文件: ['json'],\n                    所有文件: ['*']\n                }\n            };\n            const fileUri = await vscode.window.showSaveDialog(options);\n            if (fileUri) {\n                // TODO: 实现实际的数据导出逻辑\n                vscode.window.showInformationMessage(`数据已导出到: ${fileUri.fsPath}`);\n            }\n        }\n        catch (error) {\n            vscode.window.showErrorMessage(`导出数据失败: ${error}`);\n        }\n    }\n}\nexports.LACEditorProvider = LACEditorProvider;\nLACEditorProvider.viewType = 'logicAnalyzer.lacEditor';\n/**\n * 生成随机nonce用于内容安全策略\n */\nfunction getNonce() {\n    let text = '';\n    const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    for (let i = 0; i < 32; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxFQUFFLENBQUMsQ0FBQzthQUNuRTtTQUNGO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxNQUFNLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsS0FBSyxFQUFFLENBQUMsQ0FBQztTQUNwRDtJQUNILENBQUM7O0FBdE5ILDhDQXVOQztBQTdNeUIsMEJBQVEsR0FBRyx5QkFBeUIsQ0FBQztBQStNL0Q7O0dBRUc7QUFDSCxTQUFTLFFBQVE7SUFDZixJQUFJLElBQUksR0FBRyxFQUFFLENBQUM7SUFDZCxNQUFNLFFBQVEsR0FBRyxnRUFBZ0UsQ0FBQztJQUNsRixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzNCLElBQUksSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0tBQ3RFO0lBQ0QsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnNjb2RlLWxvZ2ljLWFuYWx5emVyLy4vc3JjL3Byb3ZpZGVycy9MQUNFZGl0b3JQcm92aWRlci50cz8xMDJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHZzY29kZSBmcm9tICd2c2NvZGUnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuLyoqXG4gKiAubGFj5paH5Lu255qE6Ieq5a6a5LmJ57yW6L6R5Zmo5o+Q5L6b6ICFXG4gKiDln7rkuo5WU0NvZGUgQ3VzdG9tIEVkaXRvciBBUEnlrp7njrDvvIzmlK/mjIEubGFj5paH5Lu255qE5Y+v6KeG5YyW57yW6L6RXG4gKi9cbmV4cG9ydCBjbGFzcyBMQUNFZGl0b3JQcm92aWRlciBpbXBsZW1lbnRzIHZzY29kZS5DdXN0b21UZXh0RWRpdG9yUHJvdmlkZXIge1xuICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyKGNvbnRleHQ6IHZzY29kZS5FeHRlbnNpb25Db250ZXh0KTogdnNjb2RlLkRpc3Bvc2FibGUge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IExBQ0VkaXRvclByb3ZpZGVyKGNvbnRleHQpO1xuICAgIGNvbnN0IHByb3ZpZGVyUmVnaXN0cmF0aW9uID0gdnNjb2RlLndpbmRvdy5yZWdpc3RlckN1c3RvbUVkaXRvclByb3ZpZGVyKFxuICAgICAgTEFDRWRpdG9yUHJvdmlkZXIudmlld1R5cGUsXG4gICAgICBwcm92aWRlclxuICAgICk7XG4gICAgcmV0dXJuIHByb3ZpZGVyUmVnaXN0cmF0aW9uO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgdmlld1R5cGUgPSAnbG9naWNBbmFseXplci5sYWNFZGl0b3InO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgY29udGV4dDogdnNjb2RlLkV4dGVuc2lvbkNvbnRleHQpIHt9XG5cbiAgLyoqXG4gICAqIOino+aekOiHquWumuS5ieaWh+acrOe8lui+keWZqFxuICAgKi9cbiAgcHVibGljIGFzeW5jIHJlc29sdmVDdXN0b21UZXh0RWRpdG9yKFxuICAgIGRvY3VtZW50OiB2c2NvZGUuVGV4dERvY3VtZW50LFxuICAgIHdlYnZpZXdQYW5lbDogdnNjb2RlLldlYnZpZXdQYW5lbCxcbiAgICBfdG9rZW46IHZzY29kZS5DYW5jZWxsYXRpb25Ub2tlblxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyDorr7nva53ZWJ2aWV36YCJ6aG5XG4gICAgd2Vidmlld1BhbmVsLndlYnZpZXcub3B0aW9ucyA9IHtcbiAgICAgIGVuYWJsZVNjcmlwdHM6IHRydWUsXG4gICAgICBsb2NhbFJlc291cmNlUm9vdHM6IFt2c2NvZGUuVXJpLmpvaW5QYXRoKHRoaXMuY29udGV4dC5leHRlbnNpb25VcmksICdvdXQnLCAnd2VidmlldycpXVxuICAgIH07XG5cbiAgICAvLyDorr7nva53ZWJ2aWV355qESFRNTOWGheWuuVxuICAgIHdlYnZpZXdQYW5lbC53ZWJ2aWV3Lmh0bWwgPSB0aGlzLmdldEh0bWxGb3JXZWJ2aWV3KHdlYnZpZXdQYW5lbC53ZWJ2aWV3LCBkb2N1bWVudCk7XG5cbiAgICAvLyDlpITnkIbmnaXoh6p3ZWJ2aWV355qE5raI5oGvXG4gICAgd2Vidmlld1BhbmVsLndlYnZpZXcub25EaWRSZWNlaXZlTWVzc2FnZShhc3luYyBtZXNzYWdlID0+IHtcbiAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3JlYWR5JzpcbiAgICAgICAgICAvLyB3ZWJ2aWV35YeG5aSH5bCx57uq77yM5Y+R6YCB5Yid5aeL5pWw5o2uXG4gICAgICAgICAgYXdhaXQgdGhpcy5zZW5kRG9jdW1lbnRUb1dlYnZpZXcod2Vidmlld1BhbmVsLndlYnZpZXcsIGRvY3VtZW50KTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAvLyDkv53lrZgubGFj5paH5Lu2XG4gICAgICAgICAgYXdhaXQgdGhpcy5zYXZlTEFDRmlsZShkb2N1bWVudCwgbWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdleHBvcnQnOlxuICAgICAgICAgIC8vIOWvvOWHuuaVsOaNrlxuICAgICAgICAgIGF3YWl0IHRoaXMuZXhwb3J0RGF0YShtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3N0YXJ0Q2FwdHVyZSc6XG4gICAgICAgICAgLy8g5byA5aeL5pWw5o2u6YeH6ZuGXG4gICAgICAgICAgdnNjb2RlLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kKCdsb2dpY0FuYWx5emVyLnN0YXJ0Q2FwdHVyZScpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2Nvbm5lY3REZXZpY2UnOlxuICAgICAgICAgIC8vIOi/nuaOpeiuvuWkh1xuICAgICAgICAgIHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCgnbG9naWNBbmFseXplci5jb25uZWN0RGV2aWNlJyk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAndGVzdE1lc3NhZ2UnOlxuICAgICAgICAgIC8vIOa1i+ivlemAmuS/oVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfmlLbliLDmnaXoh6p3ZWJ2aWV355qE5rWL6K+V5raI5oGvOicsIG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgdnNjb2RlLndpbmRvdy5zaG93SW5mb3JtYXRpb25NZXNzYWdlKGDpgJrkv6HmtYvor5XmiJDlip/vvIHmlLbliLDmtojmga86ICR7bWVzc2FnZS5kYXRhLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgLy8g5ZCRd2Vidmlld+WPkemAgeWbnuWkjVxuICAgICAgICAgIHdlYnZpZXdQYW5lbC53ZWJ2aWV3LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXN0UmVzcG9uc2UnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ+adpeiHqlZTQ29kZeaJqeWxleeahOWbnuWkjea2iOaBrycsXG4gICAgICAgICAgICAgIHJlY2VpdmVkQXQ6IG1lc3NhZ2UuZGF0YS50aW1lc3RhbXBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnNvbGUud2Fybign5pyq55+l55qEd2Vidmlld+a2iOaBr+exu+WeizonLCBtZXNzYWdlLnR5cGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g55uR5ZCs5paH5qGj5Y+Y5YyWXG4gICAgY29uc3QgY2hhbmdlRG9jdW1lbnRTdWJzY3JpcHRpb24gPSB2c2NvZGUud29ya3NwYWNlLm9uRGlkQ2hhbmdlVGV4dERvY3VtZW50KGUgPT4ge1xuICAgICAgaWYgKGUuZG9jdW1lbnQudXJpLnRvU3RyaW5nKCkgPT09IGRvY3VtZW50LnVyaS50b1N0cmluZygpKSB7XG4gICAgICAgIHRoaXMuc2VuZERvY3VtZW50VG9XZWJ2aWV3KHdlYnZpZXdQYW5lbC53ZWJ2aWV3LCBkb2N1bWVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB3ZWJ2aWV3UGFuZWwub25EaWREaXNwb3NlKCgpID0+IHtcbiAgICAgIGNoYW5nZURvY3VtZW50U3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5Z3ZWJ2aWV355qESFRNTOWGheWuuVxuICAgKi9cbiAgcHJpdmF0ZSBnZXRIdG1sRm9yV2Vidmlldyh3ZWJ2aWV3OiB2c2NvZGUuV2VidmlldywgZG9jdW1lbnQ6IHZzY29kZS5UZXh0RG9jdW1lbnQpOiBzdHJpbmcge1xuICAgIC8vIOiOt+WPlndlYnZpZXfotYTmupDnmoRVUklcbiAgICBjb25zdCB3ZWJ2aWV3VXJpID0gd2Vidmlldy5hc1dlYnZpZXdVcmkoXG4gICAgICB2c2NvZGUuVXJpLmpvaW5QYXRoKHRoaXMuY29udGV4dC5leHRlbnNpb25VcmksICdvdXQnLCAnd2VidmlldycsICdtYWluLmpzJylcbiAgICApO1xuXG4gICAgY29uc3Qgc3R5bGVVcmkgPSB3ZWJ2aWV3LmFzV2Vidmlld1VyaShcbiAgICAgIHZzY29kZS5Vcmkuam9pblBhdGgodGhpcy5jb250ZXh0LmV4dGVuc2lvblVyaSwgJ291dCcsICd3ZWJ2aWV3JywgJ3N0eWxlLmNzcycpXG4gICAgKTtcblxuICAgIC8vIOeUn+aIkOmaj+acum5vbmNl55So5LqOQ1NQXG4gICAgY29uc3Qgbm9uY2UgPSBnZXROb25jZSgpO1xuXG4gICAgcmV0dXJuIGA8IURPQ1RZUEUgaHRtbD5cbjxodG1sIGxhbmc9XCJ6aC1DTlwiPlxuPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cbiAgICA8bWV0YSBodHRwLWVxdWl2PVwiQ29udGVudC1TZWN1cml0eS1Qb2xpY3lcIiBjb250ZW50PVwiZGVmYXVsdC1zcmMgJ25vbmUnOyBzdHlsZS1zcmMgJHtcbiAgICAgIHdlYnZpZXcuY3NwU291cmNlXG4gICAgfSAndW5zYWZlLWlubGluZSc7IHNjcmlwdC1zcmMgJ25vbmNlLSR7bm9uY2V9JztcIj5cbiAgICA8dGl0bGU+TG9naWMgQW5hbHl6ZXIgLSAke3BhdGguYmFzZW5hbWUoZG9jdW1lbnQudXJpLmZzUGF0aCl9PC90aXRsZT5cbiAgICA8bGluayBocmVmPVwiJHtzdHlsZVVyaX1cIiByZWw9XCJzdHlsZXNoZWV0XCI+XG48L2hlYWQ+XG48Ym9keT5cbiAgICA8ZGl2IGlkPVwiYXBwXCI+XG4gICAgICAgIDwhLS0gVnVl5bqU55So5oyC6L2954K5IC0tPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibG9hZGluZ1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwaW5uZXJcIj48L2Rpdj5cbiAgICAgICAgICAgIDxwPuato+WcqOWKoOi9vemAu+i+keWIhuaekOWZqOeVjOmdoi4uLjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgXG4gICAgPHNjcmlwdCBub25jZT1cIiR7bm9uY2V9XCI+XG4gICAgICAgIC8vIOS8oOmAklZTQ29kZSBBUEnnu5lWdWXlupTnlKhcbiAgICAgICAgd2luZG93LnZzY29kZSA9IGFjcXVpcmVWc0NvZGVBcGkoKTtcbiAgICAgICAgd2luZG93LmRvY3VtZW50RGF0YSA9IHtcbiAgICAgICAgICAgIHVyaTogJyR7ZG9jdW1lbnQudXJpLnRvU3RyaW5nKCl9JyxcbiAgICAgICAgICAgIGZpbGVOYW1lOiAnJHtwYXRoLmJhc2VuYW1lKGRvY3VtZW50LnVyaS5mc1BhdGgpfScsXG4gICAgICAgICAgICBjb250ZW50OiAke0pTT04uc3RyaW5naWZ5KGRvY3VtZW50LmdldFRleHQoKSl9XG4gICAgICAgIH07XG4gICAgPC9zY3JpcHQ+XG4gICAgPHNjcmlwdCBub25jZT1cIiR7bm9uY2V9XCIgc3JjPVwiJHt3ZWJ2aWV3VXJpfVwiPjwvc2NyaXB0PlxuPC9ib2R5PlxuPC9odG1sPmA7XG4gIH1cblxuICAvKipcbiAgICog5Y+R6YCB5paH5qGj5YaF5a655Yiwd2Vidmlld1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBzZW5kRG9jdW1lbnRUb1dlYnZpZXcoXG4gICAgd2VidmlldzogdnNjb2RlLldlYnZpZXcsXG4gICAgZG9jdW1lbnQ6IHZzY29kZS5UZXh0RG9jdW1lbnRcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxhY0RhdGEgPSB0aGlzLnBhcnNlTEFDRmlsZShkb2N1bWVudC5nZXRUZXh0KCkpO1xuICAgICAgd2Vidmlldy5wb3N0TWVzc2FnZSh7XG4gICAgICAgIHR5cGU6ICdkb2N1bWVudFVwZGF0ZScsXG4gICAgICAgIGRhdGE6IGxhY0RhdGFcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfop6PmnpAubGFj5paH5Lu25aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHdlYnZpZXcucG9zdE1lc3NhZ2Uoe1xuICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiBg6Kej5p6Q5paH5Lu25aSx6LSlOiAke2Vycm9yfWBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmnpAubGFj5paH5Lu25YaF5a65XG4gICAqL1xuICBwcml2YXRlIHBhcnNlTEFDRmlsZShjb250ZW50OiBzdHJpbmcpOiBhbnkge1xuICAgIHRyeSB7XG4gICAgICAvLyAubGFj5paH5Lu25pivSlNPTuagvOW8j1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign5peg5pWI55qELmxhY+aWh+S7tuagvOW8jycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDkv53lrZgubGFj5paH5Lu2XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNhdmVMQUNGaWxlKGRvY3VtZW50OiB2c2NvZGUuVGV4dERvY3VtZW50LCBkYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZWRpdCA9IG5ldyB2c2NvZGUuV29ya3NwYWNlRWRpdCgpO1xuICAgICAgY29uc3QgbGFjQ29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xuXG4gICAgICBlZGl0LnJlcGxhY2UoZG9jdW1lbnQudXJpLCBuZXcgdnNjb2RlLlJhbmdlKDAsIDAsIGRvY3VtZW50LmxpbmVDb3VudCwgMCksIGxhY0NvbnRlbnQpO1xuXG4gICAgICBhd2FpdCB2c2NvZGUud29ya3NwYWNlLmFwcGx5RWRpdChlZGl0KTtcbiAgICAgIHZzY29kZS53aW5kb3cuc2hvd0luZm9ybWF0aW9uTWVzc2FnZSgn5paH5Lu25L+d5a2Y5oiQ5YqfJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHZzY29kZS53aW5kb3cuc2hvd0Vycm9yTWVzc2FnZShg5L+d5a2Y5paH5Lu25aSx6LSlOiAke2Vycm9yfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlr7zlh7rmlbDmja5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhwb3J0RGF0YShfZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9wdGlvbnM6IHZzY29kZS5TYXZlRGlhbG9nT3B0aW9ucyA9IHtcbiAgICAgICAgZGVmYXVsdFVyaTogdnNjb2RlLlVyaS5maWxlKCdjYXB0dXJlX2V4cG9ydC5jc3YnKSxcbiAgICAgICAgZmlsdGVyczoge1xuICAgICAgICAgIENTVuaWh+S7tjogWydjc3YnXSxcbiAgICAgICAgICBKU09O5paH5Lu2OiBbJ2pzb24nXSxcbiAgICAgICAgICDmiYDmnInmlofku7Y6IFsnKiddXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGZpbGVVcmkgPSBhd2FpdCB2c2NvZGUud2luZG93LnNob3dTYXZlRGlhbG9nKG9wdGlvbnMpO1xuICAgICAgaWYgKGZpbGVVcmkpIHtcbiAgICAgICAgLy8gVE9ETzog5a6e546w5a6e6ZmF55qE5pWw5o2u5a+85Ye66YC76L6RXG4gICAgICAgIHZzY29kZS53aW5kb3cuc2hvd0luZm9ybWF0aW9uTWVzc2FnZShg5pWw5o2u5bey5a+85Ye65YiwOiAke2ZpbGVVcmkuZnNQYXRofWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB2c2NvZGUud2luZG93LnNob3dFcnJvck1lc3NhZ2UoYOWvvOWHuuaVsOaNruWksei0pTogJHtlcnJvcn1gKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiDnlJ/miJDpmo/mnLpub25jZeeUqOS6juWGheWuueWuieWFqOetlueVpVxuICovXG5mdW5jdGlvbiBnZXROb25jZSgpOiBzdHJpbmcge1xuICBsZXQgdGV4dCA9ICcnO1xuICBjb25zdCBwb3NzaWJsZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7IGkrKykge1xuICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpO1xuICB9XG4gIHJldHVybiB0ZXh0O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/providers/LACEditorProvider.ts\n\n}");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "dgram":
/*!************************!*\
  !*** external "dgram" ***!
  \************************/
/***/ ((module) => {

module.exports = require("dgram");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "serialport":
/*!*****************************!*\
  !*** external "serialport" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("serialport");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "vscode":
/*!*************************!*\
  !*** external "vscode" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("vscode");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/******/ 	// the startup function
/******/ 	__webpack_require__.x = () => {
/******/ 		// Load entry module and return exports
/******/ 		// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 		var __webpack_exports__ = __webpack_require__.O(undefined, ["vendors"], () => (__webpack_require__("./src/extension.ts")))
/******/ 		__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 		return __webpack_exports__;
/******/ 	};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks and sibling chunks for the entrypoint
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "" + chunkId + ".js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/require chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded chunks
/******/ 		// "1" means "loaded", otherwise not loaded yet
/******/ 		var installedChunks = {
/******/ 			"extension": 1
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.O.require = (chunkId) => (installedChunks[chunkId]);
/******/ 		
/******/ 		var installChunk = (chunk) => {
/******/ 			var moreModules = chunk.modules, chunkIds = chunk.ids, runtime = chunk.runtime;
/******/ 			for(var moduleId in moreModules) {
/******/ 				if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 					__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 				}
/******/ 			}
/******/ 			if(runtime) runtime(__webpack_require__);
/******/ 			for(var i = 0; i < chunkIds.length; i++)
/******/ 				installedChunks[chunkIds[i]] = 1;
/******/ 			__webpack_require__.O();
/******/ 		};
/******/ 		
/******/ 		// require() chunk loading for javascript
/******/ 		__webpack_require__.f.require = (chunkId, promises) => {
/******/ 			// "1" is the signal for "already loaded"
/******/ 			if(!installedChunks[chunkId]) {
/******/ 				if(true) { // all chunks have JS
/******/ 					installChunk(require("./" + __webpack_require__.u(chunkId)));
/******/ 				} else installedChunks[chunkId] = 1;
/******/ 			}
/******/ 		};
/******/ 		
/******/ 		// no external install chunk
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/startup chunk dependencies */
/******/ 	(() => {
/******/ 		var next = __webpack_require__.x;
/******/ 		__webpack_require__.x = () => {
/******/ 			__webpack_require__.e("vendors");
/******/ 			return next();
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// run startup
/******/ 	var __webpack_exports__ = __webpack_require__.x();
/******/ 	module.exports = __webpack_exports__;
/******/ 	
/******/ })()
;